(self.webpackChunkVideoCalling=self.webpackChunkVideoCalling||[]).push([[179],{7977:($,H,w)=>{"use strict";function k(n){return"function"==typeof n}function D(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const I=D(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function v(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class m{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(k(r))try{r()}catch(o){e=o instanceof I?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{f(o)}catch(s){e=e??[],s instanceof I?e=[...e,...s.errors]:e.push(s)}}if(e)throw new I(e)}}add(e){var t;if(e&&e!==this)if(this.closed)f(e);else{if(e instanceof m){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&v(t,e)}remove(e){const{_finalizers:t}=this;t&&v(t,e),e instanceof m&&e._removeParent(this)}}m.EMPTY=(()=>{const n=new m;return n.closed=!0,n})();const d=m.EMPTY;function u(n){return n instanceof m||n&&"closed"in n&&k(n.remove)&&k(n.add)&&k(n.unsubscribe)}function f(n){k(n)?n():n.unsubscribe()}const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_={setTimeout(n,e,...t){const{delegate:r}=_;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=_;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function b(n){_.setTimeout(()=>{const{onUnhandledError:e}=h;if(!e)throw n;e(n)})}function y(){}const M=S("C",void 0,void 0);function S(n,e,t){return{kind:n,value:e,error:t}}let V=null;function F(n){if(h.useDeprecatedSynchronousErrorHandling){const e=!V;if(e&&(V={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=V;if(V=null,t)throw r}}else n()}class N extends m{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,u(e)&&e.add(this)):this.destination=W}static create(e,t,r){return new x(e,t,r)}next(e){this.isStopped?G(function C(n){return S("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?G(function E(n){return S("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?G(M,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const R=Function.prototype.bind;function P(n,e){return R.call(n,e)}class T{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){L(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){L(r)}else L(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){L(t)}}}class x extends N{constructor(e,t,r){let i;if(super(),k(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&h.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&P(e.next,o),error:e.error&&P(e.error,o),complete:e.complete&&P(e.complete,o)}):i=e}this.destination=new T(i)}}function L(n){h.useDeprecatedSynchronousErrorHandling?function j(n){h.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=n)}(n):b(n)}function G(n,e){const{onStoppedNotification:t}=h;t&&_.setTimeout(()=>t(n,e))}const W={closed:!0,next:y,error:function B(n){throw n},complete:y},X="function"==typeof Symbol&&Symbol.observable||"@@observable";function J(n){return n}function Q(n){return 0===n.length?J:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function re(n){return n&&n instanceof N||function ue(n){return n&&k(n.next)&&k(n.error)&&k(n.complete)}(n)&&u(n)}(t)?t:new x(t,r,i);return F(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=fe(r))((i,o)=>{const s=new x({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[X](){return this}pipe(...t){return Q(t)(this)}toPromise(t){return new(t=fe(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function fe(n){var e;return null!==(e=n??h.Promise)&&void 0!==e?e:Promise}const ne=D(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Y=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new z(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ne}next(t){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?d:(this.currentObservers=null,o.push(t),new m(()=>{this.currentObservers=null,v(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new ie;return t.source=this,t}}return n.create=(e,t)=>new z(e,t),n})();class z extends Y{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:d}}function ce(n){return k(n?.lift)}function le(n){return e=>{if(ce(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new ve(n,e,t,r,i)}class ve extends N{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function pe(n,e){return le((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}function tt(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function Ft(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(p){try{l(r.next(p))}catch(g){s(g)}}function c(p){try{l(r.throw(p))}catch(g){s(g)}}function l(p){p.done?o(p.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(p.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Ke(n){return this instanceof Ke?(this.v=n,this):new Ke(n)}function nn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function K(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}const Se=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ae(n){return k(n?.then)}function ut(n){return k(n[X])}function Rt(n){return Symbol.asyncIterator&&k(n?.[Symbol.asyncIterator])}function In(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const jt=function Fn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function rn(n){return k(n?.[jt])}function dt(n){return function zt(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(O){r[O]&&(i[O]=function(U){return new Promise(function(q,ae){o.push([O,U,q,ae])>1||a(O,U)})})}function a(O,U){try{!function c(O){O.value instanceof Ke?Promise.resolve(O.value.v).then(l,p):g(o[0][2],O)}(r[O](U))}catch(q){g(o[0][3],q)}}function l(O){a("next",O)}function p(O){a("throw",O)}function g(O,U){O(U),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Ke(t.read());if(i)return yield Ke(void 0);yield yield Ke(r)}}finally{t.releaseLock()}})}function ft(n){return k(n?.getReader)}function on(n){if(n instanceof ie)return n;if(null!=n){if(ut(n))return function Ts(n){return new ie(e=>{const t=n[X]();if(k(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Se(n))return function $g(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ae(n))return function oH(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,b)})}(n);if(Rt(n))return KI(n);if(rn(n))return function sH(n){return new ie(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(ft(n))return function aH(n){return KI(dt(n))}(n)}throw In(n)}function KI(n){return new ie(e=>{(function cH(n,e){var t,r,i,o;return Ft(this,void 0,void 0,function*(){try{for(t=nn(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Po(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Xn(n,e,t=1/0){return k(e)?Xn((r,i)=>pe((o,s)=>e(r,o,i,s))(on(n(r,i))),t):("number"==typeof e&&(t=e),le((r,i)=>function lH(n,e,t,r,i,o,s,a){const c=[];let l=0,p=0,g=!1;const O=()=>{g&&!c.length&&!l&&e.complete()},U=ae=>l<r?q(ae):c.push(ae),q=ae=>{o&&e.next(ae),l++;let me=!1;on(t(ae,p++)).subscribe(_e(e,ye=>{i?.(ye),o?U(ye):e.next(ye)},()=>{me=!0},void 0,()=>{if(me)try{for(l--;c.length&&l<r;){const ye=c.shift();s?Po(e,s,()=>q(ye)):q(ye)}O()}catch(ye){e.error(ye)}}))};return n.subscribe(_e(e,U,()=>{g=!0,O()})),()=>{a?.()}}(r,i,n,t)))}function lc(n=1/0){return Xn(J,n)}const Li=new ie(n=>n.complete());function Wg(n){return n[n.length-1]}function qI(n){return k(Wg(n))?n.pop():void 0}function Kl(n){return function dH(n){return n&&k(n.schedule)}(Wg(n))?n.pop():void 0}function Sf(n,e=0){return le((t,r)=>{t.subscribe(_e(r,i=>Po(r,n,()=>r.next(i),e),()=>Po(r,n,()=>r.complete(),e),i=>Po(r,n,()=>r.error(i),e)))})}function Cf(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function YI(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{Po(t,e,()=>{const r=n[Symbol.asyncIterator]();Po(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Vn(n,e){return e?function vH(n,e){if(null!=n){if(ut(n))return function hH(n,e){return on(n).pipe(Cf(e),Sf(e))}(n,e);if(Se(n))return function mH(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ae(n))return function pH(n,e){return on(n).pipe(Cf(e),Sf(e))}(n,e);if(Rt(n))return YI(n,e);if(rn(n))return function gH(n,e){return new ie(t=>{let r;return Po(t,e,()=>{r=n[jt](),Po(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}(n,e);if(ft(n))return function _H(n,e){return YI(dt(n),e)}(n,e)}throw In(n)}(n,e):on(n)}function QI(...n){const e=Kl(n),t=function fH(n,e){return"number"==typeof Wg(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?on(r[0]):lc(t)(Vn(r,e)):Li}function XI(n={}){const{connector:e=(()=>new Y),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,p=!1,g=!1;const O=()=>{a?.unsubscribe(),a=void 0},U=()=>{O(),s=c=void 0,p=g=!1},q=()=>{const ae=s;U(),ae?.unsubscribe()};return le((ae,me)=>{l++,!g&&!p&&O();const ye=c=c??e();me.add(()=>{l--,0===l&&!g&&!p&&(a=zg(q,i))}),ye.subscribe(me),!s&&l>0&&(s=new x({next:Ce=>ye.next(Ce),error:Ce=>{g=!0,O(),a=zg(U,t,Ce),ye.error(Ce)},complete:()=>{p=!0,O(),a=zg(U,r),ye.complete()}}),on(ae).subscribe(s))})(o)}}function zg(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new x({next:()=>{r.unsubscribe(),n()}});return on(e(...t)).subscribe(r)}function en(n){for(let e in n)if(n[e]===en)return e;throw Error("Could not find renamed property on target object.")}function Gg(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function sn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(sn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Kg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const yH=en({__forward_ref__:en});function an(n){return n.__forward_ref__=an,n.toString=function(){return sn(this())},n}function Ze(n){return qg(n)?n():n}function qg(n){return"function"==typeof n&&n.hasOwnProperty(yH)&&n.__forward_ref__===an}function Yg(n){return n&&!!n.\u0275providers}const If="https://g.co/ng/security#xss";class Ie extends Error{constructor(e,t){super(xf(e,t)),this.code=e}}function xf(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function ot(n){return"string"==typeof n?n:null==n?"":String(n)}function Df(n,e){throw new Ie(-201,!1)}function _i(n,e){null==n&&function Kt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function je(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function kf(n){return JI(n,Af)||JI(n,ex)}function JI(n,e){return n.hasOwnProperty(e)?n[e]:null}function ZI(n){return n&&(n.hasOwnProperty(Qg)||n.hasOwnProperty(DH))?n[Qg]:null}const Af=en({\u0275prov:en}),Qg=en({\u0275inj:en}),ex=en({ngInjectableDef:en}),DH=en({ngInjectorDef:en});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let Xg;function vi(n){const e=Xg;return Xg=n,e}function tx(n,e,t){const r=kf(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&et.Optional?null:void 0!==e?e:void Df(sn(n))}const hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ql={},Jg="__NG_DI_FLAG__",Mf="ngTempTokenPath",AH="ngTokenPath",MH=/\n/gm,RH="\u0275",nx="__source";let Yl;function uc(n){const e=Yl;return Yl=n,e}function PH(n,e=et.Default){if(void 0===Yl)throw new Ie(-203,!1);return null===Yl?tx(n,void 0,e):Yl.get(n,e&et.Optional?null:void 0,e)}function xe(n,e=et.Default){return(function kH(){return Xg}()||PH)(Ze(n),e)}function st(n,e=et.Default){return xe(n,Rf(e))}function Rf(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zg(n){const e=[];for(let t=0;t<n.length;t++){const r=Ze(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Ie(900,!1);let i,o=et.Default;for(let s=0;s<r.length;s++){const a=r[s],c=OH(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(xe(i,o))}else e.push(xe(r))}return e}function Ql(n,e){return n[Jg]=e,n.prototype[Jg]=e,n}function OH(n){return n[Jg]}function Cs(n){return{toString:n}.toString()}var io=(()=>((io=io||{})[io.OnPush=0]="OnPush",io[io.Default=1]="Default",io))(),Fi=(()=>{return(n=Fi||(Fi={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Fi;var n})();const Oo={},Ut=[],Pf=en({\u0275cmp:en}),e_=en({\u0275dir:en}),t_=en({\u0275pipe:en}),ix=en({\u0275mod:en}),No=en({\u0275fac:en}),Xl=en({__NG_ELEMENT_ID__:en});let FH=0;function Vi(n){return Cs(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===io.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Ut,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Fi.Emulated,id:"c"+FH++,styles:n.styles||Ut,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return i.inputs=ax(n.inputs,r),i.outputs=ax(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(ox).filter(sx):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ar).filter(sx):null,i})}function ox(n){return qt(n)||br(n)}function sx(n){return null!==n}function Bt(n){return Cs(()=>({type:n.type,bootstrap:n.bootstrap||Ut,declarations:n.declarations||Ut,imports:n.imports||Ut,exports:n.exports||Ut,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ax(n,e){if(null==n)return Oo;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const Ge=Vi;function qt(n){return n[Pf]||null}function br(n){return n[e_]||null}function Ar(n){return n[t_]||null}function Jr(n,e){const t=n[ix]||null;if(!t&&!0===e)throw new Error(`Type ${sn(n)} does not have '\u0275mod' property.`);return t}const Lo=0,Be=1,_t=2,xn=3,ji=4,aa=5,wr=6,fc=7,Mn=8,Of=9,Nf=10,wt=11,n_=12,Jl=13,cx=14,hc=15,Er=16,Zl=17,pc=18,oo=19,eu=20,lx=21,pn=22,r_=1,ux=2,Lf=7,Ff=8,mc=9,Mr=10;function Zr(n){return Array.isArray(n)&&"object"==typeof n[r_]}function Ui(n){return Array.isArray(n)&&!0===n[r_]}function i_(n){return 0!=(4&n.flags)}function tu(n){return n.componentOffset>-1}function Vf(n){return 1==(1&n.flags)}function Bi(n){return null!==n.template}function UH(n){return 0!=(256&n[_t])}function ca(n,e){return n.hasOwnProperty(No)?n[No]:null}class $H{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ei(){return hx}function hx(n){return n.type.prototype.ngOnChanges&&(n.setInput=zH),WH}function WH(){const n=mx(this),e=n?.current;if(e){const t=n.previous;if(t===Oo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function zH(n,e,t,r){const i=this.declaredInputs[t],o=mx(n)||function GH(n,e){return n[px]=e}(n,{previous:Oo,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new $H(c&&c.currentValue,e,a===Oo),n[r]=e}ei.ngInherit=!0;const px="__ngSimpleChanges__";function mx(n){return n[px]||null}const yi=function(n,e,t){};function ar(n){for(;Array.isArray(n);)n=n[Lo];return n}function jf(n,e){return ar(e[n])}function ti(n,e){return ar(e[n.index])}function vx(n,e){return n.data[e]}function ni(n,e){const t=e[n];return Zr(t)?t:t[Lo]}function Uf(n){return 64==(64&n[_t])}function Is(n,e){return null==e?null:n[e]}function yx(n){n[pc]=0}function s_(n,e){n[aa]+=e;let t=n,r=n[xn];for(;null!==r&&(1===e&&1===t[aa]||-1===e&&0===t[aa]);)r[aa]+=e,t=r,r=r[xn]}const at={lFrame:kx(null),bindingsEnabled:!0};function wx(){return at.bindingsEnabled}function ke(){return at.lFrame.lView}function At(){return at.lFrame.tView}function Bf(n){return at.lFrame.contextLView=n,n[Mn]}function Hf(n){return at.lFrame.contextLView=null,n}function cr(){let n=Ex();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ex(){return at.lFrame.currentTNode}function so(n,e){const t=at.lFrame;t.currentTNode=n,t.isParent=e}function a_(){return at.lFrame.isParent}function c_(){at.lFrame.isParent=!1}function _c(){return at.lFrame.bindingIndex++}function o$(n,e){const t=at.lFrame;t.bindingIndex=t.bindingRootIndex=n,l_(e)}function l_(n){at.lFrame.currentDirectiveIndex=n}function Ix(){return at.lFrame.currentQueryIndex}function d_(n){at.lFrame.currentQueryIndex=n}function a$(n){const e=n[Be];return 2===e.type?e.declTNode:1===e.type?n[wr]:null}function xx(n,e,t){if(t&et.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&et.Host||(i=a$(o),null===i||(o=o[hc],10&i.type))););if(null===i)return!1;e=i,n=o}const r=at.lFrame=Dx();return r.currentTNode=e,r.lView=n,!0}function f_(n){const e=Dx(),t=n[Be];at.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Dx(){const n=at.lFrame,e=null===n?null:n.child;return null===e?kx(n):e}function kx(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Ax(){const n=at.lFrame;return at.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Mx=Ax;function h_(){const n=Ax();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pr(){return at.lFrame.selectedIndex}function la(n){at.lFrame.selectedIndex=n}function yn(){const n=at.lFrame;return vx(n.tView,n.selectedIndex)}function $f(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:p}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=p&&(n.destroyHooks||(n.destroyHooks=[])).push(t,p)}}function Wf(n,e,t){Rx(n,e,3,t)}function zf(n,e,t,r){(3&n[_t])===t&&Rx(n,e,t,r)}function p_(n,e){let t=n[_t];(3&t)===e&&(t&=2047,t+=1,n[_t]=t)}function Rx(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[pc]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[pc]+=65536),(a<o||-1==o)&&(g$(n,t,e,c),n[pc]=(4294901760&n[pc])+c+2),c++}function g$(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[_t]>>11<n[pc]>>16&&(3&n[_t])===e){n[_t]+=2048,yi(4,a,o);try{o.call(a)}finally{yi(5,a,o)}}}else{yi(4,a,o);try{o.call(a)}finally{yi(5,a,o)}}}const vc=-1;class ru{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function g_(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];Ox(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Px(n){return 3===n||4===n||6===n}function Ox(n){return 64===n.charCodeAt(0)}function iu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Nx(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Nx(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function Lx(n){return n!==vc}function Gf(n){return 32767&n}function Kf(n,e){let t=function b$(n){return n>>16}(n),r=e;for(;t>0;)r=r[hc],t--;return r}let __=!0;function qf(n){const e=__;return __=n,e}const Fx=255,Vx=5;let w$=0;const ao={};function Yf(n,e){const t=jx(n,e);if(-1!==t)return t;const r=e[Be];r.firstCreatePass&&(n.injectorIndex=e.length,v_(r.data,n),v_(e,null),v_(r.blueprint,null));const i=y_(n,e),o=n.injectorIndex;if(Lx(i)){const s=Gf(i),a=Kf(i,e),c=a[Be].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function v_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jx(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function y_(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Gx(i),null===r)return vc;if(t++,i=i[hc],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return vc}function b_(n,e,t){!function E$(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xl)&&(r=t[Xl]),null==r&&(r=t[Xl]=w$++);const i=r&Fx;e.data[n+(i>>Vx)]|=1<<i}(n,e,t)}function Ux(n,e,t){if(t&et.Optional||void 0!==n)return n;Df()}function Bx(n,e,t,r){if(t&et.Optional&&void 0===r&&(r=null),!(t&(et.Self|et.Host))){const i=n[Of],o=vi(void 0);try{return i?i.get(e,r,t&et.Optional):tx(e,r,t&et.Optional)}finally{vi(o)}}return Ux(r,0,t)}function Hx(n,e,t,r=et.Default,i){if(null!==n){if(1024&e[_t]){const s=function x$(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[_t]&&!(256&s[_t]);){const a=$x(o,s,t,r|et.Self,ao);if(a!==ao)return a;let c=o.parent;if(!c){const l=s[lx];if(l){const p=l.get(t,ao,r);if(p!==ao)return p}c=Gx(s),s=s[hc]}o=c}return i}(n,e,t,r,ao);if(s!==ao)return s}const o=$x(n,e,t,r,ao);if(o!==ao)return o}return Bx(e,t,r,i)}function $x(n,e,t,r,i){const o=function C$(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Xl)?n[Xl]:void 0;return"number"==typeof e?e>=0?e&Fx:I$:e}(t);if("function"==typeof o){if(!xx(e,n,r))return r&et.Host?Ux(i,0,r):Bx(e,t,r,i);try{const s=o(r);if(null!=s||r&et.Optional)return s;Df()}finally{Mx()}}else if("number"==typeof o){let s=null,a=jx(n,e),c=vc,l=r&et.Host?e[Er][wr]:null;for((-1===a||r&et.SkipSelf)&&(c=-1===a?y_(n,e):e[a+8],c!==vc&&zx(r,!1)?(s=e[Be],a=Gf(c),e=Kf(c,e)):a=-1);-1!==a;){const p=e[Be];if(Wx(o,a,p.data)){const g=S$(a,e,t,s,r,l);if(g!==ao)return g}c=e[a+8],c!==vc&&zx(r,e[Be].data[a+8]===l)&&Wx(o,a,e)?(s=p,a=Gf(c),e=Kf(c,e)):a=-1}}return i}function S$(n,e,t,r,i,o){const s=e[Be],a=s.data[n+8],p=Qf(a,s,t,null==r?tu(a)&&__:r!=s&&0!=(3&a.type),i&et.Host&&o===a);return null!==p?ua(e,s,p,a):ao}function Qf(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,p=o>>20,O=i?a+p:n.directiveEnd;for(let U=r?a:a+p;U<O;U++){const q=s[U];if(U<c&&t===q||U>=c&&q.type===t)return U}if(i){const U=s[c];if(U&&Bi(U)&&U.type===t)return c}return null}function ua(n,e,t,r){let i=n[t];const o=e.data;if(function _$(n){return n instanceof ru}(i)){const s=i;s.resolving&&function bH(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Gt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ot(n)}(o[t]));const a=qf(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?vi(s.injectImpl):null;xx(n,r,et.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function m$(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=hx(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==c&&vi(c),qf(a),s.resolving=!1,Mx()}}return i}function Wx(n,e,t){return!!(t[e+(n>>Vx)]&1<<n)}function zx(n,e){return!(n&et.Self||n&et.Host&&e)}class yc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Hx(this._tNode,this._lView,e,Rf(r),t)}}function I$(){return new yc(cr(),ke())}function lr(n){return Cs(()=>{const e=n.prototype.constructor,t=e[No]||w_(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[No]||w_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function w_(n){return qg(n)?()=>{const e=w_(Ze(n));return e&&e()}:ca(n)}function Gx(n){const e=n[Be],t=e.type;return 2===t?e.declTNode:1===t?n[wr]:null}function bc(n){return function T$(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Px(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(cr(),n)}const Ec="__parameters__";function Sc(n,e,t){return Cs(()=>{const r=function E_(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,l,p){const g=c.hasOwnProperty(Ec)?c[Ec]:Object.defineProperty(c,Ec,{value:[]})[Ec];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Re{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=je({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function da(n,e){n.forEach(t=>Array.isArray(t)?da(t,e):e(t))}function qx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function au(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function ri(n,e,t){let r=Cc(n,e);return r>=0?n[1|r]=t:(r=~r,function M$(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function S_(n,e){const t=Cc(n,e);if(t>=0)return n[1|t]}function Cc(n,e){return function Yx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const kt=Ql(Sc("Optional"),8),Ic=Ql(Sc("SkipSelf"),4);var Hr=(()=>((Hr=Hr||{})[Hr.Important=1]="Important",Hr[Hr.DashCase=2]="DashCase",Hr))();const A_=new Map;let Z$=0;const R_="__ngContext__";function Tr(n,e){Zr(e)?(n[R_]=e[eu],function t3(n){A_.set(n[eu],n)}(e)):n[R_]=e}let P_;function O_(n,e){return P_(n,e)}function du(n){const e=n[xn];return Ui(e)?e[xn]:e}function N_(n){return mD(n[Jl])}function L_(n){return mD(n[ji])}function mD(n){for(;null!==n&&!Ui(n);)n=n[ji];return n}function Dc(n,e,t,r,i){if(null!=r){let o,s=!1;Ui(r)?o=r:Zr(r)&&(s=!0,r=r[Lo]);const a=ar(r);0===n&&null!==t?null==i?wD(e,t,a):fa(e,t,a,i||null,!0):1===n&&null!==t?fa(e,t,a,i||null,!0):2===n?function $_(n,e,t){const r=th(n,e);r&&function E3(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function C3(n,e,t,r,i){const o=t[Lf];o!==ar(t)&&Dc(e,n,r,o,i);for(let a=Mr;a<t.length;a++){const c=t[a];fu(c[Be],c,n,e,r,o)}}(e,n,o,t,i)}}function V_(n,e,t){return n.createElement(e,t)}function _D(n,e){const t=n[mc],r=t.indexOf(e),i=e[xn];512&e[_t]&&(e[_t]&=-513,s_(i,-1)),t.splice(r,1)}function j_(n,e){if(n.length<=Mr)return;const t=Mr+e,r=n[t];if(r){const i=r[Zl];null!==i&&i!==n&&_D(i,r),e>0&&(n[t-1][ji]=r[ji]);const o=Xf(n,Mr+e);!function p3(n,e){fu(n,e,e[wt],2,null,null),e[Lo]=null,e[wr]=null}(r[Be],r);const s=o[oo];null!==s&&s.detachView(o[Be]),r[xn]=null,r[ji]=null,r[_t]&=-65}return r}function vD(n,e){if(!(128&e[_t])){const t=e[wt];t.destroyNode&&fu(n,e,t,3,null,null),function _3(n){let e=n[Jl];if(!e)return U_(n[Be],n);for(;e;){let t=null;if(Zr(e))t=e[Jl];else{const r=e[Mr];r&&(t=r)}if(!t){for(;e&&!e[ji]&&e!==n;)Zr(e)&&U_(e[Be],e),e=e[xn];null===e&&(e=n),Zr(e)&&U_(e[Be],e),t=e&&e[ji]}e=t}}(e)}}function U_(n,e){if(!(128&e[_t])){e[_t]&=-65,e[_t]|=128,function w3(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ru)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];yi(4,a,c);try{c.call(a)}finally{yi(5,a,c)}}else{yi(4,i,o);try{o.call(i)}finally{yi(5,i,o)}}}}}(n,e),function b3(n,e){const t=n.cleanup,r=e[fc];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[i=s]():r[i=-s].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[fc]=null}}(n,e),1===e[Be].type&&e[wt].destroy();const t=e[Zl];if(null!==t&&Ui(e[xn])){t!==e[xn]&&_D(t,e);const r=e[oo];null!==r&&r.detachView(n)}!function n3(n){A_.delete(n[eu])}(e)}}function yD(n,e,t){return function bD(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Lo];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Fi.None||o===Fi.Emulated)return null}return ti(r,t)}}(n,e.parent,t)}function fa(n,e,t,r,i){n.insertBefore(e,t,r,i)}function wD(n,e,t){n.appendChild(e,t)}function ED(n,e,t,r,i){null!==r?fa(n,e,t,r,i):wD(n,e,t)}function th(n,e){return n.parentNode(e)}function TD(n,e,t){return CD(n,e,t)}let B_,ih,G_,CD=function SD(n,e,t){return 40&n.type?ti(n,t):null};function nh(n,e,t,r){const i=yD(n,r,e),o=e[wt],a=TD(r.parent||e[wr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)ED(o,i,t[c],a,!1);else ED(o,i,t,a,!1);void 0!==B_&&B_(o,r,e,t,i)}function rh(n,e){if(null!==e){const t=e.type;if(3&t)return ti(e,n);if(4&t)return H_(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return rh(n,r);{const i=n[e.index];return Ui(i)?H_(-1,i):ar(i)}}if(32&t)return O_(e,n)()||ar(n[e.index]);{const r=xD(n,e);return null!==r?Array.isArray(r)?r[0]:rh(du(n[Er]),r):rh(n,e.next)}}return null}function xD(n,e){return null!==e?n[Er][wr].projection[e.projection]:null}function H_(n,e){const t=Mr+n+1;if(t<e.length){const r=e[t],i=r[Be].firstChild;if(null!==i)return rh(r,i)}return e[Lf]}function W_(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&Tr(ar(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)W_(n,e,t.child,r,i,o,!1),Dc(e,n,i,a,o);else if(32&c){const l=O_(t,r);let p;for(;p=l();)Dc(e,n,i,p,o);Dc(e,n,i,a,o)}else 16&c?DD(n,e,r,t,i,o):Dc(e,n,i,a,o);t=s?t.projectionNext:t.next}}function fu(n,e,t,r,i,o){W_(t,r,n.firstChild,e,i,o,!1)}function DD(n,e,t,r,i,o){const s=t[Er],c=s[wr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Dc(e,n,i,c[l],o);else W_(n,e,c,s[xn],i,o,!0)}function kD(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function AD(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&g_(n,e,r),null!==i&&kD(n,e,i),null!==o&&function x3(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function kc(n){return function z_(){if(void 0===ih&&(ih=null,hn.trustedTypes))try{ih=hn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ih}()?.createHTML(n)||n}class ha{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${If})`}}class R3 extends ha{getTypeName(){return"HTML"}}class P3 extends ha{getTypeName(){return"Style"}}class O3 extends ha{getTypeName(){return"Script"}}class N3 extends ha{getTypeName(){return"URL"}}class L3 extends ha{getTypeName(){return"ResourceURL"}}function ii(n){return n instanceof ha?n.changingThisBreaksApplicationSecurity:n}function co(n,e){const t=function F3(n){return n instanceof ha&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${If})`)}return t===e}class $3{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(kc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class W3{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=kc(e),t}}const G3=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function sh(n){return(n=String(n)).match(G3)?n:"unsafe:"+n}function jo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function hu(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const LD=jo("area,br,col,hr,img,wbr"),FD=jo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),VD=jo("rp,rt"),q_=hu(LD,hu(FD,jo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),hu(VD,jo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hu(VD,FD)),Y_=jo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jD=hu(Y_,jo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),K3=jo("script,style,template");class q3{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!q_.hasOwnProperty(t))return this.sanitizedSomething=!0,!K3.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!jD.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;Y_[a]&&(c=sh(c)),this.buf.push(" ",s,'="',UD(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();q_.hasOwnProperty(t)&&!LD.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(UD(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Y3=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Q3=/([^\#-~ |!])/g;function UD(n){return n.replace(/&/g,"&amp;").replace(Y3,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Q3,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ah;function BD(n,e){let t=null;try{ah=ah||function ND(n){const e=new W3(n);return function z3(){try{return!!(new window.DOMParser).parseFromString(kc(""),"text/html")}catch{return!1}}()?new $3(e):e}(n);let r=e?String(e):"";t=ah.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=ah.getInertBodyElement(r)}while(r!==o);return kc((new q3).sanitizeChildren(Q_(t)||t))}finally{if(t){const r=Q_(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Q_(n){return"content"in n&&function X3(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ht=(()=>((Ht=Ht||{})[Ht.NONE=0]="NONE",Ht[Ht.HTML=1]="HTML",Ht[Ht.STYLE=2]="STYLE",Ht[Ht.SCRIPT=3]="SCRIPT",Ht[Ht.URL=4]="URL",Ht[Ht.RESOURCE_URL=5]="RESOURCE_URL",Ht))();const ch=new Re("ENVIRONMENT_INITIALIZER"),zD=new Re("INJECTOR",-1),GD=new Re("INJECTOR_DEF_TYPES");class KD{get(e,t=ql){if(t===ql){const r=new Error(`NullInjectorError: No provider for ${sn(e)}!`);throw r.name="NullInjectorError",r}return t}}function oW(...n){return{\u0275providers:qD(0,n),\u0275fromNgModule:!0}}function qD(n,...e){const t=[],r=new Set;let i;return da(e,o=>{const s=o;X_(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&YD(i,t),t}function YD(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];J_(i,o=>{e.push(o)})}}function X_(n,e,t,r){if(!(n=Ze(n)))return!1;let i=null,o=ZI(n);const s=!o&&qt(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=ZI(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)X_(l,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{da(o.imports,p=>{X_(p,e,t,r)&&(l||(l=[]),l.push(p))})}finally{}void 0!==l&&YD(l,e)}if(!a){const l=ca(i)||(()=>new i);e.push({provide:i,useFactory:l,deps:Ut},{provide:GD,useValue:i,multi:!0},{provide:ch,useValue:()=>xe(i),multi:!0})}const c=o.providers;null==c||a||J_(c,p=>{e.push(p)})}}return i!==n&&void 0!==n.providers}function J_(n,e){for(let t of n)Yg(t)&&(t=t.\u0275providers),Array.isArray(t)?J_(t,e):e(t)}const sW=en({provide:String,useValue:en});function Z_(n){return null!==n&&"object"==typeof n&&sW in n}function pa(n){return"function"==typeof n}const ev=new Re("Set Injector scope."),lh={},cW={};let tv;function uh(){return void 0===tv&&(tv=new KD),tv}class lo{}class JD extends lo{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rv(e,s=>this.processProvider(s)),this.records.set(zD,Ac(void 0,this)),i.has("environment")&&this.records.set(lo,Ac(void 0,this));const o=this.records.get(ev);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(GD.multi,Ut,et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=uc(this),r=vi(void 0);try{return e()}finally{uc(t),vi(r)}}get(e,t=ql,r=et.Default){this.assertNotDestroyed(),r=Rf(r);const i=uc(this),o=vi(void 0);try{if(!(r&et.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function hW(n){return"function"==typeof n||"object"==typeof n&&n instanceof Re}(e)&&kf(e);a=c&&this.injectableDefInScope(c)?Ac(nv(e),lh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&et.Self?uh():this.parent).get(e,t=r&et.Optional&&t===ql?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Mf]=s[Mf]||[]).unshift(sn(e)),i)throw s;return function NH(n,e,t,r){const i=n[Mf];throw e[nx]&&i.unshift(e[nx]),n.message=function LH(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==RH?n.slice(2):n;let i=sn(e);if(Array.isArray(e))i=e.map(sn).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):sn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(MH,"\n  ")}`}("\n"+n.message,i,t,r),n[AH]=i,n[Mf]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{vi(o),uc(i)}}resolveInjectorInitializers(){const e=uc(this),t=vi(void 0);try{const r=this.get(ch.multi,Ut,et.Self);for(const i of r)i()}finally{uc(e),vi(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(sn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(e){let t=pa(e=Ze(e))?e:Ze(e&&e.provide);const r=function uW(n){return Z_(n)?Ac(void 0,n.useValue):Ac(ZD(n),lh)}(e);if(pa(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ac(void 0,lh,!0),i.factory=()=>Zg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===lh&&(t.value=cW,t.value=t.factory()),"object"==typeof t.value&&t.value&&function fW(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function nv(n){const e=kf(n),t=null!==e?e.factory:ca(n);if(null!==t)return t;if(n instanceof Re)throw new Ie(204,!1);if(n instanceof Function)return function lW(n){const e=n.length;if(e>0)throw au(e,"?"),new Ie(204,!1);const t=function IH(n){const e=n&&(n[Af]||n[ex]);return e?(function xH(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),e):null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ie(204,!1)}function ZD(n,e,t){let r;if(pa(n)){const i=Ze(n);return ca(i)||nv(i)}if(Z_(n))r=()=>Ze(n.useValue);else if(function XD(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Zg(n.deps||[]));else if(function QD(n){return!(!n||!n.useExisting)}(n))r=()=>xe(Ze(n.useExisting));else{const i=Ze(n&&(n.useClass||n.provide));if(!function dW(n){return!!n.deps}(n))return ca(i)||nv(i);r=()=>new i(...Zg(n.deps))}return r}function Ac(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rv(n,e){for(const t of n)Array.isArray(t)?rv(t,e):t&&Yg(t)?rv(t.\u0275providers,e):e(t)}class pW{}class ek{}class gW{resolveComponentFactory(e){throw function mW(n){const e=Error(`No component factory found for ${sn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Mc=(()=>{class n{}return n.NULL=new gW,n})();function _W(){return Rc(cr(),ke())}function Rc(n,e){return new mn(ti(n,e))}let mn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=_W,n})();function vW(n){return n instanceof mn?n.nativeElement:n}class mu{}let Uo=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function yW(){const n=ke(),t=ni(cr().index,n);return(Zr(t)?t:n)[wt]}(),n})(),bW=(()=>{class n{}return n.\u0275prov=je({token:n,providedIn:"root",factory:()=>null}),n})();class xs{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const nk=new xs("15.2.2"),iv={},ov="ngOriginalError";function sv(n){return n[ov]}class Bo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&sv(e);for(;t&&sv(t);)t=sv(t);return t||null}}function Ho(n){return n instanceof Function?n():n}function ik(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const ok="ng-template";function MW(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==ik(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function sk(n){return 4===n.type&&n.value!==ok}function RW(n,e,t){return e===(4!==n.type||t?n.value:ok)}function PW(n,e,t){let r=4;const i=n.attrs||[],o=function LW(n){for(let e=0;e<n.length;e++)if(Px(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!RW(n,c,t)||""===c&&1===e.length){if(Hi(r))return!1;s=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!MW(n.attrs,l,t)){if(Hi(r))return!1;s=!0}continue}const g=OW(8&r?"class":c,i,sk(n),t);if(-1===g){if(Hi(r))return!1;s=!0;continue}if(""!==l){let O;O=g>o?"":i[g+1].toLowerCase();const U=8&r?O:null;if(U&&-1!==ik(U,l,0)||2&r&&l!==O){if(Hi(r))return!1;s=!0}}}}else{if(!s&&!Hi(r)&&!Hi(c))return!1;if(s&&Hi(c))continue;s=!1,r=c|1&r}}return Hi(r)||s}function Hi(n){return 0==(1&n)}function OW(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function FW(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ak(n,e,t=!1){for(let r=0;r<e.length;r++)if(PW(n,e[r],t))return!0;return!1}function VW(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ck(n,e){return n?":not("+e.trim()+")":e}function jW(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Hi(s)&&(e+=ck(o,i),i=""),r=s,o=o||!Hi(r);t++}return""!==i&&(e+=ck(o,i)),e}const ct={};function $t(n){lk(At(),ke(),Pr()+n,!1)}function lk(n,e,t,r){if(!r)if(3==(3&e[_t])){const o=n.preOrderCheckHooks;null!==o&&Wf(e,o,t)}else{const o=n.preOrderHooks;null!==o&&zf(e,o,0,t)}la(t)}function hk(n,e=null,t=null,r){const i=pk(n,e,t,r);return i.resolveInjectorInitializers(),i}function pk(n,e=null,t=null,r,i=new Set){const o=[t||Ut,oW(n)];return r=r||("object"==typeof n?void 0:sn(n)),new JD(o,e||uh(),r||null,i)}let bn=(()=>{class n{static create(t,r){if(Array.isArray(t))return hk({name:""},r,t,"");{const i=t.name??"";return hk({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=ql,n.NULL=new KD,n.\u0275prov=je({token:n,providedIn:"any",factory:()=>xe(zD)}),n.__NG_ELEMENT_ID__=-1,n})();function we(n,e=et.Default){const t=ke();return null===t?xe(n,e):Hx(cr(),t,Ze(n),e)}function dv(){throw new Error("invalid")}function wk(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const s=n.data[o];d_(t[r]),s.contentQueries(2,e[o],o)}}}function fh(n,e,t,r,i,o,s,a,c,l,p){const g=e.blueprint.slice();return g[Lo]=i,g[_t]=76|r,(null!==p||n&&1024&n[_t])&&(g[_t]|=1024),yx(g),g[xn]=g[hc]=n,g[Mn]=t,g[Nf]=s||n&&n[Nf],g[wt]=a||n&&n[wt],g[n_]=c||n&&n[n_]||null,g[Of]=l||n&&n[Of]||null,g[wr]=o,g[eu]=function e3(){return Z$++}(),g[lx]=p,g[Er]=2==e.type?n[Er]:g,g}function Nc(n,e,t,r,i){let o=n.data[e];if(null===o)o=function fv(n,e,t,r,i){const o=Ex(),s=a_(),c=n.data[e]=function dz(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,r,i),function i$(){return at.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function nu(){const n=at.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return so(o,!0),o}function gu(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function hv(n,e,t){f_(e);try{const r=n.viewQuery;null!==r&&Tv(1,r,t);const i=n.template;null!==i&&Ek(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wk(n,e),n.staticViewQueries&&Tv(2,n.viewQuery,t);const o=n.components;null!==o&&function cz(n,e){for(let t=0;t<e.length;t++)Az(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[_t]&=-5,h_()}}function hh(n,e,t,r){const i=e[_t];if(128!=(128&i)){f_(e);try{yx(e),function Sx(n){return at.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Ek(n,e,t,2,r);const s=3==(3&i);if(s){const l=n.preOrderCheckHooks;null!==l&&Wf(e,l,null)}else{const l=n.preOrderHooks;null!==l&&zf(e,l,0,null),p_(e,0)}if(function Dz(n){for(let e=N_(n);null!==e;e=L_(e)){if(!e[ux])continue;const t=e[mc];for(let r=0;r<t.length;r++){const i=t[r];512&i[_t]||s_(i[xn],1),i[_t]|=512}}}(e),function xz(n){for(let e=N_(n);null!==e;e=L_(e))for(let t=Mr;t<e.length;t++){const r=e[t],i=r[Be];Uf(r)&&hh(i,r,i.template,r[Mn])}}(e),null!==n.contentQueries&&wk(n,e),s){const l=n.contentCheckHooks;null!==l&&Wf(e,l)}else{const l=n.contentHooks;null!==l&&zf(e,l,1),p_(e,1)}!function sz(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)la(~i);else{const o=i,s=t[++r],a=t[++r];o$(s,o),a(2,e[o])}}}finally{la(-1)}}(n,e);const a=n.components;null!==a&&function az(n,e){for(let t=0;t<e.length;t++)kz(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&Tv(2,c,r),s){const l=n.viewCheckHooks;null!==l&&Wf(e,l)}else{const l=n.viewHooks;null!==l&&zf(e,l,2),p_(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[_t]&=-41,512&e[_t]&&(e[_t]&=-513,s_(e[xn],-1))}finally{h_()}}}function Ek(n,e,t,r,i){const o=Pr(),s=2&r;try{la(-1),s&&e.length>pn&&lk(n,e,pn,!1),yi(s?2:0,i),t(r,i)}finally{la(o),yi(s?3:1,i)}}function pv(n,e,t){if(i_(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function mv(n,e,t){wx()&&(function _z(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;tu(t)&&function Sz(n,e,t){const r=ti(e,n),i=Tk(t),o=n[Nf],s=ph(n,fh(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Yf(t,e),Tr(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const c=n.data[a],l=ua(e,n,a,t);Tr(l,e),null!==s&&Cz(0,a-i,l,c,0,s),Bi(c)&&(ni(t.index,e)[Mn]=ua(e,n,a,t))}}(n,e,t,ti(t,e)),64==(64&t.flags)&&kk(n,e,t))}function gv(n,e,t=ti){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function Tk(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=_v(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function _v(n,e,t,r,i,o,s,a,c,l){const p=pn+r,g=p+i,O=function lz(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ct);return t}(p,g),U="function"==typeof l?l():l;return O[Be]={type:n,blueprint:O,template:t,queries:null,viewQuery:a,declTNode:e,data:O.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:U,incompleteFirstPass:!1}}function Sk(n,e,t,r){const i=Mk(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&Rk(n).push(r,i.length-1))}function Ck(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?Ik(t,e,i,o):r.hasOwnProperty(i)&&Ik(t,e,r[i],o)}return t}function Ik(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function oi(n,e,t,r,i,o,s,a){const c=ti(e,t);let p,l=e.inputs;!a&&null!=l&&(p=l[r])?(Sv(n,t,p,r,i),tu(e)&&xk(t,e.index)):3&e.type&&(r=function hz(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i))}function xk(n,e){const t=ni(e,n);16&t[_t]||(t[_t]|=32)}function vv(n,e,t,r){if(wx()){const i=null===r?null:{"":-1},o=function yz(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(ak(e,s.selectors,!1))if(r||(r=[]),Bi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),yv(n,e,a.length)}else r.unshift(s),yv(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Dk(n,e,t,s,i,a),i&&function bz(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new Ie(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=iu(t.mergedAttrs,t.attrs)}function Dk(n,e,t,r,i,o){for(let l=0;l<r.length;l++)b_(Yf(t,e),n,r[l].type);!function Ez(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const p=r[l];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,c=gu(n,e,r.length,null);for(let l=0;l<r.length;l++){const p=r[l];t.mergedAttrs=iu(t.mergedAttrs,p.hostAttrs),Tz(n,t,e,c,p),wz(c,p,i),null!==p.contentQueries&&(t.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=64);const g=p.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),c++}!function fz(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let p=e.directiveStart;p<i;p++){const g=o[p],O=t?t.get(g):null,q=O?O.outputs:null;c=Ck(g.inputs,p,c,O?O.inputs:null),l=Ck(g.outputs,p,l,q);const ae=null===c||null===s||sk(e)?null:Iz(c,p,s);a.push(ae)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function kk(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function s$(){return at.lFrame.currentDirectiveIndex}();try{la(o);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];l_(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&vz(c,l)}}finally{la(-1),l_(s)}}function vz(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function yv(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function wz(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Bi(e)&&(t[""]=n)}}function Tz(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=ca(i.type)),s=new ru(o,Bi(i),we);n.blueprint[r]=s,t[r]=s,function mz(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function gz(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,gu(n,t,i.hostVars,ct),i)}function uo(n,e,t,r,i,o){const s=ti(n,e);!function bv(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?ot(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[wt],s,o,n.value,t,r,i)}function Cz(n,e,t,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let c=0;c<s.length;){const l=s[c++],p=s[c++],g=s[c++];null!==a?r.setInput(t,g,l,p):t[p]=g}}}function Iz(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Ak(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function kz(n,e){const t=ni(e,n);if(Uf(t)){const r=t[Be];48&t[_t]?hh(r,t,r.template,t[Mn]):t[aa]>0&&wv(t)}}function wv(n){for(let r=N_(n);null!==r;r=L_(r))for(let i=Mr;i<r.length;i++){const o=r[i];if(Uf(o))if(512&o[_t]){const s=o[Be];hh(s,o,s.template,o[Mn])}else o[aa]>0&&wv(o)}const t=n[Be].components;if(null!==t)for(let r=0;r<t.length;r++){const i=ni(t[r],n);Uf(i)&&i[aa]>0&&wv(i)}}function Az(n,e){const t=ni(e,n),r=t[Be];(function Mz(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),hv(r,t,t[Mn])}function ph(n,e){return n[Jl]?n[cx][ji]=e:n[Jl]=e,n[cx]=e,e}function Ev(n){for(;n;){n[_t]|=32;const e=du(n);if(UH(n)&&!e)return n;n=e}return null}function mh(n,e,t,r=!0){const i=e[Nf];i.begin&&i.begin();try{hh(n,e,n.template,t)}catch(s){throw r&&Ok(e,s),s}finally{i.end&&i.end()}}function Tv(n,e,t){d_(0),e(n,t)}function Mk(n){return n[fc]||(n[fc]=[])}function Rk(n){return n.cleanup||(n.cleanup=[])}function Ok(n,e){const t=n[Of],r=t?t.get(Bo,null):null;r&&r.handleError(e)}function Sv(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],c=e[s],l=n.data[s];null!==l.setInput?l.setInput(c,i,r,a):c[a]=i}}function gh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Kg(i,a):2==o&&(r=Kg(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function _h(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(ar(o)),Ui(o))for(let a=Mr;a<o.length;a++){const c=o[a],l=c[Be].firstChild;null!==l&&_h(c[Be],c,l,r)}const s=t.type;if(8&s)_h(n,e,t.child,r);else if(32&s){const a=O_(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=xD(e,t);if(Array.isArray(a))r.push(...a);else{const c=du(e[Er]);_h(c[Be],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class _u{get rootNodes(){const e=this._lView,t=e[Be];return _h(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(e){this._lView[Mn]=e}get destroyed(){return 128==(128&this._lView[_t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[xn];if(Ui(e)){const t=e[Ff],r=t?t.indexOf(this):-1;r>-1&&(j_(e,r),Xf(t,r))}this._attachedToViewContainer=!1}vD(this._lView[Be],this._lView)}onDestroy(e){Sk(this._lView[Be],this._lView,null,e)}markForCheck(){Ev(this._cdRefInjectingView||this._lView)}detach(){this._lView[_t]&=-65}reattach(){this._lView[_t]|=64}detectChanges(){mh(this._lView[Be],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function g3(n,e){fu(n,e,e[wt],2,null,null)}(this._lView[Be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=e}}class Rz extends _u{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;mh(e[Be],e,e[Mn],!1)}checkNoChanges(){}get context(){return null}}class Nk extends Mc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=qt(e);return new vu(t,this.ngModule)}}function Lk(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Oz{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Rf(r);const i=this.injector.get(e,iv,r);return i!==iv||t===iv?i:this.parentInjector.get(e,t,r)}}class vu extends ek{get inputs(){return Lk(this.componentDef.inputs)}get outputs(){return Lk(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function UW(n){return n.map(jW).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof lo?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Oz(e,o):e,a=s.get(mu,null);if(null===a)throw new Ie(407,!1);const c=s.get(bW,null),l=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?function uz(n,e,t){return n.selectRootElement(e,t===Fi.ShadowDom)}(l,r,this.componentDef.encapsulation):V_(l,p,function Pz(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(p)),O=this.componentDef.onPush?288:272,U=_v(0,null,null,1,0,null,null,null,null,null),q=fh(null,U,null,O,null,null,a,l,c,s,null);let ae,me;f_(q);try{const ye=this.componentDef;let Ce,be=null;ye.findHostDirectiveDefs?(Ce=[],be=new Map,ye.findHostDirectiveDefs(ye,Ce,be),Ce.push(ye)):Ce=[ye];const Pe=function Lz(n,e){const t=n[Be],r=pn;return n[r]=e,Nc(t,r,2,"#host",null)}(q,g),lt=function Fz(n,e,t,r,i,o,s,a){const c=i[Be];!function Vz(n,e,t,r){for(const i of n)e.mergedAttrs=iu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(gh(e,e.mergedAttrs,!0),null!==t&&AD(r,t,e))}(r,n,e,s);const l=o.createRenderer(e,t),p=fh(i,Tk(t),null,t.onPush?32:16,i[n.index],n,o,l,a||null,null,null);return c.firstCreatePass&&yv(c,n,r.length-1),ph(i,p),i[n.index]=p}(Pe,g,ye,Ce,q,a,l);me=vx(U,pn),g&&function Uz(n,e,t,r){if(r)g_(n,t,["ng-version",nk.full]);else{const{attrs:i,classes:o}=function BW(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Hi(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&g_(n,t,i),o&&o.length>0&&kD(n,t,o.join(" "))}}(l,ye,g,r),void 0!==t&&function Bz(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(me,this.ngContentSelectors,t),ae=function jz(n,e,t,r,i,o){const s=cr(),a=i[Be],c=ti(s,i);Dk(a,i,s,t,null,r);for(let p=0;p<t.length;p++)Tr(ua(i,a,s.directiveStart+p,s),i);kk(a,i,s),c&&Tr(c,i);const l=ua(i,a,s.directiveStart+s.componentOffset,s);if(n[Mn]=i[Mn]=l,null!==o)for(const p of o)p(l,e);return pv(a,s,n),l}(lt,ye,Ce,be,q,[Hz]),hv(U,q,null)}finally{h_()}return new Nz(this.componentType,ae,Rc(me,q),q,me)}}class Nz extends pW{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new Rz(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;Sv(o[Be],o,i,e,t),xk(o,this._tNode.index)}}get injector(){return new yc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Hz(){const n=cr();$f(ke()[Be],n)}function Mt(n){let e=function Fk(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Bi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=Cv(n.inputs),s.declaredInputs=Cv(n.declaredInputs),s.outputs=Cv(n.outputs);const a=i.hostBindings;a&&Gz(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&Wz(n,c),l&&zz(n,l),Gg(n.inputs,i.inputs),Gg(n.declaredInputs,i.declaredInputs),Gg(n.outputs,i.outputs),Bi(i)&&i.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Mt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function $z(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=iu(i.hostAttrs,t=iu(t,i.hostAttrs))}}(r)}function Cv(n){return n===Oo?{}:n===Ut?[]:n}function Wz(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function zz(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function Gz(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Sr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ur(n,e,t,r){const i=ke();return Sr(i,_c(),e)&&(At(),uo(yn(),i,n,e,t,r)),ur}function zn(n,e,t,r,i,o,s,a){const c=ke(),l=At(),p=n+pn,g=l.firstCreatePass?function n4(n,e,t,r,i,o,s,a,c){const l=e.consts,p=Nc(e,n,4,s||null,Is(l,a));vv(e,t,p,Is(l,c)),$f(e,p);const g=p.tView=_v(2,p,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}(p,l,c,e,t,r,i,o,s):l.data[p];so(g,!1);const O=c[wt].createComment("");nh(l,c,O,g),Tr(O,c),ph(c,c[p]=Ak(O,c,O,g)),Vf(g)&&mv(l,c,g),null!=s&&gv(c,g,a)}function ga(n){return function gc(n,e){return n[e]}(function r$(){return at.lFrame.contextLView}(),pn+n)}function Pt(n,e,t){const r=ke();return Sr(r,_c(),e)&&oi(At(),yn(),r,n,e,r[wt],t,!1),Pt}function xv(n,e,t,r,i){const s=i?"class":"style";Sv(n,t,e.inputs[s],s,r)}function gt(n,e,t,r){const i=ke(),o=At(),s=pn+n,a=i[wt],c=o.firstCreatePass?function i4(n,e,t,r,i,o){const s=e.consts,c=Nc(e,n,2,r,Is(s,i));return vv(e,t,c,Is(s,o)),null!==c.attrs&&gh(c,c.attrs,!1),null!==c.mergedAttrs&&gh(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,t,r):o.data[s],l=i[s]=V_(a,e,function p$(){return at.lFrame.currentNamespace}()),p=Vf(c);return so(c,!0),AD(a,l,c),32!=(32&c.flags)&&nh(o,i,l,c),0===function JH(){return at.lFrame.elementDepthCount}()&&Tr(l,i),function ZH(){at.lFrame.elementDepthCount++}(),p&&(mv(o,i,c),pv(o,c,i)),null!==r&&gv(i,c),gt}function vt(){let n=cr();a_()?c_():(n=n.parent,so(n,!1));const e=n;!function e$(){at.lFrame.elementDepthCount--}();const t=At();return t.firstCreatePass&&($f(t,n),i_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function v$(n){return 0!=(8&n.flags)}(e)&&xv(t,e,ke(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function y$(n){return 0!=(16&n.flags)}(e)&&xv(t,e,ke(),e.stylesWithoutHost,!1),vt}function Rn(n,e,t,r){return gt(n,e,t,r),vt(),Rn}function Av(){return ke()}function bu(n){return!!n&&"function"==typeof n.then}const Mv=function Xk(n){return!!n&&"function"==typeof n.subscribe};function gn(n,e,t,r){const i=ke(),o=At(),s=cr();return function Zk(n,e,t,r,i,o,s){const a=Vf(r),l=n.firstCreatePass&&Rk(n),p=e[Mn],g=Mk(e);let O=!0;if(3&r.type||s){const ae=ti(r,e),me=s?s(ae):ae,ye=g.length,Ce=s?Pe=>s(ar(Pe[r.index])):r.index;let be=null;if(!s&&a&&(be=function s4(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[fc],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==be)(be.__ngLastListenerFn__||be).__ngNextListenerFn__=o,be.__ngLastListenerFn__=o,O=!1;else{o=tA(r,e,p,o,!1);const Pe=t.listen(me,i,o);g.push(o,Pe),l&&l.push(i,Ce,ye,ye+1)}}else o=tA(r,e,p,o,!1);const U=r.outputs;let q;if(O&&null!==U&&(q=U[i])){const ae=q.length;if(ae)for(let me=0;me<ae;me+=2){const lt=e[q[me]][q[me+1]].subscribe(o),mt=g.length;g.push(o,lt),l&&l.push(i,r.index,mt,-(mt+1))}}}(o,i,i[wt],s,n,e,r),gn}function eA(n,e,t,r){try{return yi(6,e,t),!1!==t(r)}catch(i){return Ok(n,i),!1}finally{yi(7,e,t)}}function tA(n,e,t,r,i){return function o(s){if(s===Function)return r;Ev(n.componentOffset>-1?ni(n.index,e):e);let c=eA(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)c=eA(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&(s.preventDefault(),s.returnValue=!1),c}}function $i(n=1){return function c$(n){return(at.lFrame.contextLView=function l$(n,e){for(;n>0;)e=e[hc],n--;return e}(n,at.lFrame.contextLView))[Mn]}(n)}function a4(n,e){let t=null;const r=function NW(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ak(n,o,!0):VW(r,o))return i}else t=i}return t}function zc(n){const e=ke()[Er][wr];if(!e.projection){const r=e.projection=au(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=n?a4(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function Cr(n,e=0,t){const r=ke(),i=At(),o=Nc(i,pn+n,16,null,t||null);null===o.projection&&(o.projection=e),c_(),32!=(32&o.flags)&&function S3(n,e,t){DD(e[wt],0,e,t,yD(n,t,e),TD(t.parent||e[wr],t,e))}(i,r,o)}function bh(n,e){return n<<17|e<<2}function Ds(n){return n>>17&32767}function Pv(n){return 2|n}function _a(n){return(131068&n)>>2}function Ov(n,e){return-131069&n|e<<2}function Nv(n){return 1|n}function dA(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Ds(o):_a(o),c=!1;for(;0!==a&&(!1===c||s);){const p=n[a+1];h4(n[a],e)&&(c=!0,n[a+1]=r?Nv(p):Pv(p)),a=r?Ds(p):_a(p)}c&&(n[t+1]=r?Pv(o):Nv(o))}function h4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Cc(n,e)>=0}function Lv(n,e,t){return Wi(n,e,t,!1),Lv}function Ir(n,e){return Wi(n,e,null,!0),Ir}function Wi(n,e,t,r){const i=ke(),o=At(),s=function Vo(n){const e=at.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function yA(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Pr()],s=function vA(n,e){return e>=n.expandoStartIndex}(n,t);(function TA(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function E4(n,e,t,r){const i=function u_(n){const e=at.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=wu(t=Fv(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=Fv(i,n,e,t,r),null===o){let c=function T4(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==_a(r))return n[Ds(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=Fv(null,n,e,c[1],r),c=wu(c,e.attrs,r),function S4(n,e,t,r){n[Ds(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function C4(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=wu(r,n[o].hostAttrs,t);return wu(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function d4(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ds(s),c=_a(s);n[r]=t;let p,l=!1;if(Array.isArray(t)?(p=t[1],(null===p||Cc(t,p)>0)&&(l=!0)):p=t,i)if(0!==c){const O=Ds(n[a+1]);n[r+1]=bh(O,a),0!==O&&(n[O+1]=Ov(n[O+1],r)),n[a+1]=function l4(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=bh(a,0),0!==a&&(n[a+1]=Ov(n[a+1],r)),a=r;else n[r+1]=bh(c,0),0===a?a=r:n[c+1]=Ov(n[c+1],r),c=r;l&&(n[r+1]=Pv(n[r+1])),dA(n,p,r,!0),dA(n,p,r,!1),function f4(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Cc(o,e)>=0&&(t[r+1]=Nv(t[r+1]))}(e,p,n,r,o),s=bh(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==ct&&Sr(i,s,e)&&function wA(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],p=function u4(n){return 1==(1&n)}(l)?EA(c,e,t,i,_a(l),s):void 0;wh(p)||(wh(o)||function c4(n){return 2==(2&n)}(l)&&(o=EA(c,null,t,i,a,s)),function I3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Hr.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Hr.Important),n.setStyle(t,r,i,o))}}(r,s,jf(Pr(),t),i,o))}(o,o.data[Pr()],i,i[wt],n,i[s+1]=function D4(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=sn(ii(n)))),n}(e,t),r,s)}function Fv(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=wu(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function wu(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ri(n,s,!!t||e[++o]))}return void 0===n?null:n}function EA(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),p=l?c[1]:c,g=null===p;let O=t[i+1];O===ct&&(O=g?Ut:void 0);let U=g?S_(O,r):p===r?O:void 0;if(l&&!wh(U)&&(U=S_(c,r)),wh(U)&&(a=U,s))return a;const q=n[i+1];i=s?Ds(q):_a(q)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=S_(c,r))}return a}function wh(n){return void 0!==n}function Dn(n,e=""){const t=ke(),r=At(),i=n+pn,o=r.firstCreatePass?Nc(r,i,1,e,null):r.data[i],s=t[i]=function F_(n,e){return n.createText(e)}(t[wt],e);nh(r,t,s,o),so(o,!1)}function Eu(n){return Eh("",n,""),Eu}function Eh(n,e,t){const r=ke(),i=function Fc(n,e,t,r){return Sr(n,_c(),t)?e+ot(t)+r:ct}(r,n,e,t);return i!==ct&&function $o(n,e,t){const r=jf(e,n);!function gD(n,e,t){n.setValue(e,t)}(n[wt],r,t)}(r,Pr(),i),Eh}function Tu(n,e,t){const r=ke();return Sr(r,_c(),e)&&oi(At(),yn(),r,n,e,r[wt],t,!0),Tu}const qc="en-US";let WA=qc;function Uv(n,e,t,r,i){if(n=Ze(n),Array.isArray(n))for(let o=0;o<n.length;o++)Uv(n[o],e,t,r,i);else{const o=At(),s=ke();let a=pa(n)?n:Ze(n.provide),c=ZD(n);const l=cr(),p=1048575&l.providerIndexes,g=l.directiveStart,O=l.providerIndexes>>20;if(pa(n)||!n.multi){const U=new ru(c,i,we),q=Hv(a,e,i?p:p+O,g);-1===q?(b_(Yf(l,s),o,a),Bv(o,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(U),s.push(U)):(t[q]=U,s[q]=U)}else{const U=Hv(a,e,p+O,g),q=Hv(a,e,p,p+O),me=q>=0&&t[q];if(i&&!me||!i&&!(U>=0&&t[U])){b_(Yf(l,s),o,a);const ye=function G5(n,e,t,r,i){const o=new ru(n,t,we);return o.multi=[],o.index=e,o.componentProviders=0,mM(o,i,r&&!t),o}(i?z5:W5,t.length,i,r,c);!i&&me&&(t[q].providerFactory=ye),Bv(o,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(ye),s.push(ye)}else Bv(o,n,U>-1?U:q,mM(t[i?q:U],c,!i&&r));!i&&r&&me&&t[q].componentProviders++}}}function Bv(n,e,t,r){const i=pa(e),o=function aW(n){return!!n.useClass}(e);if(i||o){const c=(o?Ze(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const p=l.indexOf(t);-1===p?l.push(t,[r,c]):l[p+1].push(r,c)}else l.push(t,c)}}}function mM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Hv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function W5(n,e,t,r){return $v(this.multi,[])}function z5(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ua(t,t[Be],this.providerFactory.index,r);o=a.slice(0,s),$v(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],$v(i,o);return o}function $v(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Xt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function $5(n,e,t){const r=At();if(r.firstCreatePass){const i=Bi(n);Uv(t,r.data,r.blueprint,i,!0),Uv(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Yc{}class gM{}class _M extends Yc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Nk(this);const r=Jr(e);this._bootstrapComponents=Ho(r.bootstrap),this._r3Injector=pk(e,t,[{provide:Yc,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver}],sn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Wv extends gM{constructor(e){super(),this.moduleType=e}create(e){return new _M(this.moduleType,e)}}class q5 extends Yc{constructor(e,t,r){super(),this.componentFactoryResolver=new Nk(this),this.instance=null;const i=new JD([...e,{provide:Yc,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver}],t||uh(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function xh(n,e,t=null){return new q5(n,e,t).injector}let Y5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=qD(0,t.type),i=r.length>0?xh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=je({token:n,providedIn:"environment",factory:()=>new n(xe(lo))}),n})();function vM(n){n.getStandaloneInjector=e=>e.get(Y5).getOrCreateStandaloneInjector(n)}function Gv(n){return e=>{setTimeout(n,void 0,e)}}const _n=class w8 extends Y{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Gv(o),i&&(i=Gv(i)),s&&(s=Gv(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof m&&e.add(a),a}};function E8(){return this._results[Symbol.iterator]()}class Kv{get changes(){return this._changes||(this._changes=new _n)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Kv.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=E8)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function bi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function k$(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wo=(()=>{class n{}return n.__NG_ELEMENT_ID__=C8,n})();const T8=Wo,S8=class extends T8{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tView,i=fh(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[Zl]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[oo];return null!==s&&(i[oo]=s.createEmbeddedView(r)),hv(r,i,e),new _u(i)}};function C8(){return Dh(cr(),ke())}function Dh(n,e){return 4&n.type?new S8(e,n,Rc(n,e)):null}let Gi=(()=>{class n{}return n.__NG_ELEMENT_ID__=I8,n})();function I8(){return RM(cr(),ke())}const x8=Gi,AM=class extends x8{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Rc(this._hostTNode,this._hostLView)}get injector(){return new yc(this._hostTNode,this._hostLView)}get parentInjector(){const e=y_(this._hostTNode,this._hostLView);if(Lx(e)){const t=Kf(e,this._hostLView),r=Gf(e);return new yc(t[Be].data[r+8],t)}return new yc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=MM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Mr}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(e,t,r,i,o){const s=e&&!function su(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const g=t||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}const c=s?e:new vu(qt(e)),l=r||this.parentInjector;if(!o&&null==c.ngModule){const O=(s?l:this.parentInjector).get(lo,null);O&&(o=O)}const p=c.create(l,i,void 0,o);return this.insert(p.hostView,a),p}insert(e,t){const r=e._lView,i=r[Be];if(function XH(n){return Ui(n[xn])}(r)){const p=this.indexOf(e);if(-1!==p)this.detach(p);else{const g=r[xn],O=new AM(g,g[wr],g[xn]);O.detach(O.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function v3(n,e,t,r){const i=Mr+r,o=t.length;r>0&&(t[i-1][ji]=e),r<o-Mr?(e[ji]=t[i],qx(t,Mr+r,e)):(t.push(e),e[ji]=null),e[xn]=t;const s=e[Zl];null!==s&&t!==s&&function y3(n,e){const t=n[mc];e[Er]!==e[xn][xn][Er]&&(n[ux]=!0),null===t?n[mc]=[e]:t.push(e)}(s,e);const a=e[oo];null!==a&&a.insertView(n),e[_t]|=64}(i,r,s,o);const a=H_(o,s),c=r[wt],l=th(c,s[Lf]);return null!==l&&function m3(n,e,t,r,i,o){r[Lo]=i,r[wr]=e,fu(n,r,t,1,i,o)}(i,s[wr],c,r,l,a),e.attachToViewContainerRef(),qx(qv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=MM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=j_(this._lContainer,t);r&&(Xf(qv(this._lContainer),t),vD(r[Be],r))}detach(e){const t=this._adjustIndex(e,-1),r=j_(this._lContainer,t);return r&&null!=Xf(qv(this._lContainer),t)?new _u(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function MM(n){return n[Ff]}function qv(n){return n[Ff]||(n[Ff]=[])}function RM(n,e){let t;const r=e[n.index];if(Ui(r))t=r;else{let i;if(8&n.type)i=ar(r);else{const o=e[wt];i=o.createComment("");const s=ti(n,e);fa(o,th(o,s),i,function T3(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=Ak(r,e,i,n),ph(e,t)}return new AM(t,n,e)}class Yv{constructor(e){this.queryList=e,this.matches=null}clone(){return new Yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qv{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new Qv(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==FM(e,t).matches&&this.queries[t].setDirty()}}class PM{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Xv{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new Xv(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Jv{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Jv(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,D8(t,o)),this.matchTNodeWithReadOption(e,t,Qf(t,e,o,!1,!1))}else r===Wo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Qf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===mn||i===Gi||i===Wo&&4&t.type)this.addMatch(t.index,-2);else{const o=Qf(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function D8(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function A8(n,e,t,r){return-1===t?function k8(n,e){return 11&n.type?Rc(n,e):4&n.type?Dh(n,e):null}(e,n):-2===t?function M8(n,e,t){return t===mn?Rc(e,n):t===Wo?Dh(e,n):t===Gi?RM(e,n):void 0}(n,e,r):ua(n,n[Be],t,e)}function OM(n,e,t,r){const i=e[oo].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:A8(e,o[l],s[c+1],t.metadata.read))}i.matches=a}return i.matches}function Zv(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=OM(n,e,i,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const l=o[a+1],p=e[-c];for(let g=Mr;g<p.length;g++){const O=p[g];O[Zl]===O[xn]&&Zv(O[Be],O,l,r)}if(null!==p[mc]){const g=p[mc];for(let O=0;O<g.length;O++){const U=g[O];Zv(U[Be],U,l,r)}}}}}return r}function Jn(n){const e=ke(),t=At(),r=Ix();d_(r+1);const i=FM(t,r);if(n.dirty&&function QH(n){return 4==(4&n[_t])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?Zv(t,e,r,[]):OM(t,e,i,r);n.reset(o,vW),n.notifyOnChanges()}return!0}return!1}function mo(n,e,t){const r=At();r.firstCreatePass&&(LM(r,new PM(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),NM(r,ke(),e)}function zo(n,e,t,r){const i=At();if(i.firstCreatePass){const o=cr();LM(i,new PM(e,t,r),o.index),function P8(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}NM(i,ke(),t)}function Zn(){return function R8(n,e){return n[oo].queries[e].queryList}(ke(),Ix())}function NM(n,e,t){const r=new Kv(4==(4&t));Sk(n,e,r,r.destroy),null===e[oo]&&(e[oo]=new Qv),e[oo].queries.push(new Yv(r))}function LM(n,e,t){null===n.queries&&(n.queries=new Xv),n.queries.track(new Jv(e,t))}function FM(n,e){return n.queries.getByIndex(e)}function VM(n,e){return Dh(n,e)}function Ah(...n){}const ya=new Re("Application Initializer");let Mh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Ah,this.reject=Ah,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(bu(o))t.push(o);else if(Mv(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(xe(ya,8))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ru=new Re("AppId",{providedIn:"root",factory:function nR(){return`${oy()}${oy()}${oy()}`}});function oy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rR=new Re("Platform Initializer"),ks=new Re("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Jc=new Re("AnimationModuleType");let Z8=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const go=new Re("LocaleId",{providedIn:"root",factory:()=>st(go,et.Optional|et.SkipSelf)||function eG(){return typeof $localize<"u"&&$localize.locale||qc}()});class nG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let iR=(()=>{class n{compileModuleSync(t){return new Wv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Ho(Jr(t).declarations).reduce((s,a)=>{const c=qt(a);return c&&s.push(new vu(c)),s},[]);return new nG(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oG=(()=>Promise.resolve(0))();function sy(n){typeof Zone>"u"?oG.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function sG(){let n=hn.requestAnimationFrame,e=hn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function lG(n){const e=()=>{!function cG(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(hn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,cy(n),n.isCheckStableRunning=!0,ay(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),cy(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return aR(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),cR(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return aR(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),cR(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,cy(n),ay(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new Ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,aG,Ah,Ah);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const aG={};function ay(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cy(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function aR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function cR(n){n._nesting--,ay(n)}class uG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const lR=new Re(""),Rh=new Re("");let dy,ly=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dy||(function dG(n){dy=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),sy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sy(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(xe(it),xe(uy),xe(Rh))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})(),uy=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return dy?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Go=!1;let As=null;const uR=new Re("AllowMultipleToken"),fy=new Re("PlatformDestroyListeners"),dR=new Re("appBootstrapListener");class fR{constructor(e,t){this.name=e,this.token=t}}function pR(n,e,t=[]){const r=`Platform: ${e}`,i=new Re(r);return(o=[])=>{let s=hy();if(!s||s.injector.get(uR,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function pG(n){if(As&&!As.get(uR,!1))throw new Ie(400,!1);As=n;const e=n.get(gR);(function hR(n){const e=n.get(rR,null);e&&e.forEach(t=>t())})(n)}(function mR(n=[],e){return bn.create({name:e,providers:[{provide:ev,useValue:"platform"},{provide:fy,useValue:new Set([()=>As=null])},...n]})}(a,r))}return function gG(n){const e=hy();if(!e)throw new Ie(401,!1);return e}()}}function hy(){return As?.get(gR)??null}let gR=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function vR(n,e){let t;return t="noop"===n?new uG:("zone.js"===n?void 0:n)||new it(e),t}(r?.ngZone,function _R(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:it,useValue:i}];return i.run(()=>{const s=bn.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),c=a.injector.get(Bo,null);if(!c)throw new Ie(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:p=>{c.handleError(p)}});a.onDestroy(()=>{Ph(this._modules,a),l.unsubscribe()})}),function yR(n,e,t){try{const r=t();return bu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(c,i,()=>{const l=a.injector.get(Mh);return l.runInitializers(),l.donePromise.then(()=>(function zA(n){_i(n,"Expected localeId to be defined"),"string"==typeof n&&(WA=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(go,qc)||qc),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=bR({},r);return function fG(n,e,t){const r=new Wv(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Pu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Ie(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(fy,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(xe(bn))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function bR(n,e){return Array.isArray(e)?e.reduce(bR,n):{...n,...e}}let Pu=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ie(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new ie(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{it.assertNotInAngularZone(),sy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{it.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=QI(o,s.pipe(XI()))}bootstrap(t,r){const i=t instanceof ek;if(!this._injector.get(Mh).done){!i&&function dc(n){const e=qt(n)||br(n)||Ar(n);return null!==e&&e.standalone}(t);throw new Ie(405,Go)}let s;s=i?t:this._injector.get(Mc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function hG(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Yc),l=s.create(bn.NULL,[],r||s.selector,a),p=l.location.nativeElement,g=l.injector.get(lR,null);return g?.registerApplication(p),l.onDestroy(()=>{this.detachView(l.hostView),Ph(this.components,l),g?.unregisterApplication(p)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Ph(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(dR,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ph(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ie(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(xe(it),xe(lo),xe(Bo))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ph(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Ou=(()=>{class n{}return n.__NG_ELEMENT_ID__=vG,n})();function vG(n){return function yG(n,e,t){if(tu(n)&&!t){const r=ni(n.index,e);return new _u(r,r)}return 47&n.type?new _u(e[Er],e):null}(cr(),ke(),16==(16&n))}const RG=pR(null,"core",[]);let PG=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(xe(Pu))},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({}),n})();function Zc(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let vy=null;function Ko(){return vy}class LG{}const Jt=new Re("DocumentToken");let yy=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(){return function FG(){return xe(MR)}()},providedIn:"platform"}),n})();const VG=new Re("Location Initialized");let MR=(()=>{class n extends yy{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ko().getBaseHref(this._doc)}onPopState(t){const r=Ko().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ko().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){RR()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){RR()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt))},n.\u0275prov=je({token:n,factory:function(){return function jG(){return new MR(xe(Jt))}()},providedIn:"platform"}),n})();function RR(){return!!window.history.pushState}function by(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function PR(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qo(n){return n&&"?"!==n[0]?"?"+n:n}let wa=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(){return st(NR)},providedIn:"root"}),n})();const OR=new Re("appBaseHref");let NR=(()=>{class n extends wa{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??st(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return by(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+qo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+qo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(yy),xe(OR,8))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UG=(()=>{class n extends wa{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=by(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+qo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+qo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(yy),xe(OR,8))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})(),wy=(()=>{class n{constructor(t){this._subject=new _n,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $G(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(PR(LR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qo(r))}normalize(t){return n.stripTrailingSlash(function HG(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,LR(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qo,n.joinWithSlash=by,n.stripTrailingSlash=PR,n.\u0275fac=function(t){return new(t||n)(xe(wa))},n.\u0275prov=je({token:n,factory:function(){return function BG(){return new wy(xe(wa))}()},providedIn:"root"}),n})();function LR(n){return n.replace(/\/index.html$/,"")}function zR(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}let Ry=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new M6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){QR("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){QR("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(we(Gi),we(Wo))},n.\u0275dir=Ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class M6{constructor(){this.$implicit=null,this.ngIf=null}}function QR(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${sn(e)}'.`)}class Py{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Gh=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const r of this._defaultViews)r.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ge({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),XR=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Py(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(we(Gi),we(Wo),we(Gh,9))},n.\u0275dir=Ge({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),ZR=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=r.createEmbeddedView(i,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(we(Gi))},n.\u0275dir=Ge({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ei]}),n})(),Ly=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({}),n})();const tP="browser";function Fy(n){return n===tP}let s7=(()=>{class n{}return n.\u0275prov=je({token:n,providedIn:"root",factory:()=>new a7(xe(Jt),window)}),n})();class a7{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function c7(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=nP(this.window.history)||nP(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function nP(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class rP{}class N7 extends LG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Uy extends N7{static makeCurrent(){!function NG(n){vy||(vy=n)}(new Uy)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function L7(){return ju=ju||document.querySelector("base"),ju?ju.getAttribute("href"):null}();return null==t?null:function F7(n){Yh=Yh||document.createElement("a"),Yh.setAttribute("href",n);const e=Yh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ju=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zR(document.cookie,e)}}let Yh,ju=null;const cP=new Re("TRANSITION_ID"),j7=[{provide:ya,useFactory:function V7(n,e,t){return()=>{t.get(Mh).donePromise.then(()=>{const r=Ko(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[cP,Jt,bn],multi:!0}];let B7=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const Qh=new Re("EventManagerPlugins");let Xh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(xe(Qh),xe(it))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();class lP{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Ko().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let uP=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let o=i.get(t)??0;return o+=r,o>0?i.set(t,o):i.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})(),Uu=(()=>{class n extends uP{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(o=>o.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const By={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hy=/%COMP%/g,hP=new Re("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function pP(n,e){return e.flat(100).map(t=>t.replace(Hy,n))}function mP(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jh=(()=>{class n{constructor(t,r,i,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new $y(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof vP?i.applyToHost(t):i instanceof Wy&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.eventManager,a=this.sharedStylesHost,c=this.removeStylesOnCompDestory;switch(r.encapsulation){case Fi.Emulated:o=new vP(s,a,r,this.appId,c);break;case Fi.ShadowDom:return new q7(s,a,t,r);default:o=new Wy(s,a,r,c)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(xe(Xh),xe(Uu),xe(Ru),xe(hP))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();class $y{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(By[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(_P(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_P(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=By[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=By[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Hr.DashCase|Hr.Important)?e.style.setProperty(t,r,i&Hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mP(r)):this.eventManager.addEventListener(e,t,mP(r))}}function _P(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class q7 extends $y{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=pP(i.id,i.styles);for(const s of o){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wy extends $y{constructor(e,t,r,i,o=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=pP(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class vP extends Wy{constructor(e,t,r,i,o){const s=i+"-"+r.id;super(e,t,r,o,s),this.contentAttr=function z7(n){return"_ngcontent-%COMP%".replace(Hy,n)}(s),this.hostAttr=function G7(n){return"_nghost-%COMP%".replace(Hy,n)}(s)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Y7=(()=>{class n extends lP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const yP=["alt","control","meta","shift"],Q7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},X7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let J7=(()=>{class n extends lP{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ko().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),yP.forEach(l=>{const p=r.indexOf(l);p>-1&&(r.splice(p,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Q7[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),yP.forEach(s=>{s!==i&&(0,X7[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const n9=pR(RG,"browser",[{provide:ks,useValue:tP},{provide:rR,useValue:function Z7(){Uy.makeCurrent()},multi:!0},{provide:Jt,useFactory:function t9(){return function M3(n){G_=n}(document),document},deps:[]}]),EP=new Re(""),TP=[{provide:Rh,useClass:class U7{addToWindow(e){hn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},hn.getAllAngularTestabilities=()=>e.getAllTestabilities(),hn.getAllAngularRootElements=()=>e.getAllRootElements(),hn.frameworkStabilizers||(hn.frameworkStabilizers=[]),hn.frameworkStabilizers.push(r=>{const i=hn.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ko().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:lR,useClass:ly,deps:[it,uy,Rh]},{provide:ly,useClass:ly,deps:[it,uy,Rh]}],SP=[{provide:ev,useValue:"root"},{provide:Bo,useFactory:function e9(){return new Bo},deps:[]},{provide:Qh,useClass:Y7,multi:!0,deps:[Jt,it,ks]},{provide:Qh,useClass:J7,multi:!0,deps:[Jt]},{provide:Jh,useClass:Jh,deps:[Xh,Uu,Ru,hP]},{provide:mu,useExisting:Jh},{provide:uP,useExisting:Uu},{provide:Uu,useClass:Uu,deps:[Jt]},{provide:Xh,useClass:Xh,deps:[Qh,it]},{provide:rP,useClass:B7,deps:[]},[]];let CP=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ru,useValue:t.appId},{provide:cP,useExisting:Ru},j7]}}}return n.\u0275fac=function(t){return new(t||n)(xe(EP,12))},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[...SP,...TP],imports:[Ly,PG]}),n})(),Gy=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt))},n.\u0275prov=je({token:n,factory:function(t){let r=null;return r=t?new t:function i9(){return new Gy(xe(Jt))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(t){let r=null;return r=t?new(t||n):xe(DP),r},providedIn:"root"}),n})(),DP=(()=>{class n extends qy{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Ht.NONE:return r;case Ht.HTML:return co(r,"HTML")?ii(r):BD(this._doc,String(r)).toString();case Ht.STYLE:return co(r,"Style")?ii(r):r;case Ht.SCRIPT:if(co(r,"Script"))return ii(r);throw new Error("unsafe value used in a script context");case Ht.URL:return co(r,"URL")?ii(r):sh(String(r));case Ht.RESOURCE_URL:if(co(r,"ResourceURL"))return ii(r);throw new Error(`unsafe value used in a resource URL context (see ${If})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${If})`)}}bypassSecurityTrustHtml(t){return function V3(n){return new R3(n)}(t)}bypassSecurityTrustStyle(t){return function j3(n){return new P3(n)}(t)}bypassSecurityTrustScript(t){return function U3(n){return new O3(n)}(t)}bypassSecurityTrustUrl(t){return function B3(n){return new N3(n)}(t)}bypassSecurityTrustResourceUrl(t){return function H3(n){return new L3(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt))},n.\u0275prov=je({token:n,factory:function(t){let r=null;return r=t?new t:function l9(n){return new DP(n.get(Jt))}(xe(bn)),r},providedIn:"root"}),n})();function $e(...n){return Vn(n,Kl(n))}function Rs(n,e){return k(e)?Xn(n,e,1):Xn(n,1)}function Si(n,e){return le((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}class Zh{}class Yy{}class _o{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof _o?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new _o;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof _o?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class u9{encodeKey(e){return kP(e)}encodeValue(e){return kP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const f9=/%(\d[a-f0-9])/gi,h9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kP(n){return encodeURIComponent(n).replace(f9,(e,t)=>h9[t]??e)}function ep(n){return`${n}`}class Ps{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new u9,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function d9(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(ep):[ep(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ps({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ep(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ep(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class p9{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function AP(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function MP(n){return typeof Blob<"u"&&n instanceof Blob}function RP(n){return typeof FormData<"u"&&n instanceof FormData}class Bu{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function m9(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new _o),this.context||(this.context=new p9),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Ps,this.urlWithParams=t}serializeBody(){return null===this.body?null:AP(this.body)||MP(this.body)||RP(this.body)||function g9(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ps?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||RP(this.body)?null:MP(this.body)?this.body.type||null:AP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ps?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const p=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((g,O)=>g.set(O,e.setHeaders[O]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((g,O)=>g.set(O,e.setParams[O]),l)),new Bu(t,r,o,{params:l,headers:c,context:p,reportProgress:a,responseType:i,withCredentials:s})}}var Bn=(()=>((Bn=Bn||{})[Bn.Sent=0]="Sent",Bn[Bn.UploadProgress=1]="UploadProgress",Bn[Bn.ResponseHeader=2]="ResponseHeader",Bn[Bn.DownloadProgress=3]="DownloadProgress",Bn[Bn.Response=4]="Response",Bn[Bn.User=5]="User",Bn))();class Qy{constructor(e,t=200,r="OK"){this.headers=e.headers||new _o,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Xy extends Qy{constructor(e={}){super(e),this.type=Bn.ResponseHeader}clone(e={}){return new Xy({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class tp extends Qy{constructor(e={}){super(e),this.type=Bn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new tp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class PP extends Qy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Jy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let np=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Bu)o=t;else{let c,l;c=i.headers instanceof _o?i.headers:new _o(i.headers),i.params&&(l=i.params instanceof Ps?i.params:new Ps({fromObject:i.params})),o=new Bu(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=$e(o).pipe(Rs(c=>this.handler.handle(c)));if(t instanceof Bu||"events"===i.observe)return s;const a=s.pipe(Si(c=>c instanceof tp));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(pe(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(pe(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ps).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Jy(i,r))}post(t,r,i={}){return this.request("POST",t,Jy(i,r))}put(t,r,i={}){return this.request("PUT",t,Jy(i,r))}}return n.\u0275fac=function(t){return new(t||n)(xe(Zh))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();function OP(n,e){return e(n)}function _9(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const y9=new Re("HTTP_INTERCEPTORS"),Hu=new Re("HTTP_INTERCEPTOR_FNS");function b9(){let n=null;return(e,t)=>(null===n&&(n=(st(y9,{optional:!0})??[]).reduceRight(_9,OP)),n(e,t))}let NP=(()=>{class n extends Zh{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Hu)));this.chain=r.reduceRight((i,o)=>function v9(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(i,o,this.injector),OP)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(xe(Yy),xe(lo))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const S9=/^\)\]\}',?\n/;let FP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ie(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,q)=>i.setRequestHeader(U,q.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const o=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const U=i.statusText||"OK",q=new _o(i.getAllResponseHeaders()),ae=function C9(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new Xy({headers:q,status:i.status,statusText:U,url:ae}),s},c=()=>{let{headers:U,status:q,statusText:ae,url:me}=a(),ye=null;204!==q&&(ye=typeof i.response>"u"?i.responseText:i.response),0===q&&(q=ye?200:0);let Ce=q>=200&&q<300;if("json"===t.responseType&&"string"==typeof ye){const be=ye;ye=ye.replace(S9,"");try{ye=""!==ye?JSON.parse(ye):null}catch(Pe){ye=be,Ce&&(Ce=!1,ye={error:Pe,text:ye})}}Ce?(r.next(new tp({body:ye,headers:U,status:q,statusText:ae,url:me||void 0})),r.complete()):r.error(new PP({error:ye,headers:U,status:q,statusText:ae,url:me||void 0}))},l=U=>{const{url:q}=a(),ae=new PP({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:q||void 0});r.error(ae)};let p=!1;const g=U=>{p||(r.next(a()),p=!0);let q={type:Bn.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(q.total=U.total),"text"===t.responseType&&i.responseText&&(q.partialText=i.responseText),r.next(q)},O=U=>{let q={type:Bn.UploadProgress,loaded:U.loaded};U.lengthComputable&&(q.total=U.total),r.next(q)};return i.addEventListener("load",c),i.addEventListener("error",l),i.addEventListener("timeout",l),i.addEventListener("abort",l),t.reportProgress&&(i.addEventListener("progress",g),null!==o&&i.upload&&i.upload.addEventListener("progress",O)),i.send(o),r.next({type:Bn.Sent}),()=>{i.removeEventListener("error",l),i.removeEventListener("abort",l),i.removeEventListener("load",c),i.removeEventListener("timeout",l),t.reportProgress&&(i.removeEventListener("progress",g),null!==o&&i.upload&&i.upload.removeEventListener("progress",O)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(xe(rP))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const Zy=new Re("XSRF_ENABLED"),VP=new Re("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),jP=new Re("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class UP{}let D9=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=zR(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt),xe(ks),xe(VP))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();function k9(n,e){const t=n.url.toLowerCase();if(!st(Zy)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=st(UP).getToken(),i=st(jP);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Nn=(()=>((Nn=Nn||{})[Nn.Interceptors=0]="Interceptors",Nn[Nn.LegacyInterceptors=1]="LegacyInterceptors",Nn[Nn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Nn[Nn.NoXsrfProtection=3]="NoXsrfProtection",Nn[Nn.JsonpSupport=4]="JsonpSupport",Nn[Nn.RequestsMadeViaParent=5]="RequestsMadeViaParent",Nn))();function el(n,e){return{\u0275kind:n,\u0275providers:e}}function A9(...n){const e=[np,FP,NP,{provide:Zh,useExisting:NP},{provide:Yy,useExisting:FP},{provide:Hu,useValue:k9,multi:!0},{provide:Zy,useValue:!0},{provide:UP,useClass:D9}];for(const t of n)e.push(...t.\u0275providers);return function iW(n){return{\u0275providers:n}}(e)}const BP=new Re("LEGACY_INTERCEPTOR_FN");let R9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[A9(el(Nn.LegacyInterceptors,[{provide:BP,useFactory:b9},{provide:Hu,useExisting:BP,multi:!0}]))]}),n})();class si extends Y{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const rp=D(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:P9}=Array,{getPrototypeOf:O9,prototype:N9,keys:L9}=Object;function HP(n){if(1===n.length){const e=n[0];if(P9(e))return{args:e,keys:null};if(function F9(n){return n&&"object"==typeof n&&O9(n)===N9}(e)){const t=L9(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:V9}=Array;function $P(n){return pe(e=>function j9(n,e){return V9(e)?n(...e):n(e)}(n,e))}function WP(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function eb(...n){const e=Kl(n),t=qI(n),{args:r,keys:i}=HP(n);if(0===r.length)return Vn([],e);const o=new ie(function U9(n,e,t=J){return r=>{zP(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)zP(e,()=>{const l=Vn(n[c],e);let p=!1;l.subscribe(_e(r,g=>{o[c]=g,p||(p=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>WP(i,s):J));return t?o.pipe($P(t)):o}function zP(n,e,t){n?Po(t,n,e):e()}function ip(...n){return function B9(){return lc(1)}()(Vn(n,Kl(n)))}function GP(n){return new ie(e=>{on(n()).subscribe(e)})}function tl(n,e){const t=k(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function tb(){return le((n,e)=>{let t=null;n._refCount++;const r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class KP extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ce(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new m;const t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=m.EMPTY)}return e}refCount(){return tb()(this)}}function Ci(n,e){return le((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(_e(r,c=>{i?.unsubscribe();let l=0;const p=o++;on(n(c,p)).subscribe(i=_e(r,g=>r.next(e?e(c,g,p,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ea(n){return n<=0?()=>Li:le((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function nb(...n){const e=Kl(n);return le((t,r)=>{(e?ip(n,t,e):ip(n,t)).subscribe(r)})}function op(n){return le((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qP(n=H9){return le((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function H9(){return new rp}function Os(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Si((i,o)=>n(i,o,r)):J,Ea(1),t?op(e):qP(()=>new rp))}function Hn(n,e,t){const r=k(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(_e(o,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),o.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):J}function Qo(n){return le((e,t)=>{let o,r=null,i=!1;r=e.subscribe(_e(t,void 0,void 0,s=>{o=on(n(s,Qo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function YP(n,e){return le(function $9(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(_e(s,p=>{const g=l++;c=a?n(c,p,g):(a=!0,p),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}function rb(n){return n<=0?()=>Li:le((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function QP(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Si((i,o)=>n(i,o,r)):J,rb(1),t?op(e):qP(()=>new rp))}function sp(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ht="primary",$u=Symbol("RouteTitle");class G9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function nl(n){return new G9(n)}function K9(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!XP(n[i],e[i]))return!1;return!0}function XP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function JP(n){return Array.prototype.concat.apply([],n)}function ZP(n){return n.length>0?n[n.length-1]:null}function dr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ns(n){return Mv(n)?n:bu(n)?Vn(Promise.resolve(n)):$e(n)}const ap=!1,Y9={exact:function nO(n,e,t){if(!Ta(n.segments,e.segments)||!cp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nO(n.children[r],e.children[r],t))return!1;return!0},subset:rO},eO={exact:function Q9(n,e){return vo(n,e)},subset:function X9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>XP(n[t],e[t]))},ignored:()=>!0};function tO(n,e,t){return Y9[t.paths](n.root,e.root,t.matrixParams)&&eO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rO(n,e,t){return iO(n,e,e.segments,t)}function iO(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ta(i,t)||e.hasChildren()||!cp(i,t,r))}if(n.segments.length===t.length){if(!Ta(n.segments,t)||!cp(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!rO(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ta(n.segments,i)&&cp(n.segments,i,r)&&n.children[ht])&&iO(n.children[ht],e,o,r)}}function cp(n,e,t){return e.every((r,i)=>eO[t](n[i].parameters,r.parameters))}class Ls{constructor(e=new St([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nl(this.queryParams)),this._queryParamMap}toString(){return eK.serialize(this)}}class St{constructor(e,t){this.segments=e,this.children=t,this.parent=null,dr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lp(this)}}class Wu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=nl(this.parameters)),this._parameterMap}toString(){return aO(this)}}function Ta(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(){return new ib},providedIn:"root"}),n})();class ib{parse(e){const t=new lK(e);return new Ls(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gu(e.root,!0)}`,r=function rK(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${up(t)}=${up(i)}`).join("&"):`${up(t)}=${up(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function tK(n){return encodeURI(n)}(e.fragment)}`:""}`}}const eK=new ib;function lp(n){return n.segments.map(e=>aO(e)).join("/")}function Gu(n,e){if(!n.hasChildren())return lp(n);if(e){const t=n.children[ht]?Gu(n.children[ht],!1):"",r=[];return dr(n.children,(i,o)=>{o!==ht&&r.push(`${o}:${Gu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Z9(n,e){let t=[];return dr(n.children,(r,i)=>{i===ht&&(t=t.concat(e(r,i)))}),dr(n.children,(r,i)=>{i!==ht&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ht?[Gu(n.children[ht],!1)]:[`${i}:${Gu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ht]?`${lp(n)}/${t[0]}`:`${lp(n)}/(${t.join("//")})`}}function oO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function up(n){return oO(n).replace(/%3B/gi,";")}function ob(n){return oO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dp(n){return decodeURIComponent(n)}function sO(n){return dp(n.replace(/\+/g,"%20"))}function aO(n){return`${ob(n.path)}${function nK(n){return Object.keys(n).map(e=>`;${ob(e)}=${ob(n[e])}`).join("")}(n.parameters)}`}const iK=/^[^\/()?;=#]+/;function fp(n){const e=n.match(iK);return e?e[0]:""}const oK=/^[^=?&#]+/,aK=/^[^&#]+/;class lK{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new St([],{}):new St([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ht]=new St(e,t)),r}parseSegment(){const e=fp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Ie(4009,ap);return this.capture(e),new Wu(dp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fp(this.remaining);i&&(r=i,this.capture(r))}e[dp(t)]=dp(r)}parseQueryParam(e){const t=function sK(n){const e=n.match(oK);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function cK(n){const e=n.match(aK);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=sO(t),o=sO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Ie(4010,ap);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ht);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ht]:new St([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Ie(4011,ap)}}function sb(n){return n.segments.length>0?new St([],{[ht]:n}):n}function hp(n){const e={};for(const r of Object.keys(n.children)){const o=hp(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function uK(n){if(1===n.numberOfChildren&&n.children[ht]){const e=n.children[ht];return new St(n.segments.concat(e.segments),e.children)}return n}(new St(n.segments,e))}function Sa(n){return n instanceof Ls}const ab=!1;function dK(n,e,t,r,i){if(0===t.length)return rl(e.root,e.root,e.root,r,i);const o=function fO(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return dr(o.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new dO(t,e,r)}(t);return o.toRoot()?rl(e.root,e.root,new St([],{}),r,i):function s(c){const l=function hK(n,e,t,r){if(n.isAbsolute)return new il(e.root,!0,0);if(-1===r)return new il(t,t===e.root,0);return function hO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Ie(4005,ab&&"Invalid number of '../'");i=r.segments.length}return new il(r,!1,i-o)}(t,r+(Ku(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,c),p=l.processChildren?ol(l.segmentGroup,l.index,o.commands):cb(l.segmentGroup,l.index,o.commands);return rl(e.root,l.segmentGroup,p,r,i)}(n.snapshot?._lastPathIndex)}function Ku(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qu(n){return"object"==typeof n&&null!=n&&n.outlets}function rl(n,e,t,r,i){let s,o={};r&&dr(r,(c,l)=>{o[l]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),s=n===e?t:uO(n,e,t);const a=sb(hp(s));return new Ls(a,o,i)}function uO(n,e,t){const r={};return dr(n.children,(i,o)=>{r[o]=i===e?t:uO(i,e,t)}),new St(n.segments,r)}class dO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ku(r[0]))throw new Ie(4003,ab&&"Root segment cannot have matrix parameters");const i=r.find(qu);if(i&&i!==ZP(r))throw new Ie(4004,ab&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class il{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cb(n,e,t){if(n||(n=new St([],{})),0===n.segments.length&&n.hasChildren())return ol(n,e,t);const r=function mK(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(qu(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!mO(c,l,s))return o;r+=2}else{if(!mO(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new St(n.segments.slice(0,r.pathIndex),{});return o.children[ht]=new St(n.segments.slice(r.pathIndex),n.children),ol(o,0,i)}return r.match&&0===i.length?new St(n.segments,{}):r.match&&!n.hasChildren()?lb(n,e,t):r.match?ol(n,0,i):lb(n,e,t)}function ol(n,e,t){if(0===t.length)return new St(n.segments,{});{const r=function pK(n){return qu(n[0])?n[0].outlets:{[ht]:n}}(t),i={};return!r[ht]&&n.children[ht]&&1===n.numberOfChildren&&0===n.children[ht].segments.length?ol(n.children[ht],e,t):(dr(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=cb(n.children[s],e,o))}),dr(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new St(n.segments,i))}}function lb(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(qu(o)){const c=gK(o.outlets);return new St(r,c)}if(0===i&&Ku(t[0])){r.push(new Wu(n.segments[e].path,pO(t[0]))),i++;continue}const s=qu(o)?o.outlets[ht]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Ku(a)?(r.push(new Wu(s,pO(a))),i+=2):(r.push(new Wu(s,{})),i++)}return new St(r,{})}function gK(n){const e={};return dr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=lb(new St([],{}),0,t))}),e}function pO(n){const e={};return dr(n,(t,r)=>e[r]=`${t}`),e}function mO(n,e,t){return n==t.path&&vo(e,t.parameters)}const Yu="imperative";class yo{constructor(e,t){this.id=e,this.url=t}}class ub extends yo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ca extends yo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pp extends yo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mp extends yo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class db extends yo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _K extends yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vK extends yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yK extends yo{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bK extends yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wK extends yo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EK{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TK{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class SK{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CK{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IK{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gO{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _O{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let kK=(()=>{class n{createUrlTree(t,r,i,o,s,a){return dK(t||r.root,i,o,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})(),MK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(e){return kK.\u0275fac(e)},providedIn:"root"}),n})();class vO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hb(e,this._root).map(t=>t.value)}}function fb(n,e){if(n===e.value)return e;for(const t of e.children){const r=fb(n,t);if(r)return r}return null}function hb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=hb(n,t);if(r.length)return r.unshift(e),r}return[]}class Xo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yO extends vO{constructor(e,t){super(e),this.snapshot=t,pb(this,e)}toString(){return this.snapshot.toString()}}function bO(n,e){const t=function RK(n,e){const s=new gp([],{},{},"",{},ht,e,null,n.root,-1,{});return new EO("",new Xo(s,[]))}(n,e),r=new si([new Wu("",{})]),i=new si({}),o=new si({}),s=new si({}),a=new si(""),c=new al(r,i,s,a,o,ht,e,t.root);return c.snapshot=t.root,new yO(new Xo(c,[]),t)}class al{constructor(e,t,r,i,o,s,a,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(pe(l=>l[$u]))??$e(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>nl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>nl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function PK(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gp{get title(){return this.data?.[$u]}constructor(e,t,r,i,o,s,a,c,l,p,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=p,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EO extends vO{constructor(e,t){super(t),this.url=e,pb(this,t)}toString(){return TO(this._root)}}function pb(n,e){e.value._routerState=n,e.children.forEach(t=>pb(n,t))}function TO(n){const e=n.children.length>0?` { ${n.children.map(TO).join(", ")} } `:"";return`${n.value}${e}`}function mb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),vo(e.params,t.params)||n.params.next(t.params),function q9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),vo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gb(n,e){const t=vo(n.params,e.params)&&function J9(n,e){return Ta(n,e)&&n.every((t,r)=>vo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||gb(n.parent,e.parent))}function Qu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function NK(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Qu(n,r,i);return Qu(n,r)})}(n,e,t);return new Xo(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Qu(n,a)),s}}const r=function LK(n){return new al(new si(n.url),new si(n.params),new si(n.queryParams),new si(n.fragment),new si(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Qu(n,o));return new Xo(r,i)}}const _b="ngNavigationCancelingError";function SO(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Sa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CO(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function CO(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[_b]=!0,r.cancellationCode=e,t&&(r.url=t),r}function IO(n){return xO(n)&&Sa(n.url)}function xO(n){return n&&n[_b]}class FK{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Xu,this.attachRef=null}}let Xu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new FK,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _p=!1;let vb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ht,this.activateEvents=new _n,this.deactivateEvents=new _n,this.attachEvents=new _n,this.detachEvents=new _n,this.parentContexts=st(Xu),this.location=st(Gi),this.changeDetector=st(Ou),this.environmentInjector=st(lo)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ie(4012,_p);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ie(4012,_p);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ie(4012,_p);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Ie(4013,_p);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new VK(t,a,i.injector);if(r&&function jK(n){return!!n.resolveComponentFactory}(r)){const l=r.resolveComponentFactory(s);this.activated=i.createComponent(l,i.length,c)}else this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ei]}),n})();class VK{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===al?this.route:e===Xu?this.childContexts:this.parent.get(e,t)}}let vp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Vi({type:n,selectors:[["ng-component"]],standalone:!0,features:[vM],decls:1,vars:0,template:function(t,r){1&t&&Rn(0,"router-outlet")},dependencies:[vb],encapsulation:2}),n})();function DO(n,e){return n.providers&&!n._injector&&(n._injector=xh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bb(n){const e=n.children&&n.children.map(bb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ht&&(t.component=vp),t}function Ii(n){return n.outlet||ht}function kO(n,e){const t=n.filter(r=>Ii(r)===e);return t.push(...n.filter(r=>Ii(r)!==e)),t}function Ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class WK{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=sl(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),dr(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=sl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=sl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=sl(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new gO(o.value.snapshot))}),e.children.length&&this.forwardEvent(new CK(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(mb(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),mb(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Ju(i.snapshot),c=a?.get(Mc)??null;s.attachRef=null,s.route=i,s.resolver=c,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class AO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yp{constructor(e,t){this.component=e,this.route=t}}function zK(n,e,t){const r=n._root;return Zu(r,e?e._root:null,t,[r.value])}function cl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function CH(n){return null!==kf(n)}(n)?e.get(n):n:r}function Zu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=sl(e);return n.children.forEach(s=>{(function KK(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function qK(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ta(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ta(n.url,e.url)||!vo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gb(n,e)||!vo(n.queryParams,e.queryParams);default:return!gb(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new AO(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Zu(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yp(a.outlet.component,s))}else s&&ed(e,a,i),i.canActivateChecks.push(new AO(r)),Zu(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),dr(o,(s,a)=>ed(s,t.getContext(a),i)),i}function ed(n,e,t){const r=sl(n),i=n.value;dr(r,(o,s)=>{ed(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new yp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function td(n){return"function"==typeof n}function wb(n){return n instanceof rp||"EmptyError"===n?.name}const bp=Symbol("INITIAL_VALUE");function ll(){return Ci(n=>eb(n.map(e=>e.pipe(Ea(1),nb(bp)))).pipe(pe(e=>{for(const t of e)if(!0!==t){if(t===bp)return bp;if(!1===t||t instanceof Ls)return t}return!0}),Si(e=>e!==bp),Ea(1)))}function MO(n){return function ee(...n){return Q(n)}(Hn(e=>{if(Sa(e))throw SO(0,e)}),pe(e=>!0===e))}const Eb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RO(n,e,t,r,i){const o=Tb(n,e,t);return o.matched?function dq(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?$e(i.map(s=>{const a=cl(s,n);return Ns(function eq(n){return n&&td(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ll(),MO()):$e(!0)}(r=DO(e,r),e,t).pipe(pe(s=>!0===s?o:{...Eb})):$e(o)}function Tb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Eb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||K9)(t,n,e);if(!i)return{...Eb};const o={};dr(i.posParams,(a,c)=>{o[c]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function wp(n,e,t,r){if(t.length>0&&function pq(n,e,t){return t.some(r=>Ep(n,e,r)&&Ii(r)!==ht)}(n,t,r)){const o=new St(e,function hq(n,e,t,r){const i={};i[ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Ii(o)!==ht){const s=new St([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,i[Ii(o)]=s}return i}(n,e,r,new St(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function mq(n,e,t){return t.some(r=>Ep(n,e,r))}(n,t,r)){const o=new St(n.segments,function fq(n,e,t,r,i){const o={};for(const s of r)if(Ep(n,t,s)&&!i[Ii(s)]){const a=new St([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,o[Ii(s)]=a}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new St(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Ep(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function PO(n,e,t,r){return!!(Ii(n)===r||r!==ht&&Ep(e,t,n))&&("**"===n.path||Tb(e,n,t).matched)}function OO(n,e,t){return 0===e.length&&!n.children[t]}const Tp=!1;class Sp{constructor(e){this.segmentGroup=e||null}}class NO{constructor(e){this.urlTree=e}}function nd(n){return tl(new Sp(n))}function LO(n){return tl(new NO(n))}class yq{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=wp(this.urlTree.root,[],[],this.config).segmentGroup,t=new St(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ht).pipe(pe(o=>this.createUrlTree(hp(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qo(o=>{if(o instanceof NO)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Sp?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ht).pipe(pe(i=>this.createUrlTree(hp(i),e.queryParams,e.fragment))).pipe(Qo(i=>{throw i instanceof Sp?this.noMatchError(i):i}))}noMatchError(e){return new Ie(4002,Tp)}createUrlTree(e,t,r){const i=sb(e);return new Ls(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(pe(o=>new St([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Vn(i).pipe(Rs(o=>{const s=r.children[o],a=kO(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(pe(c=>({segment:c,outlet:o})))}),YP((o,s)=>(o[s.outlet]=s.segment,o),{}),QP())}expandSegment(e,t,r,i,o,s){return Vn(r).pipe(Rs(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,o,s).pipe(Qo(l=>{if(l instanceof Sp)return $e(null);throw l}))),Os(a=>!!a),Qo((a,c)=>{if(wb(a))return OO(t,i,o)?$e(new St([],{})):nd(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,o,s,a){return PO(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s):nd(t):nd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?LO(o):this.lineralizeSegments(r,o).pipe(Xn(s=>{const a=new St(s,{});return this.expandSegment(e,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:p}=Tb(t,i,o);if(!a)return nd(t);const g=this.applyRedirectCommands(c,i.redirectTo,p);return i.redirectTo.startsWith("/")?LO(g):this.lineralizeSegments(i,g).pipe(Xn(O=>this.expandSegment(e,t,r,O.concat(l),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=DO(r,e),r.loadChildren?(r._loadedRoutes?$e({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(pe(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new St(i,{})))):$e(new St(i,{}))):RO(t,r,i,e).pipe(Ci(({matched:s,consumedSegments:a,remainingSegments:c})=>s?this.getChildConfig(e=r._injector??e,r,i).pipe(Xn(p=>{const g=p.injector??e,O=p.routes,{segmentGroup:U,slicedSegments:q}=wp(t,a,c,O),ae=new St(U.segments,U.children);if(0===q.length&&ae.hasChildren())return this.expandChildren(g,O,ae).pipe(pe(be=>new St(a,be)));if(0===O.length&&0===q.length)return $e(new St(a,{}));const me=Ii(r)===o;return this.expandSegment(g,ae,O,q,me?ht:o,!0).pipe(pe(Ce=>new St(a.concat(Ce.segments),Ce.children)))})):nd(t)))}getChildConfig(e,t,r){return t.children?$e({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?$e({routes:t._loadedRoutes,injector:t._loadedInjector}):function uq(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?$e(!0):$e(i.map(s=>{const a=cl(s,n);return Ns(function QK(n){return n&&td(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ll(),MO())}(e,t,r).pipe(Xn(i=>i?this.configLoader.loadChildren(e,t).pipe(Hn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function _q(n){return tl(CO(Tp,3))}())):$e({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return $e(r);if(i.numberOfChildren>1||!i.children[ht])return e.redirectTo,tl(new Ie(4e3,Tp));i=i.children[ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Ls(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return dr(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return dr(t.children,(a,c)=>{s[c]=this.createSegmentGroup(e,a,r,i)}),new St(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Ie(4001,Tp);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class wq{}class Sq{constructor(e,t,r,i,o,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=wp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ht).pipe(pe(t=>{if(null===t)return null;const r=new gp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ht,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Xo(r,t),o=new EO(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=wO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return Vn(Object.keys(r.children)).pipe(Rs(i=>{const o=r.children[i],s=kO(t,i);return this.processSegmentGroup(e,s,o,i)}),YP((i,o)=>i&&o?(i.push(...o),i):null),function W9(n,e=!1){return le((t,r)=>{let i=0;t.subscribe(_e(r,o=>{const s=n(o,i++);(s||e)&&r.next(o),!s&&r.complete()}))})}(i=>null!==i),op(null),QP(),pe(i=>{if(null===i)return null;const o=VO(i);return function Cq(n){n.sort((e,t)=>e.value.outlet===ht?-1:t.value.outlet===ht?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return Vn(t).pipe(Rs(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,i,o)),Os(s=>!!s),Qo(s=>{if(wb(s))return OO(r,i,o)?$e([]):$e(null);throw s}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!PO(t,r,i,o))return $e(null);let s;if("**"===t.path){const a=i.length>0?ZP(i).parameters:{},c=UO(r)+i.length;s=$e({snapshot:new gp(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BO(t),Ii(t),t.component??t._loadedComponent??null,t,jO(r),c,HO(t)),consumedSegments:[],remainingSegments:[]})}else s=RO(r,t,i,e).pipe(pe(({matched:a,consumedSegments:c,remainingSegments:l,parameters:p})=>{if(!a)return null;const g=UO(r)+c.length;return{snapshot:new gp(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BO(t),Ii(t),t.component??t._loadedComponent??null,t,jO(r),g,HO(t)),consumedSegments:c,remainingSegments:l}}));return s.pipe(Ci(a=>{if(null===a)return $e(null);const{snapshot:c,consumedSegments:l,remainingSegments:p}=a;e=t._injector??e;const g=t._loadedInjector??e,O=function Iq(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:q}=wp(r,l,p,O.filter(me=>void 0===me.redirectTo));if(0===q.length&&U.hasChildren())return this.processChildren(g,O,U).pipe(pe(me=>null===me?null:[new Xo(c,me)]));if(0===O.length&&0===q.length)return $e([new Xo(c,[])]);const ae=Ii(t)===o;return this.processSegment(g,O,U,q,ae?ht:o).pipe(pe(me=>null===me?null:[new Xo(c,me)]))}))}}function xq(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function VO(n){const e=[],t=new Set;for(const r of n){if(!xq(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=VO(r.children);e.push(new Xo(r.value,i))}return e.filter(r=>!t.has(r))}function jO(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function UO(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function BO(n){return n.data||{}}function HO(n){return n.resolve||{}}function $O(n){return"string"==typeof n.title||null===n.title}function Sb(n){return Ci(e=>{const t=n(e);return t?Vn(t).pipe(pe(()=>e)):$e(e)})}const ul=new Re("ROUTES");let Cb=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return $e(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ns(t.loadComponent()).pipe(pe(zO),Hn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),sp(()=>{this.componentLoaders.delete(t)})),i=new KP(r,()=>new Y).pipe(tb());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $e({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(pe(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,l,p=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=JP(c.get(ul,[],et.Self|et.Optional)));return{routes:l.map(bb),injector:c}}),sp(()=>{this.childrenLoaders.delete(r)})),s=new KP(o,()=>new Y).pipe(tb());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Ns(t()).pipe(pe(zO),Xn(i=>i instanceof gM||Array.isArray(i)?$e(i):Vn(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(xe(bn),xe(iR))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zO(n){return function Lq(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ip=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Y,this.configLoader=st(Cb),this.environmentInjector=st(lo),this.urlSerializer=st(zu),this.rootContexts=st(Xu),this.navigationId=0,this.afterPreactivation=()=>$e(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new TK(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new EK(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new si({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Yu,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Si(r=>0!==r.id),pe(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Ci(r=>{let i=!1,o=!1;return $e(r).pipe(Hn(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ci(s=>{const a=t.browserUrlTree.toString(),c=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!c&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const p="";return this.events.next(new mp(s.id,t.serializeUrl(r.rawUrl),p,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),Li}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return GO(s.source)&&(t.browserUrlTree=s.extractedUrl),$e(s).pipe(Ci(p=>{const g=this.transitions?.getValue();return this.events.next(new ub(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?Li:Promise.resolve(p)}),function bq(n,e,t,r){return Ci(i=>function vq(n,e,t,r,i){return new yq(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(pe(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Hn(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},r.urlAfterRedirects=p.urlAfterRedirects}),function kq(n,e,t,r,i){return Xn(o=>function Tq(n,e,t,r,i,o,s="emptyOnly"){return new Sq(n,e,t,r,i,s,o).recognize().pipe(Ci(a=>null===a?function Eq(n){return new ie(e=>e.error(n))}(new wq):$e(a)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(pe(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Hn(p=>{if(r.targetSnapshot=p.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!p.extras.skipLocationChange){const O=t.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);t.setBrowserUrl(O,p)}t.browserUrlTree=p.urlAfterRedirects}const g=new _K(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(c&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:p,extractedUrl:g,source:O,restoredState:U,extras:q}=s,ae=new ub(p,this.urlSerializer.serialize(g),O,U);this.events.next(ae);const me=bO(g,this.rootComponentType).snapshot;return $e(r={...s,targetSnapshot:me,urlAfterRedirects:g,extras:{...q,skipLocationChange:!1,replaceUrl:!1}})}{const p="";return this.events.next(new mp(s.id,t.serializeUrl(r.extractedUrl),p,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),Li}}),Hn(s=>{const a=new vK(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),pe(s=>r={...s,guards:zK(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function nq(n,e){return Xn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?$e({...t,guardsResult:!0}):function rq(n,e,t,r){return Vn(n).pipe(Xn(i=>function lq(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?$e(o.map(a=>{const c=Ju(e)??i,l=cl(a,c);return Ns(function ZK(n){return n&&td(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):c.runInContext(()=>l(n,e,t,r))).pipe(Os())})).pipe(ll()):$e(!0)}(i.component,i.route,t,e,r)),Os(i=>!0!==i,!0))}(s,r,i,n).pipe(Xn(a=>a&&function YK(n){return"boolean"==typeof n}(a)?function iq(n,e,t,r){return Vn(e).pipe(Rs(i=>ip(function sq(n,e){return null!==n&&e&&e(new SK(n)),$e(!0)}(i.route.parent,r),function oq(n,e){return null!==n&&e&&e(new IK(n)),$e(!0)}(i.route,r),function cq(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function GK(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>GP(()=>$e(s.guards.map(c=>{const l=Ju(s.node)??t,p=cl(c,l);return Ns(function JK(n){return n&&td(n.canActivateChild)}(p)?p.canActivateChild(r,n):l.runInContext(()=>p(r,n))).pipe(Os())})).pipe(ll())));return $e(o).pipe(ll())}(n,i.path,t),function aq(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return $e(!0);const i=r.map(o=>GP(()=>{const s=Ju(e)??t,a=cl(o,s);return Ns(function XK(n){return n&&td(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Os())}));return $e(i).pipe(ll())}(n,i.route,t))),Os(i=>!0!==i,!0))}(r,o,n,e):$e(a)),pe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Hn(s=>{if(r.guardsResult=s.guardsResult,Sa(s.guardsResult))throw SO(0,s.guardsResult);const a=new yK(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Si(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),Sb(s=>{if(s.guards.canActivateChecks.length)return $e(s).pipe(Hn(a=>{const c=new bK(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Ci(a=>{let c=!1;return $e(a).pipe(function Aq(n,e){return Xn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return $e(t);let o=0;return Vn(i).pipe(Rs(s=>function Mq(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!$O(i)&&(o[$u]=i.title),function Rq(n,e,t,r){const i=function Pq(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return $e({});const o={};return Vn(i).pipe(Xn(s=>function Oq(n,e,t,r){const i=Ju(e)??r,o=cl(n,i);return Ns(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(Os(),Hn(a=>{o[s]=a}))),rb(1),function z9(n){return pe(()=>n)}(o),Qo(s=>wb(s)?Li:tl(s)))}(o,n,e,r).pipe(pe(s=>(n._resolvedData=s,n.data=wO(n,t).resolve,i&&$O(i)&&(n.data[$u]=i.title),null)))}(s.route,r,n,e)),Hn(()=>o++),rb(1),Xn(s=>o===i.length?$e(t):Li))})}(t.paramsInheritanceStrategy,this.environmentInjector),Hn({next:()=>c=!0,complete:()=>{c||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Hn(a=>{const c=new wK(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Sb(s=>{const a=c=>{const l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Hn(p=>{c.component=p}),pe(()=>{})));for(const p of c.children)l.push(...a(p));return l};return eb(a(s.targetSnapshot.root)).pipe(op(),Ea(1))}),Sb(()=>this.afterPreactivation()),pe(s=>{const a=function OK(n,e,t){const r=Qu(n,e._root,t?t._root:void 0);return new yO(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),Hn(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>pe(r=>(new WK(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Hn({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ca(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),sp(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Qo(s=>{if(o=!0,xO(s)){IO(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new pp(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),IO(s)){const c=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),l={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||GO(r.source)};t.scheduleNavigation(c,Yu,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new db(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(c){r.reject(c)}}return Li}))}))}cancelNavigationTransition(t,r,i){const o=new pp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GO(n){return n!==Yu}let KO=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ht);return r}getResolvedTitleForRoute(t){return t.data[$u]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(){return st(Fq)},providedIn:"root"}),n})(),Fq=(()=>{class n extends KO{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(xe(Gy))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(){return st(Uq)},providedIn:"root"}),n})();class jq{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Uq=(()=>{class n extends jq{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=lr(n)))(r||n)}}(),n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xp=new Re("",{providedIn:"root",factory:()=>({})});let Hq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:function(){return st($q)},providedIn:"root"}),n})(),$q=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wq(n){throw n}function zq(n,e,t){return e.parse("/")}const Gq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=st(Z8),this.isNgZoneEnabled=!1,this.options=st(xp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Wq,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||zq,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=st(Hq),this.routeReuseStrategy=st(Vq),this.urlCreationStrategy=st(MK),this.titleStrategy=st(KO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=JP(st(ul,{optional:!0})??[]),this.navigationTransitions=st(Ip),this.urlSerializer=st(zu),this.location=st(wy),this.isNgZoneEnabled=st(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ls,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bO(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Yu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(bb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...o};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}return null!==p&&(p=this.removeEmptyProps(p)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,p,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Yu,null,r)}navigate(t,r={skipLocationChange:!1}){return function qq(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Ie(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Gq}:!1===r?{...Kq}:r,Sa(t))return tO(this.currentUrlTree,t,i);const o=this.parseUrl(t);return tO(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l,p;return s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((g,O)=>{a=g,c=O}),p="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:p,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class qO{}let Xq=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Si(t=>t instanceof Ca),Rs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=xh(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Vn(i).pipe(lc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):$e(null);const o=i.pipe(Xn(s=>null===s?$e(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Vn([o,this.loader.loadComponent(r)]).pipe(lc()):o})}}return n.\u0275fac=function(t){return new(t||n)(xe(fr),xe(iR),xe(lo),xe(qO),xe(Cb))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Db=new Re("");let YO=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ub?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ca&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _O&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _O(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){dv()},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();var ai=(()=>((ai=ai||{})[ai.COMPLETE=0]="COMPLETE",ai[ai.FAILED=1]="FAILED",ai[ai.REDIRECTING=2]="REDIRECTING",ai))();const dl=!1;function Fs(n,e){return{\u0275kind:n,\u0275providers:e}}const kb=new Re("",{providedIn:"root",factory:()=>!1});function XO(){const n=st(bn);return e=>{const t=n.get(Pu);if(e!==t.components[0])return;const r=n.get(fr),i=n.get(JO);1===n.get(Ab)&&r.initialNavigation(),n.get(ZO,null,et.Optional)?.setUpPreloading(),n.get(Db,null,et.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const JO=new Re(dl?"bootstrap done indicator":"",{factory:()=>new Y}),Ab=new Re(dl?"initial navigation":"",{providedIn:"root",factory:()=>1});function nY(){let n=[];return n=dl?[{provide:ch,multi:!0,useFactory:()=>{const e=st(fr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function xK(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Fs(1,n)}const ZO=new Re(dl?"router preloader":"");function rY(n){return Fs(0,[{provide:ZO,useExisting:Xq},{provide:qO,useExisting:n}])}const rd=!1,eN=new Re(rd?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),iY=[wy,{provide:zu,useClass:ib},fr,Xu,{provide:al,useFactory:function QO(n){return n.routerState.root},deps:[fr]},Cb,rd?{provide:kb,useValue:!0}:[]];function oY(){return new fR("Router",fr)}let tN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[iY,rd&&r?.enableTracing?nY().\u0275providers:[],{provide:ul,multi:!0,useValue:t},{provide:eN,useFactory:lY,deps:[[fr,new kt,new Ic]]},{provide:xp,useValue:r||{}},r?.useHash?{provide:wa,useClass:UG}:{provide:wa,useClass:NR},{provide:Db,useFactory:()=>{const n=st(s7),e=st(it),t=st(xp),r=st(Ip),i=st(zu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new YO(i,r,n,e,t)}},r?.preloadingStrategy?rY(r.preloadingStrategy).\u0275providers:[],{provide:fR,multi:!0,useFactory:oY},r?.initialNavigation?uY(r):[],[{provide:nN,useFactory:XO},{provide:dR,multi:!0,useExisting:nN}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ul,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(xe(eN,8))},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[vp]}),n})();function lY(n){if(rd&&n)throw new Ie(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function uY(n){return["disabled"===n.initialNavigation?Fs(3,[{provide:ya,multi:!0,useFactory:()=>{const e=st(fr);return()=>{e.setUpLocationChangeListener()}}},{provide:Ab,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fs(2,[{provide:Ab,useValue:0},{provide:ya,multi:!0,deps:[bn],useFactory:e=>{const t=e.get(VG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(fr),o=e.get(JO);(function Jq(n,e){n.events.pipe(Si(t=>t instanceof Ca||t instanceof pp||t instanceof db||t instanceof mp),pe(t=>t instanceof Ca||t instanceof mp?ai.COMPLETE:t instanceof pp&&(0===t.code||1===t.code)?ai.REDIRECTING:ai.FAILED),Si(t=>t!==ai.REDIRECTING),Ea(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Ip).afterPreactivation=()=>(r(!0),o.closed?$e(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const nN=new Re(rd?"Router Initializer":"");function rN(...n){const e=qI(n),{args:t,keys:r}=HP(n),i=new ie(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let p=0;p<s;p++){let g=!1;on(t[p]).subscribe(_e(o,O=>{g||(g=!0,l--),a[p]=O},()=>c--,void 0,()=>{(!c||!g)&&(l||o.next(r?WP(r,a):a),o.complete())}))}});return e?i.pipe($P(e)):i}let iN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(we(Uo),we(mn))},n.\u0275dir=Ge({type:n}),n})(),Ia=(()=>{class n extends iN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=lr(n)))(r||n)}}(),n.\u0275dir=Ge({type:n,features:[Mt]}),n})();const bo=new Re("NgValueAccessor"),hY={provide:bo,useExisting:an(()=>id),multi:!0},mY=new Re("CompositionEventMode");let id=(()=>{class n extends iN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pY(){const n=Ko()?Ko().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(we(Uo),we(mn),we(mY,8))},n.\u0275dir=Ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&gn("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Xt([hY]),Mt]}),n})();const gY=!1;function Vs(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function sN(n){return null!=n&&"number"==typeof n.length}const xr=new Re("NgValidators"),js=new Re("NgAsyncValidators"),_Y=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Mb{static min(e){return function aN(n){return e=>{if(Vs(e.value)||Vs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function cN(n){return e=>{if(Vs(e.value)||Vs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return lN(e)}static requiredTrue(e){return function uN(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function dN(n){return Vs(n.value)||_Y.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function fN(n){return e=>Vs(e.value)||!sN(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hN(n){return e=>sN(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function pN(n){if(!n)return Dp;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vs(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return bN(e)}static composeAsync(e){return wN(e)}}function lN(n){return Vs(n.value)?{required:!0}:null}function Dp(n){return null}function mN(n){return null!=n}function gN(n){const e=bu(n)?Vn(n):n;if(gY&&!Mv(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new Ie(-1101,t)}return e}function _N(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vN(n,e){return e.map(t=>t(n))}function yN(n){return n.map(e=>function vY(n){return!n.validate}(e)?e:t=>e.validate(t))}function bN(n){if(!n)return null;const e=n.filter(mN);return 0==e.length?null:function(t){return _N(vN(t,e))}}function Rb(n){return null!=n?bN(yN(n)):null}function wN(n){if(!n)return null;const e=n.filter(mN);return 0==e.length?null:function(t){return rN(vN(t,e).map(gN)).pipe(pe(_N))}}function Pb(n){return null!=n?wN(yN(n)):null}function EN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TN(n){return n._rawValidators}function SN(n){return n._rawAsyncValidators}function Ob(n){return n?Array.isArray(n)?n:[n]:[]}function kp(n,e){return Array.isArray(n)?n.includes(e):n===e}function CN(n,e){const t=Ob(e);return Ob(n).forEach(i=>{kp(t,i)||t.push(i)}),t}function IN(n,e){return Ob(e).filter(t=>!kp(n,t))}class xN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Pb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Lr extends xN{get formDirective(){return null}get path(){return null}}class Jo extends xN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class DN{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Nb=(()=>{class n extends DN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(we(Jo,2))},n.\u0275dir=Ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Ir("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Mt]}),n})();function kN(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Vb=!1,od="VALID",Mp="INVALID",fl="PENDING",sd="DISABLED";function jb(n){return(Rp(n)?n.validators:n)||null}function Ub(n,e){return(Rp(e)?e.asyncValidators:n)||null}function Rp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class RN{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===od}get invalid(){return this.status===Mp}get pending(){return this.status==fl}get disabled(){return this.status===sd}get enabled(){return this.status!==sd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(CN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IN(e,this._rawAsyncValidators))}hasValidator(e){return kp(this._rawValidators,e)}hasAsyncValidator(e){return kp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=od,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===od||this.status===fl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sd:od}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fl,this._hasOwnPendingAsyncValidator=!0;const t=gN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?sd:this.errors?Mp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fl)?fl:this._anyControlsHaveStatus(Mp)?Mp:od}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function IY(n){return Array.isArray(n)?Rb(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function xY(n){return Array.isArray(n)?Pb(n):n||null}(this._rawAsyncValidators)}}class Bb extends RN{constructor(e,t,r){super(jb(t),Ub(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function MN(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new Ie(1002,Vb?function CY(n,e){return`Must supply a value for form control ${kN(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function AN(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new Ie(1e3,Vb?function TY(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new Ie(1001,Vb?function SY(n,e){return`Cannot find form control ${kN(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const xa=new Re("CallSetDisabledState",{providedIn:"root",factory:()=>ad}),ad="always";function cd(n,e,t=ad){Hb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function AY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&PN(n,e)})}(n,e),function RY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function MY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&PN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function kY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Op(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Lp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Np(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hb(n,e){const t=TN(n);null!==e.validator?n.setValidators(EN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=SN(n);null!==e.asyncValidator?n.setAsyncValidators(EN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Np(e._rawValidators,i),Np(e._rawAsyncValidators,i)}function Lp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=TN(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=SN(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return Np(e._rawValidators,r),Np(e._rawAsyncValidators,r),t}function PN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ON(n,e){Hb(n,e)}function Wb(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function NN(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function zb(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===id?t=o:function NY(n){return Object.getPrototypeOf(n.constructor)===Ia}(o)?r=o:i=o}),i||r||t||null}const FY={provide:Lr,useExisting:an(()=>Fp)},ld=(()=>Promise.resolve())();let Fp=(()=>{class n extends Lr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _n,this.form=new Bb({},Rb(t),Pb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ld.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),cd(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ld.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ld.then(()=>{const r=this._findContainer(t.path),i=new Bb({});ON(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ld.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ld.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,NN(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(we(xr,10),we(js,10),we(xa,8))},n.\u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&gn("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xt([FY]),Mt]}),n})();function LN(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FN(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Gb=class extends RN{constructor(e=null,t,r){super(jb(t),Ub(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=FN(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){FN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},UY={provide:Jo,useExisting:an(()=>Kb)},UN=(()=>Promise.resolve())();let Kb=(()=>{class n extends Jo{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Gb,this._registered=!1,this.update=new _n,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=zb(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Wb(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){UN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Zc(r);UN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Pp(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(we(Lr,9),we(xr,10),we(js,10),we(bo,10),we(Ou,8),we(xa,8))},n.\u0275dir=Ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xt([UY]),Mt,ei]}),n})(),HN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({}),n})();const qb=new Re("NgModelWithFormControlWarning"),GY={provide:Jo,useExisting:an(()=>Yb)};let Yb=(()=>{class n extends Jo{set isDisabled(t){}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this.update=new _n,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=zb(0,i)}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&Op(r,this,!1),cd(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Wb(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Op(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(we(xr,10),we(js,10),we(bo,10),we(qb,8),we(xa,8))},n.\u0275dir=Ge({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Xt([GY]),Mt,ei]}),n})();const KY={provide:Lr,useExisting:an(()=>Vp)};let Vp=(()=>{class n extends Lr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _n,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return cd(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Op(t.control||null,t,!1),function LY(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,NN(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Op(r||null,t),(n=>n instanceof Gb)(i)&&(cd(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);ON(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function PY(n,e){return Lp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Hb(this.form,this),this._oldForm&&Lp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(we(xr,10),we(js,10),we(xa,8))},n.\u0275dir=Ge({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&gn("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xt([KY]),Mt,ei]}),n})(),Da=(()=>{class n{constructor(){this._validator=Dp}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Dp,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ge({type:n,features:[ei]}),n})();const oQ={provide:xr,useExisting:an(()=>jp),multi:!0};let jp=(()=>{class n extends Da{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Zc,this.createValidator=t=>lN}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=lr(n)))(r||n)}}(),n.\u0275dir=Ge({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&ur("required",r._enabled?"":null)},inputs:{required:"required"},features:[Xt([oQ]),Mt]}),n})(),o1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[HN]}),n})(),fQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xa,useValue:t.callSetDisabledState??ad}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[o1]}),n})(),hQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qb,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xa,useValue:t.callSetDisabledState??ad}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[o1]}),n})();function s1(n,e,t,r,i,o,s){try{var a=n[o](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,i)}function ge(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(c){s1(o,r,i,s,a,"next",c)}function a(c){s1(o,r,i,s,a,"throw",c)}s(void 0)})}}const ew={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ve=function(n,e){if(!n)throw hl(e)},hl=function(n){return new Error("Firebase Database ("+ew.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)},a1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Up={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0;let O=(15&a)<<2|l>>6,U=63&l;c||(U=64,s||(O=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[O],t[U])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(a1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==l||null==g)throw new mQ;r.push(o<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==g&&r.push(l<<6&192|g))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c1=function(n){const e=a1(n);return Up.encodeByteArray(e,!0)},Bp=function(n){return c1(n).replace(/\./g,"")},Hp=function(n){try{return Up.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gQ(n){return l1(void 0,n)}function l1(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!_Q(t)||(n[t]=l1(n[t],e[t]));return n}function _Q(n){return"__proto__"!==n}const $p=()=>{try{return function vQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Hp(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},u1=n=>{var e,t;return null===(t=null===(e=$p())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},tw=n=>{const e=u1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},EQ=()=>{var n;return null===(n=$p())||void 0===n?void 0:n.config},d1=n=>{var e;return null===(e=$p())||void 0===e?void 0:e[`_${n}`]};class pl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function f1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Bp(JSON.stringify({alg:"none",type:"JWT"})),Bp(JSON.stringify(s)),""].join(".")}function er(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function rw(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function h1(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Zo(){return!0===ew.NODE_CLIENT||!0===ew.NODE_ADMIN}function Us(){try{return"object"==typeof indexedDB}catch{return!1}}function ml(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}function Wp(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qi.prototype.create)}}class Qi{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function IQ(n,e){return n.replace(xQ,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new xi(i,`${this.serviceName}: ${s} (${i}).`,r)}}const xQ=/\{\$([^}]+)}/g;function ud(n){return JSON.parse(n)}function hr(n){return JSON.stringify(n)}const zp=function(n){let e={},t={},r={},i="";try{const o=n.split(".");e=ud(Hp(o[0])||""),t=ud(Hp(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function es(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function gl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function iw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gp(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function dd(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(p1(o)&&p1(s)){if(!dd(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function p1(n){return null!==n&&"object"==typeof n}function _l(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function hd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class AQ{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let g=0;g<16;g++)r[g]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let g=0;g<16;g++)r[g]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let g=16;g<80;g++){const O=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=4294967295&(O<<1|O>>>31)}let l,p,i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let g=0;g<80;g++){g<40?g<20?(l=a^o&(s^a),p=1518500249):(l=o^s^a,p=1859775393):g<60?(l=o&s|a&(o|s),p=2400959708):(l=o^s^a,p=3395469782);const O=(i<<5|i>>>27)+l+c+p+r[g]&4294967295;c=a,a=s,s=4294967295&(o<<30|o>>>2),o=i,i=O}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<t;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}class RQ{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function PQ(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=ow),void 0===i.error&&(i.error=ow),void 0===i.complete&&(i.complete=ow);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ow(){}const qp=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e},NQ=1e3,LQ=2,FQ=144e5,VQ=.5;function sw(n,e=NQ,t=LQ){const r=e*Math.pow(t,n),i=Math.round(VQ*r*(Math.random()-.5)*2);return Math.min(FQ,r+i)}function $n(n){return n&&n._delegate?n._delegate:n}class qn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ka="[DEFAULT]";class UQ{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new pl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function HQ(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ka})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return ge(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ka){return this.instances.has(e)}getOptions(e=ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===ka?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=ka){return this.component?this.component.multipleInstances?e:ka:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $Q{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UQ(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const aw=[];var Wt=(()=>{return(n=Wt||(Wt={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Wt;var n})();const m1={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},WQ=Wt.INFO,zQ={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},GQ=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=zQ[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Aa{constructor(e){this.name=e,this._logLevel=WQ,this._logHandler=GQ,this._userLogHandler=null,aw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?m1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...e),this._logHandler(this,Wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...e),this._logHandler(this,Wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...e),this._logHandler(this,Wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...e),this._logHandler(this,Wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...e),this._logHandler(this,Wt.ERROR,...e)}}const KQ=(n,e)=>e.some(t=>n instanceof t);let g1,_1;const v1=new WeakMap,cw=new WeakMap,y1=new WeakMap,lw=new WeakMap,uw=new WeakMap;let dw={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return cw.get(n);if("objectStoreNames"===e)return n.objectStoreNames||y1.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ts(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function eX(n){return"function"==typeof n?function ZQ(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function YQ(){return _1||(_1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(fw(this),e),ts(v1.get(this))}:function(...e){return ts(n.apply(fw(this),e))}:function(e,...t){const r=n.call(fw(this),e,...t);return y1.set(r,e.sort?e.sort():[e]),ts(r)}}(n):(n instanceof IDBTransaction&&function XQ(n){if(cw.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});cw.set(n,e)}(n),KQ(n,function qQ(){return g1||(g1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,dw):n)}function ts(n){if(n instanceof IDBRequest)return function QQ(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ts(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&v1.set(t,n)}).catch(()=>{}),uw.set(e,n),e}(n);if(lw.has(n))return lw.get(n);const e=eX(n);return e!==n&&(lw.set(n,e),uw.set(e,n)),e}const fw=n=>uw.get(n);function Yp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=ts(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ts(s.result),c.oldVersion,c.newVersion,ts(s.transaction))}),t&&s.addEventListener("blocked",()=>t()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function hw(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),ts(t).then(()=>{})}const tX=["get","getKey","getAll","getAllKeys","count"],nX=["put","add","delete","clear"],pw=new Map;function b1(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(pw.get(e))return pw.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=nX.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tX.includes(t))return;const o=function(){var s=ge(function*(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let p=l.store;return r&&(p=p.index(c.shift())),(yield Promise.all([p[t](...c),i&&l.done]))[0]});return function(c){return s.apply(this,arguments)}}();return pw.set(e,o),o}!function JQ(n){dw=n(dw)}(n=>({...n,get:(e,t,r)=>b1(e,t)||n.get(e,t,r),has:(e,t)=>!!b1(e,t)||n.has(e,t)}));class rX{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function iX(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const mw="@firebase/app",Ma=new Aa("@firebase/app"),Qp="[DEFAULT]",AX={[mw]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ra=new Map,Xp=new Map;function MX(n,e){try{n.container.addComponent(e)}catch(t){Ma.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tr(n){const e=n.name;if(Xp.has(e))return Ma.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,n);for(const t of Ra.values())MX(t,n);return!0}function ci(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const ns=new Qi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class PX{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}const Pa="9.17.2";function E1(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Qp,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ns.create("bad-app-name",{appName:String(i)});if(t||(t=EQ()),!t)throw ns.create("no-options");const o=Ra.get(i);if(o){if(dd(t,o.options)&&dd(r,o.config))return o;throw ns.create("duplicate-app",{appName:i})}const s=new $Q(i);for(const c of Xp.values())s.addComponent(c);const a=new PX(t,r,s);return Ra.set(i,a),a}function rs(n=Qp){const e=Ra.get(n);if(!e&&n===Qp)return E1();if(!e)throw ns.create("no-app",{appName:n});return e}function T1(){return Array.from(Ra.values())}function Dt(n,e,t){var r;let i=null!==(r=AX[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ma.warn(a.join(" "))}tr(new qn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const OX="firebase-heartbeat-database",NX=1,pd="firebase-heartbeat-store";let _w=null;function S1(){return _w||(_w=Yp(OX,NX,{upgrade:(n,e)=>{0===e&&n.createObjectStore(pd)}}).catch(n=>{throw ns.create("idb-open",{originalErrorMessage:n.message})})),_w}function vw(){return(vw=ge(function*(n){try{return(yield S1()).transaction(pd).objectStore(pd).get(I1(n))}catch(e){if(e instanceof xi)Ma.warn(e.message);else{const t=ns.create("idb-get",{originalErrorMessage:e?.message});Ma.warn(t.message)}}})).apply(this,arguments)}function C1(n,e){return yw.apply(this,arguments)}function yw(){return(yw=ge(function*(n,e){try{const r=(yield S1()).transaction(pd,"readwrite");return yield r.objectStore(pd).put(e,I1(n)),r.done}catch(t){if(t instanceof xi)Ma.warn(t.message);else{const r=ns.create("idb-set",{originalErrorMessage:t?.message});Ma.warn(r.message)}}})).apply(this,arguments)}function I1(n){return`${n.name}!${n.options.appId}`}class jX{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BX(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return ge(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=x1();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return ge(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=x1(),{heartbeatsToSend:r,unsentEntries:i}=function UX(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),D1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),D1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=Bp(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function x1(){return(new Date).toISOString().substring(0,10)}class BX{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return ge(function*(){return!!Us()&&ml().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return ge(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function LX(n){return vw.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return ge(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return C1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return ge(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return C1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function D1(n){return Bp(JSON.stringify({version:2,heartbeats:n})).length}!function HX(n){tr(new qn("platform-logger",e=>new rX(e),"PRIVATE")),tr(new qn("heartbeat",e=>new jX(e),"PRIVATE")),Dt(mw,"0.9.4",n),Dt(mw,"0.9.4","esm2017"),Dt("fire-js","")}(""),Dt("firebase","9.17.2","app");const k1="@firebase/installations",bw="0.6.4",A1=1e4,M1=`w:${bw}`,R1="FIS_v2",zX="https://firebaseinstallations.googleapis.com/v1",GX=36e5,is=new Qi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function P1(n){return n instanceof xi&&n.code.includes("request-failed")}function ww({projectId:n}){return`${zX}/projects/${n}/installations`}function O1(n){return{token:n.token,requestStatus:2,expiresIn:QX(n.expiresIn),creationTime:Date.now()}}function Ew(n,e){return Tw.apply(this,arguments)}function Tw(){return(Tw=ge(function*(n,e){const r=(yield e.json()).error;return is.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function N1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Sw(n){return Cw.apply(this,arguments)}function Cw(){return(Cw=ge(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function QX(n){return Number(n.replace("s","000"))}function Iw(){return(Iw=ge(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ww(n),i=N1(n),o=e.getImmediate({optional:!0});if(o){const l=yield o.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:R1,appId:n.appId,sdkVersion:M1})},c=yield Sw(()=>fetch(r,a));if(c.ok){const l=yield c.json();return{fid:l.fid||t,registrationStatus:2,refreshToken:l.refreshToken,authToken:O1(l.authToken)}}throw yield Ew("Create Installation",c)})).apply(this,arguments)}function F1(n){return new Promise(e=>{setTimeout(e,n)})}const eJ=/^[cdef][\w-]{21}$/,xw="";function tJ(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function nJ(n){return function ZX(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return eJ.test(t)?t:xw}catch{return xw}}function vl(n){return`${n.appName}!${n.appId}`}const yl=new Map;function V1(n,e){const t=vl(n);j1(t,e),function oJ(n,e){const t=function U1(){return!Oa&&"BroadcastChannel"in self&&(Oa=new BroadcastChannel("[Firebase] FID Change"),Oa.onmessage=n=>{j1(n.data.key,n.data.fid)}),Oa}();t&&t.postMessage({key:n,fid:e}),function B1(){0===yl.size&&Oa&&(Oa.close(),Oa=null)}()}(t,e)}function j1(n,e){const t=yl.get(n);if(t)for(const r of t)r(e)}let Oa=null;const sJ="firebase-installations-database",aJ=1,Na="firebase-installations-store";let Dw=null;function kw(){return Dw||(Dw=Yp(sJ,aJ,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Na)}})),Dw}function Jp(n,e){return Aw.apply(this,arguments)}function Aw(){return(Aw=ge(function*(n,e){const t=vl(n),i=(yield kw()).transaction(Na,"readwrite"),o=i.objectStore(Na),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&V1(n,e.fid),e})).apply(this,arguments)}function Mw(n){return Rw.apply(this,arguments)}function Rw(){return(Rw=ge(function*(n){const e=vl(n),r=(yield kw()).transaction(Na,"readwrite");yield r.objectStore(Na).delete(e),yield r.done})).apply(this,arguments)}function md(n,e){return Pw.apply(this,arguments)}function Pw(){return(Pw=ge(function*(n,e){const t=vl(n),i=(yield kw()).transaction(Na,"readwrite"),o=i.objectStore(Na),s=yield o.get(t),a=e(s);return void 0===a?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&V1(n,a.fid),a})).apply(this,arguments)}function Ow(n){return Nw.apply(this,arguments)}function Nw(){return Nw=ge(function*(n){let e;const t=yield md(n.appConfig,r=>{const i=function cJ(n){return $1(n||{fid:tJ(),registrationStatus:0})}(r),o=function lJ(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(is.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function uJ(n,e){return Lw.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:dJ(n)}:{installationEntry:e}}(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===xw?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Nw.apply(this,arguments)}function Lw(){return Lw=ge(function*(n,e){try{const t=yield function JX(n,e){return Iw.apply(this,arguments)}(n,e);return Jp(n.appConfig,t)}catch(t){throw P1(t)&&409===t.customData.serverCode?yield Mw(n.appConfig):yield Jp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),Lw.apply(this,arguments)}function dJ(n){return Fw.apply(this,arguments)}function Fw(){return(Fw=ge(function*(n){let e=yield H1(n.appConfig);for(;1===e.registrationStatus;)yield F1(100),e=yield H1(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Ow(n);return r||t}return e})).apply(this,arguments)}function H1(n){return md(n,e=>{if(!e)throw is.create("installation-not-found");return $1(e)})}function $1(n){return function fJ(n){return 1===n.registrationStatus&&n.registrationTime+A1<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Vw(){return(Vw=ge(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function pJ(n,{fid:e}){return`${ww(n)}/${e}/authTokens:generate`}(n,t),i=function L1(n,{refreshToken:e}){const t=N1(n);return t.append("Authorization",function XX(n){return`${R1} ${n}`}(e)),t}(n,t),o=e.getImmediate({optional:!0});if(o){const l=yield o.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:M1,appId:n.appId}})},c=yield Sw(()=>fetch(r,a));if(c.ok)return O1(yield c.json());throw yield Ew("Generate Auth Token",c)})).apply(this,arguments)}function jw(n){return Uw.apply(this,arguments)}function Uw(){return Uw=ge(function*(n,e=!1){let t;const r=yield md(n.appConfig,o=>{if(!z1(o))throw is.create("not-registered");const s=o.authToken;if(!e&&function _J(n){return 2===n.requestStatus&&!function vJ(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+GX}(n)}(s))return o;if(1===s.requestStatus)return t=function mJ(n,e){return Bw.apply(this,arguments)}(n,e),o;{if(!navigator.onLine)throw is.create("app-offline");const a=function yJ(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(o);return t=function gJ(n,e){return Hw.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),Uw.apply(this,arguments)}function Bw(){return(Bw=ge(function*(n,e){let t=yield W1(n.appConfig);for(;1===t.authToken.requestStatus;)yield F1(100),t=yield W1(n.appConfig);const r=t.authToken;return 0===r.requestStatus?jw(n,e):r})).apply(this,arguments)}function W1(n){return md(n,e=>{if(!z1(e))throw is.create("not-registered");return function bJ(n){return 1===n.requestStatus&&n.requestTime+A1<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Hw(){return Hw=ge(function*(n,e){try{const t=yield function hJ(n,e){return Vw.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Jp(n.appConfig,r),t}catch(t){if(!P1(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Jp(n.appConfig,r)}else yield Mw(n.appConfig);throw t}}),Hw.apply(this,arguments)}function z1(n){return void 0!==n&&2===n.registrationStatus}function $w(){return($w=ge(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Ow(e);return r?r.catch(console.error):jw(e).catch(console.error),t.fid})).apply(this,arguments)}function Ww(){return Ww=ge(function*(n,e=!1){const t=n;return yield function TJ(n){return zw.apply(this,arguments)}(t),(yield jw(t,e)).token}),Ww.apply(this,arguments)}function zw(){return(zw=ge(function*(n){const{registrationPromise:e}=yield Ow(n);e&&(yield e)})).apply(this,arguments)}function qw(n){return is.create("missing-app-config-values",{valueName:n})}const G1="installations",DJ=n=>{const e=n.getProvider("app").getImmediate(),t=function IJ(n){if(!n||!n.options)throw qw("App Configuration");if(!n.name)throw qw("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw qw(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:ci(e,"heartbeat"),_delete:()=>Promise.resolve()}},kJ=n=>{const t=ci(n.getProvider("app").getImmediate(),G1).getImmediate();return{getId:()=>function wJ(n){return $w.apply(this,arguments)}(t),getToken:i=>function EJ(n){return Ww.apply(this,arguments)}(t,i)}};(function AJ(){tr(new qn(G1,DJ,"PUBLIC")),tr(new qn("installations-internal",kJ,"PRIVATE"))})(),Dt(k1,bw),Dt(k1,bw,"esm2017");const Yw="@firebase/remote-config",q1="remote-config",zr=new Qi("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function FJ(n=rs()){return ci(n=$n(n),q1).getImmediate()}class HJ{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return ge(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const o=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&s.push(t.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(s),o})()}}function $J(n=navigator){return n.languages&&n.languages[0]||n.language}class WJ{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){var t=this;return ge(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:$J()},l={method:"POST",headers:a,body:JSON.stringify(c)},p=fetch(s,l),g=new Promise((ye,Ce)=>{e.signal.addEventListener(()=>{const be=new Error("The operation was aborted.");be.name="AbortError",Ce(be)})});let O;try{yield Promise.race([p,g]),O=yield p}catch(ye){let Ce="fetch-client-network";throw"AbortError"===ye?.name&&(Ce="fetch-timeout"),zr.create(Ce,{originalErrorMessage:ye?.message})}let U=O.status;const q=O.headers.get("ETag")||void 0;let ae,me;if(200===O.status){let ye;try{ye=yield O.json()}catch(Ce){throw zr.create("fetch-client-parse",{originalErrorMessage:Ce?.message})}ae=ye.entries,me=ye.state}if("INSTANCE_STATE_UNSPECIFIED"===me?U=500:"NO_CHANGE"===me?U=304:("NO_TEMPLATE"===me||"EMPTY_CONFIG"===me)&&(ae={}),304!==U&&200!==U)throw zr.create("fetch-status",{httpStatus:U});return{status:U,eTag:q,config:ae}})()}}class KJ{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return ge(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return ge(function*(){yield function zJ(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(zr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const o=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),o}catch(o){if(!function GJ(n){if(!(n instanceof xi&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o))throw o;const s={throttleEndTimeMillis:Date.now()+sw(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(s),i.attemptFetch(e,s)}})()}}class QJ{constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function em(n,e){const t=n.target.error||void 0;return zr.create(e,{originalErrorMessage:t&&t?.message})}const La="app_namespace_store";class eZ{constructor(e,t,r,i=function ZJ(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(em(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(La,{keyPath:"compositeKey"})}}catch(t){e(zr.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return ge(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([La],"readonly").objectStore(La),c=t.createCompositeKey(e);try{const l=a.get(c);l.onerror=p=>{o(em(p,"storage-get"))},l.onsuccess=p=>{const g=p.target.result;i(g?g.value:void 0)}}catch(l){o(zr.create("storage-get",{originalErrorMessage:l?.message}))}})})()}set(e,t){var r=this;return ge(function*(){const i=yield r.openDbPromise;return new Promise((o,s)=>{const c=i.transaction([La],"readwrite").objectStore(La),l=r.createCompositeKey(e);try{const p=c.put({compositeKey:l,value:t});p.onerror=g=>{s(em(g,"storage-set"))},p.onsuccess=()=>{o()}}catch(p){s(zr.create("storage-set",{originalErrorMessage:p?.message}))}})})()}delete(e){var t=this;return ge(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([La],"readwrite").objectStore(La),c=t.createCompositeKey(e);try{const l=a.delete(c);l.onerror=p=>{o(em(p,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){o(zr.create("storage-delete",{originalErrorMessage:l?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class tZ{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return ge(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),o=yield t;o&&(e.lastFetchStatus=o);const s=yield r;s&&(e.lastSuccessfulFetchTimestampMillis=s);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function rZ(){return eE.apply(this,arguments)}function eE(){return(eE=ge(function*(){if(!Us())return!1;try{return yield ml()}catch{return!1}})).apply(this,arguments)}!function nZ(){tr(new qn(q1,function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw zr.create("registration-window");if(!Us())throw zr.create("indexed-db-unavailable");const{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw zr.create("registration-project-id");if(!s)throw zr.create("registration-api-key");if(!a)throw zr.create("registration-app-id");const c=new eZ(a,r.name,t=t||"firebase"),l=new tZ(c),p=new Aa(Yw);p.logLevel=Wt.ERROR;const g=new WJ(i,Pa,t,o,s,a),O=new KJ(g,c),U=new HJ(O,c,l,p),q=new QJ(r,U,l,c,p);return function jJ(n){const e=$n(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(q),q},"PUBLIC").setMultipleInstances(!0)),Dt(Yw,"0.4.4"),Dt(Yw,"0.4.4","esm2017")}();const iZ="/firebase-messaging-sw.js",oZ="/firebase-cloud-messaging-push-scope",Q1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sZ="https://fcmregistrations.googleapis.com/v1",X1="google.c.a.c_id",aZ="google.c.a.c_l",cZ="google.c.a.ts",lZ="google.c.a.e";var bl=(()=>{return(n=bl||(bl={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",bl;var n})();function os(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uZ(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const tE="fcm_token_details_db",dZ=5,J1="fcm_token_object_Store";function nE(){return nE=ge(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(tE))return null;let e=null;return(yield Yp(tE,dZ,{upgrade:(r=ge(function*(i,o,s,a){var c;if(o<2||!i.objectStoreNames.contains(J1))return;const l=a.objectStore(J1),p=yield l.index("fcmSenderId").get(n);if(yield l.clear(),p)if(2===o){const g=p;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:null!==(c=g.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:"string"==typeof g.vapidKey?g.vapidKey:os(g.vapidKey)}}}else if(3===o){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:os(g.auth),p256dh:os(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:os(g.vapidKey)}}}else if(4===o){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:os(g.auth),p256dh:os(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:os(g.vapidKey)}}}}),function(o,s,a,c){return r.apply(this,arguments)})})).close(),yield hw(tE),yield hw("fcm_vapid_details_db"),yield hw("undefined"),function hZ(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),nE.apply(this,arguments)}const pZ="firebase-messaging-database",mZ=1,Fa="firebase-messaging-store";let rE=null;function iE(){return rE||(rE=Yp(pZ,mZ,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Fa)}})),rE}function Z1(n){return oE.apply(this,arguments)}function oE(){return oE=ge(function*(n){const e=lE(n),r=yield(yield iE()).transaction(Fa).objectStore(Fa).get(e);if(r)return r;{const i=yield function fZ(n){return nE.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield sE(n,i),i}}),oE.apply(this,arguments)}function sE(n,e){return aE.apply(this,arguments)}function aE(){return(aE=ge(function*(n,e){const t=lE(n),i=(yield iE()).transaction(Fa,"readwrite");return yield i.objectStore(Fa).put(e,t),yield i.done,e})).apply(this,arguments)}function cE(){return(cE=ge(function*(n){const e=lE(n),r=(yield iE()).transaction(Fa,"readwrite");yield r.objectStore(Fa).delete(e),yield r.done})).apply(this,arguments)}function lE({appConfig:n}){return n.appId}const pr=new Qi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vZ(n,e){return uE.apply(this,arguments)}function uE(){return(uE=ge(function*(n,e){const t=yield pE(n),r=tL(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(hE(n.appConfig),i)).json()}catch(s){throw pr.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error)throw pr.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw pr.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function dE(){return(dE=ge(function*(n,e){const t=yield pE(n),r=tL(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${hE(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw pr.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error)throw pr.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw pr.create("token-update-no-token");return o.token})).apply(this,arguments)}function eL(n,e){return fE.apply(this,arguments)}function fE(){return(fE=ge(function*(n,e){const r={method:"DELETE",headers:yield pE(n)};try{const o=yield(yield fetch(`${hE(n.appConfig)}/${e}`,r)).json();if(o.error)throw pr.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw pr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function hE({projectId:n}){return`${sZ}/projects/${n}/registrations`}function pE(n){return mE.apply(this,arguments)}function mE(){return(mE=ge(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function tL({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Q1&&(i.web.applicationPubKey=r),i}const bZ=6048e5;function gE(){return gE=ge(function*(n){const e=yield function TZ(n,e){return bE.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:os(e.getKey("auth")),p256dh:os(e.getKey("p256dh"))},r=yield Z1(n.firebaseDependencies);if(r){if(function SZ(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+bZ?function EZ(n,e){return vE.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield eL(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return rL(n.firebaseDependencies,t)}return rL(n.firebaseDependencies,t)}),gE.apply(this,arguments)}function _E(){return _E=ge(function*(n){const e=yield Z1(n.firebaseDependencies);e&&(yield eL(n.firebaseDependencies,e.token),yield function gZ(n){return cE.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),_E.apply(this,arguments)}function vE(){return vE=ge(function*(n,e){try{const t=yield function yZ(n,e){return dE.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield sE(n.firebaseDependencies,r),t}catch(t){throw yield function nL(n){return _E.apply(this,arguments)}(n),t}}),vE.apply(this,arguments)}function rL(n,e){return yE.apply(this,arguments)}function yE(){return(yE=ge(function*(n,e){const r={token:yield vZ(n,e),createTime:Date.now(),subscriptionOptions:e};return yield sE(n,r),r.token})).apply(this,arguments)}function bE(){return(bE=ge(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uZ(e)})})).apply(this,arguments)}function iL(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function CZ(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}(e,n),function IZ(n,e){e.data&&(n.data=e.data)}(e,n),function xZ(n,e){var t,r,i,o,s;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;a&&(n.fcmOptions.link=a);const c=null===(s=e.fcmOptions)||void 0===s?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}(e,n),e}function oL(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function wE(n){return pr.create("missing-app-config-values",{valueName:n})}oL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oL("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class AZ{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function kZ(n){if(!n||!n.options)throw wE("App Configuration Object");if(!n.name)throw wE("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw wE(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function sL(n){return EE.apply(this,arguments)}function EE(){return(EE=ge(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(iZ,{scope:oZ}),n.swRegistration.update().catch(()=>{})}catch(e){throw pr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function TE(){return(TE=ge(function*(n,e){if(!e&&!n.swRegistration&&(yield sL(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw pr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function SE(){return(SE=ge(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Q1)})).apply(this,arguments)}function CE(){return CE=ge(function*(n,e){if(!navigator)throw pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pr.create("permission-blocked");return yield function RZ(n,e){return SE.apply(this,arguments)}(n,e?.vapidKey),yield function MZ(n,e){return TE.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function wZ(n){return gE.apply(this,arguments)}(n)}),CE.apply(this,arguments)}function IE(){return(IE=ge(function*(n,e,t){const r=function OZ(n){switch(n){case bl.NOTIFICATION_CLICKED:return"notification_open";case bl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[X1],message_name:t[aZ],message_time:t[cZ],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xE(){return xE=ge(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===bl.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(iL(t)):n.onMessageHandler.next(iL(t)));const r=t.data;(function DZ(n){return"object"==typeof n&&!!n&&X1 in n})(r)&&"1"===r[lZ]&&(yield function PZ(n,e,t){return IE.apply(this,arguments)}(n,t.messageType,r))}),xE.apply(this,arguments)}const cL="@firebase/messaging",LZ=n=>{const e=new AZ(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function NZ(n,e){return xE.apply(this,arguments)}(e,t)),e},FZ=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function aL(n,e){return CE.apply(this,arguments)}(e,r)}};function uL(){return DE.apply(this,arguments)}function DE(){return(DE=ge(function*(){try{yield ml()}catch{return!1}return typeof window<"u"&&Us()&&Wp()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function BZ(n=rs()){return uL().then(e=>{if(!e)throw pr.create("unsupported-browser")},e=>{throw pr.create("indexed-db-unsupported")}),ci($n(n),"messaging").getImmediate()}!function VZ(){tr(new qn("messaging",LZ,"PUBLIC")),tr(new qn("messaging-internal",FZ,"PRIVATE")),Dt(cL,"0.12.4"),Dt(cL,"0.12.4","esm2017")}();const tm="analytics",HZ="firebase_id",$Z="origin",WZ=6e4,zZ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dL="https://www.googletagmanager.com/gtag/js",mr=new Aa("@firebase/analytics");function fL(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function ME(){return(ME=ge(function*(n,e,t,r,i,o){const s=r[i];try{if(s)yield e[s];else{const c=(yield fL(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){mr.error(a)}n("config",i,o)})).apply(this,arguments)}function RE(){return(RE=ge(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield fL(t);for(const c of s){const l=a.find(g=>g.measurementId===c),p=l&&e[l.appId];if(!p){o=[];break}o.push(p)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){mr.error(o)}})).apply(this,arguments)}const li=new Qi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),eee=30,hL=new class nee{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ree(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function PE(){return(PE=ge(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:ree(r)},o=zZ.replace("{app-id}",t),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw li.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function OE(){return(OE=ge(function*(n,e=hL,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw li.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw li.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new cee;return setTimeout(ge(function*(){a.abort()}),void 0!==t?t:WZ),pL({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function pL(n,e,t){return NE.apply(this,arguments)}function NE(){return NE=ge(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=hL){var o;const{appId:s,measurementId:a}=n;try{yield function see(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(li.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(c){if(a)return mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw c}try{const c=yield function iee(n){return PE.apply(this,arguments)}(n);return i.deleteThrottleMetadata(s),c}catch(c){const l=c;if(!function aee(n){if(!(n instanceof xi&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l)){if(i.deleteThrottleMetadata(s),a)return mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:s,measurementId:a};throw c}const p=503===Number(null===(o=l?.customData)||void 0===o?void 0:o.httpStatus)?sw(t,i.intervalMillis,eee):sw(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(s,g),mr.debug(`Calling attemptFetch again in ${p} millis`),pL(n,g,r,i)}}),NE.apply(this,arguments)}class cee{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let LE,HE;function FE(){return(FE=ge(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function jE(){return(jE=ge(function*(n,e,t,r){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();n("config",yield e,{update:!0,user_id:t})})).apply(this,arguments)}function $E(){return($E=ge(function*(){if(!Us())return mr.warn(li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield ml()}catch(n){return mr.warn(li.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function WE(){return WE=ge(function*(n,e,t,r,i,o,s){var a;const c=function oee(n){return OE.apply(this,arguments)}(n);c.then(U=>{t[U.measurementId]=U.appId,n.options.measurementId&&U.measurementId!==n.options.measurementId&&mr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${U.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(U=>mr.error(U)),e.push(c);const l=function pee(){return $E.apply(this,arguments)}().then(U=>{if(U)return r.getId()}),[p,g]=yield Promise.all([c,l]);(function JZ(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(dL)&&t.src.includes(n))return t;return null})(o)||function GZ(n,e){const t=document.createElement("script");t.src=`${dL}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}(o,p.measurementId),HE&&(i("consent","default",HE),function mL(n){HE=n}(void 0)),i("js",new Date);const O=null!==(a=s?.config)&&void 0!==a?a:{};return O[$Z]="firebase",O.update=!0,null!=g&&(O[HZ]=g),i("config",p.measurementId,O),LE&&(i("set",LE),function gL(n){LE=n}(void 0)),p.measurementId}),WE.apply(this,arguments)}class gee{constructor(e){this.app=e}_delete(){return delete ss[this.app.options.appId],Promise.resolve()}}let ss={},_L=[];const vL={};let bL,as,nm="dataLayer",yL="gtag",zE=!1;function vee(n,e,t){!function _ee(){const n=[];if(rw()&&n.push("This is a browser extension environment."),Wp()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=li.create("invalid-analytics-context",{errorInfo:e});mr.warn(t.message)}}();const r=n.options.appId;if(!r)throw li.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw li.create("no-api-key");mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ss[r])throw li.create("already-exists",{id:r});if(!zE){!function KZ(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(nm);const{wrappedGtag:o,gtagCore:s}=function XZ(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function QZ(n,e,t,r){function o(){return o=ge(function*(s,a,c){try{"event"===s?yield function YZ(n,e,t,r,i){return RE.apply(this,arguments)}(n,e,t,a,c):"config"===s?yield function qZ(n,e,t,r,i,o){return ME.apply(this,arguments)}(n,e,t,r,a,c):"consent"===s?n("consent","update",c):n("set",a)}catch(l){mr.error(l)}}),o.apply(this,arguments)}return function i(s,a,c){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(ss,_L,vL,nm,yL);as=o,bL=s,zE=!0}return ss[r]=function mee(n,e,t,r,i,o,s){return WE.apply(this,arguments)}(n,_L,vL,e,bL,nm,t),new gee(n)}function yee(n=rs()){const e=ci(n=$n(n),tm);return e.isInitialized()?e.getImmediate():function bee(n,e={}){const t=ci(n,tm);if(t.isInitialized()){const i=t.getImmediate();if(dd(e,t.getOptions()))return i;throw li.create("already-initialized")}return t.initialize({options:e})}(n)}function wee(){return GE.apply(this,arguments)}function GE(){return(GE=ge(function*(){if(rw()||!Wp()||!Us())return!1;try{return yield ml()}catch{return!1}})).apply(this,arguments)}function Eee(n,e,t){n=$n(n),function dee(n,e,t,r){return jE.apply(this,arguments)}(as,ss[n.app.options.appId],e,t).catch(r=>mr.error(r))}function wL(n,e,t,r){n=$n(n),function lee(n,e,t,r,i){return FE.apply(this,arguments)}(as,ss[n.app.options.appId],e,t,r).catch(i=>mr.error(i))}const EL="@firebase/analytics";!function Tee(){tr(new qn(tm,(e,{options:t})=>vee(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),tr(new qn("analytics-internal",function n(e){try{const t=e.getProvider(tm).getImmediate();return{logEvent:(r,i,o)=>wL(t,r,i,o)}}catch(t){throw li.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Dt(EL,"0.9.4"),Dt(EL,"0.9.4","esm2017")}();class See extends m{constructor(e,t){super()}schedule(e,t=0){return this}}const rm={setInterval(n,e,...t){const{delegate:r}=rm;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=rm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class SL extends See{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return rm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&rm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,v(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const CL={now:()=>(CL.delegate||Date).now(),delegate:void 0};class gd{constructor(e,t=gd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}gd.now=CL.now;class IL extends gd{constructor(e,t=gd.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const xee=new class Iee extends IL{}(class Cee extends SL{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),xL=new IL(SL),Di=new xs("7.5.0"),KE="__angularfire_symbol__analyticsIsSupportedValue",qE="__angularfire_symbol__analyticsIsSupported",YE="__angularfire_symbol__remoteConfigIsSupportedValue",QE="__angularfire_symbol__remoteConfigIsSupported",XE="__angularfire_symbol__messagingIsSupportedValue",JE="__angularfire_symbol__messagingIsSupported";globalThis[qE]||(globalThis[qE]=wee().then(n=>globalThis[KE]=n).catch(()=>globalThis[KE]=!1)),globalThis[JE]||(globalThis[JE]=uL().then(n=>globalThis[XE]=n).catch(()=>globalThis[XE]=!1)),globalThis[QE]||(globalThis[QE]=rZ().then(n=>globalThis[YE]=n).catch(()=>globalThis[YE]=!1));const ZE=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`,im={async:()=>globalThis[JE],sync:()=>{const n=globalThis[XE];if(void 0===n)throw new Error(ZE("Messaging"));return n}},om={async:()=>globalThis[QE],sync:()=>{const n=globalThis[YE];if(void 0===n)throw new Error(ZE("RemoteConfig"));return n}},sm={async:()=>globalThis[qE],sync:()=>{const n=globalThis[KE];if(void 0===n)throw new Error(ZE("Analytics"));return n}};function cs(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ls=(n,e)=>{const t=e?[e]:T1(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};function wl(){}class DL{constructor(e,t=xee){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class Dee{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wl,{},wl,wl)),t.pipe(Hn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let us=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new DL(Zone.current)),this.insideAngular=t.run(()=>new DL(Zone.current,xL)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(xe(it))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Va(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ja(n){return Va().ngZone.run(()=>n())}function Aee(n){return Va(),function Mee(n){return function(t){return(t=t.lift(new Dee(n.ngZone))).pipe(Cf(n.outsideAngular),Sf(n.insideAngular))}}(Va())(n)}const Ree=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ja(()=>n.apply(void 0,r))},Gr=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||(t=ja(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wl,{},wl,wl)))),r[o]=Ree(r[o],t));const i=function kee(n){return Va().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ie){const o=Va();return i.pipe(Cf(o.outsideAngular),Sf(o.insideAngular))}return ja(()=>i)}return i instanceof ie?i.pipe(Aee):i instanceof Promise?ja(()=>new Promise((o,s)=>i.then(a=>ja(()=>o(a)),a=>ja(()=>s(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ja(()=>i)};class ki{constructor(e){return e}}class ds{constructor(){return T1()}}const eT=new Re("angularfire2._apps"),Oee={provide:ki,useFactory:function Pee(n){return n&&1===n.length?n[0]:new ki(rs())},deps:[[new kt,eT]]},Nee={provide:ds,deps:[[new kt,eT]]};function Lee(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ki(r)}}let Fee=(()=>{class n{constructor(t){Dt("angularfire",Di.full,"core"),Dt("angularfire",Di.full,"app"),Dt("angular",nk.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(xe(ks))},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[Oee,Nee]}),n})();function Vee(n,...e){return{ngModule:Fee,providers:[{provide:eT,useFactory:Lee(n),multi:!0,deps:[it,bn,us,...e]}]}}const jee=Gr(E1,!0),tT=new Map,kL={activated:!1,tokenObservers:[]},Uee={initialized:!1,enabled:!1};function gr(n){return tT.get(n)||Object.assign({},kL)}function am(){return Uee}const nT="https://content-firebaseappcheck.googleapis.com/v1",Wee="exchangeDebugToken",AL={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Gee{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return ge(function*(){t.stop();try{t.pending=new pl,yield function Kee(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new pl,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Fr=new Qi("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function iT(n,e){return oT.apply(this,arguments)}function oT(){return(oT=ge(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const g=yield i.getHeartbeatsHeader();g&&(r["X-Firebase-Client"]=g)}const o={method:"POST",body:JSON.stringify(e),headers:r};let s,a;try{s=yield fetch(n,o)}catch(g){throw Fr.create("fetch-network-error",{originalErrorMessage:g?.message})}if(200!==s.status)throw Fr.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(g){throw Fr.create("fetch-parse-error",{originalErrorMessage:g?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Fr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(c[1]),p=Date.now();return{token:a.token,expireTimeMillis:p+l,issuedAtTimeMillis:p}})).apply(this,arguments)}const Jee="firebase-app-check-database",Zee=1,_d="firebase-app-check-store";let um=null;function OL(n,e){return sT.apply(this,arguments)}function sT(){return(sT=ge(function*(n,e){const r=(yield function PL(){return um||(um=new Promise((n,e)=>{try{const t=indexedDB.open(Jee,Zee);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Fr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_d,{keyPath:"compositeKey"})}}catch(t){e(Fr.create("storage-open",{originalErrorMessage:t?.message}))}}),um)}()).transaction(_d,"readwrite"),o=r.objectStore(_d).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Fr.create("storage-set",{originalErrorMessage:null===(l=c.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}const vd=new Aa("@firebase/app-check");function lT(n,e){return Us()?function tte(n,e){return OL(function LL(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VL(){return dT.apply(this,arguments)}function dT(){return(dT=ge(function*(){const n=am();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ate={error:"UNKNOWN_ERROR"};function cte(n){return Up.encodeString(JSON.stringify(n),!1)}function dm(n){return fT.apply(this,arguments)}function fT(){return(fT=ge(function*(n,e=!1){const t=n.app;!function ML(n){if(!gr(n).activated)throw Fr.create("use-before-activation",{appName:n.name})}(t);const r=gr(t);let o,i=r.token;if(i&&!El(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(El(c)?i=c:yield lT(t,void 0))}if(!e&&i&&El(i))return{token:i.token};let a,s=!1;if(function FL(){return am().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iT(function Xee(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${nT}/projects/${t}/apps/${r}:${Wee}?key=${i}`,body:{debug_token:e}}}(t,yield VL()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const c=yield r.exchangeTokenPromise;return yield lT(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield gr(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?vd.warn(c.message):vd.error(c),o=c}return i?o?a=El(i)?{token:i.token,internalError:o}:BL(o):(a={token:i.token},r.token=i,yield lT(t,i)):a=BL(o),s&&function UL(n,e){const t=gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,a),a})).apply(this,arguments)}function pT(n,e){const t=gr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function jL(n){const{app:e}=n,t=gr(e);let r=t.tokenRefresher;r||(r=function lte(n){const{app:e}=n;return new Gee(ge(function*(){let r;if(r=gr(e).token?yield dm(n,!0):yield dm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},AL.RETRIAL_MIN_WAIT,AL.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function El(n){return n.expireTimeMillis-Date.now()>0}function BL(n){return{token:cte(ate),error:n}}class ute{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gr(this.app);for(const t of e)pT(this.app,t.next);return Promise.resolve()}}const YL="app-check-internal";!function Ste(){tr(new qn("app-check",n=>function dte(n,e){return new ute(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(YL).initialize()})),tr(new qn(YL,n=>function fte(n){return{getToken:e=>dm(n,e),addTokenListener:e=>function hT(n,e,t,r){const{app:i}=n,o=gr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&El(o.token)){const a=o.token;Promise.resolve().then(()=>{t({token:a.token}),jL(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>jL(n))}(n,"INTERNAL",e),removeTokenListener:e=>pT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Dt("@firebase/app-check","0.6.4")}();class yd{constructor(){return ls("app-check")}}typeof window<"u"&&window;const kte=function XL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},JL=new Qi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ZL=new Aa("@firebase/auth");function hm(n,...e){ZL.logLevel<=Wt.ERROR&&ZL.error(`Auth (${Pa}): ${n}`,...e)}function Kr(n,...e){throw yT(n,...e)}function ui(n,...e){return yT(n,...e)}function eF(n,e,t){const r=Object.assign(Object.assign({},kte()),{[e]:t});return new Qi("auth","Firebase",r).create(e,{appName:n.name})}function yT(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return JL.create(n,...e)}function Fe(n,e,...t){if(!n)throw yT(e,...t)}function wo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw hm(e),new Error(e)}function fs(n,e){n||wo(e)}const tF=new Map;function hs(n){fs(n instanceof Function,"Expected a class definition");let e=tF.get(n);return e?(fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tF.set(n,e),e)}function bd(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function nF(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class wd{constructor(e,t){this.shortDelay=e,this.longDelay=t,fs(t>e,"Short delay should be less than long delay!"),this.isMobile=nw()||h1()}get(){return function Rte(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function bT(){return"http:"===nF()||"https:"===nF()}()||rw()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wT(n,e){fs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class rF{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void wo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void wo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void wo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ote={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Nte=new wd(3e4,6e4);function Yn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function nr(n,e,t,r){return ET.apply(this,arguments)}function ET(){return(ET=ge(function*(n,e,t,r,i={}){return iF(n,i,ge(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=_l(Object.assign({key:n.config.apiKey},s)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),rF.fetch()(oF(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function iF(n,e,t){return TT.apply(this,arguments)}function TT(){return(TT=ge(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ote),e);try{const i=new Lte(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Ed(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Ed(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Ed(n,"email-already-in-use",s);if("USER_DISABLED"===c)throw Ed(n,"user-disabled",s);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw eF(n,p,l);Kr(n,p)}}catch(i){if(i instanceof xi)throw i;Kr(n,"internal-error",{message:String(i)})}})).apply(this,arguments)}function ps(n,e,t,r){return ST.apply(this,arguments)}function ST(){return(ST=ge(function*(n,e,t,r,i={}){const o=yield nr(n,e,t,r,i);return"mfaPendingCredential"in o&&Kr(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function oF(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?wT(n.config,i):`${n.config.apiScheme}://${i}`}class Lte{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ui(this.auth,"network-request-failed")),Nte.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ed(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ui(n,e,r);return i.customData._tokenResponse=t,i}function CT(){return(CT=ge(function*(n,e){return nr(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function xT(){return(xT=ge(function*(n,e){return nr(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Td(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function DT(){return(DT=ge(function*(n,e=!1){const t=$n(n),r=yield t.getIdToken(e),i=pm(r);Fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Td(kT(i.auth_time)),issuedAtTime:Td(kT(i.iat)),expirationTime:Td(kT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function kT(n){return 1e3*Number(n)}function pm(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return hm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Hp(t);return i?JSON.parse(i):(hm("Failed to decode base64 JWT payload"),null)}catch(i){return hm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ms(n,e){return AT.apply(this,arguments)}function AT(){return(AT=ge(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof xi&&function Hte({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class $te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(ge(function*(){yield t.iteration()}),r)}iteration(){var e=this;return ge(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class sF{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Td(this.lastLoginAt),this.creationTime=Td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sd(n){return MT.apply(this,arguments)}function MT(){return MT=ge(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield ms(n,function jte(n,e){return xT.apply(this,arguments)}(t,{idToken:r}));Fe(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function Gte(n){return n.map(e=>{var{providerId:t}=e,r=tt(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],a=function zte(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,s),p=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new sF(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,g)}),MT.apply(this,arguments)}function RT(){return(RT=ge(function*(n){const e=$n(n);yield Sd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function PT(){return(PT=ge(function*(n,e){const t=yield iF(n,{},ge(function*(){const r=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=oF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rF.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Cd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Bte(n){const e=pm(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return ge(function*(){return Fe(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return ge(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Kte(n,e){return PT.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new Cd;return r&&(Fe("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(Fe("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(Fe("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cd,this.toJSON())}_performRefresh(){return wo("not implemented")}}function Bs(n,e){Fe("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Ua{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=tt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sF(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return ge(function*(){const r=yield ms(t,t.stsTokenManager.getToken(t.auth,e));return Fe(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Ute(n){return DT.apply(this,arguments)}(this,e)}reload(){return function Wte(n){return RT.apply(this,arguments)}(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ua(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return ge(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Sd(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return ge(function*(){const t=yield e.getIdToken();return yield ms(e,function Fte(n,e){return CT.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,p;const g=null!==(r=t.displayName)&&void 0!==r?r:void 0,O=null!==(i=t.email)&&void 0!==i?i:void 0,U=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,q=null!==(s=t.photoURL)&&void 0!==s?s:void 0,ae=null!==(a=t.tenantId)&&void 0!==a?a:void 0,me=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,ye=null!==(l=t.createdAt)&&void 0!==l?l:void 0,Ce=null!==(p=t.lastLoginAt)&&void 0!==p?p:void 0,{uid:be,emailVerified:Pe,isAnonymous:lt,providerData:mt,stsTokenManager:Sn}=t;Fe(be&&Sn,e,"internal-error");const vr=Cd.fromJSON(this.name,Sn);Fe("string"==typeof be,e,"internal-error"),Bs(g,e.name),Bs(O,e.name),Fe("boolean"==typeof Pe,e,"internal-error"),Fe("boolean"==typeof lt,e,"internal-error"),Bs(U,e.name),Bs(q,e.name),Bs(ae,e.name),Bs(me,e.name),Bs(ye,e.name),Bs(Ce,e.name);const yr=new Ua({uid:be,auth:e,email:O,emailVerified:Pe,displayName:g,isAnonymous:lt,photoURL:q,phoneNumber:U,tenantId:ae,stsTokenManager:vr,createdAt:ye,lastLoginAt:Ce});return mt&&Array.isArray(mt)&&(yr.providerData=mt.map(ro=>Object.assign({},ro))),me&&(yr._redirectEventId=me),yr}static _fromIdTokenResponse(e,t,r=!1){return ge(function*(){const i=new Cd;i.updateFromServerResponse(t);const o=new Ua({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Sd(o),o})()}}const aF=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return ge(function*(){return!0})()}_set(t,r){var i=this;return ge(function*(){i.storage[t]=r})()}_get(t){var r=this;return ge(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return ge(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function mm(n,e,t){return`firebase:${n}:${e}:${t}`}class Sl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=mm(this.userKey,i.apiKey,o),this.fullPersistenceKey=mm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return ge(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Ua._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return ge(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return ge(function*(){if(!t.length)return new Sl(hs(aF),e,r);const i=(yield Promise.all(t.map(function(){var l=ge(function*(p){if(yield p._isAvailable())return p});return function(p){return l.apply(this,arguments)}}()))).filter(l=>l);let o=i[0]||hs(aF);const s=mm(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const p=yield l._get(s);if(p){const g=Ua._fromJSON(e,p);l!==o&&(a=g),o=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return o._shouldAllowMigration&&c.length?(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var l=ge(function*(p){if(p!==o)try{yield p._remove(s)}catch{}});return function(p){return l.apply(this,arguments)}}())),new Sl(o,e,r)):new Sl(o,e,r)})()}}function cF(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hF(e))return"Blackberry";if(pF(e))return"Webos";if(OT(e))return"Safari";if((e.includes("chrome/")||uF(e))&&!e.includes("edge/"))return"Chrome";if(fF(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function lF(n=er()){return/firefox\//i.test(n)}function OT(n=er()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uF(n=er()){return/crios\//i.test(n)}function dF(n=er()){return/iemobile/i.test(n)}function fF(n=er()){return/android/i.test(n)}function hF(n=er()){return/blackberry/i.test(n)}function pF(n=er()){return/webos/i.test(n)}function gm(n=er()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mF(n=er()){return gm(n)||fF(n)||pF(n)||hF(n)||/windows phone/i.test(n)||dF(n)}function gF(n,e=[]){let t;switch(n){case"Browser":t=cF(er());break;case"Worker":t=`${cF(er())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pa}/${r}`}class Xte{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return ge(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class Jte{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _F(this),this.idTokenSubscription=new _F(this),this.beforeStateQueue=new Xte(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JL,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(ge(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield Sl.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return ge(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return ge(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(o=l.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return Fe(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return ge(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return ge(function*(){try{yield Sd(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Pte(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return ge(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return ge(function*(){const r=e?$n(e):null;return r&&Fe(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return ge(function*(){if(!r._deleted)return e&&Fe(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(ge(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return ge(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(ge(function*(){yield t.assertedPersistence.setPersistence(hs(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return ge(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return ge(function*(){if(!t.redirectPersistenceManager){const r=e&&hs(e)||t._popupRedirectResolver;Fe(r,t,"argument-error"),t.redirectPersistenceManager=yield Sl.create(t,[hs(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return ge(function*(){var r,i;return t._isInitialized&&(yield t.queue(ge(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return ge(function*(){if(e===t.currentUser)return t.queue(ge(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return ge(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return ge(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function qr(n){return $n(n)}class _F{constructor(e){this.auth=e,this.observer=null,this.addObserver=function MQ(n,e){const t=new RQ(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vF(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yF(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class NT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wo("not implemented")}_getIdTokenResponse(e){return wo("not implemented")}_linkToIdToken(e,t){return wo("not implemented")}_getReauthenticationResolver(e){return wo("not implemented")}}function wF(n,e){return FT.apply(this,arguments)}function FT(){return(FT=ge(function*(n,e){return nr(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function jT(){return(jT=ge(function*(n,e){return ps(n,"POST","/v1/accounts:signInWithPassword",Yn(n,e))})).apply(this,arguments)}function zT(){return(zT=ge(function*(n,e){return ps(n,"POST","/v1/accounts:signInWithEmailLink",Yn(n,e))})).apply(this,arguments)}function GT(){return(GT=ge(function*(n,e){return ps(n,"POST","/v1/accounts:signInWithEmailLink",Yn(n,e))})).apply(this,arguments)}class Id extends NT{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Id(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Id(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return ge(function*(){switch(t.signInMethod){case"password":return function rne(n,e){return jT.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function cne(n,e){return zT.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Kr(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return ge(function*(){switch(r.signInMethod){case"password":return wF(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function lne(n,e){return GT.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:Kr(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function gs(n,e){return KT.apply(this,arguments)}function KT(){return(KT=ge(function*(n,e){return ps(n,"POST","/v1/accounts:signInWithIdp",Yn(n,e))})).apply(this,arguments)}class Cl extends NT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=tt(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Cl(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return gs(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,gs(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_l(t)}return e}}class Dd{constructor(e){var t,r,i,o,s,a;const c=fd(hd(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,p=null!==(r=c.oobCode)&&void 0!==r?r:null,g=function gne(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);Fe(l&&p&&g,"argument-error"),this.apiKey=l,this.operation=g,this.code=p,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function _ne(n){const e=fd(hd(n)).link,t=e?fd(hd(e)).deep_link_id:null,r=fd(hd(n)).deep_link_id;return(r?fd(hd(r)).link:null)||r||t||e||n}(e);try{return new Dd(t)}catch{return null}}}let EF=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Id._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=Dd.parseLink(r);return Fe(i,"argument-error"),Id._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Hs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class TF extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let vne=(()=>{class n extends TF{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Cl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();function SF(n,e){return ZT.apply(this,arguments)}function ZT(){return(ZT=ge(function*(n,e){return ps(n,"POST","/v1/accounts:signUp",Yn(n,e))})).apply(this,arguments)}class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return ge(function*(){const o=yield Ua._fromIdTokenResponse(e,r,i),s=CF(r);return new Ai({user:o,providerId:s,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return ge(function*(){yield e._updateTokensIfNecessary(r,!0);const i=CF(r);return new Ai({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function CF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class ym extends xi{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ym.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ym(e,t,r,i)}}function IF(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?ym._fromErrorAndOperation(n,o,e,r):o})}function nS(n,e){return rS.apply(this,arguments)}function rS(){return(rS=ge(function*(n,e,t=!1){const r=yield ms(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ai._forOperation(n,"link",r)})).apply(this,arguments)}function DF(n,e){return oS.apply(this,arguments)}function oS(){return(oS=ge(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const o=yield ms(n,IF(r,i,e,n),t);Fe(o.idToken,r,"internal-error");const s=pm(o.idToken);Fe(s,r,"internal-error");const{sub:a}=s;return Fe(n.uid===a,r,"user-mismatch"),Ai._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Kr(r,"user-mismatch"),o}})).apply(this,arguments)}function kF(n,e){return sS.apply(this,arguments)}function sS(){return(sS=ge(function*(n,e,t=!1){const r="signIn",i=yield IF(n,r,e),o=yield Ai._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}function aS(n,e){return cS.apply(this,arguments)}function cS(){return(cS=ge(function*(n,e){return kF(qr(n),e)})).apply(this,arguments)}function Cne(n,e,t){return bS.apply(this,arguments)}function bS(){return(bS=ge(function*(n,e,t){const r=qr(n),i=yield SF(r,{returnSecureToken:!0,email:e,password:t}),o=yield Ai._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(o.user),o})).apply(this,arguments)}function Ine(n,e,t){return aS($n(n),EF.credential(e,t))}const Em="__sak";class MF{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Em,"1"),this.storage.removeItem(Em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $ne=(()=>{class n extends MF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Une(){const n=er();return OT(n)||gm(n)}()&&function Qte(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=mF(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Yte(){return function SQ(){const n=er();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return ge(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return ge(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return ge(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),RF=(()=>{class n extends MF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let zne=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return ge(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const l=Array.from(c).map(function(){var g=ge(function*(O){return O(i.origin,a)});return function(O){return g.apply(this,arguments)}}()),p=yield function Wne(n){return Promise.all(n.map(function(){var e=ge(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:p})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Tm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class Gne{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return ge(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((c,l)=>{const p=Tm("",20);o.port1.start();const g=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(O){const U=O;if(U.data.eventId===p)switch(U.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(U.data.response);break;default:clearTimeout(g),clearTimeout(s),l(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Qn(){return window}function NS(){return typeof Qn().WorkerGlobalScope<"u"&&"function"==typeof Qn().importScripts}function LS(){return(LS=ge(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const PF="firebaseLocalStorageDb",Xne=1,Sm="firebaseLocalStorage",OF="fbase_key";class Ad{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Cm(n,e){return n.transaction([Sm],e?"readwrite":"readonly").objectStore(Sm)}function FS(){const n=indexedDB.open(PF,Xne);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Sm,{keyPath:OF})}catch(i){t(i)}}),n.addEventListener("success",ge(function*(){const r=n.result;r.objectStoreNames.contains(Sm)?e(r):(r.close(),yield function Jne(){const n=indexedDB.deleteDatabase(PF);return new Ad(n).toPromise()}(),e(yield FS()))}))})}function NF(n,e,t){return VS.apply(this,arguments)}function VS(){return(VS=ge(function*(n,e,t){const r=Cm(n,!0).put({[OF]:e,value:t});return new Ad(r).toPromise()})).apply(this,arguments)}function jS(){return(jS=ge(function*(n,e){const t=Cm(n,!1).get(e),r=yield new Ad(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function LF(n,e){const t=Cm(n,!0).delete(e);return new Ad(t).toPromise()}const nre=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return ge(function*(){return t.db||(t.db=yield FS()),t.db})()}_withRetries(t){var r=this;return ge(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return ge(function*(){return NS()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return ge(function*(){t.receiver=zne._getInstance(function Qne(){return NS()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=ge(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=ge(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return ge(function*(){var r,i;if(t.activeServiceWorker=yield function qne(){return LS.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Gne(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return ge(function*(){if(r.sender&&r.activeServiceWorker&&function Yne(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return ge(function*(){try{if(!indexedDB)return!1;const t=yield FS();return yield NF(t,Em,"1"),yield LF(t,Em),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return ge(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return ge(function*(){return i._withPendingWrite(ge(function*(){return yield i._withRetries(o=>NF(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return ge(function*(){const i=yield r._withRetries(o=>function Zne(n,e){return jS.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return ge(function*(){return r._withPendingWrite(ge(function*(){return yield r._withRetries(i=>LF(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return ge(function*(){const r=yield t._withRetries(s=>{const a=Cm(s,!1).getAll();return new Ad(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(ge(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function VF(n){return`__${n}${Math.floor(1e6*Math.random())}`}function Ha(n,e){return e?hs(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}VF("rcb"),new wd(3e4,6e4);class YS extends NT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yre(n){return kF(n.auth,new YS(n),n.bypassAuthState)}function bre(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),DF(t,new YS(n),n.bypassAuthState)}function wre(n){return QS.apply(this,arguments)}function QS(){return(QS=ge(function*(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),nS(t,new YS(n),n.bypassAuthState)})).apply(this,arguments)}class UF{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=ge(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return ge(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void t.reject(a);const l={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(l))}catch(p){t.reject(p)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yre;case"linkViaPopup":case"linkViaRedirect":return wre;case"reauthViaPopup":case"reauthViaRedirect":return bre;default:Kr(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ere=new wd(2e3,1e4);function XS(){return(XS=ge(function*(n,e,t){const r=qr(n);!function Tl(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Kr(n,"argument-error"),eF(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,Hs);const i=Ha(r,t);return new eC(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let eC=(()=>{class n extends UF{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return ge(function*(){const r=yield t.execute();return Fe(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return ge(function*(){fs(1===t.filter.length,"Popup operations only handle one event");const r=Tm();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(ui(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,Ere.get())};t()}}return n.currentPopupAction=null,n})();const Sre="pendingRedirect",Md=new Map;class Cre extends UF{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return ge(function*(){let r=Md.get(t.auth._key());if(!r){try{const o=(yield function Ire(n,e){return tC.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Md.set(t.auth._key(),r)}return t.bypassAuthState||Md.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return ge(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return ge(function*(){})()}cleanUp(){}}function tC(){return(tC=ge(function*(n,e){const t=function HF(n){return mm(Sre,n.config.apiKey,n.name)}(e),r=function BF(n){return hs(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function xre(n,e){Md.set(n._key(),e)}function $F(n,e){return cC.apply(this,arguments)}function cC(){return(cC=ge(function*(n,e,t=!1){const r=qr(n),i=Ha(r,e),s=yield new Cre(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Rre{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Pre(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GF(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GF(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ui(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zF(e))}saveEventToCache(e){this.cachedEventUids.add(zF(e)),this.lastProcessedEventTime=Date.now()}}function zF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GF({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function uC(){return(uC=ge(function*(n,e={}){return nr(n,"GET","/v1/projects",e)})).apply(this,arguments)}const Nre=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lre=/^https?/;function dC(){return dC=ge(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function Ore(n){return uC.apply(this,arguments)}(n);for(const t of e)try{if(Vre(t))return}catch{}Kr(n,"unauthorized-domain")}),dC.apply(this,arguments)}function Vre(n){const e=bd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!Lre.test(t))return!1;if(Nre.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const jre=new wd(3e4,6e4);function KF(){const n=Qn().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let xm=null;function Bre(n){return xm=xm||function Ure(n){return new Promise((e,t)=>{var r,i,o;function s(){KF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KF(),t(ui(n,"network-request-failed"))},timeout:jre.get()})}if(null!==(i=null===(r=Qn().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Qn().gapi)||void 0===o||!o.load){const a=VF("iframefcb");return Qn()[a]=()=>{gapi.load?s():t(ui(n,"network-request-failed"))},function FF(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ui("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function sre(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}s()}}).catch(e=>{throw xm=null,e})}(n),xm}const Hre=new wd(5e3,15e3),$re="__/auth/iframe",Wre="emulator/auth/iframe",zre={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kre(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wT(e,Wre):`https://${n.config.authDomain}/${$re}`,r={apiKey:e.apiKey,appName:n.name,v:Pa},i=Gre.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${_l(r).slice(1)}`}function fC(){return fC=ge(function*(n){const e=yield Bre(n),t=Qn().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:Kre(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zre,dontclear:!0},r=>new Promise(function(){var i=ge(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=ui(n,"network-request-failed"),c=Qn().setTimeout(()=>{s(a)},Hre.get());function l(){Qn().clearTimeout(c),o(r)}r.ping(l).then(l,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),fC.apply(this,arguments)}const Yre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qre=500,Xre=600,Jre="_blank",Zre="http://localhost";class qF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const nie="__/auth/handler",rie="emulator/auth/handler";function YF(n,e,t,r,i,o){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pa,eventId:i};if(e instanceof Hs){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",iw(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,l]of Object.entries(o||{}))s[c]=l}if(e instanceof TF){const c=e.getScopes().filter(l=>""!==l);c.length>0&&(s.scopes=c.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];return`${function iie({config:n}){return n.emulator?wT(n,rie):`https://${n.authDomain}/${nie}`}(n)}?${_l(a).slice(1)}`}const hC="webStorageSupport",sie=class oie{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RF,this._completeRedirectFn=$F,this._overrideRedirectResult=xre}_openPopup(e,t,r,i){var o=this;return ge(function*(){var s;fs(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=YF(e,t,r,bd(),i);return function eie(n,e,t,r=Qre,i=Xre){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Yre),{width:r.toString(),height:i.toString(),top:o,left:s}),l=er().toLowerCase();t&&(a=uF(l)?Jre:t),lF(l)&&(e=e||Zre,c.scrollbars="yes");const p=Object.entries(c).reduce((O,[U,q])=>`${O}${U}=${q},`,"");if(function qte(n=er()){var e;return gm(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function tie(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new qF(null);const g=window.open(e||"",a,p);Fe(g,n,"popup-blocked");try{g.focus()}catch{}return new qF(g)}(e,a,Tm())})()}_openRedirect(e,t,r,i){var o=this;return ge(function*(){return yield o._originValidation(e),function Kne(n){Qn().location.href=n}(YF(e,t,r,bd(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(fs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return ge(function*(){const r=yield function qre(n){return fC.apply(this,arguments)}(e),i=new Rre(e);return r.register("authEvent",o=>(Fe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hC,{type:hC},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[hC];void 0!==s&&t(!!s),Kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Fre(n){return dC.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mF()||OT()||gm()}};var XF="@firebase/auth";class aie{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return ge(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const die=d1("authIdTokenMaxAge")||300;let ZF=null;const fie=n=>function(){var e=ge(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>die)return;const o=r?.token;ZF!==o&&(ZF=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function hie(n=rs()){const e=ci(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function Ate(n,e){const t=ci(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(dd(t.getOptions(),e??{}))return i;Kr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:sie,persistence:[nre,$ne,RF]}),r=d1("authTokenSyncURL");if(r){const o=fie(r);(function Nne(n,e,t){$n(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function One(n,e,t,r){$n(n).onIdTokenChanged(e,t,r)}(t,s=>o(s))}const i=u1("auth");return i&&function Zte(n,e,t){const r=qr(n);Fe(r._canInitEmulator,r,"emulator-config-failed"),Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=vF(e),{host:s,port:a}=function ene(n){const e=vF(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:yF(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:yF(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function tne(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}function pie(n){return new ie(function(e){var t=function Lne(n,e,t,r){return $n(n).onAuthStateChanged(e,t,r)}(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}!function lie(n){tr(new qn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:o,authDomain:s}=r.options;return((a,c)=>{Fe(o&&!o.includes(":"),"invalid-api-key",{appName:a.name}),Fe(!s?.includes(":"),"argument-error",{appName:a.name});const l={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gF(n)},p=new Jte(a,c,l);return function Mte(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(hs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(p,t),p})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),tr(new qn("auth-internal",e=>{const t=qr(e.getProvider("auth").getImmediate());return new aie(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dt(XF,"0.21.4",function cie(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Dt(XF,"0.21.4","esm2017")}("Browser");class $a{constructor(e){return e}}class Dm{constructor(){return ls("auth")}}const pC=new Re("angularfire2.auth-instances");function _ie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $a(r)}}const vie={provide:Dm,deps:[[new kt,pC]]},yie={provide:$a,useFactory:function gie(n,e){const t=cs("auth",n,e);return t&&new $a(t)},deps:[[new kt,pC],ki]};let bie=(()=>{class n{constructor(){Dt("angularfire",Di.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[yie,vie]}),n})();function wie(n,...e){return{ngModule:bie,providers:[{provide:pC,useFactory:_ie(n),multi:!0,deps:[it,bn,us,ds,[new kt,yd],...e]}]}}const Eie=Gr(pie,!0),Tie=Gr(Cne,!0),Sie=Gr(hie,!0),Cie=Gr(Ine,!0);var mC=w(6021);let gC,t2=(()=>{class n{constructor(t,r,i){this.authFire=t,this.router=r,this.http=i,this.msgSubject=new si("")}loginViaGoogle(){return function Tre(n,e,t){return XS.apply(this,arguments)}(this.authFire,new vne).then(r=>{console.log(r.user.displayName+"user name"),console.log(r.user.phoneNumber+"user number"),console.log(r.user.uid+"user id"),localStorage.setItem("userAuth",r.user.uid),this.router.navigate(["video"])},r=>{alert(r.message)})}SignIn(t,r){return Cie(this.authFire,t,r).then(o=>{console.log(o.user.displayName+"user name"),console.log(o.user.phoneNumber+"user number"),console.log(o.user.uid+"user id"),localStorage.setItem("userAuth",o.user.uid),this.router.navigate(["video"])},o=>{console.log(o+"err"),alert(o.message)})}SignUp(t,r){return Tie(this.authFire,t,r).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SetUserData(t){throw new Error("Method not implemented.")}SendVerificationMail(){throw new Error("Method not implemented.")}logOut(){this.authFire.signOut().then(()=>{localStorage.removeItem("userAuth"),this.router.navigate(["dashboard"])},t=>{alert(t.message)})}getToken(t){console.log(t+"uuuuuuuu");let r=new _o;return r.append("Access-Control-Allow-Origin","*"),this.http.get("https://9454-110-227-205-166.ngrok.io/api/generateToken?userName="+t,{headers:r})}connectToRoom(t,r){(0,mC.connect)(t,r).then(i=>{this.roomObj=i,!this.previewing&&r.video&&(this.startLocalVideo(),this.previewing=!0),i.participants.forEach(o=>{this.msgSubject.next("Already in Room: '"+o.identity+"'")}),i.on("participantDisconnected",o=>{this.msgSubject.next("Participant '"+o.identity+"' left the room"),this.detachParticipantTracks(o)}),i.on("participantConnected",o=>{o.tracks.forEach(s=>{document.getElementById("remote").appendChild(s.track)})}),i.on("trackEnabled",(o,s)=>{console.log(s.identity+" added track: "+o.kind),this.attachTracks([o])}),i.on("trackDisabled",(o,s)=>{console.log(s.identity+" removed track: "+o.kind),this.detachTracks([o])}),i.once("disconnected",o=>{this.msgSubject.next("You left the Room:"+o.name),o.localParticipant.tracks.forEach(s=>{s.detach().forEach(c=>c.remove())})})})}attachParticipantTracks(t){var r=Array.from(t.tracks.values());this.attachTracks([r])}attachTracks(t){t.forEach(r=>{document.getElementById("remote").appendChild(r.attach())})}startLocalVideo(){(0,mC.createLocalVideoTrack)().then(t=>{console.log("tracktracktracktrack",t),document.getElementById("local").appendChild(t.attach())})}localPreview(){(0,mC.createLocalVideoTrack)().then(t=>{document.getElementById("local").appendChild(t.attach())})}detachParticipantTracks(t){var r=Array.from(t.tracks.values());this.detachTracks(r)}detachTracks(t){t.forEach(function(r){r.detach().forEach(function(i){i.remove()})})}}return n.\u0275fac=function(t){return new(t||n)(xe($a),xe(fr),xe(np))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{gC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gC=!1}let Il,Eo=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Fy(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!gC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(xe(ks))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const n2=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function r2(){if(Il)return Il;if("object"!=typeof document||!document)return Il=new Set(n2),Il;let n=document.createElement("input");return Il=new Set(n2.filter(e=>(n.setAttribute("type",e),n.type===e))),Il}let Rd,_C;function Pd(n){return function Iie(){if(null==Rd&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rd=!0}))}finally{Rd=Rd||!1}return Rd}()?n:!!n.capture}function xl(n){return n.composedPath?n.composedPath()[0]:n.target}function o2(n){return Si((e,t)=>n<=t)}function s2(n,e=J){return n=n??Nie,le((t,r)=>{let i,o=!0;t.subscribe(_e(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Nie(n,e){return n===e}function Od(n){return le((e,t)=>{on(n).subscribe(_e(t,()=>t.complete(),y)),!t.closed&&e.subscribe(t)})}function $s(n){return null!=n&&"false"!=`${n}`}function a2(n){return Array.isArray(n)?n:[n]}function Ws(n){return n instanceof mn?n.nativeElement:n}function c2(n,e=xL){return le((t,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=o;o=null,r.next(l)}};function c(){const l=s+n,p=e.now();if(p<l)return i=this.schedule(void 0,l-p),void r.add(i);a()}t.subscribe(_e(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}const l2=new Set;let Dl,Vie=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Uie}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function jie(n){if(!l2.has(n))try{Dl||(Dl=document.createElement("style"),Dl.setAttribute("type","text/css"),document.head.appendChild(Dl)),Dl.sheet&&(Dl.sheet.insertRule(`@media ${n} {body{ }}`,0),l2.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(Eo))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Uie(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Bie=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Y}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return u2(a2(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=eb(u2(a2(t)).map(s=>this._registerQuery(s).observable));return o=ip(o.pipe(Ea(1)),o.pipe(o2(1),c2(0))),o.pipe(pe(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new ie(s=>{const a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(nb(r),pe(({matches:s})=>({query:t,matches:s})),Od(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(xe(Vie),xe(it))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function u2(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function p2(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function m2(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Yie=new Re("cdk-input-modality-detector-options"),Qie={ignoreKeys:[18,17,224,91,16]},kl=Pd({passive:!0,capture:!0});let Xie=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new si(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=xl(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(p2(s)?"keyboard":"mouse"),this._mostRecentTarget=xl(s))},this._onTouchstart=s=>{m2(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=xl(s))},this._options={...Qie,...o},this.modalityDetected=this._modality.pipe(o2(1)),this.modalityChanged=this.modalityDetected.pipe(s2()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,kl),i.addEventListener("mousedown",this._onMousedown,kl),i.addEventListener("touchstart",this._onTouchstart,kl)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,kl),document.removeEventListener("mousedown",this._onMousedown,kl),document.removeEventListener("touchstart",this._onTouchstart,kl))}}return n.\u0275fac=function(t){return new(t||n)(xe(Eo),xe(it),xe(Jt),xe(Yie,8))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zie=new Re("cdk-focus-monitor-default-options"),Am=Pd({passive:!0,capture:!0});let eoe=(()=>{class n{constructor(t,r,i,o,s){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Y,this._rootNodeFocusAndBlurListener=a=>{for(let l=xl(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,r=!1){const i=Ws(t);if(!this._platform.isBrowser||1!==i.nodeType)return $e(null);const o=function Die(n){if(function xie(){if(null==_C){const n=typeof document<"u"?document.head:null;_C=!(!n||!n.createShadowRoot&&!n.attachShadow)}return _C}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;const a={checkChildren:r,subject:new Y,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Ws(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Ws(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=xl(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Am),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Am)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Od(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Am),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Am),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(xe(it),xe(Eo),xe(Xie),xe(Jt,8),xe(Zie,8))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _2="cdk-high-contrast-black-on-white",v2="cdk-high-contrast-white-on-black",vC="cdk-high-contrast-active";let toe=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=st(Bie).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(vC,_2,v2),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(vC,_2):2===r&&t.add(vC,v2)}}}return n.\u0275fac=function(t){return new(t||n)(xe(Eo),xe(Jt))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const noe=new Re("cdk-dir-doc",{providedIn:"root",factory:function roe(){return st(Jt)}}),ioe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let soe=(()=>{class n{constructor(t){this.value="ltr",this.change=new _n,t&&(this.value=function ooe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?ioe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(xe(noe,8))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),y2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({}),n})();const coe=new Re("mat-sanity-checks",{providedIn:"root",factory:function aoe(){return!0}});let To=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function kie(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(xe(toe),xe(coe,8),xe(Jt))},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[y2,y2]}),n})();function loe(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=$s(e)}constructor(...e){super(...e),this._disabled=!1}}}function E2(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function uoe(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=$s(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function doe(n){return class extends n{updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let hoe=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class poe{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const T2=Pd({passive:!0,capture:!0});class moe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=xl(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,r,i){const o=this._events.get(t);if(o){const s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,T2)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const o=i.get(t);o&&(o.delete(r),0===o.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,T2)))}}const S2={enterDuration:225,exitDuration:150},C2=Pd({passive:!0,capture:!0}),I2=["mousedown","touchstart"],x2=["mouseup","mouseleave","touchend","touchcancel"];class Ld{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ws(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...S2,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const s=r.radius||function _oe(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,l=o.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=a-s+"px",p.style.top=c-s+"px",p.style.height=2*s+"px",p.style.width=2*s+"px",null!=r.color&&(p.style.backgroundColor=r.color),p.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(p);const g=window.getComputedStyle(p),U=g.transitionDuration,q="none"===g.transitionProperty||"0s"===U||"0s, 0s"===U||0===i.width&&0===i.height,ae=new poe(this,p,r,q);p.style.transform="scale3d(1, 1, 1)",ae.state=0,r.persistent||(this._mostRecentTransientRipple=ae);let me=null;return!q&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ye=()=>this._finishRippleTransition(ae),Ce=()=>this._destroyRipple(ae);p.addEventListener("transitionend",ye),p.addEventListener("transitioncancel",Ce),me={onTransitionEnd:ye,onTransitionCancel:Ce}}),this._activeRipples.set(ae,me),(q||!l)&&this._finishRippleTransition(ae),ae}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...S2,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ws(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,I2.forEach(r=>{Ld._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{x2.forEach(t=>{this._triggerElement.addEventListener(t,this,C2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=p2(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!m2(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(I2.forEach(t=>Ld._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&x2.forEach(t=>e.removeEventListener(t,this,C2)))}}Ld._eventManager=new moe;const voe=new Re("mat-ripple-global-options");let yC=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Ld(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(it),we(Eo),we(voe,8),we(Jc,8))},n.\u0275dir=Ge({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&Ir("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),yoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[To,To]}),n})();const boe=["*"];let Mm;function Fd(n){return function woe(){if(void 0===Mm&&(Mm=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Mm=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Mm}()?.createHTML(n)||n}function D2(n){return Error(`Unable to find icon with the name "${n}"`)}function k2(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function A2(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class za{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Rm=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new za(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const s=this._sanitizer.sanitize(Ht.HTML,i);if(!s)throw A2(i);const a=Fd(s);return this._addSvgIconConfig(t,r,new za("",a,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new za(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Ht.HTML,r);if(!o)throw A2(r);const s=Fd(o);return this._addSvgIconSetConfig(t,new za("",s,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Ht.RESOURCE_URL,t);if(!r)throw k2(t);const i=this._cachedIconsByUrl.get(r);return i?$e(Pm(i)):this._loadSvgIconFromConfig(new za(t,null)).pipe(Hn(o=>this._cachedIconsByUrl.set(r,o)),pe(o=>Pm(o)))}getNamedSvgIcon(t,r=""){const i=M2(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(t,s):tl(D2(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?$e(Pm(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(pe(r=>Pm(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?$e(i):rN(r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Qo(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Ht.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),$e(null)})))).pipe(pe(()=>{const s=this._extractIconWithNameFromAnySet(t,r);if(!s)throw D2(t);return s}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Hn(r=>t.svgText=r),pe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?$e(null):this._fetchIcon(t).pipe(Hn(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,i);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),i);const a=this._svgElementFromString(Fd("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Fd("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:s,value:a}=i[o];"id"!==s&&r.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function Eoe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const s=this._sanitizer.sanitize(Ht.RESOURCE_URL,r);if(!s)throw k2(r);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(pe(l=>Fd(l)),sp(()=>this._inProgressUrlFetches.delete(s)),XI());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(M2(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return Soe(o)?new za(o.url,null,o.options):new za(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(xe(np,8),xe(qy),xe(Jt,8),xe(Bo))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Pm(n){return n.cloneNode(!0)}function M2(n,e){return n+":"+e}function Soe(n){return!(!n.url||!n.options)}const Coe=E2(class{constructor(n){this._elementRef=n}}),Ioe=new Re("MAT_ICON_DEFAULT_OPTIONS"),xoe=new Re("mat-icon-location",{providedIn:"root",factory:function Doe(){const n=st(Jt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),R2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],koe=R2.map(n=>`[${n}]`).join(", "),Aoe=/^url\(['"]?#(.*?)['"]?\)$/;let P2=(()=>{class n extends Coe{get inline(){return this._inline}set inline(t){this._inline=$s(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,i,o,s,a){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=m.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(koe),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)R2.forEach(s=>{const a=r[o],c=a.getAttribute(s),l=c?c.match(Aoe):null;if(l){let p=i.get(a);p||(p=[],i.set(a,p)),p.push({name:s,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Ea(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(Rm),bc("aria-hidden"),we(xoe),we(Bo),we(Ioe,8))},n.\u0275cmp=Vi({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,r){2&t&&(ur("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Ir("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Mt],ngContentSelectors:boe,decls:1,vars:0,template:function(t,r){1&t&&(zc(),Cr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),Moe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[To,To]}),n})();const O2=Pd({passive:!0});let Roe=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Li;const r=Ws(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new Y,s="cdk-text-field-autofilled",a=c=>{"cdk-text-field-autofill-start"!==c.animationName||r.classList.contains(s)?"cdk-text-field-autofill-end"===c.animationName&&r.classList.contains(s)&&(r.classList.remove(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1}))):(r.classList.add(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",a,O2),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",a,O2)}}),o}stopMonitoring(t){const r=Ws(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(xe(Eo),xe(it))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Poe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({}),n})();class N2{}class Ooe{}const _s="*";function Noe(n,e){return{type:7,name:n,definitions:e,options:{}}}function Loe(n,e=null){return{type:4,styles:e,timings:n}}function L2(n,e=null){return{type:2,steps:n,options:e}}function Om(n){return{type:6,styles:n,offset:null}}function Foe(n,e,t){return{type:0,name:n,styles:e,options:t}}function Voe(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function F2(n){Promise.resolve().then(n)}class Vd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){F2(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class V2{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?F2(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const bC="!";let j2=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),joe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Ws(t);return new ie(i=>{const s=this._observeElement(r).subscribe(i);return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Y,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(xe(j2))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uoe=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=$s(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function Lie(n,e=0){return function Fie(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new _n,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(c2(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(we(joe),we(mn),we(it))},n.\u0275dir=Ge({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Boe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[j2]}),n})();const Hoe=["matFormFieldNotchedOutline",""],$oe=["*"],Woe=["textField"],zoe=["iconPrefixContainer"],Goe=["textPrefixContainer"];function Koe(n,e){1&n&&Rn(0,"span",19)}function qoe(n,e){if(1&n){const t=Av();gt(0,"label",17),gn("cdkObserveContent",function(){return Bf(t),Hf($i(2)._refreshOutlineNotchWidth())}),Cr(1,1),zn(2,Koe,1,0,"span",18),vt()}if(2&n){const t=$i(2);Pt("floating",t._shouldLabelFloat())("cdkObserveContentDisabled",!t._hasOutline())("id",t._labelId),ur("for",t._control.id)("aria-owns",t._control.id),$t(2),Pt("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Yoe(n,e){1&n&&zn(0,qoe,3,6,"label",16),2&n&&Pt("ngIf",$i()._hasFloatingLabel())}function Qoe(n,e){1&n&&Rn(0,"div",20)}function Xoe(n,e){}function Joe(n,e){1&n&&zn(0,Xoe,0,0,"ng-template",22),2&n&&($i(2),Pt("ngTemplateOutlet",ga(1)))}function Zoe(n,e){if(1&n&&(gt(0,"div",21),zn(1,Joe,1,1,"ng-template",9),vt()),2&n){const t=$i();Pt("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",t._labelWidth),$t(1),Pt("ngIf",!t._forceDisplayInfixLabel())}}function ese(n,e){1&n&&(gt(0,"div",23,24),Cr(2,2),vt())}function tse(n,e){1&n&&(gt(0,"div",25,26),Cr(2,3),vt())}function nse(n,e){}function rse(n,e){1&n&&zn(0,nse,0,0,"ng-template",22),2&n&&($i(),Pt("ngTemplateOutlet",ga(1)))}function ise(n,e){1&n&&(gt(0,"div",27),Cr(1,4),vt())}function ose(n,e){1&n&&(gt(0,"div",28),Cr(1,5),vt())}function sse(n,e){1&n&&Rn(0,"div",29)}function ase(n,e){1&n&&(gt(0,"div",30),Cr(1,6),vt()),2&n&&Pt("@transitionMessages",$i()._subscriptAnimationState)}function cse(n,e){if(1&n&&(gt(0,"mat-hint",34),Dn(1),vt()),2&n){const t=$i(2);Pt("id",t._hintLabelId),$t(1),Eu(t.hintLabel)}}function lse(n,e){if(1&n&&(gt(0,"div",31),zn(1,cse,2,2,"mat-hint",32),Cr(2,7),Rn(3,"div",33),Cr(4,8),vt()),2&n){const t=$i();Pt("@transitionMessages",t._subscriptAnimationState),$t(1),Pt("ngIf",t.hintLabel)}}const use=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],dse=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Nm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ge({type:n,selectors:[["mat-label"]]}),n})(),fse=0;const U2=new Re("MatError");let hse=(()=>{class n{constructor(t,r){this.id="mat-mdc-error-"+fse++,t||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(bc("aria-live"),we(mn))},n.\u0275dir=Ge({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(t,r){2&t&&Tu("id",r.id)},inputs:{id:"id"},features:[Xt([{provide:U2,useExisting:n}])]}),n})(),pse=0,wC=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+pse++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ge({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,r){2&t&&(Tu("id",r.id),ur("align",null),Ir("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),n})();const mse=new Re("MatPrefix"),B2=new Re("MatSuffix");let H2=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(t){this._isText=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ge({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[Xt([{provide:B2,useExisting:n}])]}),n})(),$2=(()=>{class n{constructor(t){this._elementRef=t,this.floating=!1}getWidth(){return function gse(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const r=t.scrollWidth;return t.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(we(mn))},n.\u0275dir=Ge({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,r){2&t&&Ir("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating"}}),n})();const W2="mdc-line-ripple--active",Lm="mdc-line-ripple--deactivating";let z2=(()=>{class n{constructor(t,r){this._elementRef=t,this._handleTransitionEnd=i=>{const o=this._elementRef.nativeElement.classList,s=o.contains(Lm);"opacity"===i.propertyName&&s&&o.remove(W2,Lm)},r.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(Lm),t.add(W2)}deactivate(){this._elementRef.nativeElement.classList.add(Lm)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(it))},n.\u0275dir=Ge({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),G2=(()=>{class n{constructor(t,r){this._elementRef=t,this._ngZone=r,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(it))},n.\u0275cmp=Vi({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,r){2&t&&Ir("mdc-notched-outline--notched",r.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Hoe,ngContentSelectors:$oe,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(t,r){1&t&&(zc(),Rn(0,"div",0),gt(1,"div",1),Cr(2),vt(),Rn(3,"div",2)),2&t&&($t(1),Lv("width",r._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const _se={transitionMessages:Noe("transitionMessages",[Foe("enter",Om({opacity:1,transform:"translateY(0%)"})),Voe("void => enter",[Om({opacity:0,transform:"translateY(-5px)"}),Loe("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let K2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ge({type:n}),n})();const q2=new Re("MatFormField"),vse=new Re("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Y2=0,J2=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=$s(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,r,i,o,s,a,c,l){this._elementRef=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=o,this._platform=s,this._defaults=a,this._animationMode=c,this._document=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Y2++,this._hintLabelId="mat-mdc-hint-"+Y2++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Y,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Od(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),QI(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Od(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Od(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=r?.getBoundingClientRect().width??0,s=i?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+s}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(Ou),we(it),we(soe),we(Eo),we(vse,8),we(Jc,8),we(Jt))},n.\u0275cmp=Vi({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(zo(i,Nm,5),zo(i,Nm,7),zo(i,K2,5),zo(i,mse,5),zo(i,B2,5),zo(i,U2,5),zo(i,wC,5)),2&t){let o;Jn(o=Zn())&&(r._labelChildNonStatic=o.first),Jn(o=Zn())&&(r._labelChildStatic=o.first),Jn(o=Zn())&&(r._formFieldControl=o.first),Jn(o=Zn())&&(r._prefixChildren=o),Jn(o=Zn())&&(r._suffixChildren=o),Jn(o=Zn())&&(r._errorChildren=o),Jn(o=Zn())&&(r._hintChildren=o)}},viewQuery:function(t,r){if(1&t&&(mo(Woe,5),mo(zoe,5),mo(Goe,5),mo($2,5),mo(G2,5),mo(z2,5)),2&t){let i;Jn(i=Zn())&&(r._textField=i.first),Jn(i=Zn())&&(r._iconPrefixContainer=i.first),Jn(i=Zn())&&(r._textPrefixContainer=i.first),Jn(i=Zn())&&(r._floatingLabel=i.first),Jn(i=Zn())&&(r._notchedOutline=i.first),Jn(i=Zn())&&(r._lineRipple=i.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,r){2&t&&Ir("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Xt([{provide:q2,useExisting:n}])],ngContentSelectors:dse,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,r){1&t&&(zc(use),zn(0,Yoe,1,1,"ng-template",null,0,VM),gt(2,"div",1,2),gn("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),zn(4,Qoe,1,0,"div",3),gt(5,"div",4),zn(6,Zoe,2,3,"div",5),zn(7,ese,3,0,"div",6),zn(8,tse,3,0,"div",7),gt(9,"div",8),zn(10,rse,1,1,"ng-template",9),Cr(11),vt(),zn(12,ise,2,0,"div",10),zn(13,ose,2,0,"div",11),vt(),zn(14,sse,1,0,"div",12),vt(),gt(15,"div",13),zn(16,ase,2,1,"div",14),zn(17,lse,5,2,"div",15),vt()),2&t&&($t(2),Ir("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),$t(2),Pt("ngIf",!r._hasOutline()&&!r._control.disabled),$t(2),Pt("ngIf",r._hasOutline()),$t(1),Pt("ngIf",r._hasIconPrefix),$t(1),Pt("ngIf",r._hasTextPrefix),$t(2),Pt("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),$t(2),Pt("ngIf",r._hasTextSuffix),$t(1),Pt("ngIf",r._hasIconSuffix),$t(1),Pt("ngIf",!r._hasOutline()),$t(1),Ir("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),Pt("ngSwitch",r._getDisplayedMessages()),$t(1),Pt("ngSwitchCase","error"),$t(1),Pt("ngSwitchCase","hint"))},dependencies:[Ry,ZR,Gh,XR,Uoe,wC,$2,G2,z2],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[_se.transitionMessages]},changeDetection:0}),n})(),EC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[To,Ly,Boe,To]}),n})();const wse=new Re("MAT_INPUT_VALUE_ACCESSOR"),Ese=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Tse=0;const Sse=doe(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new Y}});let Z2=(()=>{class n extends Sse{get disabled(){return this._disabled}set disabled(t){this._disabled=$s(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Mb.required)??!1}set required(t){this._required=$s(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&r2().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=$s(t)}constructor(t,r,i,o,s,a,c,l,p,g){super(a,o,s,i),this._elementRef=t,this._platform=r,this._autofillMonitor=l,this._formField=g,this._uid="mat-input-"+Tse++,this.focused=!1,this.stateChanges=new Y,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(q=>r2().has(q)),this._iOSKeyupListener=q=>{const ae=q.target;!ae.value&&0===ae.selectionStart&&0===ae.selectionEnd&&(ae.setSelectionRange(1,1),ae.setSelectionRange(0,0))};const O=this._elementRef.nativeElement,U=O.nodeName.toLowerCase();this._inputValueAccessor=c||O,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&p.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===U,this._isTextarea="textarea"===U,this._isInFormField=!!g,this._isNativeSelect&&(this.controlType=O.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Ese.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(Eo),we(Jo,10),we(Fp,8),we(Vp,8),we(hoe),we(wse,10),we(Roe),we(it),we(q2,8))},n.\u0275dir=Ge({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,r){1&t&&gn("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(Tu("id",r.id)("disabled",r.disabled)("required",r.required),ur("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Ir("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Xt([{provide:K2,useExisting:n}]),Mt,ei]}),n})(),Cse=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[To,EC,EC,Poe,To]}),n})();const Ise=["mat-button",""],xse=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Dse=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Ase=["mat-icon-button",""],Mse=["*"],Rse=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Pse=E2(loe(uoe(class{constructor(n){this._elementRef=n}})));let eV=(()=>{class n extends Pse{constructor(t,r,i,o){super(t),this._platform=r,this._ngZone=i,this._animationMode=o,this._focusMonitor=st(eoe),this._isFab=!1;const s=t.nativeElement.classList;for(const a of Rse)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(c=>{s.add(c)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){dv()},n.\u0275dir=Ge({type:n,viewQuery:function(t,r){if(1&t&&mo(yC,5),2&t){let i;Jn(i=Zn())&&(r.ripple=i.first)}},features:[Mt]}),n})(),tV=(()=>{class n extends eV{constructor(t,r,i,o){super(t,r,i,o)}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(Eo),we(it),we(Jc,8))},n.\u0275cmp=Vi({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,r){2&t&&(ur("disabled",r.disabled||null),Ir("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Mt],attrs:Ise,ngContentSelectors:Dse,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(zc(xse),Rn(0,"span",0),Cr(1),gt(2,"span",1),Cr(3,1),vt(),Cr(4,2),Rn(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(Ir("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),$t(6),Pt("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[yC],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),Lse=(()=>{class n extends eV{constructor(t,r,i,o){super(t,r,i,o)}}return n.\u0275fac=function(t){return new(t||n)(we(mn),we(Eo),we(it),we(Jc,8))},n.\u0275cmp=Vi({type:n,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(t,r){2&t&&(ur("disabled",r.disabled||null),Ir("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Mt],attrs:Ase,ngContentSelectors:Mse,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(zc(),Rn(0,"span",0),Cr(1),Rn(2,"span",1)(3,"span",2)(4,"span",3)),2&t&&($t(3),Pt("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[yC],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),Fse=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[To,yoe,To]}),n})();function Vse(n,e){if(1&n&&(gt(0,"mat-error"),Dn(1),vt()),2&n){const t=$i();$t(1),Eu(t.getErrorMessage())}}const Use=["localVideo"],Bse=["remoteVideo"],Hse=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",component:(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.authFire=i,this.email=new Gb("",[Mb.required,Mb.email]),this.hide=!0}ngOnInit(){this.authFire.onAuthStateChanged(t=>{this.router.navigate(t?["video"]:["dashboard"])})}getErrorMessage(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}logIn(){this.auth.loginViaGoogle()}}return n.\u0275fac=function(t){return new(t||n)(we(t2),we(fr),we($a))},n.\u0275cmp=Vi({type:n,selectors:[["app-dashboard"]],decls:34,vars:6,consts:[[1,"mainDiv"],["mat-raised-button","","color","primary",1,"btn",3,"click"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],[1,"example-container"],["appearance","fill"],["matInput","","placeholder","pat@example.com","required","",3,"formControl"],["userEmail",""],[4,"ngIf"],["matInput","",3,"type"],["userPwd",""],["mat-icon-button","","matSuffix","",3,"click"]],template:function(t,r){if(1&t){const i=Av();gt(0,"div",0)(1,"button",1),gn("click",function(){return r.logIn()}),Dn(2,"Google Sign-In"),vt(),gt(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),Rn(7,"br"),gt(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),Dn(11,"Enter your email"),vt(),Rn(12,"input",8,9),zn(14,Vse,2,1,"mat-error",10),vt()()(),Rn(15,"br"),gt(16,"div",5)(17,"mat-form-field",7)(18,"mat-label"),Dn(19,"Enter your password"),vt(),Rn(20,"input",11,12),gt(22,"button",13),gn("click",function(){return r.hide=!r.hide}),gt(23,"mat-icon"),Dn(24),vt()()()(),Rn(25,"br")(26,"br"),gt(27,"div",5)(28,"button",1),gn("click",function(){Bf(i);const s=ga(13),a=ga(21);return Hf(r.auth.SignUp(s.value,a.value))}),Dn(29," Sign Up "),vt()(),Rn(30,"br")(31,"div",5),vt(),gt(32,"button",1),gn("click",function(){Bf(i);const s=ga(13),a=ga(21);return Hf(r.auth.SignIn(s.value,a.value))}),Dn(33,"Sign In"),vt()()()()}2&t&&($t(12),Pt("formControl",r.email),$t(2),Pt("ngIf",r.email.invalid),$t(6),Pt("type",r.hide?"password":"text"),$t(2),ur("aria-label","Hide password")("aria-pressed",r.hide),$t(2),Eu(r.hide?"visibility_off":"visibility"))},dependencies:[P2,Z2,J2,Nm,hse,H2,id,Nb,jp,Yb,Ry,tV,Lse],styles:[".mainDiv[_ngcontent-%COMP%]{margin-top:10%;margin-left:40%}.btn[_ngcontent-%COMP%]{width:200px}.example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.example-right-align[_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),n})()},{path:"video",component:(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.authFire=i,this.message="",this.accessToken="",this.roomName="",this.username="",this.auth.msgSubject.subscribe(o=>{this.message=o}),this.auth.localVideo=this.localVideo,this.auth.remoteVideo=this.remoteVideo}ngOnInit(){}log(t){this.message=t}logout(){this.auth.logOut()}connect(){this.username=localStorage.getItem("userAuth");let t=JSON.parse(localStorage.getItem("token")||"{}"),r=Date.now();if(this.roomName&&this.username)return t.token&&t.created_at+36e5>r?(this.accessToken=t.token,void this.auth.connectToRoom(this.accessToken,{name:this.roomName,audio:!0,video:{width:240}})):void this.auth.getToken(this.username).subscribe(i=>{console.log(i.data+"data"),this.accessToken=i.data,localStorage.setItem("token",JSON.stringify({token:this.accessToken,created_at:r})),this.auth.connectToRoom(this.accessToken,{name:this.roomName,audio:!0,video:{width:240}})},i=>this.log(JSON.stringify(i)));this.message="enter username and room name."}disconnect(){this.auth.roomObj&&null!==this.auth.roomObj&&(this.auth.roomObj.disconnect(),this.auth.roomObj=null)}}return n.\u0275fac=function(t){return new(t||n)(we(t2),we(fr),we($a))},n.\u0275cmp=Vi({type:n,selectors:[["app-video"]],viewQuery:function(t,r){if(1&t&&(mo(Use,5),mo(Bse,5)),2&t){let i;Jn(i=Zn())&&(r.localVideo=i.first),Jn(i=Zn())&&(r.remoteVideo=i.first)}},decls:40,vars:5,consts:[[1,"mainDiv"],["mat-raised-button","","color","primary",3,"click"],["id","video-container"],["id","local"],["localVideo",""],["id","remote"],["remoteVideo",""],["appearance","outline"],["matInput","","placeholder","",3,"ngModel","ngModelChange"],["matSuffix",""],["mat-raised-button","","color","primary","value","connect",3,"disabled","click"],["mat-raised-button","","color","warn","value","disconnect",3,"disabled","click"]],template:function(t,r){1&t&&(gt(0,"div",0)(1,"button",1),gn("click",function(){return r.logout()}),Dn(2,"logOut "),gt(3,"mat-icon"),Dn(4,"home"),vt()(),gt(5,"p"),Dn(6),vt(),gt(7,"div",2)(8,"div",3,4)(10,"p"),Dn(11,"local video"),vt()(),gt(12,"div",5,6)(14,"p"),Dn(15,"remote video"),vt()(),gt(16,"p")(17,"mat-form-field",7)(18,"mat-label"),Dn(19,"User Name"),vt(),gt(20,"input",8),gn("ngModelChange",function(o){return r.username=o}),vt(),gt(21,"mat-icon",9),Dn(22,"sentiment_very_satisfied"),vt(),gt(23,"mat-hint"),Dn(24,"user name"),vt()()(),gt(25,"p")(26,"mat-form-field",7)(27,"mat-label"),Dn(28,"room Name"),vt(),gt(29,"input",8),gn("ngModelChange",function(o){return r.roomName=o}),vt(),gt(30,"mat-icon",9),Dn(31,"sentiment_very_satisfied"),vt(),gt(32,"mat-hint"),Dn(33,"roomName"),vt()()(),gt(34,"button",10),gn("click",function(){return r.connect()}),Dn(35,"Connect "),vt(),Rn(36,"br")(37,"br"),gt(38,"button",11),gn("click",function(){return r.disconnect()}),Dn(39,"Disconnect "),vt()()()),2&t&&($t(6),Eh(" ",r.message," "),$t(14),Pt("ngModel",r.username),$t(9),Pt("ngModel",r.roomName),$t(5),Pt("disabled",!r.username||!r.roomName),$t(4),Pt("disabled",!r.auth.roomObj))},dependencies:[P2,Z2,J2,Nm,wC,H2,id,Nb,Kb,tV],styles:[".mainDiv[_ngcontent-%COMP%]{margin-top:10%;margin-left:40%}"]}),n})()}];let $se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({imports:[tN.forRoot(Hse),tN]}),n})(),Wse=(()=>{class n{constructor(){this.title="VideoCalling"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Vi({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Rn(0,"router-outlet")},dependencies:[vb]}),n})();function nV(n){return new Ie(3e3,!1)}function Cae(){return typeof window<"u"&&typeof window.document<"u"}function TC(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function zs(n){switch(n.length){case 0:return new Vd;case 1:return n[0];default:return new V2(n)}}function rV(n,e,t,r,i=new Map,o=new Map){const s=[],a=[];let c=-1,l=null;if(r.forEach(p=>{const g=p.get("offset"),O=g==c,U=O&&l||new Map;p.forEach((q,ae)=>{let me=ae,ye=q;if("offset"!==ae)switch(me=e.normalizePropertyName(me,s),ye){case bC:ye=i.get(ae);break;case _s:ye=o.get(ae);break;default:ye=e.normalizeStyleValue(ae,me,ye,s)}U.set(me,ye)}),O||a.push(U),l=U,c=g}),s.length)throw function hae(n){return new Ie(3502,!1)}();return a}function SC(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&CC(t,"start",n)));break;case"done":n.onDone(()=>r(t&&CC(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&CC(t,"destroy",n)))}}function CC(n,e,t){const o=IC(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function IC(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function di(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function iV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let xC=(n,e)=>!1,oV=(n,e,t)=>[],sV=null;function DC(n){const e=n.parentNode||n.host;return e===sV?null:e}(TC()||typeof Element<"u")&&(Cae()?(sV=(()=>document.documentElement)(),xC=(n,e)=>{for(;e;){if(e===n)return!0;e=DC(e)}return!1}):xC=(n,e)=>n.contains(e),oV=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ga=null,aV=!1;const cV=xC,lV=oV;let uV=(()=>{class n{validateStyleProperty(t){return function xae(n){Ga||(Ga=function Dae(){return typeof document<"u"?document.body:null}()||{},aV=!!Ga.style&&"WebkitAppearance"in Ga.style);let e=!0;return Ga.style&&!function Iae(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ga.style,!e&&aV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ga.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return cV(t,r)}getParentElement(t){return DC(t)}query(t,r,i){return lV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new Vd(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})(),kC=(()=>{class n{}return n.NOOP=new uV,n})();const kae=1e3,AC="ng-enter",Fm="ng-leave",Vm="ng-trigger",jm=".ng-trigger",fV="ng-animating",MC=".ng-animating";function vs(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:RC(parseFloat(e[1]),e[2])}function RC(n,e){return"s"===e?n*kae:n}function Um(n,e,t){return n.hasOwnProperty("duration")?n:function Mae(n,e,t){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(nV()),{duration:0,delay:0,easing:""};i=RC(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(o=RC(parseFloat(c),a[4]));const l=a[5];l&&(s=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function zse(){return new Ie(3100,!1)}()),a=!0),o<0&&(e.push(function Gse(){return new Ie(3101,!1)}()),a=!0),a&&e.splice(c,0,nV())}return{duration:i,delay:o,easing:s}}(n,e,t)}function jd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function hV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Gs(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function mV(n,e,t){return t?e+":"+t+";":""}function gV(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=mV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=mV(0,Nae(t),n.style[t]));n.setAttribute("style",e)}function So(n,e,t){n.style&&(e.forEach((r,i)=>{const o=OC(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),TC()&&gV(n))}function Ka(n,e){n.style&&(e.forEach((t,r)=>{const i=OC(r);n.style[i]=""}),TC()&&gV(n))}function Ud(n){return Array.isArray(n)?1==n.length?n[0]:L2(n):n}const PC=new RegExp("{{\\s*(.+?)\\s*}}","g");function _V(n){let e=[];if("string"==typeof n){let t;for(;t=PC.exec(n);)e.push(t[1]);PC.lastIndex=0}return e}function Bd(n,e,t){const r=n.toString(),i=r.replace(PC,(o,s)=>{let a=e[s];return null==a&&(t.push(function qse(n){return new Ie(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Bm(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Oae=/-+([a-z0-9])/g;function OC(n){return n.replace(Oae,(...e)=>e[1].toUpperCase())}function Nae(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function fi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Yse(n){return new Ie(3004,!1)}()}}function vV(n,e){return window.getComputedStyle(n)[e]}const Wm="*";function Bae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Hae(n,e,t){if(":"==n[0]){const c=function $ae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function lae(n){return new Ie(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function cae(n){return new Ie(3015,!1)}()),e;const i=r[1],o=r[2],s=r[3];e.push(yV(i,s));"<"==o[0]&&!(i==Wm&&s==Wm)&&e.push(yV(s,i))}(r,t,e)):t.push(n),t}const zm=new Set(["true","1"]),Gm=new Set(["false","0"]);function yV(n,e){const t=zm.has(n)||Gm.has(n),r=zm.has(e)||Gm.has(e);return(i,o)=>{let s=n==Wm||n==i,a=e==Wm||e==o;return!s&&t&&"boolean"==typeof i&&(s=i?zm.has(n):Gm.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?zm.has(e):Gm.has(e)),s&&a}}const Wae=new RegExp("s*:selfs*,?","g");function NC(n,e,t,r){return new zae(n).build(e,t,r)}class zae{constructor(e){this._driver=e}build(e,t,r){const i=new qae(t);return this._resetContextStyleTimingState(i),fi(this,Ud(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function Xse(){return new Ie(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(p=>{c.name=p,o.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(function Jse(){return new Ie(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{_V(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&(Bm(o.values()),t.errors.push(function Zse(n,e){return new Ie(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=fi(this,Ud(e.animation),t);return{type:1,matchers:Bae(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:qa(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>fi(this,r,t)),options:qa(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(s=>{t.currentTime=r;const a=fi(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:o,options:qa(e.options)}}visitAnimate(e,t){const r=function Qae(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return LC(Um(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=LC(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=Um(t,e);return LC(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Om({});if(5==o.type)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const l={};r.easing&&(l.easing=r.easing),s=Om(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===_s?r.push(a):t.errors.push(new Ie(3002,!1)):r.push(hV(a));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let c of a.values())if(c.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),p=l.get(c);let g=!0;p&&(o!=i&&o>=p.startTime&&i<=p.endTime&&(t.errors.push(function tae(n,e,t,r,i){return new Ie(3010,!1)}()),g=!1),o=p.startTime),g&&l.set(c,{startTime:o,endTime:i}),t.options&&function Pae(n,e,t){const r=e.params||{},i=_V(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function Kse(n){return new Ie(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function nae(){return new Ie(3011,!1)}()),r;let o=0;const s=[];let a=!1,c=!1,l=0;const p=e.steps.map(ye=>{const Ce=this._makeStyleAst(ye,t);let be=null!=Ce.offset?Ce.offset:function Yae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ce.styles),Pe=0;return null!=be&&(o++,Pe=Ce.offset=be),c=c||Pe<0||Pe>1,a=a||Pe<l,l=Pe,s.push(Pe),Ce});c&&t.errors.push(function rae(){return new Ie(3012,!1)}()),a&&t.errors.push(function iae(){return new Ie(3200,!1)}());const g=e.steps.length;let O=0;o>0&&o<g?t.errors.push(function oae(){return new Ie(3202,!1)}()):0==o&&(O=1/(g-1));const U=g-1,q=t.currentTime,ae=t.currentAnimateTimings,me=ae.duration;return p.forEach((ye,Ce)=>{const be=O>0?Ce==U?1:O*Ce:s[Ce],Pe=be*me;t.currentTime=q+ae.delay+Pe,ae.duration=Pe,this._validateStyleAst(ye,t),ye.offset=be,r.styles.push(ye)}),r}visitReference(e,t){return{type:8,animation:fi(this,Ud(e.animation),t),options:qa(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qa(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qa(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function Gae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Wae,"")),n=n.replace(/@\*/g,jm).replace(/@\w+/g,t=>jm+"-"+t.slice(1)).replace(/:animating/g,MC),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,di(t.collectedStyles,t.currentQuerySelector,new Map);const a=fi(this,Ud(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:qa(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function sae(){return new Ie(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Um(e.timings,t.errors,!0);return{type:12,animation:fi(this,Ud(e.animation),t),timings:r,options:null}}}class qae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qa(n){return n?(n=jd(n)).params&&(n.params=function Kae(n){return n?jd(n):null}(n.params)):n={},n}function LC(n,e,t){return{duration:n,delay:e,easing:t}}function FC(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Km{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Zae=new RegExp(":enter","g"),tce=new RegExp(":leave","g");function VC(n,e,t,r,i,o=new Map,s=new Map,a,c,l=[]){return(new nce).buildKeyframes(n,e,t,r,i,o,s,a,c,l)}class nce{buildKeyframes(e,t,r,i,o,s,a,c,l,p=[]){l=l||new Km;const g=new jC(e,t,l,i,o,p,[]);g.options=c;const O=c.delay?vs(c.delay):0;g.currentTimeline.delayNextStep(O),g.currentTimeline.setStyles([s],null,g.errors,c),fi(this,r,g);const U=g.timelines.filter(q=>q.containsAnimation());if(U.length&&a.size){let q;for(let ae=U.length-1;ae>=0;ae--){const me=U[ae];if(me.element===t){q=me;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([a],null,g.errors,c)}return U.length?U.map(q=>q.buildKeyframes()):[FC(t,[],[],[],0,O,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const s="number"==typeof o?o:vs(Bd(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const s=null!=r.duration?vs(r.duration):null,a=null!=r.delay?vs(r.delay):null;return 0!==s&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),fi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=qm);const s=vs(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>fi(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?vs(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),fi(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Um(t.params?Bd(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?vs(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qm);let s=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,p)=>{t.currentQueryIndex=p;const g=t.createSubContext(e.options,l);o&&g.delayNextStep(o),l===t.element&&(c=g.currentTimeline),fi(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,g.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const p=t.currentTimeline;c&&p.delayNextStep(c);const g=p.currentTime;fi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}}const qm={};class jC{constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Ym(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=vs(r.duration)),null!=r.delay&&(i.delay=vs(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Bd(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new jC(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=qm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new rce(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Zae,"."+this._enterClassName)).replace(tce,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!o&&0==a.length&&s.push(function aae(n){return new Ie(3014,!1)}()),a}}class Ym{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ym(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||_s),this._currentKeyframe.set(t,_s);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},s=function ice(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,_s)}else Gs(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of s){const l=Bd(c,o,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??_s),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const l=Gs(a,new Map,this._backFill);l.forEach((p,g)=>{p===bC?e.add(g):p===_s&&t.add(g)}),r||l.set("offset",c/this.duration),i.push(l)});const o=e.size?Bm(e.values()):[],s=t.size?Bm(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return FC(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class rce extends Ym{constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=r+t,a=t/s,c=Gs(e[0]);c.set("offset",0),o.push(c);const l=Gs(e[0]);l.set("offset",EV(a)),o.push(l);const p=e.length-1;for(let g=1;g<=p;g++){let O=Gs(e[g]);const U=O.get("offset");O.set("offset",EV((t+U*r)/s)),o.push(O)}r=s,t=0,i="",e=o}return FC(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function EV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class UC{}const oce=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class sce extends UC{normalizePropertyName(e,t){return OC(e)}normalizeStyleValue(e,t,r,i){let o="";const s=r.toString().trim();if(oce.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Qse(n,e){return new Ie(3005,!1)}())}return s+o}}function TV(n,e,t,r,i,o,s,a,c,l,p,g,O){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:p,totalTime:g,errors:O}}const BC={};class SV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function ace(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,l,p){const g=[],O=this.ast.options&&this.ast.options.params||BC,q=this.buildStyles(r,a&&a.params||BC,g),ae=c&&c.params||BC,me=this.buildStyles(i,ae,g),ye=new Set,Ce=new Map,be=new Map,Pe="void"===i,lt={params:cce(ae,O),delay:this.ast.options?.delay},mt=p?[]:VC(e,t,this.ast.animation,o,s,q,me,lt,l,g);let Sn=0;if(mt.forEach(yr=>{Sn=Math.max(yr.duration+yr.delay,Sn)}),g.length)return TV(t,this._triggerName,r,i,Pe,q,me,[],[],Ce,be,Sn,g);mt.forEach(yr=>{const ro=yr.element,tH=di(Ce,ro,new Set);yr.preStyleProps.forEach(ac=>tH.add(ac));const Tf=di(be,ro,new Set);yr.postStyleProps.forEach(ac=>Tf.add(ac)),ro!==t&&ye.add(ro)});const vr=Bm(ye.values());return TV(t,this._triggerName,r,i,Pe,q,me,mt,vr,Ce,be,Sn)}}function cce(n,e){const t=jd(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class lce{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=jd(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(i[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Bd(s,i,t));const c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}}class dce{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new lce(i.style,i.options&&i.options.params||{},r))}),CV(this.states,"true","1"),CV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new SV(e,i,this.states))}),this.fallbackTransition=function fce(n,e,t){return new SV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function CV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const hce=new Km;class pce{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],o=NC(this._driver,t,r,i);if(r.length)throw function pae(n){return new Ie(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=rV(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=VC(this._driver,t,o,AC,Fm,new Map,new Map,r,hce,i),s.forEach(p=>{const g=di(a,p.element,new Map);p.postStyleProps.forEach(O=>g.set(O,null))})):(i.push(function mae(){return new Ie(3300,!1)}()),s=[]),i.length)throw function gae(n){return new Ie(3504,!1)}();a.forEach((p,g)=>{p.forEach((O,U)=>{p.set(U,this._driver.computeStyle(g,U,_s))})});const l=zs(s.map(p=>{const g=a.get(p.element);return this._buildPlayer(p,new Map,g)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function _ae(n){return new Ie(3301,!1)}();return t}listen(e,t,r,i){const o=IC(t,"","","");return SC(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const IV="ng-animate-queued",HC="ng-animate-disabled",yce=[],xV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bce={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Mi="__ng_removed";class $C{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Sce(n){return n??null}(r?e.value:e),r){const o=jd(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Hd="void",WC=new $C(Hd);class wce{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ri(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function vae(n,e){return new Ie(3302,!1)}();if(null==r||0==r.length)throw function yae(n){return new Ie(3303,!1)}();if(!function Cce(n){return"start"==n||"done"==n}(r))throw function bae(n,e){return new Ie(3400,!1)}();const o=di(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);const a=di(this._engine.statesByElement,e,new Map);return a.has(t)||(Ri(e,Vm),Ri(e,Vm+"-"+t),a.set(t,WC)),()=>{this._engine.afterFlush(()=>{const c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function wae(n){return new Ie(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),s=new zC(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ri(e,Vm),Ri(e,Vm+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new $C(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=WC),l.value!==Hd&&c.value===l.value){if(!function Dce(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(c.params,l.params)){const ae=[],me=o.matchStyles(c.value,c.params,ae),ye=o.matchStyles(l.value,l.params,ae);ae.length?this._engine.reportError(ae):this._engine.afterFlush(()=>{Ka(e,me),So(e,ye)})}return}const O=di(this._engine.playersByElement,e,[]);O.forEach(ae=>{ae.namespaceId==this.id&&ae.triggerName==t&&ae.queued&&ae.destroy()});let U=o.matchTransition(c.value,l.value,e,l.params),q=!1;if(!U){if(!i)return;U=o.fallbackTransition,q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:c,toState:l,player:s,isFallbackTransition:q}),q||(Ri(e,IV),s.onStart(()=>{Al(e,IV)})),s.onDone(()=>{let ae=this.players.indexOf(s);ae>=0&&this.players.splice(ae,1);const me=this._engine.playersByElement.get(e);if(me){let ye=me.indexOf(s);ye>=0&&me.splice(ye,1)}}),this.players.push(s),O.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,jm,!0);r.forEach(i=>{if(i[Mi])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){const p=this.trigger(e,l,Hd,i);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&zs(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const c=this._triggers.get(s).fallbackTransition,l=r.get(s)||WC,p=new $C(Hd),g=new zC(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:p,player:g,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Mi];(!o||o===xV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ri(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const c=IC(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,SC(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Ece{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new wce(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Qm(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Qm(t))return;const o=t[Mi];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ri(e,HC)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Al(e,HC))}removeNode(e,t,r,i){if(Qm(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Mi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Qm(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,jm,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,MC,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zs(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Mi];if(t&&t.setForRemoval){if(e[Mi]=xV,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(HC)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ri(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?zs(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Eae(n){return new Ie(3402,!1)}()}_flushAnimations(e,t){const r=new Km,i=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,p=new Set;this.disabledNodes.forEach(We=>{p.add(We);const Ye=this.driver.query(We,".ng-animate-queued",!0);for(let rt=0;rt<Ye.length;rt++)p.add(Ye[rt])});const g=this.bodyNode,O=Array.from(this.statesByElement.keys()),U=AV(O,this.collectedEnterElements),q=new Map;let ae=0;U.forEach((We,Ye)=>{const rt=AC+ae++;q.set(Ye,rt),We.forEach(Ot=>Ri(Ot,rt))});const me=[],ye=new Set,Ce=new Set;for(let We=0;We<this.collectedLeaveElements.length;We++){const Ye=this.collectedLeaveElements[We],rt=Ye[Mi];rt&&rt.setForRemoval&&(me.push(Ye),ye.add(Ye),rt.hasAnimation?this.driver.query(Ye,".ng-star-inserted",!0).forEach(Ot=>ye.add(Ot)):Ce.add(Ye))}const be=new Map,Pe=AV(O,Array.from(ye));Pe.forEach((We,Ye)=>{const rt=Fm+ae++;be.set(Ye,rt),We.forEach(Ot=>Ri(Ot,rt))}),e.push(()=>{U.forEach((We,Ye)=>{const rt=q.get(Ye);We.forEach(Ot=>Al(Ot,rt))}),Pe.forEach((We,Ye)=>{const rt=be.get(Ye);We.forEach(Ot=>Al(Ot,rt))}),me.forEach(We=>{this.processLeaveNode(We)})});const lt=[],mt=[];for(let We=this._namespaceList.length-1;We>=0;We--)this._namespaceList[We].drainQueuedTransitions(t).forEach(rt=>{const Ot=rt.player,sr=rt.element;if(lt.push(Ot),this.collectedEnterElements.length){const kr=sr[Mi];if(kr&&kr.setForMove){if(kr.previousTriggersValues&&kr.previousTriggersValues.has(rt.triggerName)){const cc=kr.previousTriggersValues.get(rt.triggerName),Ni=this.statesByElement.get(rt.element);if(Ni&&Ni.has(rt.triggerName)){const Hg=Ni.get(rt.triggerName);Hg.value=cc,Ni.set(rt.triggerName,Hg)}}return void Ot.destroy()}}const Ro=!g||!this.driver.containsElement(g,sr),gi=be.get(sr),sa=q.get(sr),Cn=this._buildInstruction(rt,r,sa,gi,Ro);if(Cn.errors&&Cn.errors.length)return void mt.push(Cn);if(Ro)return Ot.onStart(()=>Ka(sr,Cn.fromStyles)),Ot.onDestroy(()=>So(sr,Cn.toStyles)),void i.push(Ot);if(rt.isFallbackTransition)return Ot.onStart(()=>Ka(sr,Cn.fromStyles)),Ot.onDestroy(()=>So(sr,Cn.toStyles)),void i.push(Ot);const iH=[];Cn.timelines.forEach(kr=>{kr.stretchStartingKeyframe=!0,this.disabledNodes.has(kr.element)||iH.push(kr)}),Cn.timelines=iH,r.append(sr,Cn.timelines),s.push({instruction:Cn,player:Ot,element:sr}),Cn.queriedElements.forEach(kr=>di(a,kr,[]).push(Ot)),Cn.preStyleProps.forEach((kr,cc)=>{if(kr.size){let Ni=c.get(cc);Ni||c.set(cc,Ni=new Set),kr.forEach((Hg,GI)=>Ni.add(GI))}}),Cn.postStyleProps.forEach((kr,cc)=>{let Ni=l.get(cc);Ni||l.set(cc,Ni=new Set),kr.forEach((Hg,GI)=>Ni.add(GI))})});if(mt.length){const We=[];mt.forEach(Ye=>{We.push(function Tae(n,e){return new Ie(3505,!1)}())}),lt.forEach(Ye=>Ye.destroy()),this.reportError(We)}const Sn=new Map,vr=new Map;s.forEach(We=>{const Ye=We.element;r.has(Ye)&&(vr.set(Ye,Ye),this._beforeAnimationBuild(We.player.namespaceId,We.instruction,Sn))}),i.forEach(We=>{const Ye=We.element;this._getPreviousPlayers(Ye,!1,We.namespaceId,We.triggerName,null).forEach(Ot=>{di(Sn,Ye,[]).push(Ot),Ot.destroy()})});const yr=me.filter(We=>RV(We,c,l)),ro=new Map;kV(ro,this.driver,Ce,l,_s).forEach(We=>{RV(We,c,l)&&yr.push(We)});const Tf=new Map;U.forEach((We,Ye)=>{kV(Tf,this.driver,new Set(We),c,bC)}),yr.forEach(We=>{const Ye=ro.get(We),rt=Tf.get(We);ro.set(We,new Map([...Array.from(Ye?.entries()??[]),...Array.from(rt?.entries()??[])]))});const ac=[],nH=[],rH={};s.forEach(We=>{const{element:Ye,player:rt,instruction:Ot}=We;if(r.has(Ye)){if(p.has(Ye))return rt.onDestroy(()=>So(Ye,Ot.toStyles)),rt.disabled=!0,rt.overrideTotalTime(Ot.totalTime),void i.push(rt);let sr=rH;if(vr.size>1){let gi=Ye;const sa=[];for(;gi=gi.parentNode;){const Cn=vr.get(gi);if(Cn){sr=Cn;break}sa.push(gi)}sa.forEach(Cn=>vr.set(Cn,sr))}const Ro=this._buildAnimation(rt.namespaceId,Ot,Sn,o,Tf,ro);if(rt.setRealPlayer(Ro),sr===rH)ac.push(rt);else{const gi=this.playersByElement.get(sr);gi&&gi.length&&(rt.parentPlayer=zs(gi)),i.push(rt)}}else Ka(Ye,Ot.fromStyles),rt.onDestroy(()=>So(Ye,Ot.toStyles)),nH.push(rt),p.has(Ye)&&i.push(rt)}),nH.forEach(We=>{const Ye=o.get(We.element);if(Ye&&Ye.length){const rt=zs(Ye);We.setRealPlayer(rt)}}),i.forEach(We=>{We.parentPlayer?We.syncPlayerEvents(We.parentPlayer):We.destroy()});for(let We=0;We<me.length;We++){const Ye=me[We],rt=Ye[Mi];if(Al(Ye,Fm),rt&&rt.hasAnimation)continue;let Ot=[];if(a.size){let Ro=a.get(Ye);Ro&&Ro.length&&Ot.push(...Ro);let gi=this.driver.query(Ye,MC,!0);for(let sa=0;sa<gi.length;sa++){let Cn=a.get(gi[sa]);Cn&&Cn.length&&Ot.push(...Cn)}}const sr=Ot.filter(Ro=>!Ro.destroyed);sr.length?Ice(this,Ye,sr):this.processLeaveNode(Ye)}return me.length=0,ac.forEach(We=>{this.players.push(We),We.onDone(()=>{We.destroy();const Ye=this.players.indexOf(We);this.players.splice(Ye,1)}),We.play()}),ac}elementContainsData(e,t){let r=!1;const i=t[Mi];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const c=!o||o==Hd;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||s.push(l)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,p=l!==o,g=di(r,l,[]);this._getPreviousPlayers(l,p,s,a,t.toState).forEach(U=>{const q=U.getRealPlayer();q.beforeDestroy&&q.beforeDestroy(),U.destroy(),g.push(U)})}Ka(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){const a=t.triggerName,c=t.element,l=[],p=new Set,g=new Set,O=t.timelines.map(q=>{const ae=q.element;p.add(ae);const me=ae[Mi];if(me&&me.removedBeforeQueried)return new Vd(q.duration,q.delay);const ye=ae!==c,Ce=function xce(n){const e=[];return MV(n,e),e}((r.get(ae)||yce).map(Sn=>Sn.getRealPlayer())).filter(Sn=>!!Sn.element&&Sn.element===ae),be=o.get(ae),Pe=s.get(ae),lt=rV(0,this._normalizer,0,q.keyframes,be,Pe),mt=this._buildPlayer(q,lt,Ce);if(q.subTimeline&&i&&g.add(ae),ye){const Sn=new zC(e,a,ae);Sn.setRealPlayer(mt),l.push(Sn)}return mt});l.forEach(q=>{di(this.playersByQueriedElement,q.element,[]).push(q),q.onDone(()=>function Tce(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,q.element,q))}),p.forEach(q=>Ri(q,fV));const U=zs(O);return U.onDestroy(()=>{p.forEach(q=>Al(q,fV)),So(c,t.toStyles)}),g.forEach(q=>{di(i,q,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Vd(e.duration,e.delay)}}class zC{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Vd,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>SC(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){di(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Qm(n){return n&&1===n.nodeType}function DV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function kV(n,e,t,r,i){const o=[];t.forEach(c=>o.push(DV(c)));const s=[];r.forEach((c,l)=>{const p=new Map;c.forEach(g=>{const O=e.computeStyle(l,g,i);p.set(g,O),(!O||0==O.length)&&(l[Mi]=bce,s.push(l))}),n.set(l,p)});let a=0;return t.forEach(c=>DV(c,o[a++])),s}function AV(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:i.has(l)?r:s(l),o.set(a,c),c}return e.forEach(a=>{const c=s(a);c!==r&&t.get(c).push(a)}),t}function Ri(n,e){n.classList?.add(e)}function Al(n,e){n.classList?.remove(e)}function Ice(n,e,t){zs(t).onDone(()=>n.processLeaveNode(e))}function MV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof V2?MV(r.players,e):e.push(r)}}function RV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class Xm{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new Ece(e,t,r),this._timelineEngine=new pce(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const s=e+"-"+i;let a=this._triggerCache[s];if(!a){const c=[],l=[],p=NC(this._driver,o,c,l);if(c.length)throw function fae(n,e){return new Ie(3404,!1)}();a=function uce(n,e,t){return new dce(n,e,t)}(i,p,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,s]=iV(r);this._timelineEngine.command(o,t,s,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[s,a]=iV(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Ace=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&So(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(So(this._element,this._initialStyles),this._endStyles&&(So(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ka(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ka(this._element,this._endStyles),this._endStyles=null),So(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function GC(n){let e=null;return n.forEach((t,r)=>{(function Mce(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class PV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:vV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Rce{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return cV(e,t)}getParentElement(e){return DC(e)}query(e,t,r){return lV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,s=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(c.easing=o);const l=new Map,p=s.filter(U=>U instanceof PV);(function Lae(n,e){return 0===n||0===e})(r,i)&&p.forEach(U=>{U.currentSnapshot.forEach((q,ae)=>l.set(ae,q))});let g=function Rae(n){return n.length?n[0]instanceof Map?n:n.map(e=>hV(e)):[]}(t).map(U=>Gs(U));g=function Fae(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,vV(n,a)))}}return e}(e,g,l);const O=function kce(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=GC(e[0]),e.length>1&&(r=GC(e[e.length-1]))):e instanceof Map&&(t=GC(e)),t||r?new Ace(n,t,r):null}(e,g);return new PV(e,g,c,O)}}let Pce=(()=>{class n extends N2{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Fi.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?L2(t):t;return OV(this._renderer,null,r,"register",[i]),new Oce(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(xe(mu),xe(Jt))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();class Oce extends Ooe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Nce(this._id,e,t||{},this._renderer)}}class Nce{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return OV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function OV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const NV="@.disabled";let Lce=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let p=this._rendererCache.get(o);return p||(p=new LV("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,p)),p}const s=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=p=>{Array.isArray(p)?p.forEach(c):this.engine.registerTrigger(s,a,t,p.name,p)};return r.data.animation.forEach(c),new Fce(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(xe(mu),xe(Xm),xe(it))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();class LV{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==NV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Fce extends LV{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==NV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Vce(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function jce(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const FV=[{provide:N2,useClass:Pce},{provide:UC,useFactory:function Bce(){return new sce}},{provide:Xm,useClass:(()=>{class n extends Xm{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(xe(Jt),xe(kC),xe(UC),xe(Pu))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})()},{provide:mu,useFactory:function Hce(n,e,t){return new Lce(n,e,t)},deps:[Jh,Xm,it]}],KC=[{provide:kC,useFactory:()=>new Rce},{provide:Jc,useValue:"BrowserAnimations"},...FV],VV=[{provide:kC,useClass:uV},{provide:Jc,useValue:"NoopAnimations"},...FV];let $ce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?VV:KC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:KC,imports:[CP]}),n})();const Wce_firebase={projectId:"videocalling-91dd5",appId:"1:486655050257:web:39885523f99247f12ee7b0",storageBucket:"videocalling-91dd5.appspot.com",apiKey:"AIzaSyACzbw2ZOzN8ujjDHpbLc06Q1B7_3e6gVs",authDomain:"videocalling-91dd5.firebaseapp.com",messagingSenderId:"486655050257",measurementId:"G-CPZ28Y9DYR"};class $d{constructor(e){return e}}const jV="analytics",UV=sm.async,qce=Gr(yee,!0),Yce=Gr(wL,!0),Qce=Gr(Eee,!0);let qC=(()=>{class n{constructor(t,r,i){let o;this.disposables=[],Dt("angularfire",Di.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),UV().then(()=>{const s=i.get($d);s?this.disposables=[Eie(t).subscribe(a=>{Qce(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(xe($a),xe(it),xe(bn))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const BV="firebase_screen_id",YC="outlet",Wd="screen_class",HV="screen_name";let cle=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const QC={},lle=n=>{const e=[n[Wd],n[YC]].join("#");if(QC.hasOwnProperty(e))return QC[e];{const t=cle++;return QC[e]=t,t}},ule=(n,e,t)=>n.events.pipe(Si(i=>i instanceof gO)).pipe(Ci(i=>{var o;const a=(null===(o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,U=>U.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===o?void 0:o.toString())||"",c=n.routerState.root.children.map(U=>U).find(U=>U.outlet===i.snapshot.outlet);if(!c)return $e(null);let l=c;for(;l.firstChild;)l=l.firstChild;const p=l.pathFromRoot.map(U=>{var q;return null===(q=U.routeConfig)||void 0===q?void 0:q.path}).filter(U=>U).join("/")||"/",g={[HV]:p,page_path:`/${a}`,firebase_event_origin:"auto",firebase_screen:p,[YC]:i.snapshot.outlet};e&&(g.page_title=e.getTitle());let O=c.component;if(O){if(O===vp){let U=i.snapshot;for(;U.firstChild;)U=U.firstChild;O=U.component}}else O=i.snapshot.component;if("string"==typeof O)return $e(Object.assign(Object.assign({},g),{[Wd]:O}));if(O){const U=t.resolveComponentFactory(O);return $e(Object.assign(Object.assign({},g),{[Wd]:U.selector}))}return $e(null)}),Si(i=>!!i),pe(i=>Object.assign({firebase_screen_class:i[Wd],[BV]:lle(i)},i)),function zce(n,e,t,r){return le((i,o)=>{let s;e&&"function"!=typeof e?({duration:t,element:s,connector:r}=e):s=e;const a=new Map,c=q=>{a.forEach(q),q(o)},l=q=>c(ae=>ae.error(q));let p=0,g=!1;const O=new ve(o,q=>{try{const ae=n(q);let me=a.get(ae);if(!me){a.set(ae,me=r?r():new Y);const ye=function U(q,ae){const me=new ie(ye=>{p++;const Ce=ae.subscribe(ye);return()=>{Ce.unsubscribe(),0==--p&&g&&O.unsubscribe()}});return me.key=q,me}(ae,me);if(o.next(ye),t){const Ce=_e(me,()=>{me.complete(),Ce?.unsubscribe()},void 0,void 0,()=>a.delete(ae));O.add(on(t(ye)).subscribe(Ce))}}me.next(s?s(q):q)}catch(ae){l(ae)}},()=>c(q=>q.complete()),l,()=>a.clear(),()=>(g=!0,0===p));i.subscribe(O)})}(i=>i[YC]),Xn(i=>i.pipe(s2((o,s)=>JSON.stringify(o)===JSON.stringify(s)),nb(void 0),function Gce(){return le((n,e)=>{let t,r=!1;n.subscribe(_e(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}(),pe(([o,s])=>o?Object.assign({firebase_previous_class:o[Wd],firebase_previous_screen:o[HV],firebase_previous_id:o[BV]},s):s))));let $V=(()=>{class n{constructor(t,r,i,o,s,a){Dt("angularfire",Di.full,"screen-tracking"),UV().then(()=>{const c=a.get($d);!t||!c||o.runOutsideAngular(()=>{this.disposable=ule(t,r,i).pipe(Ci(l=>Ft(this,void 0,void 0,function*(){return s&&(yield s.initialized),Yce(c,"screen_view",l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(xe(fr,8),xe(Gy,8),xe(Mc),xe(it),xe(qC,8),xe(bn))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})();const XC=new Re("angularfire2.analytics-instances");function fle(n){return(e,t)=>{if(!sm.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new $d(r)}}const hle={provide:class Kce{constructor(){return ls(jV)}},deps:[[new kt,XC]]},ple={provide:$d,useFactory:function dle(n,e){if(!sm.sync())return null;const t=cs(jV,n,e);return t&&new $d(t)},deps:[[new kt,XC],ki]};let mle=(()=>{class n{constructor(t,r){Dt("angularfire",Di.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(xe($V,8),xe(qC,8))},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[ple,hle,{provide:ya,useValue:sm.async,multi:!0}]}),n})();function gle(n,...e){return{ngModule:mle,providers:[{provide:XC,useFactory:fle(n),multi:!0,deps:[it,bn,us,ds,...e]}]}}const WV="@firebase/database";let JC="";class vle{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),hr(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ud(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yle{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return es(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const GV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vle(e)}}catch{}return new yle},Ya=GV("localStorage"),ZC=GV("sessionStorage"),Ml=new Aa("@firebase/database"),KV=function(){let n=1;return function(){return n++}}(),qV=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,Ve(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new AQ;t.update(e);const r=t.digest();return Up.encodeByteArray(r)},zd=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=zd.apply(null,r):e+="object"==typeof r?hr(r):r,e+=" "}return e};let Qa=null,YV=!0;const rr=function(...n){if(!0===YV&&(YV=!1,null===Qa&&!0===ZC.get("logging_enabled")&&function(n,e){Ve(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ml.logLevel=Wt.VERBOSE,Qa=Ml.log.bind(Ml),e&&ZC.set("logging_enabled",!0)):"function"==typeof n?Qa=n:(Qa=null,ZC.remove("logging_enabled"))}(!0)),Qa){const e=zd.apply(null,n);Qa(e)}},Gd=function(n){return function(...e){rr(n,...e)}},e0=function(...n){const e="FIREBASE INTERNAL ERROR: "+zd(...n);Ml.error(e)},Co=function(...n){const e=`FIREBASE FATAL ERROR: ${zd(...n)}`;throw Ml.error(e),new Error(e)},Dr=function(...n){const e="FIREBASE WARNING: "+zd(...n);Ml.warn(e)},Zm=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ks="[MIN_NAME]",ys="[MAX_NAME]",Xa=function(n,e){if(n===e)return 0;if(n===Ks||e===ys)return-1;if(e===Ks||n===ys)return 1;{const t=ZV(n),r=ZV(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Ele=function(n,e){return n===e?0:n<e?-1:1},Kd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+hr(e))},t0=function(n){if("object"!=typeof n||null===n)return hr(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=hr(e[r]),t+=":",t+=t0(n[e[r]]);return t+="}",t},XV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ir(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const JV=function(n){Ve(!Zm(n),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===n?(o=0,s=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(n/Math.pow(2,-1074))));const l=[];for(c=52;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();const p=l.join("");let g="";for(c=0;c<64;c+=8){let O=parseInt(p.substr(c,8),2).toString(16);1===O.length&&(O="0"+O),g+=O}return g.toLowerCase()},Ile=new RegExp("^-?(0*)\\d{1,10}$"),ZV=function(n){if(Ile.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Rl=function(n){try{n()}catch(e){setTimeout(()=>{throw Dr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},kle=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qd=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Ale{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Dr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Mle{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(rr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dr(e)}}let Yd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ij=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aj="websocket",cj="long_polling";class r0{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ya.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ya.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function lj(n,e,t){let r;if(Ve("string"==typeof e,"typeof type must == string"),Ve("object"==typeof t,"typeof params must == object"),e===aj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==cj)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Rle(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ir(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class Ple{constructor(){this.counters_={}}incrementCounter(e,t=1){es(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return gQ(this.counters_)}}const o0={},s0={};function a0(n){const e=n.toString();return o0[e]||(o0[e]=new Ple),o0[e]}class Nle{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Rl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class qs{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gd(e),this.stats_=a0(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),lj(t,cj,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Nle(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if(Zo()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new c0((...o)=>{const[s,a,c,l,p]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ij.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qs.forceAllow_=!0}static forceDisallow(){qs.forceDisallow_=!0}static isAvailable(){return!(Zo()||!qs.forceAllow_&&(qs.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=hr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=c1(t),i=XV(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Zo())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=hr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class c0{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Zo())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=KV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=c0.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){rr("frame writing exception"),a.stack&&rr(a.stack),rr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||rr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){Zo()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{rr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let tg=null;typeof MozWebSocket<"u"?tg=MozWebSocket:typeof WebSocket<"u"&&(tg=WebSocket);let Pl=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gd(this.connId),this.stats_=a0(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){const a={v:"5"};return!Zo()&&typeof location<"u"&&location.hostname&&ij.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),lj(t,aj,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ya.set("previous_websocket_failure",!0);try{let i;if(Zo()){i={headers:{"User-Agent":`Firebase/5/${JC}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new tg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==tg&&!n.forceDisallow_}static previouslyFailed(){return Ya.isInMemoryStorage||!0===Ya.get("previous_websocket_failure")}markConnectionHealthy(){Ya.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=ud(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Ve(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=hr(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=XV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),gj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[qs,Pl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Pl&&Pl.isAvailable();let i=r&&!Pl.previouslyFailed();if(t.webSocketOnly&&(r||Dr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Pl];else{const o=this.transports_=[];for(const s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Tj{constructor(e,t,r,i,o,s,a,c,l,p){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gd("c:"+this.id+":"),this.transportManager_=new gj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Kd("t",e),r=Kd("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Kd("t",e),r=Kd("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Kd("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?e0("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):e0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Dr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),qd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ya.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Sj{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Cj{constructor(e){this.allowedEvents_=e,this.listeners_={},Ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){Ve(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ng extends Cj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ng}getInitialEvent(e){return Ve("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Ij=32,xj=768;class Yt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Lt(){return new Yt("")}function Et(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ys(n){return n.pieces_.length-n.pieceNum_}function tn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Yt(n.pieces_,e)}function u0(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Qd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Dj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Yt(e,0)}function vn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Yt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Yt(t,0)}function Tt(n){return n.pieceNum_>=n.pieces_.length}function Vr(n,e){const t=Et(n),r=Et(e);if(null===t)return e;if(t===r)return Vr(tn(n),tn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function d0(n,e){if(Ys(n)!==Ys(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Pi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ys(n)>Ys(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class iue{constructor(e,t){this.errorPrefix_=t,this.parts_=Qd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=qp(this.parts_[r]);kj(this)}}function kj(n){if(n.byteLength_>xj)throw new Error(n.errorPrefix_+"has a key path longer than "+xj+" bytes ("+n.byteLength_+").");if(n.parts_.length>Ij)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ij+") or object contains a cycle "+Ja(n))}function Ja(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class f0 extends Cj{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new f0}getInitialEvent(e){return Ve("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Xd=1e3;let ig,Za=(()=>{class n extends Sj{constructor(t,r,i,o,s,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Gd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Zo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");f0.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ng.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(hr(s)),Ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new pl,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Ve(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ve(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,c=>{const l=c.d,p=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),"ok"!==p&&this.removeListen_(i,o),t.onComplete&&t.onComplete(p,l))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&es(t,"w")){const i=gl(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Dr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=zp(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=zp(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===t&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Ve(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const s={p:t};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+hr(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):e0("Unrecognized action received from server: "+hr(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return ge(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let c=!1,l=null;const p=function(){l?l.close():(c=!0,o())};t.realtime_={close:p,sendRequest:function(U){Ve(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(U)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,q]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);c?rr("getToken() completed but was canceled"):(rr("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=q&&q.token,l=new Tj(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,ae=>{Dr(ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(U){t.log_("Failed to get token: "+U),c||(t.repoInfo_.nodeAdmin&&Dr(U),p())}}})()}interrupt(t){rr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],iw(this.interruptReasons_)&&(this.reconnectDelay_=Xd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(s=>t0(s)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Yt(t).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){rr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){rr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";Zo()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+JC.replace(/\./g,"-")]=1,nw()?t["framework.cordova"]=1:h1()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ng.getInstance().currentlyOnline();return iw(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ct{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ct(e,t)}}class rg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ct(Ks,e),i=new Ct(Ks,t);return 0!==this.compare(r,i)}minPost(){return Ct.MIN}}class Rj extends rg{static get __EMPTY_NODE(){return ig}static set __EMPTY_NODE(e){ig=e}compare(e,t){return Xa(e.name,t.name)}isDefinedOn(e){throw hl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ct.MIN}maxPost(){return new Ct(ys,ig)}makePost(e,t){return Ve("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ct(e,ig)}toString(){return".key"}}const Io=new Rj;class og{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let p0,Xi=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Yr.EMPTY_NODE,this.right=s??Yr.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const s=i(t,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Yr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Yr{constructor(e,t=Yr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Yr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xi.BLACK,null,null))}remove(e){return new Yr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new og(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new og(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new og(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new og(this.root_,null,this.comparator_,!0,e)}}function fue(n,e){return Xa(n.name,e.name)}function h0(n,e){return Xa(n,e)}Yr.EMPTY_NODE=new class due{copy(e,t,r,i,o){return this}insert(e,t,r){return new Xi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Pj=function(n){return"number"==typeof n?"number:"+JV(n):"string:"+n},Oj=function(n){if(n.isLeafNode()){const e=n.val();Ve("string"==typeof e||"number"==typeof e||"object"==typeof e&&es(e,".sv"),"Priority must be a string or number.")}else Ve(n===p0||n.isEmpty(),"priority of unexpected type.");Ve(n===p0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Nj,Lj,Fj,Ol=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Ve(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Oj(this.priorityNode_)}static set __childrenNodeConstructor(t){Nj=t}static get __childrenNodeConstructor(){return Nj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Tt(t)?this:".priority"===Et(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Et(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(Ve(".priority"!==i||1===Ys(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(tn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Pj(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?JV(this.value_):this.value_,this.lazyHash_=qV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Ve(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return Ve(o>=0,"Unknown leaf type: "+r),Ve(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ln=new class gue extends rg{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Xa(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ct.MIN}maxPost(){return new Ct(ys,new Ol("[PRIORITY-POST]",Fj))}makePost(e,t){const r=Lj(e);return new Ct(t,new Ol("[PRIORITY-POST]",r))}toString(){return".priority"}},_ue=Math.log(2);class vue{constructor(e){this.count=parseInt(Math.log(e+1)/_ue,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sg=function(n,e,t,r){n.sort(e);const i=function(c,l){const p=l-c;let g,O;if(0===p)return null;if(1===p)return g=n[c],O=t?t(g):g,new Xi(O,g.node,Xi.BLACK,null,null);{const U=parseInt(p/2,10)+c,q=i(c,U),ae=i(U+1,l);return g=n[U],O=t?t(g):g,new Xi(O,g.node,Xi.BLACK,q,ae)}},a=function(c){let l=null,p=null,g=n.length;const O=function(q,ae){const me=g-q,ye=g;g-=q;const Ce=i(me+1,ye),be=n[me],Pe=t?t(be):be;U(new Xi(Pe,be.node,ae,null,Ce))},U=function(q){l?(l.left=q,l=q):(p=q,l=q)};for(let q=0;q<c.count;++q){const ae=c.nextBitIsOne(),me=Math.pow(2,c.count-(q+1));ae?O(me,Xi.BLACK):(O(me,Xi.BLACK),O(me,Xi.RED))}return p}(new vue(n.length));return new Yr(r||e,a)};let m0;const Nl={};class bs{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ve(Nl&&ln,"ChildrenNode.ts has not been loaded"),m0=m0||new bs({".priority":Nl},{".priority":ln}),m0}get(e){const t=gl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Yr?t:null}hasIndex(e){return es(this.indexSet_,e.toString())}addIndex(e,t){Ve(e!==Io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Ct.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?sg(r,e.getCompare()):Nl;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const p=Object.assign({},this.indexes_);return p[c]=a,new bs(p,l)}addToIndexes(e,t){const r=Gp(this.indexes_,(i,o)=>{const s=gl(this.indexSet_,o);if(Ve(s,"Missing index implementation for "+o),i===Nl){if(s.isDefinedOn(e.node)){const a=[],c=t.getIterator(Ct.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),sg(a,s.getCompare())}return Nl}{const a=t.get(e.name);let c=i;return a&&(c=c.remove(new Ct(e.name,a))),c.insert(e,e.node)}});return new bs(r,this.indexSet_)}removeFromIndexes(e,t){const r=Gp(this.indexes_,i=>{if(i===Nl)return i;{const o=t.get(e.name);return o?i.remove(new Ct(e.name,o)):i}});return new bs(r,this.indexSet_)}}let Jd,pt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Oj(this.priorityNode_),this.children_.isEmpty()&&Ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Jd||(Jd=new n(new Yr(h0),null,bs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Jd}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Jd:r}}getChild(t){const r=Et(t);return null===r?this:this.getImmediateChild(r).getChild(tn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(Ve(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Ct(t,r);let o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?Jd:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){const i=Et(t);if(null===i)return r;{Ve(".priority"!==Et(t)||1===Ys(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(tn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(ln,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Pj(this.getPriority().val())+":"),this.forEachChild(ln,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":qV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new Ct(t,r));return s?s.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Ct(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Ct(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Ct.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zd?-1:0}withIndex(t){if(t===Io||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Io||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ln),o=r.getIterator(ln);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(t){return t===Io?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Zd=new class yue extends pt{constructor(){super(new Yr(h0),pt.EMPTY_NODE,bs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ct,{MIN:{value:new Ct(Ks,pt.EMPTY_NODE)},MAX:{value:new Ct(ys,Zd)}}),Rj.__EMPTY_NODE=pt.EMPTY_NODE,Ol.__childrenNodeConstructor=pt,function hue(n){p0=n}(Zd),function mue(n){Fj=n}(Zd);const bue=!0;function En(n,e=null){if(null===n)return pt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),Ve(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ol(n,En(e));if(n instanceof Array||!bue){let t=pt.EMPTY_NODE;return ir(n,(r,i)=>{if(es(n,r)&&"."!==r.substring(0,1)){const o=En(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(En(e))}{const t=[];let r=!1;if(ir(n,(s,a)=>{if("."!==s.substring(0,1)){const c=En(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Ct(s,c)))}}),0===t.length)return pt.EMPTY_NODE;const o=sg(t,fue,s=>s.name,h0);if(r){const s=sg(t,ln.getCompare());return new pt(o,En(e),new bs({".priority":s},{".priority":ln}))}return new pt(o,En(e),bs.Default)}}!function pue(n){Lj=n}(En);class g0 extends rg{constructor(e){super(),this.indexPath_=e,Ve(!Tt(e)&&".priority"!==Et(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Xa(e.name,t.name):o}makePost(e,t){const r=En(e),i=pt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ct(t,i)}maxPost(){const e=pt.EMPTY_NODE.updateChild(this.indexPath_,Zd);return new Ct(ys,e)}toString(){return Qd(this.indexPath_,0).join("/")}}const _0=new class wue extends rg{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Xa(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ct.MIN}maxPost(){return Ct.MAX}makePost(e,t){const r=En(e);return new Ct(t,r)}toString(){return".value"}};function tf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class y0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ln}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ks}hasEnd(){return this.endSet_}getIndexEndValue(){return Ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ys}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ln}copy(){const e=new y0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function jj(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ln?t="$priority":n.index_===_0?t="$value":n.index_===Io?t="$key":(Ve(n.index_ instanceof g0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=hr(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=hr(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+hr(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=hr(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+hr(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Uj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ln&&(e.i=n.index_.toString()),e}class cg extends Sj{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=cg.getListenId_(e,r),a={};this.listens_[s]=a;const c=jj(e._queryParams);this.restRequest_(o+".json",c,(l,p)=>{let g=p;if(404===l&&(g=null,l=null),null===l&&this.onDataUpdate_(o,g,!1,r),gl(this.listens_,s)===a){let O;O=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(O,null)}})}unlisten(e,t){const r=cg.getListenId_(e,t);delete this.listens_[r]}get(e){const t=jj(e._queryParams),r=e._path.toString(),i=new pl;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_l(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ud(a.responseText)}catch{Dr("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&Dr("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class kue{constructor(){this.rootNode_=pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function lg(){return{value:null,children:new Map}}function Fl(n,e,t){if(Tt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Et(e);n.children.has(r)||n.children.set(r,lg()),Fl(n.children.get(r),e=tn(e),t)}}function T0(n,e,t){null!==n.value?t(e,n.value):function Aue(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{T0(i,new Yt(e.toString()+"/"+r),t)})}class Mue{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ir(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Oue{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Mue(e);const r=1e4+2e4*Math.random();qd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ir(e,(i,o)=>{o>0&&es(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),qd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Oi=(()=>{return(n=Oi||(Oi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Oi;var n})();function I0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ug{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Oi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Tt(this.path)){if(null!=this.affectedTree.value)return Ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Yt(e));return new ug(Lt(),t,this.revert)}}return Ve(Et(this.path)===e,"operationForChild called for unrelated child."),new ug(tn(this.path),this.affectedTree,this.revert)}}class ec{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Oi.OVERWRITE}operationForChild(e){return Tt(this.path)?new ec(this.source,Lt(),this.snap.getImmediateChild(e)):new ec(this.source,tn(this.path),this.snap)}}class Vl{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Oi.MERGE}operationForChild(e){if(Tt(this.path)){const t=this.children.subtree(new Yt(e));return t.isEmpty()?null:t.value?new ec(this.source,Lt(),t.value):new Vl(this.source,Lt(),t)}return Ve(Et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vl(this.source,tn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qs{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Et(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function sf(n,e,t,r,i,o){const s=r.filter(a=>a.type===t);s.sort((a,c)=>function Vue(n,e,t){if(null==e.childName||null==t.childName)throw hl("Should only compare child_ events.");const r=new Ct(e.childName,e.snapshotNode),i=new Ct(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,c)),s.forEach(a=>{const c=function Fue(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function dg(n,e){return{eventCache:n,serverCache:e}}function af(n,e,t,r){return dg(new Qs(e,t,r),n.serverCache)}function Hj(n,e,t,r){return dg(n.eventCache,new Qs(e,t,r))}function fg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function tc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let x0;class un{constructor(e,t=(()=>(x0||(x0=new Yr(Ele)),x0))()){this.value=e,this.children=t}static fromObject(e){let t=new un(null);return ir(e,(r,i)=>{t=t.set(new Yt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Lt(),value:this.value};if(Tt(e))return null;{const r=Et(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(tn(e),t);return null!=o?{path:vn(new Yt(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tt(e))return this;{const t=Et(e),r=this.children.get(t);return null!==r?r.subtree(tn(e)):new un(null)}}set(e,t){if(Tt(e))return new un(t,this.children);{const r=Et(e),o=(this.children.get(r)||new un(null)).set(tn(e),t),s=this.children.insert(r,o);return new un(this.value,s)}}remove(e){if(Tt(e))return this.children.isEmpty()?new un(null):new un(null,this.children);{const t=Et(e),r=this.children.get(t);if(r){const i=r.remove(tn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new un(null):new un(this.value,o)}return this}}get(e){if(Tt(e))return this.value;{const t=Et(e),r=this.children.get(t);return r?r.get(tn(e)):null}}setTree(e,t){if(Tt(e))return t;{const r=Et(e),o=(this.children.get(r)||new un(null)).setTree(tn(e),t);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new un(this.value,s)}}fold(e){return this.fold_(Lt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(vn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Lt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Tt(e))return null;{const o=Et(e),s=this.children.get(o);return s?s.findOnPath_(tn(e),vn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Lt(),t)}foreachOnPath_(e,t,r){if(Tt(e))return this;{this.value&&r(t,this.value);const i=Et(e),o=this.children.get(i);return o?o.foreachOnPath_(tn(e),vn(t,i),r):new un(null)}}foreach(e){this.foreach_(Lt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(vn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ji{constructor(e){this.writeTree_=e}static empty(){return new Ji(new un(null))}}function cf(n,e,t){if(Tt(e))return new Ji(new un(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=Vr(i,e);return o=o.updateChild(s,t),new Ji(n.writeTree_.set(i,o))}{const i=new un(t),o=n.writeTree_.setTree(e,i);return new Ji(o)}}}function D0(n,e,t){let r=n;return ir(t,(i,o)=>{r=cf(r,vn(e,i),o)}),r}function $j(n,e){if(Tt(e))return Ji.empty();{const t=n.writeTree_.setTree(e,new un(null));return new Ji(t)}}function k0(n,e){return null!=nc(n,e)}function nc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Vr(t.path,e)):null}function Wj(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ln,(r,i)=>{e.push(new Ct(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Ct(r,i.value))}),e}function Xs(n,e){if(Tt(e))return n;{const t=nc(n,e);return new Ji(null!=t?new un(t):n.writeTree_.subtree(e))}}function A0(n){return n.writeTree_.isEmpty()}function jl(n,e){return zj(Lt(),n.writeTree_,e)}function zj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?(Ve(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=zj(vn(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(vn(n,".priority"),r)),t}}function hg(n,e){return Qj(e,n)}function Wue(n,e){if(n.snap)return Pi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Pi(vn(n.path,t),e))return!0;return!1}function Gue(n){return n.visible}function Gj(n,e,t){let r=Ji.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const s=o.path;let a;if(o.snap)Pi(t,s)?(a=Vr(t,s),r=cf(r,a,o.snap)):Pi(s,t)&&(a=Vr(s,t),r=cf(r,Lt(),o.snap.getChild(a)));else{if(!o.children)throw hl("WriteRecord should have .snap or .children");if(Pi(t,s))a=Vr(t,s),r=D0(r,a,o.children);else if(Pi(s,t))if(a=Vr(s,t),Tt(a))r=D0(r,Lt(),o.children);else{const c=gl(o.children,Et(a));if(c){const l=c.getChild(tn(a));r=cf(r,Lt(),l)}}}}}return r}function Kj(n,e,t,r,i){if(r||i){const o=Xs(n.visibleWrites,e);return!i&&A0(o)?t:i||null!=t||k0(o,Lt())?jl(Gj(n.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Pi(l.path,e)||Pi(e,l.path))},e),t||pt.EMPTY_NODE):null}{const o=nc(n.visibleWrites,e);if(null!=o)return o;{const s=Xs(n.visibleWrites,e);return A0(s)?t:null!=t||k0(s,Lt())?jl(s,t||pt.EMPTY_NODE):null}}}function pg(n,e,t,r){return Kj(n.writeTree,n.treePath,e,t,r)}function M0(n,e){return function Kue(n,e,t){let r=pt.EMPTY_NODE;const i=nc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ln,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){const o=Xs(n.visibleWrites,e);return t.forEachChild(ln,(s,a)=>{const c=jl(Xs(o,new Yt(s)),a);r=r.updateImmediateChild(s,c)}),Wj(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return Wj(Xs(n.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(n.writeTree,n.treePath,e)}function qj(n,e,t,r){return function que(n,e,t,r,i){Ve(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=vn(e,t);if(k0(n.visibleWrites,o))return null;{const s=Xs(n.visibleWrites,o);return A0(s)?i.getChild(t):jl(s,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function mg(n,e){return function Que(n,e){return nc(n.visibleWrites,e)}(n.writeTree,vn(n.treePath,e))}function R0(n,e,t){return function Yue(n,e,t,r){const i=vn(e,t),o=nc(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?jl(Xs(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Yj(n,e){return Qj(vn(n.treePath,e),n.writeTree)}function Qj(n,e){return{treePath:n,writeTree:e}}class ede{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Ve("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ve(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,tf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,function ef(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,function Ll(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw hl("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,tf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Xj=new class tde{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class P0{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Qs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return R0(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tc(this.viewCache_),o=function Zue(n,e,t,r,i,o){return function Xue(n,e,t,r,i,o,s){let a;const c=Xs(n.visibleWrites,e),l=nc(c,Lt());if(null!=l)a=l;else{if(null==t)return[];a=jl(c,t)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const p=[],g=s.getCompare(),O=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let U=O.getNext();for(;U&&p.length<i;)0!==g(U,r)&&p.push(U),U=O.getNext();return p}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function Jj(n,e,t,r,i,o){const s=e.eventCache;if(null!=mg(r,t))return e;{let a,c;if(Tt(t))if(Ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=tc(e),g=M0(r,l instanceof pt?l:pt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{const l=pg(r,tc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{const l=Et(t);if(".priority"===l){Ve(1===Ys(t),"Can't have a priority with additional path components");const p=s.getNode();c=e.serverCache.getNode();const g=qj(r,t,p,c);a=null!=g?n.filter.updatePriority(p,g):s.getNode()}else{const p=tn(t);let g;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();const O=qj(r,t,s.getNode(),c);g=null!=O?s.getNode().getImmediateChild(l).updateChild(p,O):s.getNode().getImmediateChild(l)}else g=R0(r,l,e.serverCache);a=null!=g?n.filter.updateChild(s.getNode(),l,g,p,i,o):s.getNode()}}return af(e,a,s.isFullyInitialized()||Tt(t),n.filter.filtersNodes())}}function gg(n,e,t,r,i,o,s,a){const c=e.serverCache;let l;const p=s?n.filter:n.filter.getIndexedFilter();if(Tt(t))l=p.updateFullNode(c.getNode(),r,null);else if(p.filtersNodes()&&!c.isFiltered()){const U=c.getNode().updateChild(t,r);l=p.updateFullNode(c.getNode(),U,null)}else{const U=Et(t);if(!c.isCompleteForPath(t)&&Ys(t)>1)return e;const q=tn(t),me=c.getNode().getImmediateChild(U).updateChild(q,r);l=".priority"===U?p.updatePriority(c.getNode(),me):p.updateChild(c.getNode(),U,me,q,Xj,null)}const g=Hj(e,l,c.isFullyInitialized()||Tt(t),p.filtersNodes());return Jj(n,g,t,i,new P0(i,g,o),a)}function O0(n,e,t,r,i,o,s){const a=e.eventCache;let c,l;const p=new P0(i,e,o);if(Tt(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=af(e,l,!0,n.filter.filtersNodes());else{const g=Et(t);if(".priority"===g)l=n.filter.updatePriority(e.eventCache.getNode(),r),c=af(e,l,a.isFullyInitialized(),a.isFiltered());else{const O=tn(t),U=a.getNode().getImmediateChild(g);let q;if(Tt(O))q=r;else{const ae=p.getCompleteChild(g);q=null!=ae?".priority"===u0(O)&&ae.getChild(Dj(O)).isEmpty()?ae:ae.updateChild(O,r):pt.EMPTY_NODE}c=U.equals(q)?e:af(e,n.filter.updateChild(a.getNode(),g,q,O,p,s),a.isFullyInitialized(),n.filter.filtersNodes())}}return c}function Zj(n,e){return n.eventCache.isCompleteForChild(e)}function eU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function N0(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,c=e;l=Tt(t)?r:new un(null).setTree(t,r);const p=e.serverCache.getNode();return l.children.inorderTraversal((g,O)=>{if(p.hasChild(g)){const q=eU(0,e.serverCache.getNode().getImmediateChild(g),O);c=gg(n,c,new Yt(g),q,i,o,s,a)}}),l.children.inorderTraversal((g,O)=>{const U=!e.serverCache.isCompleteForChild(g)&&null===O.value;if(!p.hasChild(g)&&!U){const ae=eU(0,e.serverCache.getNode().getImmediateChild(g),O);c=gg(n,c,new Yt(g),ae,i,o,s,a)}}),c}function hde(n,e){const t=tc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Tt(e)&&!t.getImmediateChild(Et(e)).isEmpty())?t.getChild(e):null}function rU(n,e,t,r){e.type===Oi.MERGE&&null!==e.source.queryId&&(Ve(tc(n.viewCache_),"We should always have a full cache before handling merges"),Ve(fg(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function ide(n,e,t,r,i){const o=new ede;let s,a;if(t.type===Oi.OVERWRITE){const l=t;l.source.fromUser?s=O0(n,e,l.path,l.snap,r,i,o):(Ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Tt(l.path),s=gg(n,e,l.path,l.snap,r,i,a,o))}else if(t.type===Oi.MERGE){const l=t;l.source.fromUser?s=function sde(n,e,t,r,i,o,s){let a=e;return r.foreach((c,l)=>{const p=vn(t,c);Zj(e,Et(p))&&(a=O0(n,a,p,l,i,o,s))}),r.foreach((c,l)=>{const p=vn(t,c);Zj(e,Et(p))||(a=O0(n,a,p,l,i,o,s))}),a}(n,e,l.path,l.children,r,i,o):(Ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=N0(n,e,l.path,l.children,r,i,a,o))}else if(t.type===Oi.ACK_USER_WRITE){const l=t;s=l.revert?function lde(n,e,t,r,i,o){let s;if(null!=mg(r,t))return e;{const a=new P0(r,e,i),c=e.eventCache.getNode();let l;if(Tt(t)||".priority"===Et(t)){let p;if(e.serverCache.isFullyInitialized())p=pg(r,tc(e));else{const g=e.serverCache.getNode();Ve(g instanceof pt,"serverChildren would be complete if leaf node"),p=M0(r,g)}l=n.filter.updateFullNode(c,p,o)}else{const p=Et(t);let g=R0(r,p,e.serverCache);null==g&&e.serverCache.isCompleteForChild(p)&&(g=c.getImmediateChild(p)),l=null!=g?n.filter.updateChild(c,p,g,tn(t),a,o):e.eventCache.getNode().hasChild(p)?n.filter.updateChild(c,p,pt.EMPTY_NODE,tn(t),a,o):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=pg(r,tc(e)),s.isLeafNode()&&(l=n.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=mg(r,Lt()),af(e,l,s,n.filter.filtersNodes())}}(n,e,l.path,r,i,o):function ade(n,e,t,r,i,o,s){if(null!=mg(i,t))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(Tt(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return gg(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Tt(t)){let l=new un(null);return c.getNode().forEachChild(Io,(p,g)=>{l=l.set(new Yt(p),g)}),N0(n,e,t,l,i,o,a,s)}return e}{let l=new un(null);return r.foreach((p,g)=>{const O=vn(t,p);c.isCompleteForPath(O)&&(l=l.set(p,c.getNode().getChild(O)))}),N0(n,e,t,l,i,o,a,s)}}(n,e,l.path,l.affectedTree,r,i,o)}else{if(t.type!==Oi.LISTEN_COMPLETE)throw hl("Unknown operation type: "+t.type);s=function cde(n,e,t,r,i){const o=e.serverCache;return Jj(n,Hj(e,o.getNode(),o.isFullyInitialized()||Tt(t),o.isFiltered()),t,r,Xj,i)}(n,e,t.path,r,o)}const c=o.getChanges();return function ode(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=fg(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(function Vj(n){return{type:"value",snapshotNode:n}}(fg(e)))}}(e,s,c),{viewCache:s,changes:c}}(n.processor_,i,e,t,r);return function rde(n,e){Ve(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ve(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),Ve(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,function iU(n,e,t,r){return function Lue(n,e,t,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function Eue(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(s.childName,s.snapshotNode))}),sf(n,i,"child_removed",e,r,t),sf(n,i,"child_added",e,r,t),sf(n,i,"child_moved",o,r,t),sf(n,i,"child_changed",e,r,t),sf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,o.changes,o.viewCache.eventCache.getNode(),null)}let _g,yg;function L0(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return Ve(null!=o,"SyncTree gave us an op for an invalid query."),rU(o,e,t,r)}{let o=[];for(const s of n.views.values())o=o.concat(rU(s,e,t,r));return o}}function Js(n,e){let t=null;for(const r of n.views.values())t=t||hde(r,e);return t}class uU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new un(null),this.pendingWriteTree_=function Jue(){return{visibleWrites:Ji.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function F0(n,e,t,r,i){return function Uue(n,e,t,r,i){Ve(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=cf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Ul(n,new ec({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ea(n,e,t=!1){const r=function Hue(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function $ue(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);Ve(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){const a=n.allWrites[s];a.visible&&(s>=t&&Wue(a,r.path)?i=!1:Pi(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function zue(n){n.visibleWrites=Gj(n.allWrites,Gue,Lt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=$j(n.visibleWrites,r.path):ir(r.children,c=>{n.visibleWrites=$j(n.visibleWrites,vn(r.path,c))}),!0))}(n.pendingWriteTree_,e)){let o=new un(null);return null!=r.snap?o=o.set(Lt(),!0):ir(r.children,s=>{o=o.set(new Yt(s),!0)}),Ul(n,new ug(r.path,o,t))}return[]}function lf(n,e,t){return Ul(n,new ec({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function wg(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{const l=Js(a,Vr(s,e));if(l)return l});return Kj(i,e,o,t,!0)}function Ul(n,e){return fU(e,n.syncPointTree_,null,hg(n.pendingWriteTree_,Lt()))}function fU(n,e,t,r){if(Tt(n.path))return hU(n,e,t,r);{const i=e.get(Lt());null==t&&null!=i&&(t=Js(i,Lt()));let o=[];const s=Et(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){const l=t?t.getImmediateChild(s):null,p=Yj(r,s);o=o.concat(fU(a,c,l,p))}return i&&(o=o.concat(L0(i,n,r,t))),o}}function hU(n,e,t,r){const i=e.get(Lt());null==t&&null!=i&&(t=Js(i,Lt()));let o=[];return e.children.inorderTraversal((s,a)=>{const c=t?t.getImmediateChild(s):null,l=Yj(r,s),p=n.operationForChild(s);p&&(o=o.concat(hU(p,a,c,l)))}),i&&(o=o.concat(L0(i,n,r,t))),o}function j0(n,e){return n.tagToQueryMap.get(e)}function U0(n){const e=n.indexOf("$");return Ve(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Yt(n.substr(0,e))}}function B0(n,e,t){const r=n.syncPointTree_.get(e);return Ve(r,"Missing sync point for query tag that we're tracking"),L0(r,t,hg(n.pendingWriteTree_,e),null)}class H0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new H0(t)}node(){return this.node_}}class $0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=vn(this.path_,e);return new $0(this.syncTree_,t)}node(){return wg(this.syncTree_,this.path_)}}const Ode=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},mU=function(n,e,t){return n&&"object"==typeof n?(Ve(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Nde(n[".sv"],e,t):"object"==typeof n[".sv"]?Lde(n[".sv"],e):void Ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Nde=function(n,e,t){if("timestamp"===n)return t.timestamp;Ve(!1,"Unexpected server value: "+n)},Lde=function(n,e,t){n.hasOwnProperty("increment")||Ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&Ve(!1,"Unexpected increment value: "+r);const i=e.node();if(Ve(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},gU=function(n,e,t,r){return z0(e,new $0(t,n),r)},W0=function(n,e,t){return z0(n,new H0(e),t)};function z0(n,e,t){const r=n.getPriority().val(),i=mU(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const s=n,a=mU(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Ol(a,En(i)):n}{const s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Ol(i))),s.forEachChild(ln,(a,c)=>{const l=z0(c,e.getImmediateChild(a),t);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}class G0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Tg(n,e){let t=e instanceof Yt?e:new Yt(e),r=n,i=Et(t);for(;null!==i;){const o=gl(r.node.children,i)||{children:{},childCount:0};r=new G0(i,r,o),t=tn(t),i=Et(t)}return r}function rc(n){return n.node.value}function K0(n,e){n.node.value=e,q0(n)}function _U(n){return n.node.childCount>0}function Sg(n,e){ir(n.node.children,(t,r)=>{e(new G0(t,n,r))})}function vU(n,e,t,r){t&&!r&&e(n),Sg(n,i=>{vU(i,e,!0,r)}),t&&r&&e(n)}function ff(n){return new Yt(null===n.parent?n.name:ff(n.parent)+"/"+n.name)}function q0(n){null!==n.parent&&function jde(n,e,t){const r=function Fde(n){return void 0===rc(n)&&!_U(n)}(t),i=es(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,q0(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,q0(n))}(n.parent,n.name,n)}const Ude=/[\[\].#$\/\u0000-\u001F\u007F]/,Bde=/[\[\].#$\u0000-\u001F\u007F]/,Y0=10485760,Cg=function(n){return"string"==typeof n&&0!==n.length&&!Ude.test(n)},pf=function(n,e,t){const r=t instanceof Yt?new iue(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ja(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ja(r)+" with contents = "+e.toString());if(Zm(e))throw new Error(n+"contains "+e.toString()+" "+Ja(r));if("string"==typeof e&&e.length>Y0/3&&qp(e)>Y0)throw new Error(n+"contains a string greater than "+Y0+" utf8 bytes "+Ja(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(ir(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!Cg(s)))throw new Error(n+" contains an invalid key ("+s+") "+Ja(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function oue(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=qp(e),kj(n)})(r,s),pf(n,a,r),function sue(n){const e=n.parts_.pop();n.byteLength_-=qp(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Ja(r)+" in addition to actual children.")}},wU=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Cg(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Bde.test(n)}(n)}(t))throw new Error(function Kp(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zde{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hi(n,e,t){(function Ig(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!d0(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function TU(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Gde(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Pi(r,e)||Pi(e,r))}function Gde(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Qa&&rr("event: "+t.toString()),Rl(r)}}}const SU="repo_interrupt",Kde=25;class qde{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zde,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lg(),this.transactionQueueTree_=new G0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function CU(n){const t=n.infoData_.getNode(new Yt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function gf(n){return Ode({timestamp:CU(n)})}function IU(n,e,t,r,i){n.dataUpdateCount++;const o=new Yt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){const c=Gp(t,l=>En(l));s=function Dde(n,e,t,r){const i=j0(n,r);if(i){const o=U0(i),s=o.path,a=o.queryId,c=Vr(s,e),l=un.fromObject(t);return B0(n,s,new Vl(I0(a),c,l))}return[]}(n.serverSyncTree_,o,c,i)}else{const c=En(t);s=function dU(n,e,t,r){const i=j0(n,r);if(null!=i){const o=U0(i),s=o.path,a=o.queryId,c=Vr(s,e);return B0(n,s,new ec(I0(a),c,t))}return[]}(n.serverSyncTree_,o,c,i)}else if(r){const c=Gp(t,l=>En(l));s=function Cde(n,e,t){const r=un.fromObject(t);return Ul(n,new Vl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,c)}else{const c=En(t);s=lf(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Hl(n,o)),hi(n.eventQueue_,a,s)}function xU(n,e){J0(n,"connected",e),!1===e&&function Zde(n){Bl(n,"onDisconnectEvents");const e=gf(n),t=lg();T0(n.onDisconnect_,Lt(),(i,o)=>{const s=gU(i,o,n.serverSyncTree_,e);Fl(t,i,s)});let r=[];T0(t,Lt(),(i,o)=>{r=r.concat(lf(n.serverSyncTree_,i,o));const s=function nI(n,e){const t=ff(AU(n,e)),r=Tg(n.transactionQueueTree_,e);return function Vde(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{rI(n,i)}),rI(n,r),vU(r,i=>{rI(n,i)}),t}(n,i);Hl(n,s)}),n.onDisconnect_=lg(),hi(n.eventQueue_,Lt(),r)}(n)}function J0(n,e,t){const r=new Yt("/.info/"+e),i=En(t);n.infoData_.updateSnapshot(r,i);const o=lf(n.infoSyncTree_,r,i);hi(n.eventQueue_,r,o)}function xg(n){return n.nextWriteId_++}function Bl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),rr(t,...e)}function tI(n,e,t){return wg(n.serverSyncTree_,e,t)||pt.EMPTY_NODE}function Dg(n,e=n.transactionQueueTree_){if(e||kg(n,e),rc(e)){const t=MU(n,e);Ve(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function sfe(n,e,t){const r=t.map(l=>l.currentWriteId),i=tI(n,e,r);let o=i;const s=i.hash();for(let l=0;l<t.length;l++){const p=t[l];Ve(0===p.status,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const g=Vr(e,p.path);o=o.updateChild(g,p.currentOutputSnapshotRaw)}const a=o.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Bl(n,"transaction put response",{path:c.toString(),status:l});let p=[];if("ok"===l){const g=[];for(let O=0;O<t.length;O++)t[O].status=2,p=p.concat(ea(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&g.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();kg(n,Tg(n.transactionQueueTree_,e)),Dg(n,n.transactionQueueTree_),hi(n.eventQueue_,e,p);for(let O=0;O<g.length;O++)Rl(g[O])}else{if("datastale"===l)for(let g=0;g<t.length;g++)t[g].status=3===t[g].status?4:0;else{Dr("transaction at "+c.toString()+" failed: "+l);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=l}Hl(n,e)}},s)}(n,ff(e),t)}else _U(e)&&Sg(e,t=>{Dg(n,t)})}function Hl(n,e){const t=AU(n,e),r=ff(t);return function afe(n,e,t){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Vr(t,c.path);let g,p=!1;if(Ve(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)p=!0,g=c.abortReason,i=i.concat(ea(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Kde)p=!0,g="maxretry",i=i.concat(ea(n.serverSyncTree_,c.currentWriteId,!0));else{const O=tI(n,c.path,s);c.currentInputSnapshot=O;const U=e[a].update(O.val());if(void 0!==U){pf("transaction failed: Data returned ",U,c.path);let q=En(U);"object"==typeof U&&null!=U&&es(U,".priority")||(q=q.updatePriority(O.getPriority()));const me=c.currentWriteId,ye=gf(n),Ce=W0(q,O,ye);c.currentOutputSnapshotRaw=q,c.currentOutputSnapshotResolved=Ce,c.currentWriteId=xg(n),s.splice(s.indexOf(me),1),i=i.concat(F0(n.serverSyncTree_,c.path,Ce,c.currentWriteId,c.applyLocally)),i=i.concat(ea(n.serverSyncTree_,me,!0))}else p=!0,g="nodata",i=i.concat(ea(n.serverSyncTree_,c.currentWriteId,!0))}hi(n.eventQueue_,t,i),i=[],p&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===g?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(g),!1,null)))}kg(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Rl(r[a]);Dg(n,n.transactionQueueTree_)}(n,MU(n,t),r),r}function AU(n,e){let t,r=n.transactionQueueTree_;for(t=Et(e);null!==t&&void 0===rc(r);)r=Tg(r,t),t=Et(e=tn(e));return r}function MU(n,e){const t=[];return RU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function RU(n,e,t){const r=rc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Sg(e,i=>{RU(n,i,t)})}function kg(n,e){const t=rc(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,K0(e,t.length>0?t:void 0)}Sg(e,r=>{kg(n,r)})}function rI(n,e){const t=rc(e);if(t){const r=[];let i=[],o=-1;for(let s=0;s<t.length;s++)3===t[s].status||(1===t[s].status?(Ve(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(Ve(0===t[s].status,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(ea(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?K0(e,void 0):t.length=o+1,hi(n.eventQueue_,ff(e),i);for(let s=0;s<r.length;s++)Rl(r[s])}}const iI=function(n,e){const t=ufe(n),r=t.namespace;return"firebase.com"===t.domain&&Co(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Co("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Dr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new r0(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Yt(t.pathString)}},ufe=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof n){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let p=n.indexOf("/");-1===p&&(p=n.length);let g=n.indexOf("?");-1===g&&(g=n.length),e=n.substring(0,Math.min(p,g)),p<g&&(i=function cfe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(p,g)));const O=function lfe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Dr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,g)));l=e.indexOf(":"),l>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(l+1),10)):l=e.length;const U=e.slice(0,l);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),o=r}"ns"in O&&(o=O.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class pi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Tt(this._path)?null:u0(this._path)}get ref(){return new Zi(this._repo,this._path)}get _queryIdentifier(){const e=Uj(this._queryParams),t=t0(e);return"{}"===t?"default":t}get _queryObject(){return Uj(this._queryParams)}isEqual(e){if(!((e=$n(e))instanceof pi))return!1;const t=this._repo===e._repo,r=d0(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function nue(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Zi extends pi{constructor(e,t){super(e,t,new y0,!1)}get parent(){const e=Dj(this._path);return null===e?null:new Zi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function gde(n){Ve(!_g,"__referenceConstructor has already been defined"),_g=n})(Zi),function wde(n){Ve(!yg,"__referenceConstructor has already been defined"),yg=n}(Zi);const Sfe="FIREBASE_DATABASE_EMULATOR_HOST",sI={};let jU=!1;class Afe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Yde(n,e,t){if(n.stats_=a0(n.repoInfo_),n.forceRestClient_||kle())n.server_=new cg(n.repoInfo_,(r,i,o,s)=>{IU(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>xU(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hr(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Za(n.repoInfo_,e,(r,i,o,s)=>{IU(n,r,i,o,s)},r=>{xU(n,r)},r=>{!function Qde(n,e){ir(e,(t,r)=>{J0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Ole(n,e){const t=n.toString();return s0[t]||(s0[t]=e()),s0[t]}(n.repoInfo_,()=>new Oue(n.stats_,n.server_)),n.infoData_=new kue,n.infoSyncTree_=new uU({startListening:(r,i,o,s)=>{let a=[];const c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=lf(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),J0(n,"connected",!1),n.serverSyncTree_=new uU({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{const l=s(a,c);hi(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zi(this._repo,Lt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xfe(n,e){const t=sI[e];(!t||t[n.key]!==n)&&Co(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function kU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(SU)}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Co("Cannot call "+e+" on a deleted database.")}}function Mfe(n=rs(),e){const t=ci(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=tw("database");r&&function Rfe(n,e,t,r={}){(n=$n(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Co("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Co('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Yd(Yd.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:f1(r.mockUserToken,n.app.options.projectId);o=new Yd(s)}!function Cfe(n,e,t,r){n.repoInfo_=new r0(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(t,...r)}return t}Za.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Za.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Pfe(n){(function _le(n){JC=n})(Pa),tr(new qn("database",(e,{instanceIdentifier:t})=>function Ife(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Co("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rr("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,l,s=iI(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(l=process.env[Sfe]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=iI(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const p=i&&c?new Yd(Yd.OWNER):new Mle(n.name,n.options,e);wU("Invalid Firebase Database URL",s),Tt(s.path)||Co("Database URL must point to the root of a Firebase Database (not including a child path).");const g=function Dfe(n,e,t,r){let i=sI[e.name];i||(i={},sI[e.name]=i);let o=i[n.toURLString()];return o&&Co("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new qde(n,jU,t,r),i[n.toURLString()]=o,o}(a,n,p,new Ale(n.name,t));return new Afe(g,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Dt(WV,"0.14.4",n),Dt(WV,"0.14.4","esm2017")}();class aI{constructor(e){return e}}const BU="database",cI=new Re("angularfire2.database-instances");function Vfe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new aI(r)}}const jfe={provide:class Lfe{constructor(){return ls(BU)}},deps:[[new kt,cI]]},Ufe={provide:aI,useFactory:function Ffe(n,e){const t=cs(BU,n,e);return t&&new aI(t)},deps:[[new kt,cI],ki]};let Bfe=(()=>{class n{constructor(){Dt("angularfire",Di.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[Ufe,jfe]}),n})();function Hfe(n,...e){return{ngModule:Bfe,providers:[{provide:cI,useFactory:Vfe(n),multi:!0,deps:[it,bn,us,ds,[new kt,Dm],[new kt,yd],...e]}]}}const $fe=Gr(Mfe,!0),uI="functions";class qfe{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return ge(function*(){if(e.auth)try{return(yield e.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return ge(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(){var e=this;return ge(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return ge(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const dI="us-central1";class Qfe{constructor(e,t,r,i,o=dI,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new qfe(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(o);this.customDomain=a.origin,this.region=dI}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const zU="@firebase/functions";function she(n=rs(),e=dI){const r=ci($n(n),uI).getImmediate({identifier:e}),i=tw("functions");return i&&function ahe(n,e,t){!function Xfe(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}($n(n),e,t)}(r,...i),r}!function ohe(n,e){tr(new qn(uI,(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),c=r.getProvider("app-check-internal");return new Qfe(o,s,a,c,i,n)},"PUBLIC").setMultipleInstances(!0)),Dt(zU,"0.9.4",e),Dt(zU,"0.9.4","esm2017")}(fetch.bind(self));class pI{constructor(e){return e}}const KU="functions",mI=new Re("angularfire2.functions-instances");function uhe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new pI(r)}}const dhe={provide:class che{constructor(){return ls(KU)}},deps:[[new kt,mI]]},fhe={provide:pI,useFactory:function lhe(n,e){const t=cs(KU,n,e);return t&&new pI(t)},deps:[[new kt,mI],ki]};let hhe=(()=>{class n{constructor(){Dt("angularfire",Di.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[fhe,dhe]}),n})();function phe(n,...e){return{ngModule:hhe,providers:[{provide:mI,useFactory:uhe(n),multi:!0,deps:[it,bn,us,ds,[new kt,Dm],[new kt,yd],...e]}]}}const mhe=Gr(she,!0);class gI{constructor(e){return e}}const qU="messaging",_I=new Re("angularfire2.messaging-instances");function vhe(n){return(e,t)=>{if(!im.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new gI(r)}}const yhe={provide:class ghe{constructor(){return ls(qU)}},deps:[[new kt,_I]]},bhe={provide:gI,useFactory:function _he(n,e){if(!im.sync())return null;const t=cs(qU,n,e);return t&&new gI(t)},deps:[[new kt,_I],ki]};let whe=(()=>{class n{constructor(){Dt("angularfire",Di.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[bhe,yhe,{provide:ya,useValue:im.async,multi:!0}]}),n})();function Ehe(n,...e){return{ngModule:whe,providers:[{provide:_I,useFactory:vhe(n),multi:!0,deps:[it,bn,us,ds,...e]}]}}const The=Gr(BZ,!0),YU="@firebase/performance",vI="0.6.4",QU=vI,yI="FB-PERF-TRACE-MEASURE",tB="@firebase/performance/config",nB="@firebase/performance/configexpire",rB="Performance",_r=new Qi("performance",rB,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),ko=new Aa(rB);let bI,iB,oB,EI;ko.logLevel=Wt.INFO;class or{constructor(e){if(this.window=e,!e)throw _r.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&Wp()?!!Us()||(ko.info("IndexedDB is not supported by current browswer"),!1):(ko.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const o of i.getEntries())t(o)}).observe({entryTypes:[e]})}static getInstance(){return void 0===bI&&(bI=new or(iB)),bI}}function wI(){return oB}function sB(n,e){const t=n.length-e.length;if(t<0||t>1)throw _r.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class mi{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=sB("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=sB("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===EI&&(EI=new mi),EI}}var oc=(()=>{return(n=oc||(oc={}))[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN",oc;var n})();const Mhe=["firebase_","google_","ga_"],Rhe=new RegExp("^[a-zA-Z]\\w*$");function Nhe(){const n=or.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function aB(){switch(or.getInstance().document.visibilityState){case"visible":return oc.VISIBLE;case"hidden":return oc.HIDDEN;default:return oc.UNKNOWN}}function Lhe(){const e=or.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function cB(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw _r.create("no app id");return t}const Bhe="0.0.1",eo={loggingEnabled:!0},Hhe="FIREBASE_INSTALLATIONS_AUTH";const Ghe="Could not fetch config, will use default configs";function lB(n){if(!n)return n;const e=mi.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0!==t.fpr_enabled?"true"===String(t.fpr_enabled):eo.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):eo.logSource&&(e.logSource=eo.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:eo.logEndPointUrl&&(e.logEndPointUrl=eo.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:eo.transportKey&&(e.transportKey=eo.transportKey),void 0!==t.fpr_vc_network_request_sampling_rate?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):void 0!==eo.networkRequestsSamplingRate&&(e.networkRequestsSamplingRate=eo.networkRequestsSamplingRate),void 0!==t.fpr_vc_trace_sampling_rate?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):void 0!==eo.tracesSamplingRate&&(e.tracesSamplingRate=eo.tracesSamplingRate),e.logTraceAfterSampling=uB(e.tracesSamplingRate),e.logNetworkAfterSampling=uB(e.networkRequestsSamplingRate),n}function uB(n){return Math.random()<=n}let SI,TI=1;function dB(n){return TI=2,SI=SI||function Qhe(n){return function Xhe(){const n=or.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function khe(n){const e=n.getId();return e.then(t=>{oB=t}),e}(n.installations)).then(e=>function $he(n,e){const t=function Whe(){const n=or.getInstance().localStorage;if(!n)return;const e=n.getItem(nB);if(!e||!function qhe(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(tB);if(t)try{return JSON.parse(t)}catch{return}}();return t?(lB(t),Promise.resolve()):function Khe(n,e){return function Ahe(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function jhe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw _r.create("no project id");return t}(n.app),i=function Uhe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw _r.create("no api key");return t}(n.app),s=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`${Hhe} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:cB(n.app),app_version:QU,sdk_version:Bhe})});return fetch(s).then(a=>{if(a.ok)return a.json();throw _r.create("RC response not ok")})}).catch(()=>{ko.info(Ghe)})}(n,e).then(lB).then(r=>function zhe(n){const e=or.getInstance().localStorage;!n||!e||(e.setItem(tB,JSON.stringify(n)),e.setItem(nB,String(Date.now()+60*mi.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>fB(),()=>fB())}(n),SI}function fB(){TI=3}const CI=1e4,hB=3,Zhe=1e3;let II,Og=hB,ra=[],pB=!1;function Ng(n){setTimeout(()=>{if(0!==Og){if(!ra.length)return Ng(CI);!function tpe(){const n=ra.splice(0,Zhe),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function npe(n,e){return function rpe(n){const e=mi.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||ko.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=CI;isNaN(r)||(i=Math.max(r,i));const o=t.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(ra=[...e,...ra],ko.info("Retry transport request later.")),Og=hB,Ng(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:mi.getInstance().logSource,log_event:e},n).catch(()=>{ra=[...n,...ra],Og--,ko.info(`Tries left: ${Og}.`),Ng(CI)})}()}},n)}function mB(n,e){II||(II=function ope(n){return(...e)=>{!function ipe(n){if(!n.eventTime||!n.message)throw _r.create("invalid cc log");ra=[...ra,n]}({message:n(...e),eventTime:Date.now()})}}(ape)),II(n,e)}function Lg(n){const e=mi.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||or.getInstance().requiredApisAvailable()&&(n.isAuto&&aB()!==oc.VISIBLE||(function Yhe(){return 3===TI}()?xI(n):dB(n.performanceController).then(()=>xI(n),()=>xI(n))))}function xI(n){if(!wI())return;const e=mi.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>mB(n,1),0)}function ape(n,e){return 0===e?function cpe(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:gB(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function lpe(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:gB(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function gB(n){return{google_app_id:cB(n),app_instance_id:wI(),web_app_info:{sdk_version:QU,page_url:or.getInstance().getUrl(),service_worker_status:Nhe(),visibility_state:aB(),effective_connection_type:Lhe()},application_process_state:0}}const fpe=["_fp","_fcp","_fid"];class ia{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=or.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${yI}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw _r.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw _r.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Lg(this)}record(e,t,r){if(e<=0)throw _r.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw _r.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Lg(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function hpe(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&fpe.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw _r.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function ppe(n){const e=Math.floor(n);return e<n&&ko.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t??0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function Fhe(n){return!(0===n.length||n.length>40||Mhe.some(t=>n.startsWith(t))||!n.match(Rhe))}(e),i=function Vhe(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw _r.create("invalid attribute name",{attributeName:e});if(!i)throw _r.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const o=or.getInstance().getUrl();if(!o)return;const s=new ia(e,"_wt_"+o,!0),a=Math.floor(1e3*or.getInstance().getTimeOrigin());if(s.setStartTime(a),t&&t[0]&&(s.setDuration(Math.floor(1e3*t[0].duration)),s.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),s.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),s.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const p=r.find(O=>"first-paint"===O.name);p&&p.startTime&&s.putMetric("_fp",Math.floor(1e3*p.startTime));const g=r.find(O=>"first-contentful-paint"===O.name);g&&g.startTime&&s.putMetric("_fcp",Math.floor(1e3*g.startTime)),i&&s.putMetric("_fid",Math.floor(1e3*i))}Lg(s)}static createUserTimingTrace(e,t){Lg(new ia(e,t,!1,t))}}function _B(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=or.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),o=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,s=Math.floor(1e3*(t.responseEnd-t.startTime));!function spe(n){const e=mi.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>mB(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:s})}const mpe=5e3;function vB(n){wI()&&(setTimeout(()=>function _pe(n){const e=or.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{ia.createOobTrace(n,t,r),i=void 0},mpe);e.onFirstInputDelay(o=>{i&&(clearTimeout(i),ia.createOobTrace(n,t,r,o))})}else ia.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function gpe(n){const e=or.getInstance(),t=e.getEntriesByType("resource");for(const r of t)_B(n,r);e.setupObserver("resource",r=>_B(n,r))}(n),0),setTimeout(()=>function vpe(n){const e=or.getInstance(),t=e.getEntriesByType("measure");for(const r of t)yB(n,r);e.setupObserver("measure",r=>yB(n,r))}(n),0))}function yB(n,e){const t=e.name;t.substring(0,yI.length)!==yI&&ia.createUserTimingTrace(n,t)}class ype{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==e?.dataCollectionEnabled&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==e?.instrumentationEnabled&&(this.instrumentationEnabled=e.instrumentationEnabled),or.getInstance().requiredApisAvailable()?ml().then(t=>{t&&(function epe(){pB||(Ng(5500),pB=!0)}(),dB(this).then(()=>vB(this),()=>vB(this)),this.initialized=!0)}).catch(t=>{ko.info(`Environment doesn't support IndexedDB: ${t}`)}):ko.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){mi.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return mi.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){mi.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return mi.getInstance().dataCollectionEnabled}}function wpe(n=rs()){return ci(n=$n(n),"performance").getImmediate()}const Epe=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw _r.create("FB not default");if(typeof window>"u")throw _r.create("no window");!function Dhe(n){iB=n}(window);const i=new ype(t,r);return i._init(e),i};!function Tpe(){tr(new qn("performance",Epe,"PUBLIC")),Dt(YU,vI),Dt(YU,vI,"esm2017")}();class DI{constructor(e){return e}}const bB="performance",kI=new Re("angularfire2.performance-instances");function Ipe(n){return(e,t,r)=>{if(!Fy(t))return null;const i=e.runOutsideAngular(()=>n(r));return new DI(i)}}const xpe={provide:class Spe{constructor(){return ls(bB)}},deps:[[new kt,kI]]},Dpe={provide:DI,useFactory:function Cpe(n,e,t){if(!Fy(t))return null;const r=cs(bB,n,e);return r&&new DI(r)},deps:[[new kt,kI],ki,ks]};let kpe=(()=>{class n{constructor(){Dt("angularfire",Di.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[Dpe,xpe]}),n})();function Ape(n,...e){return{ngModule:kpe,providers:[{provide:kI,useFactory:Ipe(n),multi:!0,deps:[it,ks,bn,us,ds,...e]}]}}const Mpe=Gr(wpe,!0);class AI{constructor(e){return e}}const wB="remote-config",MI=new Re("angularfire2.remote-config-instances");function Ope(n){return(e,t)=>{if(!om.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new AI(r)}}const Npe={provide:class Rpe{constructor(){return ls(wB)}},deps:[[new kt,MI]]},Lpe={provide:AI,useFactory:function Ppe(n,e){if(!om.sync())return null;const t=cs(wB,n,e);return t&&new AI(t)},deps:[[new kt,MI],ki]};let Fpe=(()=>{class n{constructor(){Dt("angularfire",Di.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[Lpe,Npe,{provide:ya,useValue:om.async,multi:!0}]}),n})();function Vpe(n,...e){return{ngModule:Fpe,providers:[{provide:MI,useFactory:Ope(n),multi:!0,deps:[it,bn,us,ds,...e]}]}}const jpe=Gr(FJ,!0),EB="firebasestorage.googleapis.com",TB="storageBucket";class Tn extends xi{constructor(e,t,r=0){super(RI(e),`Firebase Storage: ${t} (${RI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return RI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var dn=(()=>{return(n=dn||(dn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",dn;var n})();function RI(n){return"storage/"+n}function OI(n){return new Tn(dn.INVALID_ARGUMENT,n)}function xB(){return new Tn(dn.APP_DELETED,"The Firebase app was deleted.")}class jr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=jr.makeFromUrl(e,t)}catch{return new jr(e,"")}if(""===r.path)return r;throw function Ype(n){return new Tn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(Pe){Pe.path_=decodeURIComponent(Pe.path)}const g=t.replace(/[.]/g,"\\."),be=[{regex:a,indices:{bucket:1,path:3},postModify:function o(Pe){"/"===Pe.path.charAt(Pe.path.length-1)&&(Pe.path_=Pe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${g}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===EB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let Pe=0;Pe<be.length;Pe++){const lt=be[Pe],mt=lt.regex.exec(e);if(mt){let vr=mt[lt.indices.path];vr||(vr=""),r=new jr(mt[lt.indices.bucket],vr),lt.postModify(r);break}}if(null==r)throw function qpe(n){return new Tn(dn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class tme{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function LI(n,e,t,r){if(r<e)throw OI(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw OI(`Invalid value for '${n}'. Expected ${t} or less.`)}var oa=(()=>{return(n=oa||(oa={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",oa;var n})();class ame{constructor(e,t,r,i,o,s,a,c,l,p,g,O=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=p,this.connectionFactory_=g,this.retry=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,q)=>{this.resolve_=U,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function ime(n){return void 0!==n}(c)?o():o(c)}catch(c){s(c)}else if(null!==a){const c=function PI(){return new Tn(dn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();c.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,c):c)}else s(i.canceled?this.appDelete_?xB():function CB(){return new Tn(dn.CANCELED,"User canceled the upload/download.")}():function SB(){return new Tn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Vg(!1,null,!0)):this.backoffId_=function nme(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return 2===a}let l=!1;function p(...me){l||(l=!0,e.apply(null,me))}function g(me){i=setTimeout(()=>{i=null,n(U,c())},me)}function O(){o&&clearTimeout(o)}function U(me,...ye){if(l)return void O();if(me)return O(),void p.call(null,me,...ye);if(c()||s)return O(),void p.call(null,me,...ye);let be;r<64&&(r*=2),1===a?(a=2,be=0):be=1e3*(r+Math.random()),g(be)}let q=!1;function ae(me){q||(q=!0,O(),!l&&(null!==i?(me||(a=2),clearTimeout(i),g(0)):me||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,ae(!0)},t),ae}((r,i)=>{if(i)return void r(!1,new Vg(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===oa.NO_ERROR,c=o.getStatus();if(!a||function AB(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}(c,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===oa.ABORT;return void r(!1,new Vg(!1,null,p))}const l=-1!==this.successCodes_.indexOf(c);r(!0,new Vg(l,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function rme(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Vg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class sc{constructor(e,t){this._service=e,this._location=t instanceof jr?t:jr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new sc(e,t)}get root(){const e=new jr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function NB(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function wme(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new jr(this._location.bucket,e);return new sc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function eme(n){return new Tn(dn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function QB(n,e){const t=e?.[TB];return null==t?null:jr.makeFromBucketSpec(t,n)}class $I{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=EB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?jr.makeFromBucketSpec(i,this._host):QB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?jr.makeFromBucketSpec(this._url,e):QB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return ge(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return ge(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new tme(xB());{const s=function fme(n,e,t,r,i,o,s=!0){const a=function kB(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return function ume(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function cme(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function lme(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,o),function dme(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new ame(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return ge(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const XB="@firebase/storage",ZB="storage";function sge(n=rs(),e){const r=ci(n=$n(n),ZB).getImmediate({identifier:e}),i=tw("storage");return i&&function age(n,e,t,r={}){!function oge(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:f1(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function cge(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new $I(t,r,i,e,Pa)}!function lge(){tr(new qn(ZB,cge,"PUBLIC").setMultipleInstances(!0)),Dt(XB,"0.11.2",""),Dt(XB,"0.11.2","esm2017")}();class WI{constructor(e){return e}}const eH="storage",zI=new Re("angularfire2.storage-instances");function fge(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new WI(r)}}const hge={provide:class uge{constructor(){return ls(eH)}},deps:[[new kt,zI]]},pge={provide:WI,useFactory:function dge(n,e){const t=cs(eH,n,e);return t&&new WI(t)},deps:[[new kt,zI],ki]};let mge=(()=>{class n{constructor(){Dt("angularfire",Di.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n}),n.\u0275inj=Nt({providers:[pge,hge]}),n})();function gge(n,...e){return{ngModule:mge,providers:[{provide:zI,useFactory:fge(n),multi:!0,deps:[it,bn,us,ds,[new kt,Dm],[new kt,yd],...e]}]}}const _ge=Gr(sge,!0);let vge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Bt({type:n,bootstrap:[Wse]}),n.\u0275inj=Nt({providers:[$V,qC],imports:[Moe,Cse,hQ,fQ,R9,CP,$se,$ce,Fse,Ly,EC,Vee(()=>jee(Wce_firebase)),gle(()=>qce()),wie(()=>Sie()),Hfe(()=>$fe()),phe(()=>mhe()),Ehe(()=>The()),Ape(()=>Mpe()),Vpe(()=>jpe()),gge(()=>_ge())]}),n})();n9().bootstrapModule(vge).catch(n=>console.error(n))},9069:$=>{"use strict";var k,H="object"==typeof Reflect?Reflect:null,w=H&&"function"==typeof H.apply?H.apply:function(N,R,P){return Function.prototype.apply.call(N,R,P)};k=H&&"function"==typeof H.ownKeys?H.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:function(N){return Object.getOwnPropertyNames(N)};var I=Number.isNaN||function(N){return N!=N};function v(){v.init.call(this)}$.exports=v,$.exports.once=function S(j,N){return new Promise(function(R,P){function T(L){j.removeListener(N,x),P(L)}function x(){"function"==typeof j.removeListener&&j.removeListener("error",T),R([].slice.call(arguments))}F(j,N,x,{once:!0}),"error"!==N&&function V(j,N,R){"function"==typeof j.on&&F(j,"error",N,R)}(j,T,{once:!0})})},v.EventEmitter=v,v.prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var m=10;function d(j){if("function"!=typeof j)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}function u(j){return void 0===j._maxListeners?v.defaultMaxListeners:j._maxListeners}function f(j,N,R,P){var T,x,L;if(d(R),void 0===(x=j._events)?(x=j._events=Object.create(null),j._eventsCount=0):(void 0!==x.newListener&&(j.emit("newListener",N,R.listener?R.listener:R),x=j._events),L=x[N]),void 0===L)L=x[N]=R,++j._eventsCount;else if("function"==typeof L?L=x[N]=P?[R,L]:[L,R]:P?L.unshift(R):L.push(R),(T=u(j))>0&&L.length>T&&!L.warned){L.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=j,B.type=N,B.count=L.length,function D(j){console&&console.warn&&console.warn(j)}(B)}return j}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(j,N,R){var P={fired:!1,wrapFn:void 0,target:j,type:N,listener:R},T=h.bind(P);return T.listener=R,P.wrapFn=T,T}function b(j,N,R){var P=j._events;if(void 0===P)return[];var T=P[N];return void 0===T?[]:"function"==typeof T?R?[T.listener||T]:[T]:R?function C(j){for(var N=new Array(j.length),R=0;R<N.length;++R)N[R]=j[R].listener||j[R];return N}(T):M(T,T.length)}function y(j){var N=this._events;if(void 0!==N){var R=N[j];if("function"==typeof R)return 1;if(void 0!==R)return R.length}return 0}function M(j,N){for(var R=new Array(N),P=0;P<N;++P)R[P]=j[P];return R}function F(j,N,R,P){if("function"==typeof j.on)P.once?j.once(N,R):j.on(N,R);else{if("function"!=typeof j.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j);j.addEventListener(N,function T(x){P.once&&j.removeEventListener(N,T),R(x)})}}Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(j){if("number"!=typeof j||j<0||I(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");m=j}}),v.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(N){if("number"!=typeof N||N<0||I(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this},v.prototype.getMaxListeners=function(){return u(this)},v.prototype.emit=function(N){for(var R=[],P=1;P<arguments.length;P++)R.push(arguments[P]);var T="error"===N,x=this._events;if(void 0!==x)T=T&&void 0===x.error;else if(!T)return!1;if(T){var L;if(R.length>0&&(L=R[0]),L instanceof Error)throw L;var B=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw B.context=L,B}var G=x[N];if(void 0===G)return!1;if("function"==typeof G)w(G,this,R);else{var W=G.length,X=M(G,W);for(P=0;P<W;++P)w(X[P],this,R)}return!0},v.prototype.on=v.prototype.addListener=function(N,R){return f(this,N,R,!1)},v.prototype.prependListener=function(N,R){return f(this,N,R,!0)},v.prototype.once=function(N,R){return d(R),this.on(N,_(this,N,R)),this},v.prototype.prependOnceListener=function(N,R){return d(R),this.prependListener(N,_(this,N,R)),this},v.prototype.off=v.prototype.removeListener=function(N,R){var P,T,x,L,B;if(d(R),void 0===(T=this._events))return this;if(void 0===(P=T[N]))return this;if(P===R||P.listener===R)0==--this._eventsCount?this._events=Object.create(null):(delete T[N],T.removeListener&&this.emit("removeListener",N,P.listener||R));else if("function"!=typeof P){for(x=-1,L=P.length-1;L>=0;L--)if(P[L]===R||P[L].listener===R){B=P[L].listener,x=L;break}if(x<0)return this;0===x?P.shift():function E(j,N){for(;N+1<j.length;N++)j[N]=j[N+1];j.pop()}(P,x),1===P.length&&(T[N]=P[0]),void 0!==T.removeListener&&this.emit("removeListener",N,B||R)}return this},v.prototype.removeAllListeners=function(N){var R,P,T;if(void 0===(P=this._events))return this;if(void 0===P.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==P[N]&&(0==--this._eventsCount?this._events=Object.create(null):delete P[N]),this;if(0===arguments.length){var L,x=Object.keys(P);for(T=0;T<x.length;++T)"removeListener"!==(L=x[T])&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(R=P[N]))this.removeListener(N,R);else if(void 0!==R)for(T=R.length-1;T>=0;T--)this.removeListener(N,R[T]);return this},v.prototype.listeners=function(N){return b(this,N,!0)},v.prototype.rawListeners=function(N){return b(this,N,!1)},v.listenerCount=function(j,N){return"function"==typeof j.listenerCount?j.listenerCount(N):y.call(j,N)},v.prototype.listenerCount=y,v.prototype.eventNames=function(){return this._eventsCount>0?k(this._events):[]}},302:($,H,w)=>{"use strict";var k=w(8126);$.exports=function D(I,v,m,d){var u,f=new Error("Canceled");return new k(function(_,b,y){var M;I(function(C){return y()?k.reject(f):(M=v(C),m(M).then(function(V){if(y())throw f;return u=V()}))}).then(function(C){if(y())throw C.disconnect(),f;_(d(M,C))}).catch(function(C){b(C)})},function(){u&&u.cancel()})}},5769:($,H,w)=>{"use strict";var k=w(1647).MediaStreamTrack,D=w(7627),I=D.guessBrowser,v=D.guessBrowserVersion,m=D.isCodecSupported,d=w(302),u=w(8130),f=w(3383),h=w(3744),_=w(4920),b=w(7379),y=b.LocalAudioTrack,M=b.LocalDataTrack,E=b.LocalVideoTrack,C=w(4621),S=w(7406),V=w(448),F=w(9739),j=F.asLocalTrack,N=F.buildLogLevels,R=F.filterObject,P=F.isNonArrayObject,T=w(8701),x=T.DEFAULT_ENVIRONMENT,L=T.DEFAULT_LOG_LEVEL,B=T.DEFAULT_LOGGER_NAME,G=T.DEFAULT_REALM,W=T.DEFAULT_REGION,X=T.WS_SERVER,J=T.SDK_NAME,ee=T.SDK_VERSION,Q=T.typeErrors,ie=w(8126),fe=w(8606),ue=w(1458),re=w(1501).kG,ne="safari"===I()&&v(),Y=0,z=!1,ce=!1;if(ne){var le=ne.major;ce=le<12||12===le&&ne.minor<1}var ve=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),pe=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function Vt(Oe,Ee,Ke){Ke.forEach(function(zt){var fn=zt.didWarn,nn=zt.name,Ln=zt.newName,Zt=zt.shouldDelete;nn in Oe&&typeof Oe[nn]<"u"&&(Ln&&Zt&&(Oe[Ln]=Oe[nn]),Zt&&delete Oe[nn],!fn&&!["error","off"].includes(Ee.level)&&(Ee.warn('The ConnectOptions "'+nn+'" is '+(Ln?'deprecated and scheduled for removal. Please use "'+Ln+'" instead.':"no longer applicable and will be ignored.")),zt.didWarn=!0))})}function he(Oe,Ee,Ke,zt,fn,nn){var Ln=Oe.createLocalParticipantSignaling(Ke,zt);return Ee.debug("Creating a new LocalParticipant:",Ln),new fn.LocalParticipant(Ln,nn,fn)}function te(Oe,Ee,Ke){var zt=new S(Ee,Ke,Oe),fn=Oe.log;return fn.debug("Creating a new Room:",zt),Ke.on("stateChanged",function nn(Ln){"disconnected"===Ln&&(fn.info("Disconnected from Room:",zt.toString()),Ke.removeListener("stateChanged",nn))}),zt}function K(Oe,Ee,Ke,zt,fn,nn){return Ee.log.debug("Creating a new RoomSignaling"),Ke.connect(nn._signaling,Oe,zt,fn,Ee)}function oe(Oe,Ee){var Ke=Oe.log;return Oe.shouldStopLocalTracks=!Oe.tracks,Oe.shouldStopLocalTracks?Ke.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(Ke.info("Getting LocalTracks"),Ke.debug("Options:",Oe)),Oe.createLocalTracks(Oe).then(function(fn){var nn=Ee(fn);return nn.catch(function(){Oe.shouldStopLocalTracks&&(Ke.info("The automatically acquired LocalTracks will now be stopped"),fn.forEach(function(Zt){Zt.stop()}))}),nn})}function Me(Oe){var Ee="string"==typeof Oe?{codec:Oe}:Oe;switch(Ee.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},Ee);case"vp8":return Object.assign({simulcast:!1},Ee);default:return Ee}}$.exports=function Ne(Oe,Ee){if(typeof Ee>"u"&&(Ee={}),!P(Ee))return ie.reject(Q.INVALID_TYPE("options","object"));var Zt,Ke=Ee.Log||ue,zt=Ee.loggerName||B,fn=Ee.logLevel||L,nn=N(fn),Ln="[connect #"+ ++Y+"]";try{Zt=new Ke("default",Ln,nn,zt)}catch(ft){return ie.reject(ft)}Vt(Ee,Zt,ve);var Le="auto"===Ee.preferredVideoCodecs;if(Le&&(Ee.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),Ee.maxVideoBitrate&&Le)return Zt.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),ie.reject(Q.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));var De={};"string"==typeof(Ee=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:x,eventListener:null,insights:!0,LocalAudioTrack:y,LocalDataTrack:M,LocalParticipant:f,LocalVideoTrack:E,Log:Ke,MediaStreamTrack:k,loggerName:zt,logLevel:fn,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:G,region:W,signaling:V},R(Ee))).wsServerInsights&&(De.gateway=Ee.wsServerInsights);var de=new(Ee.insights?h:_)(Oe,J,ee,Ee.environment,Ee.realm,De),Te=X(Ee.environment,Ee.region),Se=new fe(de,Date.now(),Zt,Ee.eventListener);if((Ee=Object.assign({eventObserver:Se,wsServer:Te},Ee)).log=Zt,ce&&!z&&"error"!==Zt.logLevel&&"off"!==Zt.logLevel&&(z=!0,Zt.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof Oe)return ie.reject(Q.INVALID_TYPE("token","string"));var Ae=Object.assign({},Ee);if(delete Ae.name,"tracks"in Ee){if(!Array.isArray(Ee.tracks))return ie.reject(Q.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{Ee.tracks=Ee.tracks.map(function(ft){return j(ft,Ae)})}catch(ft){return ie.reject(ft)}}var ut=re(Ee.bandwidthProfile);if(ut)return ie.reject(ut);Ee.clientTrackSwitchOffControl="disabled",Ee.contentPreferencesMode="disabled",Ee.bandwidthProfile&&(Ee.clientTrackSwitchOffControl="auto",Ee.contentPreferencesMode="auto",Ee.bandwidthProfile.video&&(Vt(Ee.bandwidthProfile.video,Zt,pe),Ee.clientTrackSwitchOffControl="maxTracks"in Ee.bandwidthProfile.video?"disabled":"manual"===Ee.bandwidthProfile.video.clientTrackSwitchOffControl?"manual":"auto",Ee.contentPreferencesMode="renderDimensions"in Ee.bandwidthProfile.video?"disabled":"manual"===Ee.bandwidthProfile.video.contentPreferencesMode?"manual":"auto"));var In=new(0,Ee.signaling)(Ee.wsServer,Ee);Zt.info("Connecting to a Room"),Zt.debug("Options:",Ee);var Fn=new u({maxAudioBitrate:Ee.maxAudioBitrate,maxVideoBitrate:Ee.maxVideoBitrate},Le),jt={audio:Ee.preferredAudioCodecs.map(Me),video:Ee.preferredVideoCodecs.map(Me)},rn=new C(P(Ee.networkQuality)?Ee.networkQuality:{});["audio","video"].forEach(function(ft){return jt[ft].forEach(function(on){var Ts=on.codec;return m(Ts,ft).then(function($g){return!$g&&Zt.warn("The preferred "+ft+' codec "'+Ts+'" will be ignored as it is not supported by the browser.')})})});var dt=d(oe.bind(null,Ee),he.bind(null,In,Zt,Fn,rn,Ee),K.bind(null,Oe,Ee,In,Fn,jt),te.bind(null,Ee));return dt.then(function(ft){return de.connect(ft.sid,ft.localParticipant.sid),Zt.info("Connected to Room:",ft.toString()),Zt.info("Room name:",ft.name),Zt.debug("Room:",ft),ft.once("disconnected",function(){return de.disconnect()}),ft},function(ft){de.disconnect(),dt._isCanceled?Zt.info("Attempt to connect to a Room was canceled"):Zt.info("Error while connecting to a Room:",ft)}),dt}},8765:($,H,w)=>{"use strict";var k=w(8701),D=k.DEFAULT_LOG_LEVEL,I=k.DEFAULT_LOGGER_NAME;function v(f,h){h=Object.assign({loggerName:I,logLevel:D},h);var _={};_.loggerName=h.loggerName,_.logLevel=h.logLevel,delete h.loggerName,delete h.logLevel;var b=h.createLocalTracks;return delete h.createLocalTracks,_[f]=!(Object.keys(h).length>0)||h,b(_).then(function(y){return y[0]})}$.exports={audio:function m(f){return v("audio",f)},video:function d(f){return v("video",f)}}},7124:function($,H,w){"use strict";var k=this&&this.__assign||function(){return k=Object.assign||function(T){for(var x,L=1,B=arguments.length;L<B;L++)for(var G in x=arguments[L])Object.prototype.hasOwnProperty.call(x,G)&&(T[G]=x[G]);return T},k.apply(this,arguments)},D=this&&this.__awaiter||function(T,x,L,B){return new(L||(L=Promise))(function(W,X){function J(ie){try{Q(B.next(ie))}catch(fe){X(fe)}}function ee(ie){try{Q(B.throw(ie))}catch(fe){X(fe)}}function Q(ie){ie.done?W(ie.value):function G(W){return W instanceof L?W:new L(function(X){X(W)})}(ie.value).then(J,ee)}Q((B=B.apply(T,x||[])).next())})},I=this&&this.__generator||function(T,x){var B,G,W,X,L={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return X={next:J(0),throw:J(1),return:J(2)},"function"==typeof Symbol&&(X[Symbol.iterator]=function(){return this}),X;function J(Q){return function(ie){return function ee(Q){if(B)throw new TypeError("Generator is already executing.");for(;L;)try{if(B=1,G&&(W=2&Q[0]?G.return:Q[0]?G.throw||((W=G.return)&&W.call(G),0):G.next)&&!(W=W.call(G,Q[1])).done)return W;switch(G=0,W&&(Q=[2&Q[0],W.value]),Q[0]){case 0:case 1:W=Q;break;case 4:return L.label++,{value:Q[1],done:!1};case 5:L.label++,G=Q[1],Q=[0];continue;case 7:Q=L.ops.pop(),L.trys.pop();continue;default:if(!(W=(W=L.trys).length>0&&W[W.length-1])&&(6===Q[0]||2===Q[0])){L=0;continue}if(3===Q[0]&&(!W||Q[1]>W[0]&&Q[1]<W[3])){L.label=Q[1];break}if(6===Q[0]&&L.label<W[1]){L.label=W[1],W=Q;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(Q);break}W[2]&&L.ops.pop(),L.trys.pop();continue}Q=x.call(T,L)}catch(ie){Q=[6,ie],G=0}finally{B=W=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}([Q,ie])}}},v=this&&this.__read||function(T,x){var L="function"==typeof Symbol&&T[Symbol.iterator];if(!L)return T;var G,X,B=L.call(T),W=[];try{for(;(void 0===x||x-- >0)&&!(G=B.next()).done;)W.push(G.value)}catch(J){X={error:J}}finally{try{G&&!G.done&&(L=B.return)&&L.call(B)}finally{if(X)throw X.error}}return W},m=this&&this.__spreadArray||function(T,x){for(var L=0,B=x.length,G=T.length;L<B;L++,G++)T[G]=x[L];return T};Object.defineProperty(H,"__esModule",{value:!0}),H.createLocalTracks=void 0;var d=w(7155),u=w(9739).buildLogLevels,f=w(1647),h=f.getUserMedia,_=f.MediaStreamTrack,b=w(7379),y=b.LocalAudioTrack,M=b.LocalDataTrack,E=b.LocalVideoTrack,C=w(1458),S=w(8701),V=S.DEFAULT_LOG_LEVEL,F=S.DEFAULT_LOGGER_NAME,j=S.typeErrors.INVALID_VALUE,N=w(3830),R=0;H.createLocalTracks=function P(T){return D(this,void 0,void 0,function(){var x,L,B,G,W,X,J,ee,Q,ie,fe,ue,re,ne=this;return I(this,function(Y){switch(Y.label){case 0:if(L=k({audio:x=!(T&&("audio"in T||"video"in T)),getUserMedia:h,loggerName:F,logLevel:V,LocalAudioTrack:y,LocalDataTrack:M,LocalVideoTrack:E,MediaStreamTrack:_,Log:C,video:x},T),B="[createLocalTracks #"+ ++R+"]",G=u(L.logLevel),W=new L.Log("default",B,G,L.loggerName),delete(X=Object.assign({log:W},L)).name,!1===L.audio&&!1===L.video)return W.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(L.tracks)return W.info("Adding user-provided LocalTracks"),W.debug("LocalTracks:",L.tracks),[2,L.tracks];if((J={audio:"object"==typeof L.audio&&L.audio.name?{name:L.audio.name}:{defaultDeviceCaptureMode:"auto"},video:"object"==typeof L.video&&L.video.name?{name:L.video.name}:{}}).audio.isCreatedByCreateLocalTracks=!0,J.video.isCreatedByCreateLocalTracks=!0,"object"==typeof L.audio)if("boolean"==typeof L.audio.workaroundWebKitBug1208516&&(J.audio.workaroundWebKitBug1208516=L.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in L.audio&&(ee=L.audio.noiseCancellationOptions,delete L.audio.noiseCancellationOptions),"defaultDeviceCaptureMode"in L.audio){if(["auto","manual"].every(function(z){return z!==L.audio.defaultDeviceCaptureMode}))throw j("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);J.audio.defaultDeviceCaptureMode=L.audio.defaultDeviceCaptureMode}else J.audio.defaultDeviceCaptureMode="auto";"object"==typeof L.video&&"boolean"==typeof L.video.workaroundWebKitBug1208516&&(J.video.workaroundWebKitBug1208516=L.video.workaroundWebKitBug1208516),"object"==typeof L.audio&&delete L.audio.name,"object"==typeof L.video&&delete L.video.name,Q={audio:L.audio,video:L.video},ie="object"==typeof L.audio&&L.audio.workaroundWebKitBug180748,Y.label=1;case 1:return Y.trys.push([1,4,,5]),[4,ie?N(W,L.getUserMedia,Q):L.getUserMedia(Q)];case 2:return fe=Y.sent(),ue=m(m([],v(fe.getAudioTracks())),v(fe.getVideoTracks())),W.info("Call to getUserMedia successful; got tracks:",ue),[4,Promise.all(ue.map(function(z){return D(ne,void 0,void 0,function(){var ce,_e;return I(this,function(ve){switch(ve.label){case 0:return"audio"===z.kind&&ee?[4,d.applyNoiseCancellation(z,ee,W)]:[3,2];case 1:return ce=ve.sent(),_e=ce.noiseCancellation,[2,new X.LocalAudioTrack(ce.cleanTrack,k(k(k({},J.audio),X),{noiseCancellation:_e}))];case 2:if("audio"===z.kind)return[2,new X.LocalAudioTrack(z,k(k({},J.audio),X))];ve.label=3;case 3:return[2,new X.LocalVideoTrack(z,k(k({},J.video),X))]}})})}))];case 3:return[2,Y.sent()];case 4:throw re=Y.sent(),W.warn("Call to getUserMedia failed:",re),re;case 5:return[2]}})})}},2498:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(5295),I=w(9020),v=function(m){function d(u){var f=m.call(this,u.label,u.maxPacketLifeTime,u.maxRetransmits,u.ordered)||this;return Object.defineProperties(f,{_dataChannel:{value:u}}),u.binaryType="arraybuffer",u.addEventListener("message",function(h){f.emit("message",h.data)}),u.addEventListener("close",function(){f.emit("close")}),f}return k(d,m),d.prototype.stop=function(){this._dataChannel.close(),m.prototype.stop.call(this)},d.prototype.toDataTransport=function(){return new I(this._dataChannel)},d}(D);$.exports=v},1866:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(5295),I=w(9739).makeUUID,v=function(m){function d(u,f,h){var _=m.call(this,I(),u,f,h)||this;return Object.defineProperties(_,{_clones:{value:new Set},_dataChannels:{value:new Set}}),_}return k(d,m),d.prototype._addClone=function(u){this._clones.add(u)},d.prototype.removeClone=function(u){this._clones.delete(u)},d.prototype.addDataChannel=function(u){return this._dataChannels.add(u),this},d.prototype.clone=function(){var u=this,f=new d(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(f),f.once("stopped",function(){return u.removeClone(f)}),f},d.prototype.removeDataChannel=function(u){return this._dataChannels.delete(u),this},d.prototype.send=function(u){return this._dataChannels.forEach(function(f){try{f.send(u)}catch{}}),this._clones.forEach(function(f){try{f.send(u)}catch{}}),this},d.prototype.stop=function(){this._dataChannels.forEach(function(u){return u.close()}),this._clones.forEach(function(u){return u.stop()}),m.prototype.stop.call(this)},d}(D);$.exports=v},5295:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f,h){var _=v.call(this,d,"data")||this;return Object.defineProperties(_,{maxPacketLifeTime:{enumerable:!0,value:u},maxRetransmits:{enumerable:!0,value:f},ordered:{enumerable:!0,value:h}}),_}return k(m,v),m}(w(4605));$.exports=I},9020:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d){var u=v.call(this)||this;return Object.defineProperties(u,{_dataChannel:{value:d},_messageQueue:{value:[]}}),d.addEventListener("open",function(){u._messageQueue.splice(0).forEach(function(f){return u._publish(f)})}),d.addEventListener("message",function(f){var h=f.data;try{var _=JSON.parse(h);u.emit("message",_)}catch{}}),u.publish({type:"ready"}),u}return k(m,v),m.prototype._publish=function(d){var u=JSON.stringify(d);try{this._dataChannel.send(u)}catch{}},m.prototype.publish=function(d){var u=this._dataChannel;return"closing"!==u.readyState&&"closed"!==u.readyState&&("connecting"===u.readyState?(this._messageQueue.push(d),!0):(this._publish(d),!0))},m}(w(9069).EventEmitter);$.exports=I},8130:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this)||this;return d=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},d),Object.defineProperties(f,{maxAudioBitrate:{value:d.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:d.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:u}}),f}return k(m,v),m.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},m.prototype.update=function(d){var u=this;d=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},d),["maxAudioBitrate","maxVideoBitrate"].reduce(function(h,_){return u[_]!==d[_]&&(u[_]=d[_],h=!0),h},!1)&&this.emit("changed")},m}(w(9069).EventEmitter);$.exports=I},133:($,H,w)=>{"use strict";var k=w(9069).EventEmitter,D=w(9739).hidePrivateAndCertainPublicPropertiesInClass;$.exports=D(k,["domain"])},870:function($,H,w){"use strict";var k=this&&this.__read||function(m,d){var u="function"==typeof Symbol&&m[Symbol.iterator];if(!u)return m;var h,b,f=u.call(m),_=[];try{for(;(void 0===d||d-- >0)&&!(h=f.next()).done;)_.push(h.value)}catch(y){b={error:y}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(b)throw b.error}}return _},D=this&&this.__spreadArray||function(m,d){for(var u=0,f=d.length,h=m.length;u<f;u++,h++)m[h]=d[u];return m},I=w(9069).EventEmitter,v=function(){function m(){Object.defineProperties(this,{_eventEmitter:{value:new I}})}return m.prototype.dispatchEvent=function(d){return this._eventEmitter.emit(d.type,d)},m.prototype.addEventListener=function(){var d;return(d=this._eventEmitter).addListener.apply(d,D([],k(arguments)))},m.prototype.removeEventListener=function(){var d;return(d=this._eventEmitter).removeListener.apply(d,D([],k(arguments)))},m}();$.exports=v},6021:function($,H,w){"use strict";var k=this&&this.__assign||function(){return k=Object.assign||function(E){for(var C,S=1,V=arguments.length;S<V;S++)for(var F in C=arguments[S])Object.prototype.hasOwnProperty.call(C,F)&&(E[F]=C[F]);return E},k.apply(this,arguments)};Object.defineProperty(H,"__esModule",{value:!0});var D=w(7124),I=w(8682),v={connect:w(5769),createLocalAudioTrack:w(8765).audio,createLocalVideoTrack:w(8765).video,isSupported:w(8592)(),version:w(1730).version,Logger:w(7846),LocalAudioTrack:w(7379).LocalAudioTrack,LocalDataTrack:w(7379).LocalDataTrack,LocalVideoTrack:w(7379).LocalVideoTrack};$.exports={connect:function m(E,C){var S=k({createLocalTracks:D.createLocalTracks},C);return v.connect(E,S)},createLocalAudioTrack:function d(E){var C=k({createLocalTracks:D.createLocalTracks},E);return v.createLocalAudioTrack(C)},createLocalVideoTrack:function u(E){var C=k({createLocalTracks:D.createLocalTracks},E);return v.createLocalVideoTrack(C)},createLocalTracks:D.createLocalTracks,runPreflight:I.runPreflight,isSupported:v.isSupported,version:v.version,Logger:v.Logger,LocalAudioTrack:v.LocalAudioTrack,LocalVideoTrack:v.LocalVideoTrack,LocalDataTrack:v.LocalDataTrack}},3383:function($,H,w){"use strict";var R,k=this&&this.__extends||(R=function(P,T){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,L){x.__proto__=L}||function(x,L){for(var B in L)Object.prototype.hasOwnProperty.call(L,B)&&(x[B]=L[B])})(P,T)},function(P,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function x(){this.constructor=P}R(P,T),P.prototype=null===T?Object.create(T):(x.prototype=T.prototype,new x)}),D=w(1647).MediaStreamTrack,I=w(9739),v=I.asLocalTrack,m=I.asLocalTrackPublication,d=I.trackClass,u=w(8701),f=u.typeErrors,h=u.trackPriority,_=w(1501).Wv,b=w(7379),y=b.LocalAudioTrack,M=b.LocalDataTrack,E=b.LocalVideoTrack,C=w(3925),S=w(5229),V=w(9565),j=function(R){function P(T,x,L){var B=this,G=(L=Object.assign({LocalAudioTrack:y,LocalVideoTrack:E,LocalDataTrack:M,MediaStreamTrack:D,LocalAudioTrackPublication:C,LocalVideoTrackPublication:V,LocalDataTrackPublication:S,shouldStopLocalTracks:!1,tracks:x},L)).shouldStopLocalTracks?new Set(x.filter(function(W){return"data"!==W.kind})):new Set;return B=R.call(this,T,L)||this,Object.defineProperties(B,{_eventObserver:{value:L.eventObserver},_LocalAudioTrack:{value:L.LocalAudioTrack},_LocalDataTrack:{value:L.LocalDataTrack},_LocalVideoTrack:{value:L.LocalVideoTrack},_MediaStreamTrack:{value:L.MediaStreamTrack},_LocalAudioTrackPublication:{value:L.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:L.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:L.LocalVideoTrackPublication},_tracksToStop:{value:G},signalingRegion:{enumerable:!0,get:function(){return T.signalingRegion}}}),B._handleTrackSignalingEvents(),B}return k(P,R),P.prototype._addTrack=function(T,x,L){var B=R.prototype._addTrack.call(this,T,x);return B&&"disconnected"!==this.state&&this._addLocalTrack(T,L),B},P.prototype._addLocalTrack=function(T,x){var L,B=null===(L=T.noiseCancellation)||void 0===L?void 0:L.vendor;this._signaling.addTrack(T._trackSender,T.name,x,B),this._log.info("Added a new "+d(T,!0)+":",T.id),this._log.debug(d(T,!0)+":",T)},P.prototype._removeTrack=function(T,x){var L=R.prototype._removeTrack.call(this,T,x);return L&&"disconnected"!==this.state&&(this._signaling.removeTrack(T._trackSender),this._log.info("Removed a "+d(T,!0)+":",T.id),this._log.debug(d(T,!0)+":",T)),L},P.prototype._getTrackEvents=function(){return R.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},P.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},P.prototype._handleTrackSignalingEvents=function(){var T=this,x=this._log;if("disconnected"!==this.state){var L=function(X){var J=T._signaling.getPublication(X._trackSender);J&&(J.disable(),x.debug("Disabled the "+d(X,!0)+":",X.id))},B=function(X){var J=T._signaling.getPublication(X._trackSender);J&&(J.enable(),x.debug("Enabled the "+d(X,!0)+":",X.id))},G=function(X){var J=T._signaling.getPublication(X._trackSender);return J&&J.stop(),J},W=function(X){x.debug("Transitioned to state:",X),"disconnected"===X?(x.debug("Removing LocalTrack event listeners"),T._signaling.removeListener("stateChanged",W),T.removeListener("trackDisabled",L),T.removeListener("trackEnabled",B),T.removeListener("trackStopped",G),T._tracks.forEach(function(J){var ee=G(J);ee&&J._trackSender.removeClone(ee._trackTransceiver)}),x.info("LocalParticipant disconnected. Stopping "+T._tracksToStop.size+" automatically-acquired LocalTracks"),T._tracksToStop.forEach(function(J){J.stop()})):"connected"===X&&(x.info("reconnected"),setTimeout(function(){return T.emit("reconnected")},0))};this.on("trackDisabled",L),this.on("trackEnabled",B),this.on("trackStopped",G),this._signaling.on("stateChanged",W),this._tracks.forEach(function(X){T._addLocalTrack(X,h.PRIORITY_STANDARD),T._getOrCreateLocalTrackPublication(X).catch(function(J){x.warn("Failed to get or create LocalTrackPublication for "+X+":",J)})})}},P.prototype._getOrCreateLocalTrackPublication=function(T){var x=N(this.tracks,T);if(x)return Promise.resolve(x);var L=this._log,B=this,G=this._signaling.getPublication(T._trackSender);return G?new Promise(function(W,X){G.on("updated",function J(){var ee=G.error;if(ee)return G.removeListener("updated",J),L.warn("Failed to publish the "+d(T,!0)+": "+ee.message),B._removeTrack(T,T.id),setTimeout(function(){B.emit("trackPublicationFailed",ee,T)}),void X(ee);if(!B._tracks.has(T.id))return G.removeListener("updated",J),void X(new Error("The "+T+" was unpublished"));if(G.sid){G.removeListener("updated",J);var ie={log:L,LocalAudioTrackPublication:B._LocalAudioTrackPublication,LocalDataTrackPublication:B._LocalDataTrackPublication,LocalVideoTrackPublication:B._LocalVideoTrackPublication};x=N(B.tracks,T);var fe=function(Y){return B.emit("trackWarning",Y,x)},ue=function(){return B.emit("trackWarningsCleared",x)};x||(x=m(T,G,function(Y){x.removeListener("trackWarning",fe),x.removeListener("trackWarningsCleared",ue),B.unpublishTrack(Y.track)},ie),B._addTrackPublication(x)),x.on("warning",fe),x.on("warningsCleared",ue);var ne=B._signaling.state;("connected"===ne||"connecting"===ne)&&(T._processorEventObserver&&T._processorEventObserver.on("event",function(Y){B._eventObserver.emit("event",{name:Y.name,payload:Y.data,group:"video-processor",level:"info"})}),T.processedTrack&&(T._captureFrames(),T._setSenderMediaStreamTrack(!0))),"connected"===ne&&setTimeout(function(){B.emit("trackPublished",x)}),W(x)}})}):Promise.reject(new Error("Unexpected error: The "+T+" cannot be published"))},P.prototype.publishTrack=function(T,x){var B,L=N(this.tracks,T);if(L)return Promise.resolve(L);x=Object.assign({log:this._log,priority:h.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},x);try{B=v(T,x)}catch(ee){return Promise.reject(ee)}var G=B.noiseCancellation;G&&!this._signaling.audioProcessors.includes(G.vendor)&&(this._log.warn(G.vendor+" is not supported in this room. disabling it permanently"),G.disablePermanently());var X=Object.values(h);if(!X.includes(x.priority))return Promise.reject(f.INVALID_VALUE("LocalTrackPublishOptions.priority",X));var J=this._addTrack(B,B.id,x.priority)||this._tracks.get(B.id);return this._getOrCreateLocalTrackPublication(J)},P.prototype.publishTracks=function(T){if(!Array.isArray(T))throw f.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(T.map(this.publishTrack,this))},P.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},P.prototype.setNetworkQualityConfiguration=function(T){if("object"!=typeof T||null===T)throw f.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(x){if(x in T&&("number"!=typeof T[x]||isNaN(T[x])))throw f.INVALID_TYPE("networkQualityConfiguration."+x,"number")}),this._signaling.setNetworkQualityConfiguration(T),this},P.prototype.setParameters=function(T){if(typeof T<"u"&&"object"!=typeof T)throw f.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(T){if(this._signaling.getParameters().adaptiveSimulcast&&T.maxVideoBitrate)throw f.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(x){if(typeof T[x]<"u"&&"number"!=typeof T[x]&&null!==T[x])throw f.INVALID_TYPE("encodingParameters."+x,"number, null or undefined")})}else null===T&&(T={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(T),this},P.prototype.unpublishTrack=function(T){_(T,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var x=this._tracks.get(T.id);if(!x)return null;if(this._signaling.getPublication(x._trackSender).publishFailed(new Error("The "+x+" was unpublished")),!(x=this._removeTrack(x,x.id)))return null;var B=N(this.tracks,x);return B&&this._removeTrackPublication(B),B},P.prototype.unpublishTracks=function(T){var x=this;if(!Array.isArray(T))throw f.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return T.reduce(function(L,B){var G=x.unpublishTrack(B);return G?L.concat(G):L},[])},P}(w(9218));function N(R,P){return Array.from(R.values()).find(function(T){return T.track===P||T.track.mediaStreamTrack===P})||null}$.exports=j},1534:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){return v.call(this,d,u)||this}return k(m,v),m.prototype.attach=function(){return v.prototype.attach.apply(this,arguments)},m.prototype.detach=function(){return v.prototype.detach.apply(this,arguments)},m}(w(5366));$.exports=I},7379:($,H,w)=>{"use strict";$.exports={LocalAudioTrack:w(2954),LocalVideoTrack:w(1),LocalDataTrack:w(1560)}},2954:($,H,w)=>{"use strict";var k=w(1905),D=w(6213);function I(v,m){var d=new D(v,m);return Object.setPrototypeOf(d,I.prototype),d}k(I,D),$.exports=I},1560:($,H,w)=>{"use strict";var k=w(1905),D=w(212);function I(v){var m=new D(v);return Object.setPrototypeOf(m,I.prototype),m}k(I,D),$.exports=I},1:($,H,w)=>{"use strict";var k=w(1905),D=w(4847);function I(v,m){var d=new D(v,m);return Object.setPrototypeOf(d,I.prototype),d}k(I,D),$.exports=I},1703:function($,H,w){"use strict";var _,k=this&&this.__extends||(_=function(b,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,E){M.__proto__=E}||function(M,E){for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(M[C]=E[C])})(b,y)},function(b,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function M(){this.constructor=b}_(b,y),b.prototype=null===y?Object.create(y):(M.prototype=y.prototype,new M)}),D=w(133),I=w(9739),v=I.buildLogLevels,m=I.valueToJSON,d=w(8701).DEFAULT_LOG_LEVEL,u=w(1458),f=0,h=function(_){function b(y,M,E){var C;E=Object.assign({name:y,log:null,logLevel:d},E),C=_.call(this)||this;var S=String(E.name),V=v(E.logLevel),F=E.log?E.log.createLog("media",C):new u("media",C,V,E.loggerName);return Object.defineProperties(C,{_instanceId:{value:++f},_log:{value:F},kind:{enumerable:!0,value:M},name:{enumerable:!0,value:S}}),C}return k(b,_),b.prototype.toJSON=function(){return m(this)},b}(D);$.exports=h},6213:function($,H,w){"use strict";var u,k=this&&this.__extends||(u=function(f,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(f,h)},function(f,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function _(){this.constructor=f}u(f,h),f.prototype=null===h?Object.create(h):(_.prototype=h.prototype,new _)}),D=w(3948).isIOS,I=w(1534),d=function(u){function f(h,_){var b=this,y=_?.noiseCancellation||null,M=(b=u.call(this,h,_)||this)._log,E=h.label,C=void 0===E?"":E,S=h.getSettings(),V=S.deviceId,j=S.groupId;return Object.defineProperties(b,{_currentDefaultDeviceInfo:{value:{deviceId:void 0===V?"":V,groupId:void 0===j?"":j,label:C},writable:!0},_defaultDeviceCaptureMode:{value:!D()&&b._isCreatedByCreateLocalTracks&&"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.addEventListener&&"function"==typeof navigator.mediaDevices.enumerateDevices?_?.defaultDeviceCaptureMode||"auto":"manual"},_onDeviceChange:{value:function(){navigator.mediaDevices.enumerateDevices().then(function(R){var P=R.find(function(T){return"audioinput"===T.kind&&"default"!==T.deviceId});P&&["deviceId","groupId"].some(function(T){return P[T]!==b._currentDefaultDeviceInfo[T]})&&(M.info("Default device changed, restarting the LocalAudioTrack"),M.debug('Old default device: "'+b._currentDefaultDeviceInfo.deviceId+'" => "'+b._currentDefaultDeviceInfo.label+'"'),M.debug('New default device: "'+P.deviceId+'" => "'+P.label+'"'),b._currentDefaultDeviceInfo=P,b._restartDefaultDevice().catch(function(T){return M.warn("Failed to restart: "+T.message)}))},function(R){M.warn("Failed to run enumerateDevices(): "+R.message)})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:y,writable:!1}}),M.debug("defaultDeviceCaptureMode:",b._defaultDeviceCaptureMode),b._maybeRestartOnDefaultDeviceChange(),b}return k(f,u),f.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},f.prototype.attach=function(h){return(h=u.prototype.attach.call(this,h)).muted=!0,h},f.prototype._end=function(){return u.prototype._end.apply(this,arguments)},f.prototype._maybeRestartOnDefaultDeviceChange=function(){var h=this,_=this,b=_._constraints,y=_._defaultDeviceCaptureMode,M=_._log,C=(this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack).getSettings().deviceId,S=function(F){return F!==C||"default"===F},V=function F(j){return void 0===j&&(j={}),"string"==typeof j?S(j):Array.isArray(j)?j.every(S):j.exact?F(j.exact):!j.ideal||F(j.ideal)}(b.deviceId);"auto"===y&&V?this._restartOnDefaultDeviceChangeCleanup||(M.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){M.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",h._onDeviceChange),h._restartOnDefaultDeviceChangeCleanup=null}):(M.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},f.prototype._reacquireTrack=function(h){var _=this;return this._log.debug("_reacquireTrack: ",h),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return u.prototype._reacquireTrack.call(_,h)}):u.prototype._reacquireTrack.call(this,h)},f.prototype._restartDefaultDevice=function(){var h=this,_=Object.assign({},this._constraints),b=Object.assign({},_,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(b).then(function(){h._constraints=_,h._maybeRestartOnDefaultDeviceChange()})},f.prototype.disable=function(){return u.prototype.disable.apply(this,arguments)},f.prototype.enable=function(){return u.prototype.enable.apply(this,arguments)},f.prototype.restart=function(){return u.prototype.restart.apply(this,arguments)},f.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),u.prototype.stop.apply(this,arguments)},f}(w(8275)(I));$.exports=d},3925:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f,h){return v.call(this,d,u,f,h)||this}return k(m,v),m.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},m}(w(3335));$.exports=I},212:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(1703),I=w(1866),v=function(m){function d(u){var f,_=new(0,(u=Object.assign({DataTrackSender:I,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},u)).DataTrackSender)(u.maxPacketLifeTime,u.maxRetransmits,u.ordered);return f=m.call(this,_.id,"data",u)||this,Object.defineProperties(f,{_trackSender:{value:_},id:{enumerable:!0,value:_.id},maxPacketLifeTime:{enumerable:!0,value:u.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:u.maxRetransmits},ordered:{enumerable:!0,value:u.ordered},reliable:{enumerable:!0,value:null===u.maxPacketLifeTime&&null===u.maxRetransmits}}),f}return k(d,m),d.prototype.send=function(u){this._trackSender.send(u)},d}(D);$.exports=v},5229:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f,h){return v.call(this,d,u,f,h)||this}return k(m,v),m.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},m}(w(3335));$.exports=I},8275:function($,H,w){"use strict";var j,k=this&&this.__extends||(j=function(N,R){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,T){P.__proto__=T}||function(P,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(P[x]=T[x])})(N,R)},function(N,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function P(){this.constructor=N}j(N,R),N.prototype=null===R?Object.create(R):(P.prototype=R.prototype,new P)}),D=w(1647).getUserMedia,I=w(3948).isIOS,v=w(9739),m=v.capitalize,d=v.defer,u=v.isUserMediaTrack,f=v.waitForSometime,h=v.waitForEvent,_=w(8701).typeErrors.ILLEGAL_INVOKE,b=w(9059),y=w(1741),M=w(2181),E=w(6396),C=w(3830),S=w(808);function F(j){var N=j._log,R=j.kind,P={audio:b,video:y}[R],T=j._dummyEl,x=j.mediaStreamTrack,L=null;function W(){return Promise.race([h(x,"unmute"),f(50)]).then(function(){return function G(){var ue=j.mediaStreamTrack.muted,re=j.isStopped&&!!j._workaroundWebKitBug1208516Cleanup;return Promise.resolve().then(function(){return"visible"===document.visibilityState&&!L&&(ue||re||function B(){return T.play().then(function(){return P(T)}).then(function(ie){return ie?N.warn("Silence detected"):N.info("Non-silence detected"),ie}).catch(function(ie){N.warn("Failed to detect silence:",ie)}).finally(function(){T.pause()})}())})}()}).then(function(ie){return ie&&!L&&(L=d(),j._restart().finally(function(){T=j._dummyEl,ee(),x=j.mediaStreamTrack,J(),L.resolve(),L=null}).catch(function(ue){N.error("failed to restart track: ",ue)})),(L&&L.promise||Promise.resolve()).finally(function(){return E.resolveDeferred(R)})}).catch(function(ie){N.error("error in maybeRestart: "+ie.message)})}function X(){var ie=j._log,fe=j.kind;ie.info("Muted"),ie.debug("LocalMediaTrack:",j),E.startDeferred(fe)}function J(){x.addEventListener("ended",W),x.addEventListener("mute",X),x.addEventListener("unmute",W)}function ee(){x.removeEventListener("ended",W),x.removeEventListener("mute",X),x.removeEventListener("unmute",W)}var Q=function(ie){return!!ie&&W()};return M.onVisibilityChange(1,Q),J(),function(){M.offVisibilityChange(1,Q),ee()}}$.exports=function V(j){return function(N){function R(P,T){var x=this,L=I()&&u(P)&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;T=Object.assign({getUserMedia:D,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:L,gUMSilentTrackWorkaround:C},T);var B=new S(P),G=B.kind;return x=N.call(this,B,T)||this,Object.defineProperties(x,{_constraints:{value:"object"==typeof T[G]?T[G]:{},writable:!0},_getUserMedia:{value:T.getUserMedia},_gUMSilentTrackWorkaround:{value:T.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return x.emit("muted",x)}],["unmuted",function(){return x.emit("unmuted",x)}]])},_workaroundWebKitBug1208516:{value:T.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:T.isCreatedByCreateLocalTracks},_trackSender:{value:B},id:{enumerable:!0,value:B.id},isEnabled:{enumerable:!0,get:function(){return B.enabled}},isMuted:{enumerable:!0,get:function(){return B.muted}},isStopped:{enumerable:!0,get:function(){return"ended"===B.readyState}}}),x._workaroundWebKitBug1208516&&(x._workaroundWebKitBug1208516Cleanup=F(x)),x._reemitTrackSenderEvents(),x}return k(R,N),R.prototype._end=function(){var P=this;this._didCallEnd||(N.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(T,x){return P._trackSender.removeListener(x,T)}),this.emit("stopped",this))},R.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),N.prototype._initialize.call(this)},R.prototype._reacquireTrack=function(P){var T,x=this,L=x._getUserMedia,B=x._gUMSilentTrackWorkaround,G=x._log,W=x.mediaStreamTrack.kind;G.info("Re-acquiring the MediaStreamTrack"),G.debug("Constraints:",P);var X=Object.assign({audio:!1,video:!1},((T={})[W]=P,T));return(this._workaroundWebKitBug1208516Cleanup?B(G,L,X):L(X)).then(function(ee){return ee.getTracks()[0]})},R.prototype._reemitTrackSenderEvents=function(){var P=this;this._eventsToReemitters.forEach(function(T,x){return P._trackSender.on(x,T)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},R.prototype._restart=function(P){var T=this,x=this._log;return P=P||this._constraints,this._stop(),this._reacquireTrack(P).catch(function(L){throw x.error("Failed to re-acquire the MediaStreamTrack:",{error:L,constraints:P}),L}).then(function(L){return x.info("Re-acquired the MediaStreamTrack"),x.debug("MediaStreamTrack:",L),T._constraints=Object.assign({},P),T._setMediaStreamTrack(L)})},R.prototype._setMediaStreamTrack=function(P){var T=this;return P.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){T._unprocessedTrack=P}):this._trackSender.setMediaStreamTrack(P).catch(function(x){T._log.warn("setMediaStreamTrack failed:",{error:x,mediaStreamTrack:P})})).then(function(){T._initialize(),T._getAllAttachedElements().forEach(function(x){return T._attach(x)})})},R.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},R.prototype.enable=function(P){return(P="boolean"!=typeof P||P)!==this.mediaStreamTrack.enabled&&(this._log.info((P?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=P,this.emit(P?"enabled":"disabled",this)),this},R.prototype.disable=function(){return this.enable(!1)},R.prototype.restart=function(P){var T=this,x=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(_("restart","can only be called on a Local"+m(x)+"Track that is created using createLocalTracks or createLocal"+m(x)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var L=this._restart(P);return this._workaroundWebKitBug1208516&&(L=L.finally(function(){T._workaroundWebKitBug1208516Cleanup=F(T)})),L},R.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},R}(j)}},3335:function($,H,w){"use strict";var h,k=this&&this.__extends||(h=function(_,b){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var E in M)Object.prototype.hasOwnProperty.call(M,E)&&(y[E]=M[E])})(_,b)},function(_,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function y(){this.constructor=_}h(_,b),_.prototype=null===b?Object.create(b):(y.prototype=b.prototype,new y)}),D=this&&this.__read||function(h,_){var b="function"==typeof Symbol&&h[Symbol.iterator];if(!b)return h;var M,C,y=b.call(h),E=[];try{for(;(void 0===_||_-- >0)&&!(M=y.next()).done;)E.push(M.value)}catch(S){C={error:S}}finally{try{M&&!M.done&&(b=y.return)&&b.call(y)}finally{if(C)throw C.error}}return E},I=this&&this.__spreadArray||function(h,_){for(var b=0,y=_.length,M=h.length;b<y;b++,M++)h[M]=_[b];return h},v=w(9222),m=w(8701),d=m.typeErrors,u=m.trackPriority,f=function(h){function _(b,y,M,E){var C=h.call(this,y.name,b.sid,E)||this;return Object.defineProperties(C,{_reemitSignalingEvent:{value:function(){for(var S=[],V=0;V<arguments.length;V++)S[V]=arguments[V];return C.emit.apply(C,I([S&&S.length?"warning":"warningsCleared"],D(S)))}},_reemitTrackEvent:{value:function(){return C.emit(C.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:b},_unpublish:{value:M},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:y.kind},priority:{enumerable:!0,get:function(){return b.updatedPriority}},track:{enumerable:!0,value:y}}),["disabled","enabled"].forEach(function(S){return y.on(S,C._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(S){return b.on(S,C._reemitSignalingEvent)}),C}return k(_,h),_.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},_.prototype.setPriority=function(b){var y=Object.values(u);if(!y.includes(b))throw d.INVALID_VALUE("priority",y);return this._signaling.setPriority(b),this},_.prototype.unpublish=function(){var b=this;return["disabled","enabled"].forEach(function(y){return b.track.removeListener(y,b._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(y){return b._signaling.removeListener(y,b._reemitSignalingEvent)}),this._unpublish(this),this},_}(v);$.exports=f},4847:function($,H,w){"use strict";var _,k=this&&this.__extends||(_=function(b,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,E){M.__proto__=E}||function(M,E){for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(M[C]=E[C])})(b,y)},function(b,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function M(){this.constructor=b}_(b,y),b.prototype=null===y?Object.create(y):(M.prototype=y.prototype,new M)}),D=w(3948).isIOS,I=w(1741),v=w(8275),m=w(4332),d=w(9739).isUserMediaTrack,f=function(_){function b(y,M){var E=this;return M=Object.assign({workaroundSilentLocalVideo:D()&&d(y)&&typeof document<"u"&&"function"==typeof document.createElement},M),E=_.call(this,y,M)||this,Object.defineProperties(E,{_workaroundSilentLocalVideo:{value:M.workaroundSilentLocalVideo?h:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),E._workaroundSilentLocalVideo&&(E._workaroundSilentLocalVideoCleanup=E._workaroundSilentLocalVideo(E,document)),E}return k(b,_),b.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},b.prototype._checkIfCanCaptureFrames=function(){return _.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},b.prototype._end=function(){return _.prototype._end.apply(this,arguments)},b.prototype._setSenderMediaStreamTrack=function(y){var M=this,E=this.mediaStreamTrack,C=y?this.processedTrack:E;return this._trackSender.setMediaStreamTrack(C).catch(function(S){return M._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:S,mediaStreamTrack:C})}).then(function(){M._unprocessedTrack=y?E:null})},b.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var y=_.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),y):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},b.prototype.removeProcessor=function(){var y=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var M=_.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return y._updateElementsMediaStreamTrack()}),M},b.prototype.disable=function(){var y=_.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),y},b.prototype.enable=function(y){void 0===y&&(y=!0);var M=_.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=y,y&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),M},b.prototype.restart=function(){var y=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var M=_.prototype.restart.apply(this,arguments);return this.processor&&M.then(function(){y._restartProcessor()}),this._workaroundSilentLocalVideo&&M.finally(function(){y._workaroundSilentLocalVideoCleanup=y._workaroundSilentLocalVideo(y,document)}),M},b.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),_.prototype.stop.apply(this,arguments)},b}(v(m));function h(_,b){var y=_._log,M=_._dummyEl,E=_.mediaStreamTrack;function C(){_.isEnabled&&(y.info("Unmuted, checking silence"),M.play().then(function(){return I(M,b)}).then(function(S){if(S)return y.warn("Silence detected, restarting"),_._stop(),_._restart();y.info("Non-silent frames detected, so no need to restart")}).catch(function(S){y.warn("Failed to detect silence and restart:",S)}).finally(function(){(M=_._dummyEl)&&!M.paused&&M.pause(),E.removeEventListener("unmute",C),(E=_.mediaStreamTrack).addEventListener("unmute",C)}))}return E.addEventListener("unmute",C),function(){E.removeEventListener("unmute",C)}}$.exports=f},9565:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f,h){return v.call(this,d,u,f,h)||this}return k(m,v),m.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},m}(w(3335));$.exports=I},5366:function($,H,w){"use strict";var y,k=this&&this.__extends||(y=function(M,E){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,S){C.__proto__=S}||function(C,S){for(var V in S)Object.prototype.hasOwnProperty.call(S,V)&&(C[V]=S[V])})(M,E)},function(M,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function C(){this.constructor=M}y(M,E),M.prototype=null===E?Object.create(E):(C.prototype=E.prototype,new C)}),D=w(3948).isIOS,I=w(1647).MediaStream,v=w(9739),m=v.waitForEvent,d=v.waitForSometime,u=w(6396),h=function(y){function M(E,C){var S=this;C=Object.assign({playPausedElementsIfNotBackgrounded:D()&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},C),S=y.call(this,E.id,E.kind,C)||this;var V=!1;return C=Object.assign({MediaStream:I},C),Object.defineProperties(S,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return V},set:function(F){V=F}},_playPausedElementsIfNotBackgrounded:{value:C.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:C.workaroundWebKitBug212780||C.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:C.MediaStream},isStarted:{enumerable:!0,get:function(){return V}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||E.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),S._initialize(),S}return k(M,y),M.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},M.prototype._initialize=function(){var E=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",function C(){E._end(),E.mediaStreamTrack.removeEventListener("ended",C)}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},M.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},M.prototype.attach=function(E){var C=this;if("string"==typeof E?E=this._selectElement(E):E||(E=this._createElement()),this._log.debug("Attempting to attach to element:",E),E=this._attach(E),this._shouldShimAttachedElements&&!this._elShims.has(E)){var S=this._playPausedElementsIfNotBackgrounded?function(){return function _(y,M){var E=y.tagName.toLowerCase();M.warn("Unintentionally paused:",y),Promise.race([m(document,"visibilitychange"),d(1e3)]).then(function(){"visible"===document.visibilityState&&u.whenResolved("audio").then(function(){return M.info("Playing unintentionally paused <"+E+"> element"),M.debug("Element:",y),y.play()}).then(function(){M.info("Successfully played unintentionally paused <"+E+"> element"),M.debug("Element:",y)}).catch(function(C){M.warn("Error while playing unintentionally paused <"+E+"> element:",{error:C,el:y})})})}(E,C._log)}:null;this._elShims.set(E,function b(y,M){void 0===M&&(M=null);var E=y.pause,C=y.play,S=!1;y.pause=function(){return S=!0,E.call(y)},y.play=function(){return S=!1,C.call(y)};var V=M?function(){S||M()}:null;return V&&y.addEventListener("pause",V),{pausedIntentionally:function(){return S},unShim:function(){y.pause=E,y.play=C,V&&y.removeEventListener("pause",V)}}}(E,S))}return E},M.prototype._attach=function(E,C){void 0===C&&(C=this.processedTrack||this.mediaStreamTrack);var S=E.srcObject;return S instanceof this._MediaStream||(S=new this._MediaStream),S["audio"===C.kind?"getAudioTracks":"getVideoTracks"]().forEach(function(F){S.removeTrack(F)}),S.addTrack(C),E.srcObject=S,E.autoplay=!0,E.playsInline=!0,this._attachments.has(E)||this._attachments.add(E),E},M.prototype._selectElement=function(E){var C=document.querySelector(E);if(!C)throw new Error("Selector matched no element: "+E);return C},M.prototype._updateElementsMediaStreamTrack=function(){var E=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(C){return E._attach(C)})},M.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},M.prototype.detach=function(E){var C;return C="string"==typeof E?[this._selectElement(E)]:E?[E]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",C),this._detachElements(C),E?C[0]:C},M.prototype._detachElements=function(E){return E.map(this._detachElement.bind(this))},M.prototype._detachElement=function(E){if(!this._attachments.has(E))return E;var C=E.srcObject;return C instanceof this._MediaStream&&C.removeTrack(this.processedTrack||this.mediaStreamTrack),this._attachments.delete(E),this._shouldShimAttachedElements&&this._elShims.has(E)&&(this._elShims.get(E).unShim(),this._elShims.delete(E)),E},M.prototype._getAllAttachedElements=function(){var E=[];return this._attachments.forEach(function(C){E.push(C)}),E},M}(w(1703));$.exports=h},7155:function($,H,w){"use strict";var k=this&&this.__awaiter||function(u,f,h,_){return new(h||(h=Promise))(function(y,M){function E(V){try{S(_.next(V))}catch(F){M(F)}}function C(V){try{S(_.throw(V))}catch(F){M(F)}}function S(V){V.done?y(V.value):function b(y){return y instanceof h?y:new h(function(M){M(y)})}(V.value).then(E,C)}S((_=_.apply(u,f||[])).next())})},D=this&&this.__generator||function(u,f){var _,b,y,M,h={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return M={next:E(0),throw:E(1),return:E(2)},"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function E(S){return function(V){return function C(S){if(_)throw new TypeError("Generator is already executing.");for(;h;)try{if(_=1,b&&(y=2&S[0]?b.return:S[0]?b.throw||((y=b.return)&&y.call(b),0):b.next)&&!(y=y.call(b,S[1])).done)return y;switch(b=0,y&&(S=[2&S[0],y.value]),S[0]){case 0:case 1:y=S;break;case 4:return h.label++,{value:S[1],done:!1};case 5:h.label++,b=S[1],S=[0];continue;case 7:S=h.ops.pop(),h.trys.pop();continue;default:if(!(y=(y=h.trys).length>0&&y[y.length-1])&&(6===S[0]||2===S[0])){h=0;continue}if(3===S[0]&&(!y||S[1]>y[0]&&S[1]<y[3])){h.label=S[1];break}if(6===S[0]&&h.label<y[1]){h.label=y[1],y=S;break}if(y&&h.label<y[2]){h.label=y[2],h.ops.push(S);break}y[2]&&h.ops.pop(),h.trys.pop();continue}S=f.call(u,h)}catch(V){S=[6,V],b=0}finally{_=y=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([S,V])}}};Object.defineProperty(H,"__esModule",{value:!0}),H.applyNoiseCancellation=H.NoiseCancellationImpl=void 0;var I=w(9788),m=(w(1458),function(){function u(f,h){this._processor=f,this._sourceTrack=h,this._disabledPermanent=!1}return Object.defineProperty(u.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),u.prototype.enable=function(){if(this._disabledPermanent)throw new Error(this.vendor+" noise cancellation is disabled permanently for this track");return this._processor.enable(),Promise.resolve()},u.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},u.prototype.reacquireTrack=function(f){return k(this,void 0,void 0,function(){var h,_,b;return D(this,function(y){switch(y.label){case 0:return h=this._processor.isEnabled(),this._processor.disconnect(),[4,f()];case 1:return _=y.sent(),this._sourceTrack=_,[4,this._processor.connect(_)];case 2:return b=y.sent(),h?this._processor.enable():this._processor.disable(),[2,b]}})})},u.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},u.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},u}());H.NoiseCancellationImpl=m,H.applyNoiseCancellation=function d(u,f,h){return k(this,void 0,void 0,function(){var _,b,y,M;return D(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,I.createNoiseCancellationAudioProcessor(f,h)];case 1:return _=E.sent(),b=_.connect(u),y=new m(_,u),[2,{cleanTrack:b,noiseCancellation:y}];case 2:return M=E.sent(),h.warn("Failed to create noise cancellation. Returning normal audio track: "+M),[2,{cleanTrack:u}];case 3:return[2]}})})}},3501:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){return v.call(this,d,u)||this}return k(m,v),m}(w(1639));$.exports=I},8797:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=w(1534),m=function(d){function u(f,h,_,b,y,M,E){return d.call(this,f,h,_,b,y,M,E)||this}return k(u,d),u.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},u.prototype._start=function(){d.prototype._start.call(this),this._dummyEl&&(this._dummyEl.srcObject=null,this._dummyEl=null)},u.prototype.setPriority=function(f){return d.prototype.setPriority.call(this,f)},u}(w(1628)(D));$.exports=m},8661:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){return v.call(this,d,u)||this}return k(m,v),m.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},m}(w(1521));$.exports=I},5606:function($,H,w){"use strict";var h,k=this&&this.__extends||(h=function(_,b){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var E in M)Object.prototype.hasOwnProperty.call(M,E)&&(y[E]=M[E])})(_,b)},function(_,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function y(){this.constructor=_}h(_,b),_.prototype=null===b?Object.create(b):(y.prototype=b.prototype,new y)}),D=this&&this.__read||function(h,_){var b="function"==typeof Symbol&&h[Symbol.iterator];if(!b)return h;var M,C,y=b.call(h),E=[];try{for(;(void 0===_||_-- >0)&&!(M=y.next()).done;)E.push(M.value)}catch(S){C={error:S}}finally{try{M&&!M.done&&(b=y.return)&&b.call(y)}finally{if(C)throw C.error}}return E},I=this&&this.__spreadArray||function(h,_){for(var b=0,y=_.length,M=h.length;b<y;b++,M++)h[M]=_[b];return h},v=w(1703),m=w(8701),d=m.typeErrors,u=m.trackPriority,f=function(h){function _(b,y,M){var E=h.call(this,y.id,"data",M)||this;return Object.defineProperties(E,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:y.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:y.maxRetransmits},ordered:{enumerable:!0,value:y.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===y.maxPacketLifeTime&&null===y.maxRetransmits},sid:{enumerable:!0,value:b}}),y.on("message",function(C){E.emit("message",C,E)}),E}return k(_,h),_.prototype.setPriority=function(b){var y=I([null],D(Object.values(u)));if(!y.includes(b))throw d.INVALID_VALUE("priority",y);return this._priority=b,this},_.prototype._setEnabled=function(){},_.prototype._setSwitchedOff=function(b){this._isSwitchedOff!==b&&(this._isSwitchedOff=b,this.emit(b?"switchedOff":"switchedOn",this))},_}(v);$.exports=f},8459:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){return v.call(this,d,u)||this}return k(m,v),m.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},m}(w(1521));$.exports=I},1628:function($,H,w){"use strict";var b,k=this&&this.__extends||(b=function(y,M){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var S in C)Object.prototype.hasOwnProperty.call(C,S)&&(E[S]=C[S])})(y,M)},function(y,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function E(){this.constructor=y}b(y,M),y.prototype=null===M?Object.create(M):(E.prototype=M.prototype,new E)}),D=this&&this.__read||function(b,y){var M="function"==typeof Symbol&&b[Symbol.iterator];if(!M)return b;var C,V,E=M.call(b),S=[];try{for(;(void 0===y||y-- >0)&&!(C=E.next()).done;)S.push(C.value)}catch(F){V={error:F}}finally{try{C&&!C.done&&(M=E.return)&&M.call(E)}finally{if(V)throw V.error}}return S},I=this&&this.__spreadArray||function(b,y){for(var M=0,E=y.length,C=b.length;M<E;M++,C++)b[C]=y[M];return b},v=w(8701),m=v.typeErrors,d=v.trackPriority,u=w(3948).isIOS,f=w(2181);$.exports=function h(b){return function(y){function M(E,C,S,V,F,j,N){var R=this;return N=Object.assign({workaroundWebKitBug212780:u()&&"object"==typeof document&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},N),R=y.call(this,C,N)||this,Object.defineProperties(R,{_isEnabled:{value:S,writable:!0},_isSwitchedOff:{value:V,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:F},_setRenderHint:{value:function(P){R._log.debug("updating render hint:",P),j(P)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:E},_workaroundWebKitBug212780:{value:N.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),R}return k(M,y),M.prototype.setPriority=function(E){var C=I([null],D(Object.values(d)));if(!C.includes(E))throw m.INVALID_VALUE("priority",C);return this._priority!==E&&(this._priority=E,this._setPriority(E)),this},M.prototype._setEnabled=function(E){this._isEnabled!==E&&(this._isEnabled=E,this.emit(this._isEnabled?"enabled":"disabled",this))},M.prototype._setSwitchedOff=function(E){this._isSwitchedOff!==E&&(this._isSwitchedOff=E,this.emit(E?"switchedOff":"switchedOn",this))},M.prototype.attach=function(E){var C=y.prototype.attach.call(this,E);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function _(b){var y=b._log,M=b.kind;function E(C){C&&b._attachments.forEach(function(S){var V=b._elShims.get(S);S.paused&&V&&!V.pausedIntentionally()&&(y.info("Playing inadvertently paused <"+M+"> element"),y.debug("Element:",S),y.debug("RemoteMediaTrack:",b),S.play().then(function(){y.info("Successfully played inadvertently paused <"+M+"> element"),y.debug("Element:",S),y.debug("RemoteMediaTrack:",b)}).catch(function(j){y.warn("Error while playing inadvertently paused <"+M+"> element:",{err:j,el:S,remoteMediaTrack:b})}))})}return f.onVisibilityChange(2,E),function(){f.offVisibilityChange(2,E)}}(this)),C},M.prototype.detach=function(E){var C=y.prototype.detach.call(this,E);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),C},M}(b)}},1521:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d.name,d.sid,u)||this;Object.defineProperties(f,{_signaling:{value:d},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return d.isEnabled}},kind:{enumerable:!0,value:d.kind},publishPriority:{enumerable:!0,get:function(){return d.priority}},track:{enumerable:!0,get:function(){return this._track}}});var h=d.error,_=d.isEnabled,b=d.isSwitchedOff,y=d.priority;return d.on("updated",function(){if(h!==d.error)return h=d.error,void f.emit("subscriptionFailed",d.error);_!==d.isEnabled&&(_=d.isEnabled,f.track&&f.track._setEnabled(d.isEnabled),f.emit(d.isEnabled?"trackEnabled":"trackDisabled")),b!==d.isSwitchedOff&&(f._log.debug(f.trackSid+": "+(b?"OFF":"ON")+" => "+(d.isSwitchedOff?"OFF":"ON")),b=d.isSwitchedOff,f.track?(f.track._setSwitchedOff(d.isSwitchedOff),f.emit(b?"trackSwitchedOff":"trackSwitchedOn",f.track)):b&&f._log.warn("Track was not subscribed when switched Off.")),y!==d.priority&&f.emit("publishPriorityChanged",y=d.priority)}),f}return k(m,v),m.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},m.prototype._subscribed=function(d){!this._track&&d&&(this._track=d,this.emit("subscribed",d))},m.prototype._unsubscribe=function(){if(this._track){var d=this._track;this._track=null,this.emit("unsubscribed",d)}},m}(w(9222));$.exports=I},1629:function($,H,w){"use strict";var E,k=this&&this.__extends||(E=function(C,S){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,F){V.__proto__=F}||function(V,F){for(var j in F)Object.prototype.hasOwnProperty.call(F,j)&&(V[j]=F[j])})(C,S)},function(C,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function V(){this.constructor=C}E(C,S),C.prototype=null===S?Object.create(S):(V.prototype=S.prototype,new V)}),D=this&&this.__read||function(E,C){var S="function"==typeof Symbol&&E[Symbol.iterator];if(!S)return E;var F,N,V=S.call(E),j=[];try{for(;(void 0===C||C-- >0)&&!(F=V.next()).done;)j.push(F.value)}catch(R){N={error:R}}finally{try{F&&!F.done&&(S=V.return)&&S.call(V)}finally{if(N)throw N.error}}return j},I=w(1628),v=w(4332),m=w(2181),d=w(5318).NullObserver,u=w(6543),f=I(v),h=50,_=function(E){function C(S,V,F,j,N,R,P){var T=this;return P=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},P),P=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||"auto"!==P.clientTrackSwitchOffControl?d:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||"auto"!==P.contentPreferencesMode?d:ResizeObserver},P),T=E.call(this,S,V,F,j,N,R,P)||this,Object.defineProperties(T,{_enableDocumentVisibilityTurnOff:{value:!0===P.enableDocumentVisibilityTurnOff&&"auto"===P.clientTrackSwitchOffControl},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:P.clientTrackSwitchOffControl},_contentPreferencesMode:{value:P.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new u(function(){T._setRenderHint({enabled:!1})},h,!1)},_resizeObserver:{value:new P.ResizeObserver(function(x){x.find(function(B){return!T._invisibleElements.has(B.target)})&&M(T)})},_intersectionObserver:{value:new P.IntersectionObserver(function(x){var L=!1;x.forEach(function(B){!T._invisibleElements.has(B.target)!==B.isIntersecting&&(B.isIntersecting?(T._log.debug("intersectionObserver detected: Off => On"),T._invisibleElements.delete(B.target)):(T._log.debug("intersectionObserver detected: On => Off"),T._invisibleElements.add(B.target)),L=!0)}),L&&(y(T),M(T))},{threshold:.25})}}),T}return k(C,E),C.prototype._start=function(S){var V=E.prototype._start.call(this,S);return y(this),V},C.prototype.switchOn=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},C.prototype.switchOff=function(){if("manual"!==this._clientTrackSwitchOffControl)throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},C.prototype.setContentPreferences=function(S){if("manual"!==this._contentPreferencesMode)throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return S.renderDimensions&&this._setRenderHint({renderDimensions:S.renderDimensions}),this},C.prototype._unObservePip=function(S){var V=this._elToPipCallbacks.get(S);V&&(S.removeEventListener("enterpictureinpicture",V.onEnterPip),S.removeEventListener("leavepictureinpicture",V.onLeavePip),this._elToPipCallbacks.delete(S))},C.prototype._observePip=function(S){var V=this;if(!this._elToPipCallbacks.get(S)){var j=function(P){return V._onEnterPip(P,S)},N=function(P){return V._onLeavePip(P,S)};S.addEventListener("enterpictureinpicture",j),S.addEventListener("leavepictureinpicture",N),this._elToPipCallbacks.set(S,{onEnterPip:j,onLeavePip:N,onResizePip:function(P){return V._onResizePip(P,S)}})}},C.prototype._onEnterPip=function(S,V){this._log.debug("onEnterPip");var F=S.pictureInPictureWindow;this._elToPipWindows.set(V,F);var j=this._elToPipCallbacks.get(V).onResizePip;F.addEventListener("resize",j),y(this)},C.prototype._onLeavePip=function(S,V){this._log.debug("onLeavePip"),this._elToPipWindows.delete(V);var F=this._elToPipCallbacks.get(V).onResizePip;S.pictureInPictureWindow.removeEventListener("resize",F),y(this)},C.prototype._onResizePip=function(){M(this)},C.prototype.attach=function(S){var V=E.prototype.attach.call(this,S);return"auto"===this._clientTrackSwitchOffControl&&this._invisibleElements.add(V),this._intersectionObserver.observe(V),this._resizeObserver.observe(V),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||function b(E){function C(){y(E)}return m.onVisibilityChange(1,C),function(){m.offVisibilityChange(1,C)}}(this)),this._observePip(V),V},C.prototype.detach=function(S){var V=this,F=E.prototype.detach.call(this,S);return(Array.isArray(F)?F:[F]).forEach(function(N){V._intersectionObserver.unobserve(N),V._resizeObserver.unobserve(N),V._invisibleElements.delete(N),V._unObservePip(N)}),0===this._attachments.size&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),y(this),M(this),F},C.prototype.addProcessor=function(){return E.prototype.addProcessor.apply(this,arguments)},C.prototype.removeProcessor=function(){return E.prototype.removeProcessor.apply(this,arguments)},C.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},C.prototype.setPriority=function(S){return E.prototype.setPriority.call(this,S)},C}(f);function y(E){if("auto"===E._clientTrackSwitchOffControl){var C=E._getAllAttachedElements().filter(function(F){return!E._invisibleElements.has(F)});!0==(E._getAllAttachedElements().filter(function(F){return E._elToPipWindows.has(F)}).length>0||"visible"===document.visibilityState&&C.length>0)?(E._turnOffTimer.clear(),E._setRenderHint({enabled:!0})):E._turnOffTimer.isSet||E._turnOffTimer.start()}}function M(E){if("auto"===E._contentPreferencesMode){var C=E._getAllAttachedElements().filter(function(T){return!E._invisibleElements.has(T)}),S=E._getAllAttachedElements().map(function(T){var x=E._elToPipWindows.get(T);return x?{clientHeight:x.height,clientWidth:x.width}:{clientHeight:0,clientWidth:0}}),V=C.concat(S);if(V.length>0){var j=D(V.sort(function(T,x){return x.clientHeight+x.clientWidth-T.clientHeight-T.clientWidth-1}),1)[0];E._setRenderHint({renderDimensions:{height:j.clientHeight,width:j.clientWidth}})}}}$.exports=_},1768:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){return v.call(this,d,u)||this}return k(m,v),m.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},m}(w(1521));$.exports=I},808:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=this&&this.__read||function(m,d){var u="function"==typeof Symbol&&m[Symbol.iterator];if(!u)return m;var h,b,f=u.call(m),_=[];try{for(;(void 0===d||d-- >0)&&!(h=f.next()).done;)_.push(h.value)}catch(y){b={error:y}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(b)throw b.error}}return _},v=function(m){function d(u){var f=m.call(this,u.id,u)||this;return Object.defineProperties(f,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return f.queue("muted")}],["unmute",function(){return f.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),f._reemitMediaStreamTrackEvents(),f}return k(d,m),d.prototype._reemitMediaStreamTrackEvents=function(u){void 0===u&&(u=this._track);var h=this._eventsToReemitters,_=this._track;h.forEach(function(y,M){return u.addEventListener(M,y)}),_!==u&&(h.forEach(function(y,M){return _.removeEventListener(M,y)}),_.muted!==u.muted)&&h.get(u.muted?"mute":"unmute")()},d.prototype.clone=function(){var u=new d(this.track.clone());return this._clones.add(u),u},d.prototype.removeClone=function(u){this._clones.delete(u)},d.prototype.setMediaStreamTrack=function(u){var f=this,h=Array.from(this._clones),_=Array.from(this._senders);return Promise.all(h.map(function(b){return b.setMediaStreamTrack(u.clone())}).concat(_.map(function(b){return f._replaceTrack(b,u)}))).finally(function(){f._reemitMediaStreamTrackEvents(u),f._track=u})},d.prototype.addSender=function(u,f){return this._senders.add(u),f&&this._senderToPublisherHintCallbacks.set(u,f),this},d.prototype.removeSender=function(u){return this._senders.delete(u),this._senderToPublisherHintCallbacks.delete(u),this},d.prototype.setPublisherHint=function(u){var h=D(Array.from(this._senderToPublisherHintCallbacks.values()),1)[0];return h?h(u):Promise.resolve("COULD_NOT_APPLY_HINT")},d.prototype._replaceTrack=function(u,f){var h=this;return u.replaceTrack(f).then(function(_){return h.setPublisherHint(null).catch(function(){}),h.emit("replaced"),_})},d}(w(1639));$.exports=v},9222:function($,H,w){"use strict";var _,k=this&&this.__extends||(_=function(b,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,E){M.__proto__=E}||function(M,E){for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(M[C]=E[C])})(b,y)},function(b,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function M(){this.constructor=b}_(b,y),b.prototype=null===y?Object.create(y):(M.prototype=y.prototype,new M)}),D=w(133),I=w(9739),v=I.buildLogLevels,m=I.valueToJSON,d=w(8701).DEFAULT_LOG_LEVEL,u=w(1458),f=0,h=function(_){function b(y,M,E){var C=_.call(this)||this;E=Object.assign({logLevel:d},E);var S=v(E.logLevel);return Object.defineProperties(C,{_instanceId:{value:f++},_log:{value:E.log?E.log.createLog("default",C):new u("default",C,S,E.loggerName)},trackName:{enumerable:!0,value:y},trackSid:{enumerable:!0,value:M}}),C}return k(b,_),b.prototype.toJSON=function(){return m(this)},b.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},b}(D);$.exports=h},1639:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d,u.kind)||this;return Object.defineProperties(f,{_track:{value:u,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),f}return k(m,v),m.prototype.stop=function(){this.track.stop(),v.prototype.stop.call(this)},m}(w(4605));$.exports=I},9062:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(9069).EventEmitter,I=w(8701).DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,v=function(m){function d(u){var f=m.call(this)||this;return Object.defineProperties(f,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:u},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),f.on("add",function(h){f._lastStatsSaveTime=Date.now(),f._lastStatsPublishTime=Date.now(),f._processorInfo=h,f._stats=[],f._reemitEvent("add",f._getEventData())}),f.on("remove",function(){var h=f._getEventData();f._lastStatsSaveTime=null,f._lastStatsPublishTime=null,f._processorInfo=null,f._stats=null,f._reemitEvent("remove",h)}),f.on("start",function(){f._reemitEvent("start",f._getEventData())}),f.on("stop",function(h){f._reemitEvent("stop",Object.assign({message:h},f._getEventData()))}),f.on("stats",function(){return f._maybeEmitStats()}),f}return k(d,m),d.prototype._getEventData=function(){if(!this._processorInfo)return{};var u=this._processorInfo,f=u.processor,M={captureHeight:u.captureHeight,captureWidth:u.captureWidth,inputFrameRate:u.inputFrameRate,isRemoteVideoTrack:u.isRemoteVideoTrack};return M.name=f._name||"VideoProcessor",["assetsPath","blurFilterRadius","fitType","isSimdEnabled","maskBlurRadius","version"].forEach(function(E){var C=f["_"+E];typeof C<"u"&&(M[E]=C)}),Object.keys(M).forEach(function(E){var C=M[E];"boolean"==typeof C&&(M[E]=C?"true":"false")}),M},d.prototype._maybeEmitStats=function(){if(this._stats&&this._processorInfo){var u=this._processorInfo.processor._benchmark;if(u){var f=Date.now();if(!(f-this._lastStatsSaveTime<1e3)){var h={outputFrameRate:u.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(y){h[y]=u.getAverageDelay(y)}),this._lastStatsSaveTime=f,this._stats.push(h),!(f-this._lastStatsPublishTime<I)){this._lastStatsPublishTime=f;var b=this._stats.splice(0).reduce(function(y,M,E){return Object.keys(h).forEach(function(C){y[C]||(y[C]=0),y[C]=(y[C]*E+M[C])/(E+1)}),y},{});Object.keys(b).forEach(function(y){b[y]=parseFloat(b[y].toFixed(2))}),this._reemitEvent("stats",Object.assign({},b,this._getEventData()))}}}}},d.prototype._reemitEvent=function(u,f){this._log.debug("VideoProcessor:"+u,f),this.emit("event",{name:u,data:f})},d}(D);$.exports=v},4332:function($,H,w){"use strict";var u,k=this&&this.__extends||(u=function(f,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(f,h)},function(f,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function _(){this.constructor=f}u(f,h),f.prototype=null===h?Object.create(h):(_.prototype=h.prototype,new _)}),D=w(5366),I=w(9062),v=w(8701).DEFAULT_FRAME_RATE,m=function(u){function f(h,_){var b=u.call(this,h,_)||this;return Object.defineProperties(b,{_captureTimeoutId:{value:null,writable:!0},_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),b._processorEventObserver=new(_.VideoProcessorEventObserver||I)(b._log),b}return k(f,u),f.prototype._checkIfCanCaptureFrames=function(h){void 0===h&&(h=!1);var _=!0,b="",y=this.mediaStreamTrack;return y.enabled||(_=!1,b="MediaStreamTrack is disabled"),"ended"===y.readyState&&(_=!1,b="MediaStreamTrack is ended"),this.processor||(_=!1,b="VideoProcessor not detected."),!this._attachments.size&&!h&&(_=!1,b="VideoTrack is not publishing and there is no attached element."),b&&this._log.debug(b),{canCaptureFrames:_,message:b}},f.prototype._captureFrames=function(){var h=this;if(this._isCapturing)this._log.debug("Ignoring captureFrames call. Capture is already in progress");else{if(!this._checkIfCanCaptureFrames().canCaptureFrames)return this._isCapturing=!1,void this._log.debug("Cannot capture frames. Ignoring captureFrames call.");this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var b,_=Date.now();this._dummyEl.play().then(function(){var y=function(E){clearTimeout(h._captureTimeoutId);var C=h.mediaStreamTrack.getSettings().frameRate,F=Math.floor(1e3/(void 0===C?v:C))-b;(F<0||"number"!=typeof b)&&(F=0),h._captureTimeoutId=setTimeout(E,F)},M=function(){var E=h._checkIfCanCaptureFrames();if(!E.canCaptureFrames)return h._isCapturing=!1,h._processorEventObserver.emit("stop",E.message),void h._log.debug("Cannot capture frames. Stopping capturing frames.");_=Date.now();var C=h.mediaStreamTrack.getSettings(),S=C.width,V=void 0===S?0:S,F=C.height,j=void 0===F?0:F;h._inputFrame.width!==V&&(h._inputFrame.width=V,h._inputFrame.height=j,h._outputFrame&&(h._outputFrame.width=V,h._outputFrame.height=j)),h._inputFrame.getContext("2d").drawImage(h._dummyEl,0,0,V,j);var N=null;try{N=h.processor.processFrame(h._inputFrame,h._outputFrame)}catch(R){h._log.debug("Exception detected after calling processFrame.",R)}(N instanceof Promise?N:Promise.resolve(N)).then(function(){h._outputFrame&&(h.processedTrack.requestFrame(),h._processorEventObserver.emit("stats"))}).finally(function(){b=Date.now()-_,y(M)})};y(M)}).catch(function(y){return h._log.error("Video element cannot be played",{error:y,track:h})})}},f.prototype._initialize=function(){var h=this;u.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){d(h,h._dummyEl)&&(h.dimensions.width=h._dummyEl.videoWidth,h.dimensions.height=h._dummyEl.videoHeight)},this._dummyEl.onresize=function(){d(h,h._dummyEl)&&(h.dimensions.width=h._dummyEl.videoWidth,h.dimensions.height=h._dummyEl.videoHeight,h.isStarted&&(h._log.debug("Dimensions changed:",h.dimensions),h.emit(f.DIMENSIONS_CHANGED,h)))})},f.prototype._restartProcessor=function(){var h=this.processor;h&&(this.removeProcessor(h),this.addProcessor(h))},f.prototype._start=function(h){return this.dimensions.width=h.videoWidth,this.dimensions.height=h.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(f.DIMENSIONS_CHANGED,this),u.prototype._start.call(this,h)},f.prototype.addProcessor=function(h){var _=this;if("function"!=typeof OffscreenCanvas)return this._log.warn("Adding a VideoProcessor is not supported in this browser.");if(!h||"function"!=typeof h.processFrame)throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",h),this._unmuteHandler||(this._unmuteHandler=function(){_._log.debug("mediaStreamTrack unmuted"),_.processedTrack.muted&&(_._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),_._restartProcessor())},this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler));var b=this.mediaStreamTrack.getSettings(),y=b.width,M=void 0===y?0:y,E=b.height,C=void 0===E?0:E,S=b.frameRate,V=void 0===S?v:S;return this._inputFrame=new OffscreenCanvas(M,C),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=M,this._outputFrame.height=C,this.processedTrack=this._outputFrame.captureStream(0).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=h,this._processorEventObserver.emit("add",{processor:h,captureHeight:C,captureWidth:M,inputFrameRate:V,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack")}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},f.prototype.attach=function(){var h=u.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),h},f.prototype.detach=function(){return u.prototype.detach.apply(this,arguments)},f.prototype.removeProcessor=function(h){if(!h)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(h!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",h),clearTimeout(this._captureTimeoutId),this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame.getContext("2d").clearRect(0,0,this._inputFrame.width,this._inputFrame.height),this._outputFrame.getContext("2d").clearRect(0,0,this._outputFrame.width,this._outputFrame.height),this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},f}(D);function d(u,f){return u.dimensions.width!==f.videoWidth||u.dimensions.height!==f.videoHeight}m.DIMENSIONS_CHANGED="dimensionsChanged",$.exports=m},4621:function($,H,w){"use strict";var _,k=this&&this.__extends||(_=function(b,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,E){M.__proto__=E}||function(M,E){for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(M[C]=E[C])})(b,y)},function(b,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function M(){this.constructor=b}_(b,y),b.prototype=null===y?Object.create(y):(M.prototype=y.prototype,new M)}),D=this&&this.__read||function(_,b){var y="function"==typeof Symbol&&_[Symbol.iterator];if(!y)return _;var E,S,M=y.call(_),C=[];try{for(;(void 0===b||b-- >0)&&!(E=M.next()).done;)C.push(E.value)}catch(V){S={error:V}}finally{try{E&&!E.done&&(y=M.return)&&y.call(M)}finally{if(S)throw S.error}}return C},I=w(9069).EventEmitter,v=w(8701),m=v.DEFAULT_NQ_LEVEL_LOCAL,d=v.DEFAULT_NQ_LEVEL_REMOTE,u=v.MAX_NQ_LEVEL,f=w(9739).inRange,h=function(_){function b(y){var M=_.call(this)||this;return y=Object.assign({local:m,remote:d},y),Object.defineProperties(M,{local:{value:f(y.local,m,u)?y.local:m,writable:!0},remote:{value:f(y.remote,d,u)?y.remote:d,writable:!0}}),M}return k(b,_),b.prototype.update=function(y){var M=this;y=Object.assign({local:this.local,remote:this.remote},y),[["local",m,3],["remote",d,3]].forEach(function(E){var C=D(E,3),S=C[0],V=C[1];M[S]="number"==typeof y[S]&&f(y[S],V,C[2])?y[S]:V})},b}(I);$.exports=h},9788:function($,H,w){"use strict";var k=this&&this.__awaiter||function(h,_,b,y){return new(b||(b=Promise))(function(E,C){function S(j){try{F(y.next(j))}catch(N){C(N)}}function V(j){try{F(y.throw(j))}catch(N){C(N)}}function F(j){j.done?E(j.value):function M(E){return E instanceof b?E:new b(function(C){C(E)})}(j.value).then(S,V)}F((y=y.apply(h,_||[])).next())})},D=this&&this.__generator||function(h,_){var y,M,E,C,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return C={next:S(0),throw:S(1),return:S(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function S(F){return function(j){return function V(F){if(y)throw new TypeError("Generator is already executing.");for(;b;)try{if(y=1,M&&(E=2&F[0]?M.return:F[0]?M.throw||((E=M.return)&&E.call(M),0):M.next)&&!(E=E.call(M,F[1])).done)return E;switch(M=0,E&&(F=[2&F[0],E.value]),F[0]){case 0:case 1:E=F;break;case 4:return b.label++,{value:F[1],done:!1};case 5:b.label++,M=F[1],F=[0];continue;case 7:F=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===F[0]||2===F[0])){b=0;continue}if(3===F[0]&&(!E||F[1]>E[0]&&F[1]<E[3])){b.label=F[1];break}if(6===F[0]&&b.label<E[1]){b.label=E[1],E=F;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(F);break}E[2]&&b.ops.pop(),b.trys.pop();continue}F=_.call(h,b)}catch(j){F=[6,j],M=0}finally{y=E=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([F,j])}}};Object.defineProperty(H,"__esModule",{value:!0}),H.createNoiseCancellationAudioProcessor=void 0;var I=w(9121),m=(w(1458),{krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}}),u=new Map;H.createNoiseCancellationAudioProcessor=function f(h,_){return k(this,void 0,void 0,function(){var b,y,M,C,S,V,F,j;return D(this,function(N){switch(N.label){case 0:if(b=u.get(h.vendor))return[3,6];if(!(y=m[h.vendor]))throw new Error("Unsupported NoiseCancellationOptions.vendor: "+h.vendor);M=y.supportedVersion,S=(C=h.sdkAssetsPath)+"/"+y.pluginFile,N.label=1;case 1:return N.trys.push([1,5,,6]),_.debug("loading noise cancellation sdk: ",S),[4,I(S)];case 2:return V=N.sent(),_.debug("Loaded noise cancellation sdk:",V),function(h){var _=h.supportedVersion,b=h.plugin,y=h.log;if(!b.getVersion||!b.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var M=b.getVersion();y.debug("Plugin Version = "+M);var E=_.split(".").map(function(F){return Number(F)}),C=M.split(".").map(function(F){return Number(F)});if(3!==E.length||3!==C.length)throw new Error("Unsupported Plugin version format: "+_+", "+M);if(E[0]!==C[0])throw new Error("Major version mismatch: [Plugin version "+M+"],  [Supported Version "+_+"]");if(C[1]<E[1])throw new Error("Minor version mismatch: [Plugin version "+M+"] < [Supported Version "+_+"]");var S=new AudioContext,V=b.isSupported(S);if(S.close(),!V)throw new Error("Noise Cancellation plugin is not supported on your browser")}({supportedVersion:M,plugin:F=V.default,log:_}),F.isInitialized()?[3,4]:(_.debug("initializing noise cancellation sdk: ",C),[4,F.init({rootDir:C})]);case 3:N.sent(),_.debug("noise cancellation sdk initialized!"),N.label=4;case 4:return u.set(h.vendor,b={vendor:h.vendor,isInitialized:function(){return F.isInitialized()},isConnected:function(){return F.isConnected()},isEnabled:function(){return F.isEnabled()},disconnect:function(){return F.disconnect()},enable:function(){return F.enable()},disable:function(){return F.disable()},destroy:function(){return F.destroy()},setLogging:function(R){return F.setLogging(R)},connect:function(R){_.debug("connect: ",R.id),F.isConnected()&&F.disconnect();var P=F.connect(new MediaStream([R]));if(!P)throw new Error("Error connecting with noise cancellation sdk");var T=P.getAudioTracks()[0];if(!T)throw new Error("Error getting clean track from noise cancellation sdk");return F.enable(),T}}),[3,6];case 5:throw j=N.sent(),_.error("Error loading noise cancellation sdk:"+S,j),j;case 6:return[2,b]}})})}},9218:function($,H,w){"use strict";var F,k=this&&this.__extends||(F=function(j,N){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,P){R.__proto__=P}||function(R,P){for(var T in P)Object.prototype.hasOwnProperty.call(P,T)&&(R[T]=P[T])})(j,N)},function(j,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function R(){this.constructor=j}F(j,N),j.prototype=null===N?Object.create(N):(R.prototype=N.prototype,new R)}),D=this&&this.__read||function(F,j){var N="function"==typeof Symbol&&F[Symbol.iterator];if(!N)return F;var P,x,R=N.call(F),T=[];try{for(;(void 0===j||j-- >0)&&!(P=R.next()).done;)T.push(P.value)}catch(L){x={error:L}}finally{try{P&&!P.done&&(N=R.return)&&N.call(R)}finally{if(x)throw x.error}}return T},I=this&&this.__spreadArray||function(F,j){for(var N=0,R=j.length,P=F.length;N<R;N++,P++)F[P]=j[N];return F},v=w(133),m=w(8797),d=w(8661),u=w(5606),f=w(8459),h=w(1629),_=w(1768),b=w(9739),y=0,M=function(F){function j(N,R){var P=F.call(this)||this,T=function E(F){var j=F.map(function(T){return[T.id,T]}),N=j.filter(function(T){return"audio"===T[1].kind}),R=j.filter(function(T){return"video"===T[1].kind}),P=j.filter(function(T){return"data"===T[1].kind});return{audioTracks:N,dataTracks:P,tracks:j,videoTracks:R}}((R=Object.assign({RemoteAudioTrack:m,RemoteAudioTrackPublication:d,RemoteDataTrack:u,RemoteDataTrackPublication:f,RemoteVideoTrack:h,RemoteVideoTrackPublication:_,tracks:[]},R)).tracks),x=R.log.createLog("default",P),L=new Map(T.audioTracks),B=new Map(T.dataTracks),G=new Map(T.tracks),W=new Map(T.videoTracks);return Object.defineProperties(P,{_RemoteAudioTrack:{value:R.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:R.RemoteAudioTrackPublication},_RemoteDataTrack:{value:R.RemoteDataTrack},_RemoteDataTrackPublication:{value:R.RemoteDataTrackPublication},_RemoteVideoTrack:{value:R.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:R.RemoteVideoTrackPublication},_audioTracks:{value:L},_dataTracks:{value:B},_instanceId:{value:++y},_clientTrackSwitchOffControl:{value:R.clientTrackSwitchOffControl},_contentPreferencesMode:{value:R.contentPreferencesMode},_log:{value:x},_signaling:{value:N},_tracks:{value:G},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:W},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return N.identity}},networkQualityLevel:{enumerable:!0,get:function(){return N.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return N.networkQualityStats}},sid:{enumerable:!0,get:function(){return N.sid}},state:{enumerable:!0,get:function(){return N.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),P._tracks.forEach(S.bind(null,P)),N.on("networkQualityLevelChanged",function(){return P.emit("networkQualityLevelChanged",P.networkQualityLevel,P.networkQualityStats&&(P.networkQualityStats.audio||P.networkQualityStats.video)?P.networkQualityStats:null)}),function C(F,j){var N=F._log;"disconnected"!==F.state&&j.on("stateChanged",function R(P){N.debug("Transitioned to state:",P),F.emit(P,F),"disconnected"===P&&(N.debug("Removing Track event reemitters"),j.removeListener("stateChanged",R),F._tracks.forEach(function(T){var x=F._trackEventReemitters.get(T.id);T&&x&&x.forEach(function(L,B){T.removeListener(B,L)})}),j.tracks.forEach(function(T){var x=F._tracks.get(T.id),L=F._trackEventReemitters.get(T.id);x&&L&&L.forEach(function(B,G){x.removeListener(G,B)})}),F._trackEventReemitters.clear(),F.tracks.forEach(function(T){F._trackPublicationEventReemitters.get(T.trackSid).forEach(function(x,L){T.removeListener(L,x)})}),F._trackPublicationEventReemitters.clear())})}(P,N),x.info("Created a new Participant"+(P.identity?": "+P.identity:"")),P}return k(j,F),j.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},j.prototype._getTrackPublicationEvents=function(){return[]},j.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},j.prototype._addTrack=function(N,R){var P=this._log;return this._tracks.has(R)?null:(this._tracks.set(R,N),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[N.kind].set(R,N),S(this,N,R),P.info("Added a new "+b.trackClass(N)+":",R),P.debug(b.trackClass(N)+":",N),N)},j.prototype._addTrackPublication=function(N){var R=this._log;return this.tracks.has(N.trackSid)?null:(this.tracks.set(N.trackSid,N),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[N.kind].set(N.trackSid,N),function V(F,j){var N=new Map;"disconnected"!==F.state&&(F._getTrackPublicationEvents().forEach(function(R){var P=D(R,2),T=P[0],x=P[1];N.set(T,function(){for(var L=[],B=0;B<arguments.length;B++)L[B]=arguments[B];F.emit.apply(F,I(I([x],D(L)),[j]))}),j.on(T,N.get(T))}),F._trackPublicationEventReemitters.set(j.trackSid,N))}(this,N),R.info("Added a new "+b.trackPublicationClass(N)+":",N.trackSid),R.debug(b.trackPublicationClass(N)+":",N),N)},j.prototype._handleTrackSignalingEvents=function(){var N=this,R=N._log,P=N._clientTrackSwitchOffControl,T=N._contentPreferencesMode,x=this;if("disconnected"!==this.state){var L=this._RemoteAudioTrack,B=this._RemoteAudioTrackPublication,G=this._RemoteVideoTrack,W=this._RemoteVideoTrackPublication,X=this._RemoteDataTrack,J=this._RemoteDataTrackPublication,ee=this._signaling;ee.on("trackAdded",Q),ee.on("trackRemoved",ie),ee.tracks.forEach(Q),ee.on("stateChanged",function re(ne){"disconnected"===ne?(R.debug("Removing event listeners"),ee.removeListener("stateChanged",re),ee.removeListener("trackAdded",Q),ee.removeListener("trackRemoved",ie)):"connected"===ne&&(R.info("reconnected"),setTimeout(function(){return x.emit("reconnected")},0))})}function Q(re){var Y=new(0,{audio:B,data:J,video:W}[re.kind])(re,{log:R});x._addTrackPublication(Y);var z=re.isSubscribed;z&&fe(re),x._trackSignalingUpdatedEventCallbacks.set(re.sid,function(){if(z!==re.isSubscribed){if(z=re.isSubscribed)return void fe(re);!function ue(re){var ne=D(Array.from(x._tracks.entries()).find(function(le){return D(le,2)[1].sid===re.sid}),2),Y=ne[0],z=ne[1],ce=x.tracks.get(re.sid);z&&x._removeTrack(z,ce,Y)}(re)}}),re.on("updated",x._trackSignalingUpdatedEventCallbacks.get(re.sid))}function ie(re){re.isSubscribed&&re.setTrackTransceiver(null);var ne=x._trackSignalingUpdatedEventCallbacks.get(re.sid);ne&&(re.removeListener("updated",ne),x._trackSignalingUpdatedEventCallbacks.delete(re.sid));var Y=x.tracks.get(re.sid);Y&&x._removeTrackPublication(Y)}function fe(re){var ne=re.isEnabled,Y=re.name,z=re.kind,ce=re.sid,le=re.trackTransceiver,_e=re.isSwitchedOff,ve={audio:L,video:G,data:X}[z],pe=x.tracks.get(ce);if(ve&&z===le.kind){var Ne={log:R,name:Y,clientTrackSwitchOffControl:P,contentPreferencesMode:T},tt="data"===z?new ve(ce,le,Ne):new ve(ce,le,ne,_e,function(He){return ee.updateSubscriberTrackPriority(ce,He)},function(He){re.isSubscribed&&ee.updateTrackRenderHint(ce,He)},Ne);x._addTrack(tt,pe,le.id)}}},j.prototype._removeTrack=function(N,R){if(!this._tracks.has(R))return null;this._tracks.delete(R),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[N.kind].delete(R),(this._trackEventReemitters.get(R)||new Map).forEach(function(L,B){N.removeListener(B,L)});var x=this._log;return x.info("Removed a "+b.trackClass(N)+":",R),x.debug(b.trackClass(N)+":",N),N},j.prototype._removeTrackPublication=function(N){if(!(N=this.tracks.get(N.trackSid)))return null;this.tracks.delete(N.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[N.kind].delete(N.trackSid),(this._trackPublicationEventReemitters.get(N.trackSid)||new Map).forEach(function(x,L){N.removeListener(L,x)});var T=this._log;return T.info("Removed a "+b.trackPublicationClass(N)+":",N.trackSid),T.debug(b.trackPublicationClass(N)+":",N),N},j.prototype.toJSON=function(){return b.valueToJSON(this)},j}(v);function S(F,j,N){var R=new Map;"disconnected"!==F.state&&(F._getTrackEvents().forEach(function(P){var T=P[0],x=P[1];R.set(T,function(){var L=[x].concat([].slice.call(arguments));return F.emit.apply(F,I([],D(L)))}),j.on(T,R.get(T))}),F._trackEventReemitters.set(N,R))}$.exports=M},9305:function($,H){"use strict";var w=this&&this.__awaiter||function(u,f,h,_){return new(h||(h=Promise))(function(y,M){function E(V){try{S(_.next(V))}catch(F){M(F)}}function C(V){try{S(_.throw(V))}catch(F){M(F)}}function S(V){V.done?y(V.value):function b(y){return y instanceof h?y:new h(function(M){M(y)})}(V.value).then(E,C)}S((_=_.apply(u,f||[])).next())})},k=this&&this.__generator||function(u,f){var _,b,y,M,h={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return M={next:E(0),throw:E(1),return:E(2)},"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function E(S){return function(V){return function C(S){if(_)throw new TypeError("Generator is already executing.");for(;h;)try{if(_=1,b&&(y=2&S[0]?b.return:S[0]?b.throw||((y=b.return)&&y.call(b),0):b.next)&&!(y=y.call(b,S[1])).done)return y;switch(b=0,y&&(S=[2&S[0],y.value]),S[0]){case 0:case 1:y=S;break;case 4:return h.label++,{value:S[1],done:!1};case 5:h.label++,b=S[1],S=[0];continue;case 7:S=h.ops.pop(),h.trys.pop();continue;default:if(!(y=(y=h.trys).length>0&&y[y.length-1])&&(6===S[0]||2===S[0])){h=0;continue}if(3===S[0]&&(!y||S[1]>y[0]&&S[1]<y[3])){h.label=S[1];break}if(6===S[0]&&h.label<y[1]){h.label=y[1],y=S;break}if(y&&h.label<y[2]){h.label=y[2],h.ops.push(S);break}y[2]&&h.ops.pop(),h.trys.pop();continue}S=f.call(u,h)}catch(V){S=[6,V],b=0}finally{_=y=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([S,V])}}},D=this&&this.__read||function(u,f){var h="function"==typeof Symbol&&u[Symbol.iterator];if(!h)return u;var b,M,_=h.call(u),y=[];try{for(;(void 0===f||f-- >0)&&!(b=_.next()).done;)y.push(b.value)}catch(E){M={error:E}}finally{try{b&&!b.done&&(h=_.return)&&h.call(_)}finally{if(M)throw M.error}}return y};function I(u,f,h,_){var b=[];return u.forEach(function(y){(0===_.length||_.includes(y.type))&&(0===h.length||h.includes(y.kind))&&"number"==typeof y[f]&&b.push(y[f])}),b}function m(u){return[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}].reduce(function(h,_){var b=[_.key];_.altKeys&&(b=b.concat(_.altKeys));var y=b.find(function(M){return M in u});return y&&typeof u[y]===_.type&&(h[_.key]=u[y]),h},{})}Object.defineProperty(H,"__esModule",{value:!0}),H.getCombinedConnectionStats=void 0,H.getCombinedConnectionStats=function v(u){var f=u.publisher,h=u.subscriber;return w(this,void 0,void 0,function(){var _,b,y,M,E,C,S,V,F,j,N,R,P,T,x;return k(this,function(L){switch(L.label){case 0:return[4,Promise.all([f,h].map(function(B){return B.getStats()}))];case 1:return _=D.apply(void 0,[L.sent(),2]),b=_[0],M=I(y=_[1],"timestamp",["audio"],["inbound-rtp"]),E=M.length>0?M[0]:0,C=I(y,"jitter",["audio"],["inbound-rtp"]).reduce(function(B,G){return Math.max(B,G)},0),S=I(y,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(B,G){return B+G},0),V=I(y,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(B,G){return B+G},0),F=I(b,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(B,G){return Math.max(B,G)},0),j=I(y,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(B,G){return Math.max(B,G)},0),N=1e3*(j||F),R=I(b,"bytesSent",[],["candidate-pair"]).reduce(function(B,G){return B+G},0),P=I(y,"bytesReceived",[],["candidate-pair"]).reduce(function(B,G){return B+G},0),T=function d(u){var f=null,h=[];u.forEach(function(E){"transport"===E.type&&E.selectedCandidatePairId?f=E.selectedCandidatePairId:"candidate-pair"===E.type&&h.push(E)});var _=h.find(function(E){return E.selected||f&&E.id===f});if(!_)return null;var b=_,y=u.get(b.localCandidateId),M=u.get(b.remoteCandidateId);return y&&M?{localCandidate:m(y),remoteCandidate:m(M)}:null}(y),x=[],y.forEach(function(B){("local-candidate"===B.type||"remote-candidate"===B.type)&&x.push(m(B))}),[2,{timestamp:E,jitter:C,packets:S,packetsLost:V,roundTripTime:N,bytesSent:R,bytesReceived:P,selectedIceCandidatePairStats:T,iceCandidateStats:x}]}})})}},2449:($,H,w)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.getTurnCredentials=void 0;var k=w(5330),D=w(8701).ICE_VERSION,I=w(8380),v=I.createTwilioError,m=I.SignalingConnectionError,d=w(9069);H.getTurnCredentials=function u(f,h){return new Promise(function(_,b){var y=new d.EventEmitter,E=new k(h,{networkMonitor:null,eventObserver:y,helloBody:{edge:"roaming",preflight:!0,token:f,type:"ice",version:D}}),C=!1;E.once("close",function(){C||(C=!0,b(new m))}),E.on("message",function(S){var V=S.code,F=S.message,N=S.type;("iced"===N||"error"===N)&&!C&&(C=!0,"iced"===N?_(S.ice_servers):b(v(V,F)),E.close())})})}},5359:function($,H){"use strict";var w=this&&this.__read||function(I,v){var m="function"==typeof Symbol&&I[Symbol.iterator];if(!m)return I;var u,h,d=m.call(I),f=[];try{for(;(void 0===v||v-- >0)&&!(u=d.next()).done;)f.push(u.value)}catch(_){h={error:_}}finally{try{u&&!u.done&&(m=d.return)&&m.call(d)}finally{if(h)throw h.error}}return f},k=this&&this.__spreadArray||function(I,v){for(var m=0,d=v.length,u=I.length;m<d;m++,u++)I[u]=v[m];return I};Object.defineProperty(H,"__esModule",{value:!0}),H.makeStat=void 0,H.makeStat=function D(I){return I&&I.length?{min:Math.min.apply(Math,k([],w(I))),max:Math.max.apply(Math,k([],w(I))),average:I.reduce(function(u,f){return u+f},0)/I.length}:null}},2436:($,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.mosToScore=H.calculateMOS=void 0;var w=94.768;H.calculateMOS=function k(I,v,m){var d=I+2*v+10,u=0;switch(!0){case d<160:u=w-d/40;break;case d<1e3:u=w-(d-120)/10}return 1+.035*(u=1==m<=u/2.5?Math.max(u-2.5*m,6.52):0)+7e-6*u*(u-60)*(100-u)},H.mosToScore=function D(I){return I?I>4.2?5:I>4?4:I>3.6?3:I>3?2:1:0}},8682:function($,H,w){"use strict";var fe,k=this&&this.__extends||(fe=function(ue,re){return(fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,Y){ne.__proto__=Y}||function(ne,Y){for(var z in Y)Object.prototype.hasOwnProperty.call(Y,z)&&(ne[z]=Y[z])})(ue,re)},function(ue,re){if("function"!=typeof re&&null!==re)throw new TypeError("Class extends value "+String(re)+" is not a constructor or null");function ne(){this.constructor=ue}fe(ue,re),ue.prototype=null===re?Object.create(re):(ne.prototype=re.prototype,new ne)}),D=this&&this.__assign||function(){return D=Object.assign||function(fe){for(var ue,re=1,ne=arguments.length;re<ne;re++)for(var Y in ue=arguments[re])Object.prototype.hasOwnProperty.call(ue,Y)&&(fe[Y]=ue[Y]);return fe},D.apply(this,arguments)},I=this&&this.__awaiter||function(fe,ue,re,ne){return new(re||(re=Promise))(function(z,ce){function le(pe){try{ve(ne.next(pe))}catch(Ne){ce(Ne)}}function _e(pe){try{ve(ne.throw(pe))}catch(Ne){ce(Ne)}}function ve(pe){pe.done?z(pe.value):function Y(z){return z instanceof re?z:new re(function(ce){ce(z)})}(pe.value).then(le,_e)}ve((ne=ne.apply(fe,ue||[])).next())})},v=this&&this.__generator||function(fe,ue){var ne,Y,z,ce,re={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return ce={next:le(0),throw:le(1),return:le(2)},"function"==typeof Symbol&&(ce[Symbol.iterator]=function(){return this}),ce;function le(ve){return function(pe){return function _e(ve){if(ne)throw new TypeError("Generator is already executing.");for(;re;)try{if(ne=1,Y&&(z=2&ve[0]?Y.return:ve[0]?Y.throw||((z=Y.return)&&z.call(Y),0):Y.next)&&!(z=z.call(Y,ve[1])).done)return z;switch(Y=0,z&&(ve=[2&ve[0],z.value]),ve[0]){case 0:case 1:z=ve;break;case 4:return re.label++,{value:ve[1],done:!1};case 5:re.label++,Y=ve[1],ve=[0];continue;case 7:ve=re.ops.pop(),re.trys.pop();continue;default:if(!(z=(z=re.trys).length>0&&z[z.length-1])&&(6===ve[0]||2===ve[0])){re=0;continue}if(3===ve[0]&&(!z||ve[1]>z[0]&&ve[1]<z[3])){re.label=ve[1];break}if(6===ve[0]&&re.label<z[1]){re.label=z[1],z=ve;break}if(z&&re.label<z[2]){re.label=z[2],re.ops.push(ve);break}z[2]&&re.ops.pop(),re.trys.pop();continue}ve=ue.call(fe,re)}catch(pe){ve=[6,pe],Y=0}finally{ne=z=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,pe])}}};Object.defineProperty(H,"__esModule",{value:!0}),H.runPreflight=H.PreflightTest=void 0;var m=w(8701),d=w(1567),u=w(2436),f=w(9305),h=w(2449),_=w(5359),b=w(5237),y=w(3519),M=w(9739),E=w(8701).WS_SERVER,C=w(1458),S=w(133),V=w(8218),F=w(8606),j=w(3744),N=w(8066),R=N.createSID,P=N.sessionSID,T=w(8380),x=T.SignalingConnectionTimeoutError,L=T.MediaConnectionError,G=1e4;function X(fe){return null!==fe&&typeof fe<"u"}var J=0,ee=function(fe){function ue(re,ne){var Y=fe.call(this)||this;Y._testTiming=new d.Timer,Y._dtlsTiming=new d.Timer,Y._iceTiming=new d.Timer,Y._peerConnectionTiming=new d.Timer,Y._mediaTiming=new d.Timer,Y._connectTiming=new d.Timer,Y._sentBytesMovingAverage=new V,Y._packetLossMovingAverage=new V,Y._progressEvents=[],Y._receivedBytesMovingAverage=new V;var ce=ne.environment,le=void 0===ce?"prod":ce,_e=ne.region,pe=ne.duration,Ne=void 0===pe?G:pe,ze=ne.wsServer||E(le,void 0===_e?"gll":_e);return Y._log=new C("default",Y,m.DEFAULT_LOG_LEVEL,m.DEFAULT_LOGGER_NAME),Y._testDuration=Ne,Y._instanceId=J++,Y._testTiming.start(),Y._runPreflightTest(re,le,ze),Y}return k(ue,fe),ue.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},ue.prototype.stop=function(){this._stopped=!0},ue.prototype._generatePreflightReport=function(re){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:_.makeStat(re?.jitter),rtt:_.makeStat(re?.rtt),packetLoss:_.makeStat(re?.packetLoss)},selectedIceCandidatePairStats:re?re.selectedIceCandidatePairStats:null,iceCandidateStats:re?re.iceCandidateStats:[],progressEvents:this._progressEvents,mos:_.makeStat(re?.mos)}},ue.prototype._executePreflightStep=function(re,ne,Y){return I(this,void 0,void 0,function(){var z,ce,le,_e;return v(this,function(pe){switch(pe.label){case 0:if(this._log.debug("Executing step: ",re),z=this._testDuration+1e4,this._stopped)throw new Error("stopped");ce=Promise.resolve().then(ne),le=null,_e=new Promise(function(Ne,ze){le=setTimeout(function(){ze(Y||new Error(re+" timeout."))},z)}),pe.label=1;case 1:return pe.trys.push([1,,3,4]),[4,Promise.race([_e,ce])];case 2:return[2,pe.sent()];case 3:return null!==le&&clearTimeout(le),[7];case 4:return[2]}})})},ue.prototype._collectNetworkTimings=function(re){var ne=this;return new Promise(function(Y){var z;re.addEventListener("iceconnectionstatechange",function(){"checking"===re.iceConnectionState&&ne._iceTiming.start(),"connected"===re.iceConnectionState&&(ne._iceTiming.stop(),ne._updateProgress("iceConnected"),(!z||z&&"connected"===z.state)&&Y())}),re.addEventListener("connectionstatechange",function(){"connecting"===re.connectionState&&ne._peerConnectionTiming.start(),"connected"===re.connectionState&&(ne._peerConnectionTiming.stop(),ne._updateProgress("peerConnectionConnected"))});var le=re.getSenders().map(function(_e){return _e.transport}).find(X);typeof le<"u"&&(z=le).addEventListener("statechange",function(){"connecting"===z.state&&ne._dtlsTiming.start(),"connected"===z.state&&(ne._dtlsTiming.stop(),ne._updateProgress("dtlsConnected"),"connected"===re.iceConnectionState&&Y())})})},ue.prototype._setupInsights=function(re){var Y=re.environment,ce=re.realm,ve=new j(re.token,m.SDK_NAME,m.SDK_VERSION,void 0===Y?m.DEFAULT_ENVIRONMENT:Y,void 0===ce?m.DEFAULT_REALM:ce,{});ve.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var pe=new F(ve,Date.now(),this._log),Ne=void 0;return{reportToInsights:function(ze){var qe,tt,He=ze.report,Qe=He.stats.jitter||Ne,Xe=He.stats.rtt||Ne,bt=He.stats.packetLoss||Ne,It=He.mos||Ne,Qt=new Map;He.iceCandidateStats.forEach(function(Vt){if(Vt.candidateType&&Vt.protocol){var he=Qt.get(Vt.candidateType)||[];he.indexOf(Vt.protocol)<0&&he.push(Vt.protocol),Qt.set(Vt.candidateType,he)}});var An=JSON.stringify(Object.fromEntries(Qt)),Ft={name:"report",group:"preflight",level:He.error?"error":"info",payload:{sessionSID:P,preflightSID:R("PF"),progressEvents:JSON.stringify(He.progressEvents),testTiming:He.testTiming,dtlsTiming:He.networkTiming.dtls,iceTiming:He.networkTiming.ice,peerConnectionTiming:He.networkTiming.peerConnection,connectTiming:He.networkTiming.connect,mediaTiming:He.networkTiming.media,selectedLocalCandidate:null===(qe=He.selectedIceCandidatePairStats)||void 0===qe?void 0:qe.localCandidate,selectedRemoteCandidate:null===(tt=He.selectedIceCandidatePairStats)||void 0===tt?void 0:tt.remoteCandidate,iceCandidateStats:An,jitterStats:Qe,rttStats:Xe,packetLossStats:bt,mosStats:It,error:He.error}};pe.emit("event",Ft),setTimeout(function(){return ve.disconnect()},2e3)}}},ue.prototype._runPreflightTest=function(re,ne,Y){return I(this,void 0,void 0,function(){var z,ce,le,_e,ve,pe,Ne,ze,qe,tt,He,Qe,Xe=this;return v(this,function(bt){switch(bt.label){case 0:z=[],ce=[],le=this._setupInsights({token:re,environment:ne}).reportToInsights,bt.label=1;case 1:return bt.trys.push([1,8,9,10]),_e=[],[4,this._executePreflightStep("Acquire media",function(){return[b.syntheticAudio(),y.syntheticVideo({width:640,height:480})]})];case 2:return z=bt.sent(),this._updateProgress("mediaAcquired"),this.emit("debug",{localTracks:z}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return h.getTurnCredentials(re,Y)},new x)];case 3:return ve=bt.sent(),this._connectTiming.stop(),this._updateProgress("connected"),pe=new RTCPeerConnection({iceServers:ve,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),Ne=new RTCPeerConnection({iceServers:ve,bundlePolicy:"max-bundle"}),ce.push(pe),ce.push(Ne),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return I(Xe,void 0,void 0,function(){var It,Qt,An,Ft;return v(this,function(Vt){switch(Vt.label){case 0:return pe.addEventListener("icecandidate",function(he){return he.candidate&&Ne.addIceCandidate(he.candidate)}),Ne.addEventListener("icecandidate",function(he){return he.candidate&&pe.addIceCandidate(he.candidate)}),z.forEach(function(he){return pe.addTrack(he)}),It=new Promise(function(he){var te=[];Ne.addEventListener("track",function(K){te.push(K.track),te.length===z.length&&he(te)})}),[4,pe.createOffer()];case 1:return Qt=Vt.sent(),[4,pe.setLocalDescription(An=Qt)];case 2:return Vt.sent(),[4,Ne.setRemoteDescription(An)];case 3:return Vt.sent(),[4,Ne.createAnswer()];case 4:return Ft=Vt.sent(),[4,Ne.setLocalDescription(Ft)];case 5:return Vt.sent(),[4,pe.setRemoteDescription(Ft)];case 6:return Vt.sent(),[4,this._collectNetworkTimings(pe)];case 7:return Vt.sent(),[2,It]}})})},new L)];case 4:return ze=bt.sent(),this.emit("debug",{remoteTracks:ze}),ze.forEach(function(It){It.addEventListener("ended",function(){return Xe._log.warn(It.kind+":ended")}),It.addEventListener("mute",function(){return Xe._log.warn(It.kind+":muted")}),It.addEventListener("unmute",function(){return Xe._log.warn(It.kind+":unmuted")})}),this._updateProgress("mediaSubscribed"),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(It){var Qt=document.createElement("video");Qt.autoplay=!0,Qt.playsInline=!0,Qt.muted=!0,Qt.srcObject=new MediaStream(ze),_e.push(Qt),Xe.emit("debugElement",Qt),Qt.oncanplay=It})},new L)];case 5:return bt.sent(),this._mediaTiming.stop(),this._updateProgress("mediaStarted"),[4,this._executePreflightStep("Collect stats for duration",function(){return Xe._collectRTCStatsForDuration(Xe._testDuration,{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]},pe,Ne)})];case 6:return qe=bt.sent(),[4,this._executePreflightStep("Generate report",function(){return Xe._generatePreflightReport(qe)})];case 7:return tt=bt.sent(),le({report:tt}),this.emit("completed",tt),[3,10];case 8:return He=bt.sent(),Qe=this._generatePreflightReport(),le({report:D(D({},Qe),{error:He?.toString()})}),this.emit("failed",He,Qe),[3,10];case 9:return ce.forEach(function(It){return It.close()}),z.forEach(function(It){return It.stop()}),[7];case 10:return[2]}})})},ue.prototype._collectRTCStats=function(re,ne,Y){return I(this,void 0,void 0,function(){var z,ce,le,_e,ve,pe,Ne,ze,qe,tt,He,Qe,Xe,bt;return v(this,function(It){switch(It.label){case 0:return[4,f.getCombinedConnectionStats({publisher:ne,subscriber:Y})];case 1:return z=It.sent(),ce=z.timestamp,le=z.bytesSent,_e=z.bytesReceived,ve=z.packets,pe=z.packetsLost,Ne=z.roundTripTime,qe=z.selectedIceCandidatePairStats,tt=z.iceCandidateStats,He=re.jitter.length>0,re.jitter.push(ze=z.jitter),re.rtt.push(Ne),this._sentBytesMovingAverage.putSample(le,ce),this._receivedBytesMovingAverage.putSample(_e,ce),this._packetLossMovingAverage.putSample(pe,ve),He&&(re.outgoingBitrate.push(1e3*this._sentBytesMovingAverage.get()*8),re.incomingBitrate.push(1e3*this._receivedBytesMovingAverage.get()*8),Qe=this._packetLossMovingAverage.get(),Xe=Math.min(100,100*Qe),re.packetLoss.push(Xe),bt=u.calculateMOS(Ne,ze,Qe),re.mos.push(bt)),re.selectedIceCandidatePairStats||(re.selectedIceCandidatePairStats=qe),0===re.iceCandidateStats.length&&(re.iceCandidateStats=tt),[2]}})})},ue.prototype._collectRTCStatsForDuration=function(re,ne,Y,z){return I(this,void 0,void 0,function(){var ce,le,_e;return v(this,function(ve){switch(ve.label){case 0:return ce=Date.now(),le=Math.min(1e3,re),[4,M.waitForSometime(le)];case 1:return ve.sent(),[4,this._collectRTCStats(ne,Y,z)];case 2:return ve.sent(),(_e=re-(Date.now()-ce))>0?[4,this._collectRTCStatsForDuration(_e,ne,Y,z)]:[3,4];case 3:ne=ve.sent(),ve.label=4;case 4:return[2,ne]}})})},ue.prototype._updateProgress=function(re){var ne=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:ne,name:re}),this.emit("progress",re)},ue}(S);H.PreflightTest=ee,H.runPreflight=function ie(fe,ue){return void 0===ue&&(ue={}),new ee(fe,ue)}},5237:($,H,w)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.syntheticAudio=void 0,H.syntheticAudio=function k(){var D=w(7708),I={},v=D.getOrCreate(I),m=v.createOscillator(),d=m.connect(v.createMediaStreamDestination());m.start();var u=d.stream.getAudioTracks()[0],f=u.stop;return u.stop=function(){f.call(u),D.release(I)},u}},3519:($,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.syntheticVideo=void 0,H.syntheticVideo=function w(k){var D=void 0===k?{}:k,I=D.width,v=void 0===I?640:I,m=D.height,d=void 0===m?480:m,u=Object.assign(document.createElement("canvas"),{width:v,height:d}),f=u.getContext("2d");f.fillStyle="green",f.fillRect(0,0,u.width,u.height);var h=!1;requestAnimationFrame(function M(){if(!h){var E=Math.round(255*Math.random()),C=Math.round(255*Math.random()),S=Math.round(255*Math.random()),V=Math.round(255*Math.random());f.fillStyle="rgba("+E+", "+C+", "+S+", "+V+")",f.fillRect(Math.random()*v,Math.random()*d,50,50),requestAnimationFrame(M)}});var b=u.captureStream(30).getTracks()[0],y=b.stop;return b.stop=function(){h=!0,y.call(b)},b}},1567:($,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Timer=void 0;var w=function(){function k(){this._end=void 0,this.start()}return k.prototype.start=function(){return this._start=Date.now(),this},k.prototype.stop=function(){return this._end=Date.now(),this},k.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:void 0===this._end?void 0:this._end-this._start}},k}();H.Timer=w},7772:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=this&&this.__read||function(d,u){var f="function"==typeof Symbol&&d[Symbol.iterator];if(!f)return d;var _,y,h=f.call(d),b=[];try{for(;(void 0===u||u-- >0)&&!(_=h.next()).done;)b.push(_.value)}catch(M){y={error:M}}finally{try{_&&!_.done&&(f=h.return)&&f.call(h)}finally{if(y)throw y.error}}return b},I=this&&this.__spreadArray||function(d,u){for(var f=0,h=u.length,_=d.length;f<h;f++,_++)d[_]=u[f];return d},m=function(d){function u(){var f=d.call(this)||this;return Object.defineProperties(f,{_queuedEvents:{value:new Map}}),f}return k(u,d),u.prototype.dequeue=function(f){var h=this,_=!0;if(!f)return this._queuedEvents.forEach(function(y,M){_=this.dequeue(M)&&_},this),_;var b=this._queuedEvents.get(f)||[];return this._queuedEvents.delete(f),b.reduce(function(y,M){return h.emit.apply(h,I([],D([f].concat(M))))&&y},_)},u.prototype.queue=function(){var f=[].slice.call(arguments);if(this.emit.apply(this,I([],D(f))))return!0;var h=f[0];return this._queuedEvents.has(h)||this._queuedEvents.set(h,[]),this._queuedEvents.get(h).push(f.slice(1)),!1},u}(w(9069).EventEmitter);$.exports=m},3609:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=this&&this.__read||function(d,u){var f="function"==typeof Symbol&&d[Symbol.iterator];if(!f)return d;var _,y,h=f.call(d),b=[];try{for(;(void 0===u||u-- >0)&&!(_=h.next()).done;)b.push(_.value)}catch(M){y={error:M}}finally{try{_&&!_.done&&(f=h.return)&&f.call(h)}finally{if(y)throw y.error}}return b},I=this&&this.__spreadArray||function(d,u){for(var f=0,h=u.length,_=d.length;f<h;f++,_++)d[_]=u[f];return d},m=function(d){function u(f,h){var _=d.call(this,f,h)||this;return _._handleTrackSignalingEvents(),_.once("disconnected",_._unsubscribeTracks.bind(_)),_}return k(u,d),u.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},u.prototype._addTrack=function(f,h,_){return d.prototype._addTrack.call(this,f,_)?(h._subscribed(f),this.emit("trackSubscribed",f,h),f):null},u.prototype._addTrackPublication=function(f){var h=d.prototype._addTrackPublication.call(this,f);return h?(this.emit("trackPublished",h),h):null},u.prototype._getTrackPublicationEvents=function(){return I(I([],D(d.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},u.prototype._unsubscribeTracks=function(){var f=this;this.tracks.forEach(function(h){if(h.isSubscribed){var _=h.track;h._unsubscribe(),f.emit("trackUnsubscribed",_,h)}})},u.prototype._removeTrack=function(f,h,_){var b=this._tracks.get(_);return b?(d.prototype._removeTrack.call(this,b,_),h._unsubscribe(),this.emit("trackUnsubscribed",b,h),b):null},u.prototype._removeTrackPublication=function(f){this._signaling.clearTrackHint(f.trackSid);var h=d.prototype._removeTrackPublication.call(this,f);return h?(this.emit("trackUnpublished",h),h):null},u}(w(9218));$.exports=m},7406:function($,H,w){"use strict";var F,k=this&&this.__extends||(F=function(j,N){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,P){R.__proto__=P}||function(R,P){for(var T in P)Object.prototype.hasOwnProperty.call(P,T)&&(R[T]=P[T])})(j,N)},function(j,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function R(){this.constructor=j}F(j,N),j.prototype=null===N?Object.create(N):(R.prototype=N.prototype,new R)}),D=this&&this.__read||function(F,j){var N="function"==typeof Symbol&&F[Symbol.iterator];if(!N)return F;var P,x,R=N.call(F),T=[];try{for(;(void 0===j||j-- >0)&&!(P=R.next()).done;)T.push(P.value)}catch(L){x={error:L}}finally{try{P&&!P.done&&(N=R.return)&&N.call(R)}finally{if(x)throw x.error}}return T},I=this&&this.__spreadArray||function(F,j){for(var N=0,R=j.length,P=F.length;N<R;N++,P++)F[P]=j[N];return F},v=w(133),m=w(3609),d=w(7805),u=w(9739),f=u.flatMap,h=u.valueToJSON,_=0,b=function(F){function j(N,R,P){var T=F.call(this)||this,x=P.log.createLog("default",T),L=new Map;return Object.defineProperties(T,{_log:{value:x},_clientTrackSwitchOffControl:{value:P.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:P.contentPreferencesMode||"disabled"},_instanceId:{value:++_},_options:{value:P},_participants:{value:L},_signaling:{value:R},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(R.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return R.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:N},name:{enumerable:!0,value:R.name},participants:{enumerable:!0,value:L},sid:{enumerable:!0,value:R.sid},state:{enumerable:!0,get:function(){return R.state}},mediaRegion:{enumerable:!0,value:R.mediaRegion}}),function C(F,j){var N=["trackWarning","trackWarningsCleared"].map(function(R){return{eventName:R,handler:function(){for(var P=[],T=0;T<arguments.length;T++)P[T]=arguments[T];return F.emit.apply(F,I([R],D(I(I([],D(P)),[j]))))}}});N.forEach(function(R){return j.on(R.eventName,R.handler)}),F.once("disconnected",function(){return N.forEach(function(R){return j.removeListener(R.eventName,R.handler)})})}(T,N),function S(F,j){j.on("updated",function(){var R=j.isEnabled;F._log.info("Recording "+(R?"started":"stopped")),F.emit("recording"+(R?"Started":"Stopped"))})}(T,R.recording),function V(F,j){var N=F._log;N.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),j.participants.forEach(E.bind(null,F)),N.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),j.on("participantConnected",E.bind(null,F)),j.on("dominantSpeakerChanged",function(){return F.emit("dominantSpeakerChanged",F.dominantSpeaker)}),j.on("stateChanged",function R(P,T){switch(N.info("Transitioned to state:",P),P){case"disconnected":F.participants.forEach(function(x){x._unsubscribeTracks()}),F.emit(P,F,T),F.localParticipant.tracks.forEach(function(x){x.unpublish()}),j.removeListener("stateChanged",R);break;case"reconnecting":setTimeout(function(){return F.emit("reconnecting",T)},0);break;default:setTimeout(function(){return F.emit("reconnected")},0)}})}(T,R),function y(F){var j=F.localParticipant._signaling.audioProcessors;F.localParticipant.audioTracks.forEach(function(N){var P=N.track.noiseCancellation;P&&!j.includes(P.vendor)&&(F._log.warn(P.vendor+" is not supported in this room. disabling it permanently"),P.disablePermanently())})}(T),x.info("Created a new Room:",T.name),x.debug("Initial RemoteParticipants:",Array.from(T._participants.values())),T}return k(j,F),j.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},j.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},j.prototype.getStats=function(){var N=this;return this._signaling.getStats().then(function(R){return Array.from(R).map(function(P){var T=D(P,2),L=T[1];return new d(T[0],Object.assign({},L,{localAudioTrackStats:M(N,L.localAudioTrackStats),localVideoTrackStats:M(N,L.localVideoTrackStats)}))})})},j.prototype.refreshInactiveMedia=function(){var R=Array.from(this.localParticipant.tracks.values()).filter(function(B){return"data"!==B.track.kind}).map(function(B){return B.track}),P=f(this.participants,function(B){return Array.from(B.tracks.values())}).filter(function(B){var G=B.track;return G&&"data"!==G.kind}).map(function(B){return B.track}),T=R.concat(P),x=new Event("unmute");R.forEach(function(B){B.isMuted&&B.mediaStreamTrack.dispatchEvent(x)});var L=new Event("pause");return T.forEach(function(B){var W=B._elShims;return B._attachments.forEach(function(X){var J=W.get(X);X.paused&&J&&!J.pausedIntentionally()&&X.dispatchEvent(L)})}),this},j.prototype.toJSON=function(){return h(this)},j}(v);function M(F,j){var N=F.localParticipant._signaling;return j.reduce(function(R,P){var T=N.tracks.get(P.trackId),x=N.getSender(T);return x?[Object.assign({},P,{trackId:x.id})].concat(R):R},[])}function E(F,j){var N=F._log,T=new m(j,{log:N,clientTrackSwitchOffControl:F._clientTrackSwitchOffControl,contentPreferencesMode:F._contentPreferencesMode});N.info("A new RemoteParticipant connected:",T),F._participants.set(T.sid,T),F.emit("participantConnected",T);var x=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(L){var B=D(Array.isArray(L)?L:[L,L],2),G=B[0],W=B[1];function X(){var J=[].slice.call(arguments);J.unshift(W),J.push(T),F.emit.apply(F,I([],D(J)))}return T.on(G,X),[G,X]});T.once("disconnected",function(){var B=F.dominantSpeaker;N.info("RemoteParticipant disconnected:",T),F._participants.delete(T.sid),x.forEach(function(G){T.removeListener(G[0],G[1])}),F.emit("participantDisconnected",T),T===B&&F.emit("dominantSpeakerChanged",F.dominantSpeaker)})}$.exports=b},8043:function($,H,w){"use strict";var u,k=this&&this.__extends||(u=function(f,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(f,h)},function(f,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function _(){this.constructor=f}u(f,h),f.prototype=null===h?Object.create(h):(_.prototype=h.prototype,new _)}),D=w(9285),I=w(8343),v=w(8675),m={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},d=function(u){function f(){return u.call(this,"closed",m)||this}return k(f,u),f.prototype._close=function(h){return this.transition("closing",h),this.transition("closed",h),Promise.resolve(this)},f.prototype._connect=function(h,_,b,y,M){h.connect("PA00000000000000000000000000000000","test");var C=Promise.resolve(new I(h,"RM00000000000000000000000000000000",M));return C.cancel=function(){},C},f.prototype._open=function(h){return this.transition("opening",h),this.transition("open",h),Promise.resolve(this)},f.prototype.close=function(){var h=this;return this.bracket("close",function(_){switch(h.state){case"closed":return h;case"open":return h._close(_);default:throw new Error('Unexpected Signaling state "'+h.state+'"')}})},f.prototype.connect=function(h,_,b,y,M){var E=this;return this.bracket("connect",function C(S){switch(E.state){case"closed":return E._open(S).then(C.bind(null,S));case"open":return E.releaseLockCompletely(S),E._connect(h,_,b,y,M);default:throw new Error('Unexpected Signaling state "'+E.state+'"')}})},f.prototype.createLocalParticipantSignaling=function(){return new D},f.prototype.open=function(){var h=this;return this.bracket("open",function(_){switch(h.state){case"closed":return h._open(_);case"open":return h;default:throw new Error('Unexpected Signaling state "'+h.state+'"')}})},f}(v);$.exports=d},5677:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(){var d=v.call(this)||this;return Object.defineProperties(d,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),d}return k(m,v),m.prototype.addTrack=function(d,u,f,h){void 0===h&&(h=null);var _=this._createLocalTrackPublicationSignaling(d,u,f,h);return this._trackSendersToPublications.set(d,_),this._publicationsToTrackSenders.set(_,d),v.prototype.addTrack.call(this,_),this},m.prototype.getPublication=function(d){return this._trackSendersToPublications.get(d)||null},m.prototype.getSender=function(d){return this._publicationsToTrackSenders.get(d)||null},m.prototype.removeTrack=function(d){var u=this._trackSendersToPublications.get(d);return u?(this._trackSendersToPublications.delete(d),this._publicationsToTrackSenders.delete(u),v.prototype.removeTrack.call(this,u)&&u.stop(),u):null},m}(w(9285));$.exports=I},3157:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),I=function(m){function d(u,f,h){var _=this;return u=u.clone(),(_=m.call(this,f,u.kind,"data"===u.kind||u.track.enabled,h)||this).setTrackTransceiver(u),Object.defineProperties(_,{_updatedPriority:{value:h,writable:!0},id:{enumerable:!0,value:u.id}}),_}return k(d,m),Object.defineProperty(d.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),d.prototype.enable=function(u){return this.trackTransceiver.track.enabled=u="boolean"!=typeof u||u,m.prototype.enable.call(this,u)},d.prototype.publishFailed=function(u){return function v(m,d){return null===m._sid&&!m._error&&(m._error=d,!0)}(this,u)&&this.emit("updated"),this},d.prototype.setPriority=function(u){return this._updatedPriority!==u&&(this._updatedPriority=u,this.emit("updated")),this},d.prototype.setSid=function(u){return this._error?this:m.prototype.setSid.call(this,u)},d.prototype.stop=function(){this.trackTransceiver.stop()},d}(w(8194));$.exports=I},9285:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=w(8675),I=w(669),v={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},m=function(d){function u(){var f=d.call(this,"connecting",v)||this;return Object.defineProperties(f,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),f}return k(u,d),Object.defineProperty(u.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),u.prototype.addTrack=function(f){return this.tracks.set(f.id||f.sid,f),this.emit("trackAdded",f),this},u.prototype.disconnect=function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)},u.prototype.removeTrack=function(f){var h=this.tracks.get(f.id||f.sid);return this.tracks.delete(f.id||f.sid),h&&this.emit("trackRemoved",f),h||null},u.prototype.setNetworkQualityLevel=function(f,h){this._networkQualityLevel!==f&&(this._networkQualityLevel=f,this._networkQualityStats=h&&(h.audio||h.video)?new I(h):null,this.emit("networkQualityLevelChanged"))},u.prototype.connect=function(f,h){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=f),this._identity||(this._identity=h),this.preempt("connected"),!0)},u.prototype.reconnecting=function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)},u}(D);$.exports=m},9987:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(){var d=v.call(this)||this;return Object.defineProperties(d,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),d}return k(m,v),m.prototype.disable=function(){return this.enable(!1)},m.prototype.enable=function(d){return this.isEnabled!==(d="boolean"!=typeof d||d)&&(this._isEnabled=d,this.emit("updated")),this},m}(w(9069).EventEmitter);$.exports=I},2184:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this)||this;return f.connect(d,u),f}return k(m,v),m}(w(9285));$.exports=I},8956:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f,h,_,b){var y=v.call(this,u,f,h,_)||this;return Object.defineProperties(y,{_isSwitchedOff:{value:b,writable:!0}}),y.setSid(d),y}return k(m,v),Object.defineProperty(m.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),m.prototype.subscribeFailed=function(d){return this.error||(this._error=d,this.emit("updated")),this},m.prototype.setPriority=function(d){return this._priority!==d&&(this._priority=d,this.emit("updated")),this},m.prototype.setSwitchedOff=function(d){return this._isSwitchedOff!==d&&(this._isSwitchedOff=d,this.emit("updated")),this},m}(w(8194));$.exports=I},8343:function($,H,w){"use strict";var S,k=this&&this.__extends||(S=function(V,F){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,N){j.__proto__=N}||function(j,N){for(var R in N)Object.prototype.hasOwnProperty.call(N,R)&&(j[R]=N[R])})(V,F)},function(V,F){if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function j(){this.constructor=V}S(V,F),V.prototype=null===F?Object.create(F):(j.prototype=F.prototype,new j)}),D=w(9987),I=w(8675),v=w(6543),m=w(9739).buildLogLevels,d=w(8701).DEFAULT_LOG_LEVEL,u=w(1458),f=w(8380),h=f.MediaConnectionError,_=f.MediaDTLSTransportFailedError,b=f.SignalingConnectionDisconnectedError,y=0,M={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},E=function(S){function V(F,j,N,R){var P=this;R=Object.assign({logLevel:d,RecordingSignaling:D,Timeout:v},R);var T=m(R.logLevel);P=S.call(this,"connected",M)||this;var x=R.RecordingSignaling,L=new R.Timeout(function(){P._disconnect(P._reconnectingError)},R.sessionTimeout,!1);return Object.defineProperties(P,{_instanceId:{value:y++},_log:{value:R.log?R.log.createLog("default",P):new u("default",P,T,R.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:R},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:L},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:F},name:{enumerable:!0,value:N},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new x},sid:{enumerable:!0,value:j}}),P.on("connectionStateChanged",function(){"failed"===P.connectionState&&!["disconnected","failed"].includes(P.iceConnectionState)&&P._disconnect(new _)}),P.on("iceConnectionStateChanged",function(){return C(P)}),P.on("signalingConnectionStateChanged",function(){return C(P)}),setTimeout(function(){return C(P)}),P}return k(V,S),V.prototype._disconnect=function(F){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[F]),!0)},V.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},V.prototype.connectParticipant=function(F){var j=this;return"disconnected"!==F.state&&!this.participants.has(F.sid)&&(this.participants.set(F.sid,F),F.on("stateChanged",function N(R){"disconnected"===R&&(F.removeListener("stateChanged",N),j.participants.delete(F.sid),j.emit("participantDisconnected",F))}),this.emit("participantConnected",F),!0)},V.prototype.disconnect=function(){return this._disconnect()},V.prototype.setDominantSpeaker=function(F){this.dominantSpeakerSid=F,this.emit("dominantSpeakerChanged")},V}(I);function C(S){var V;"disconnected"!==S.state&&"disconnected"!==S.signalingConnectionState?("reconnecting"===S.signalingConnectionState?V=S.signalingConnectionState:"failed"===S.iceConnectionState?(S._mediaConnectionIsReconnecting=!0,V="reconnecting"):"new"===S.iceConnectionState||"checking"===S.iceConnectionState?V=S._mediaConnectionIsReconnecting?"reconnecting":"connected":(S._mediaConnectionIsReconnecting=!1,S._reconnectingError=null,S._sessionTimeout.clear(),V="connected"),V!==S.state&&("reconnecting"===V?(S._reconnectingError="reconnecting"===S.signalingConnectionState?new b:new h,S._sessionTimeout.start(),S.preempt(V,null,[S._reconnectingError])):S.preempt(V))):S._sessionTimeout.clear()}$.exports=E},8194:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f,h){var _=v.call(this)||this,b=null;return Object.defineProperties(_,{_error:{value:null,writable:!0},_isEnabled:{value:f,writable:!0},_priority:{value:h,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return b},set:function(y){null===b&&(b=y)}},kind:{enumerable:!0,value:u},name:{enumerable:!0,value:d}}),_}return k(m,v),Object.defineProperty(m.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),m.prototype.disable=function(){return this.enable(!1)},m.prototype.enable=function(d){return this.isEnabled!==(d="boolean"!=typeof d||d)&&(this._isEnabled=d,this.emit("updated")),this},m.prototype.setTrackTransceiver=function(d){return this.trackTransceiver!==(d=d||null)&&(this._trackTransceiver=d,this.emit("updated")),this},m.prototype.setSid=function(d){return null===this.sid&&(this._sid=d,this.emit("updated")),this},m}(w(9069).EventEmitter);$.exports=I},7697:($,H,w)=>{"use strict";var k=w(8126),D=w(6603),I=w(2112),v=w(4892),m=w(8380),d=m.SignalingConnectionDisconnectedError,u=m.SignalingIncomingMessageInvalidError,f=w(9739),h=f.flatMap,_=f.createRoomConnectEventPayload;$.exports=function b(y,M,E,C,S,V){V=Object.assign({PeerConnectionManager:D,RoomV2:I,Transport:v},V);var F=S.video[0]&&!0===S.video[0].adaptiveSimulcast,N=V.RoomV2,R=V.Transport,P=V.iceServers,T=V.log,x=new(0,V.PeerConnectionManager)(C,S,V),L=h(E.tracks,function(X){return[X.trackTransceiver]});x.setTrackSenders(L);var G,B=new Error("Canceled"),W=new k(function(X,J,ee){var fe=V.bandwidthProfile,ne=V.eventObserver,ce=V.name,He=Object.assign({adaptiveSimulcast:F,automaticSubscription:V.automaticSubscription,dominantSpeaker:V.dominantSpeaker,environment:V.environment,eventObserver:ne,loggerName:V.loggerName,logLevel:V.logLevel,networkMonitor:V.networkMonitor,networkQuality:V.networkQuality,notifyWarnings:V.notifyWarnings,iceServers:P,onIced:function(Xe){return ee()?(J(B),Promise.reject(B)):(T.debug("Got ICE servers:",Xe),V.iceServers=Xe,x.setConfiguration(V),x.createAndOffer().then(function(){if(ee())throw J(B),B;T.debug("createAndOffer() succeeded."),x.dequeue("description")}).catch(function(bt){throw T.error("createAndOffer() failed:",bt),J(bt),bt}))},realm:V.realm,renderHints:!!fe&&("disabled"!==V.clientTrackSwitchOffControl||"disabled"!==V.contentPreferencesMode),sdpSemantics:V.sdpSemantics,trackPriority:!!fe,trackSwitchOff:!!fe},fe?{bandwidthProfile:fe}:{});G=new R(ce,y,E,x,M,He);var Qe=_(V);ne.emit("event",Qe),G.once("connected",function(Xe){T.debug("Transport connected:",Xe),ee()?J(B):Xe.participant?X(new N(E,Xe,G,x,V)):J(new u)}),G.once("stateChanged",function(Xe,bt){"disconnected"===Xe?(G=null,J(bt||new d)):T.debug("Transport state changed:",Xe)})},function(){G&&(G.disconnect(),G=null)});return W.catch(function(){G&&(G.disconnect(),G=null),x.close()}),W}},2314:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d,"active_speaker",u)||this;return Object.defineProperties(f,{_loudestParticipantSid:{value:null,writable:!0}}),f.on("ready",function(h){h.on("message",function(_){"active_speaker"===_.type&&f._setLoudestParticipantSid(_.participant)})}),f}return k(m,v),Object.defineProperty(m.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),m.prototype._setLoudestParticipantSid=function(d){this.loudestParticipantSid!==d&&(this._loudestParticipantSid=d,this.emit("updated"))},m}(w(4071));$.exports=I},380:($,H,w)=>{"use strict";var k=w(3826),D=function(){function I(){Object.defineProperties(this,{_filter:{value:new k({getKey:function(m){return m.ufrag},isLessThanOrEqualTo:function(m,d){return m.revision<=d.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return I.prototype.setUfrag=function(v){this._ufrag=v;var m=this._filter.toMap().get(v);return m?m.candidates:[]},I.prototype.update=function(v){v.candidates=v.candidates||[];var m=this._filter.toMap().get(v.ufrag),d=m?m.candidates:[];return this._filter.update(v)&&this._ufrag===v.ufrag?v.candidates.slice(d.length):[]},I}();$.exports=D},2282:($,H,w)=>{"use strict";var k=w(8701),D=k.ICE_ACTIVITY_CHECK_PERIOD_MS,I=k.ICE_INACTIVITY_THRESHOLD_MS,v=function(){function m(d,u){u=Object.assign({activityCheckPeriodMs:D,inactivityThresholdMs:I},u),Object.defineProperties(this,{_activityCheckPeriodMs:{value:u.activityCheckPeriodMs},_inactivityThresholdMs:{value:u.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:d},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return m.prototype._getActivePairStat=function(d){return Array.from(d.values()).find(function(h){return"candidate-pair"===h.type&&h.nominated})||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}},m.prototype._getIceConnectionStats=function(){var d=this;return this._peerConnection.getStats().then(function(u){return d._getActivePairStat(u)}).catch(function(){return null})},m.prototype._scheduleInactivityCallback=function(d){var u=this;d&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===u._peerConnection.iceConnectionState&&d()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!d&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)},m.prototype.start=function(d){var u=this;this.stop(),this._timer=setInterval(function(){u._getIceConnectionStats().then(function(f){f&&((!u._lastActivity||u._lastActivity.bytesReceived!==f.bytesReceived)&&(u._lastActivity=f,u._scheduleInactivityCallback(null)),f.timestamp-u._lastActivity.timestamp>=u._inactivityThresholdMs&&("disconnected"===u._peerConnection.iceConnectionState?d():null===u._onIceConnectionStateChanged&&u._scheduleInactivityCallback(d)))})},this._activityCheckPeriodMs)},m.prototype.stop=function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},m}();$.exports=v},448:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=w(7697),I=w(523),m=function(d){function u(f,h){var _;return h=Object.assign({createCancelableRoomSignalingPromise:D},h),_=d.call(this)||this,Object.defineProperties(_,{_createCancelableRoomSignalingPromise:{value:h.createCancelableRoomSignalingPromise},_options:{value:h},_wsServer:{value:f}}),_}return k(u,d),u.prototype._connect=function(f,h,_,b,y){return y=Object.assign({},this._options,y),this._createCancelableRoomSignalingPromise.bind(null,h,this._wsServer,f,_,b,y)},u.prototype.createLocalParticipantSignaling=function(f,h){return new I(f,h)},u}(w(8043));$.exports=m},523:function($,H,w){"use strict";var _,k=this&&this.__extends||(_=function(b,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,E){M.__proto__=E}||function(M,E){for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(M[C]=E[C])})(b,y)},function(b,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function M(){this.constructor=b}_(b,y),b.prototype=null===y?Object.create(y):(M.prototype=y.prototype,new M)}),D=w(5677),I=w(5771),v=w(8701).DEFAULT_LOG_LEVEL,m=w(1458),d=w(9739),u=d.buildLogLevels,f=d.isDeepEqual,h=function(_){function b(y,M,E){var C;E=Object.assign({logLevel:v,LocalTrackPublicationV2:I},E),C=_.call(this)||this;var S=u(E.logLevel);return Object.defineProperties(C,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:y},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:E.LocalTrackPublicationV2},_log:{value:E.log?E.log.createLog("default",C):new m("default",C,S,E.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:M},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),C}return k(b,_),b.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},b.prototype.setSignalingRegion=function(y){this._signalingRegion||(this._signalingRegion=y)},b.prototype.setBandwidthProfile=function(y){f(this._bandwidthProfile,y)||(this._bandwidthProfile=JSON.parse(JSON.stringify(y)),this._bandwidthProfileRevision++,this.didUpdate())},b.prototype.setAudioProcessors=function(y){this.audioProcessors=y},b.prototype.getParameters=function(){return this._encodingParameters},b.prototype.setParameters=function(y){return this._encodingParameters.update(y),this},b.prototype.update=function(y){return this._publishedRevision>=y.revision||(this._publishedRevision=y.revision,y.tracks.forEach(function(M){var E=this.tracks.get(M.id);E&&E.update(M)},this)),this},b.prototype.updateMediaStates=function(y){return y&&y.tracks?(Array.from(this.tracks.values()).forEach(function(M){var E=y.tracks[M.sid];E&&M.updateMediaStates(E)}),this):this},b.prototype._createLocalTrackPublicationSignaling=function(y,M,E,C){return new this._LocalTrackPublicationV2(y,M,E,C,{log:this._log})},b.prototype.addTrack=function(y,M,E,C){var S=this;_.prototype.addTrack.call(this,y,M,E,C);var V=this.getPublication(y),F=V.isEnabled,j=V.updatedPriority,N=function(){(F!==V.isEnabled||j!==V.updatedPriority)&&(S.didUpdate(),F=V.isEnabled,j=V.updatedPriority)};return V.on("updated",N),this._removeListener(V),this._removeListeners.set(V,function(){return V.removeListener("updated",N)}),this.didUpdate(),this},b.prototype._removeListener=function(y){var M=this._removeListeners.get(y);M&&M()},b.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(y){return y.getState()})}},b.prototype.didUpdate=function(){this._revision++,this.emit("updated")},b.prototype.removeTrack=function(y){var M=_.prototype.removeTrack.call(this,y);return M&&(y.removeClone(M.trackTransceiver),this._removeListener(M),this.didUpdate()),M},b.prototype.setNetworkQualityConfiguration=function(y){this.networkQualityConfiguration.update(y)},b.prototype.setPublisherHint=function(y,M){var E=Array.from(this.tracks.values()).find(function(C){return C.sid===y});return E?E.trackTransceiver.setPublisherHint(M):(this._log.warn("track:"+y+" not found"),Promise.resolve("UNKNOWN_TRACK"))},b}(D);$.exports=h},5771:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=w(3157),I=w(2585),v=w(8380).createTwilioError,m=function(d){function u(f,h,_,b,y){var M=d.call(this,f,h,_)||this;return Object.defineProperties(M,{_log:{value:y.log.createLog("default",M)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:b}}),M}return k(u,d),u.prototype.getState=function(){var f={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(f.audio_processor=this._noiseCancellationVendor),f},u.prototype.toString=function(){return"[LocalTrackPublicationV2: "+this.sid+"]"},u.prototype.update=function(f){switch(f.state){case"ready":this.setSid(f.sid);break;case"failed":var h=f.error;this.publishFailed(v(h.code,h.message))}return this},u.prototype.updateMediaStates=function(f){if(!f||!f.recordings||this._mediaStates.recordings===f.recordings)return this;switch(this._mediaStates.recordings=f.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",I.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: "+this._mediaStates.recordings)}return this},u}(D);$.exports=m},4071:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(9069),I=0,v=function(m){function d(u,f,h){var _=m.call(this)||this;return Object.defineProperties(_,{_instanceId:{value:I++},channel:{value:f},_log:{value:h.log.createLog("default",_)},_getReceiver:{value:u},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),_}return k(d,m),Object.defineProperty(d.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),d.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},d.prototype.setup=function(u){var f=this;this._teardown(),this._log.info("setting up msp transport for id:",u);var h=this._getReceiver(u).then(function(_){if("data"!==_.kind&&f._log.error("Expected a DataTrackReceiver"),f._receiverPromise===h){try{f._transport=_.toDataTransport(),f.emit("ready",f._transport)}catch(b){f._log.error("Failed to toDataTransport: "+b.message)}_.once("close",function(){return f._teardown()})}});this._receiverPromise=h},d.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},d}(D);$.exports=v},9056:function($,H,w){"use strict";var u,k=this&&this.__extends||(u=function(f,h){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(_[y]=b[y])})(f,h)},function(f,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function _(){this.constructor=f}u(f,h),f.prototype=null===h?Object.create(h):(_.prototype=h.prototype,new _)}),D=this&&this.__read||function(u,f){var h="function"==typeof Symbol&&u[Symbol.iterator];if(!h)return u;var b,M,_=h.call(u),y=[];try{for(;(void 0===f||f-- >0)&&!(b=_.next()).done;)y.push(b.value)}catch(E){M={error:E}}finally{try{b&&!b.done&&(h=_.return)&&h.call(_)}finally{if(M)throw M.error}}return y},I=w(9069),v=w(8753),m=function(u){function f(h,_){var b=u.call(this)||this;return Object.defineProperties(b,{_factories:{value:new WeakMap},_manager:{value:h},_signaling:{value:_}}),_.on("updated",function(){return b.emit("updated")}),b}return k(f,u),Object.defineProperty(f.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),f.prototype.start=function(){var h=this;this.stop();var _=setTimeout(function(){h._timeout===_&&function d(u){var b=(u._manager._peerConnections?Array.from(u._manager._peerConnections.values()):[]).map(function(y){return y._peerConnection}).filter(function(y){return"closed"!==y.signalingState}).map(function(y){if(u._factories.has(y))return u._factories.get(y);var M=new v(y);return u._factories.set(y,M),M}).map(function(y){return y.next().catch(function(){return null})});return Promise.all(b).then(function(y){return y.filter(function(M){return M}).map(function(M){return M.summarize()})})}(h).then(function(b){if(h._timeout===_){if(b.length){var y=D(b,1);h._signaling.put(y[0])}h.start()}})},200);this._timeout=_},f.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},f}(I);$.exports=m},5775:function($,H,w){"use strict";var f,k=this&&this.__extends||(f=function(h,_){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(b[M]=y[M])})(h,_)},function(h,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function b(){this.constructor=h}f(h,_),h.prototype=null===_?Object.create(_):(b.prototype=_.prototype,new b)}),D=w(4071),I=w(6412),v=w(6543),m=5e3,d=function(f){function h(_,b,y){var M=f.call(this,_,"network_quality",y)||this;return Object.defineProperties(M,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new I},_resendTimer:{value:new v(function(){M._resendTimer.setDelay(1.5*M._resendTimer.delay),M._sendNetworkQualityInputs()},m,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:b.local,remoteReportLevel:b.remote}}}}),M.on("ready",function(E){E.on("message",function(C){"network_quality"===(M._log.debug("Incoming: ",C),C.type)&&M._handleNetworkQualityMessage(C)})}),M._sendNetworkQualityInputs(),M}return k(h,f),Object.defineProperty(h.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),h.prototype._handleNetworkQualityMessage=function(_){var b=this,y=!1,M=null,E=_?_.local:null;"number"==typeof E?(M=E,this._levels=null):"object"==typeof E&&E&&(this._levels=E,M="number"==typeof E.level?E.level:Math.min(E.audio.send,E.audio.recv,E.video.send,E.video.recv)),null!==M&&this.level!==M&&(this._level=M,y=!0),this._remoteLevels=_&&_.remotes?_.remotes.reduce(function(C,S){return(b._remoteLevels.get(S.sid)||{}).level!==S.level&&(y=!0),C.set(S.sid,S)},new Map):this._remoteLevels,y&&this.emit("updated"),this._resendTimer.setDelay(m),this._resendTimer.isSet&&setTimeout(function(){return b._sendNetworkQualityInputs()},1e3)},h.prototype._sendNetworkQualityInputs=function(){var _=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(b){_._transport&&_._transport.publish(function u(f,h){return Object.assign({type:"network_quality"},f,h)}(b,_._networkQualityReportLevels))}).finally(function(){_._resendTimer.start()})},h.prototype.put=function(_){this._networkQualityInputs.put(_)},h}(D);$.exports=d},1058:function($,H,w){"use strict";var Le,k=this&&this.__extends||(Le=function(De,se){return(Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,Te){de.__proto__=Te}||function(de,Te){for(var Se in Te)Object.prototype.hasOwnProperty.call(Te,Se)&&(de[Se]=Te[Se])})(De,se)},function(De,se){if("function"!=typeof se&&null!==se)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function de(){this.constructor=De}Le(De,se),De.prototype=null===se?Object.create(se):(de.prototype=se.prototype,new de)}),D=this&&this.__read||function(Le,De){var se="function"==typeof Symbol&&Le[Symbol.iterator];if(!se)return Le;var Te,Ae,de=se.call(Le),Se=[];try{for(;(void 0===De||De-- >0)&&!(Te=de.next()).done;)Se.push(Te.value)}catch(ut){Ae={error:ut}}finally{try{Te&&!Te.done&&(se=de.return)&&se.call(de)}finally{if(Ae)throw Ae.error}}return Se},I=this&&this.__spreadArray||function(Le,De){for(var se=0,de=De.length,Te=Le.length;se<de;se++,Te++)Le[Te]=De[se];return Le},v=w(2606),m=w(1647),d=m.RTCIceCandidate,u=m.RTCPeerConnection,f=m.RTCSessionDescription,h=m.getStats,_=w(7627),b=w(8701),y=b.DEFAULT_ICE_GATHERING_TIMEOUT_MS,M=b.DEFAULT_LOG_LEVEL,E=b.DEFAULT_SESSION_TIMEOUT_SEC,C=b.iceRestartBackoffConfig,S=w(3898),V=S.addOrRewriteNewTrackIds,F=S.addOrRewriteTrackIds,j=S.createCodecMapForMediaSection,N=S.disableRtx,R=S.enableDtxForOpus,P=S.filterLocalCodecs,T=S.getMediaSections,x=S.removeSSRCAttributes,L=S.revertSimulcast,B=S.setCodecPreferences,G=S.setSimulcast,W=w(6543),X=w(8380),J=X.MediaClientLocalDescFailedError,ee=X.MediaClientRemoteDescFailedError,Q=w(9739),ie=Q.buildLogLevels,fe=Q.getPlatform,ue=Q.isChromeScreenShareTrack,re=Q.oncePerTick,ne=Q.defer,Y=w(380),z=w(2282),ce=w(2498),le=w(3501),_e=w(8675),ve=w(1458),pe=w(1057),Ne=w(3073),ze=_.guessBrowser(),qe=fe(),tt=/android/.test(qe),He="chrome"===ze,Qe="firefox"===ze,Xe="safari"===ze,bt=0,It={open:["closed","updating"],updating:["closed","open"],closed:[]},Qt=function(Le){function De(se,de,Te,Se){var Ae=Le.call(this,"open",It)||this,ut=te(Se=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:ue,iceServers:[],logLevel:M,offerOptions:{},revertSimulcast:L,sessionTimeout:1e3*E,setCodecPreferences:B,setSimulcast:G,Backoff:v,IceConnectionMonitor:z,RTCIceCandidate:d,RTCPeerConnection:u,RTCSessionDescription:f,Timeout:W},Se)),Rt=ie(Se.logLevel),In=Se.RTCPeerConnection;!0===Se.enableDscp&&(Se.chromeSpecificConstraints=Se.chromeSpecificConstraints||{},Se.chromeSpecificConstraints.optional=Se.chromeSpecificConstraints.optional||[],Se.chromeSpecificConstraints.optional.push({googDscp:!0}));var Fn=Se.log?Se.log.createLog("webrtc",Ae):new ve("webrtc",Ae,Rt,Se.loggerName),jt=new In(ut,Se.chromeSpecificConstraints);Se.dummyAudioMediaStreamTrack&&jt.addTrack(Se.dummyAudioMediaStreamTrack),Object.defineProperties(Ae,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:Se.enableDscp},_encodingParameters:{value:de},_isChromeScreenShareTrack:{value:Se.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new Se.Timeout(function(){return Ae._handleIceGatheringTimeout()},y,!1)},_iceRestartBackoff:{value:new Se.Backoff(C)},_instanceId:{value:++bt},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:Fn},_eventObserver:{value:Se.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new Se.IceConnectionMonitor(jt)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:Se.offerOptions},_onEncodingParametersChanged:{value:re(function(){Ae._needsAnswer||nn(Ae)})},_peerConnection:{value:jt},_preferredAudioCodecs:{value:Te.audio},_preferredVideoCodecs:{value:Te.video},_shouldApplyDtx:{value:Te.audio.every(function(dt){return"opus"!==dt.codec})||Te.audio.some(function(dt){return"opus"===dt.codec&&dt.dtx})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new Se.Timeout(function(){Fn.debug("ICE reconnect timed out"),Ae.close()},Se.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new Y},_setCodecPreferences:{value:Qe&&tt&&Te.video[0]&&"h264"!==Te.video[0].codec.toLowerCase()?function(dt){return dt}:Se.setCodecPreferences},_setSimulcast:{value:Se.setSimulcast},_revertSimulcast:{value:Se.revertSimulcast},_RTCIceCandidate:{value:Se.RTCIceCandidate},_RTCPeerConnection:{value:Se.RTCPeerConnection},_RTCSessionDescription:{value:Se.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:se}}),de.on("changed",Ae._onEncodingParametersChanged),jt.addEventListener("connectionstatechange",Ae._handleConnectionStateChange.bind(Ae)),jt.addEventListener("datachannel",Ae._handleDataChannelEvent.bind(Ae)),jt.addEventListener("icecandidate",Ae._handleIceCandidateEvent.bind(Ae)),jt.addEventListener("iceconnectionstatechange",Ae._handleIceConnectionStateChange.bind(Ae)),jt.addEventListener("icegatheringstatechange",Ae._handleIceGatheringStateChange.bind(Ae)),jt.addEventListener("signalingstatechange",Ae._handleSignalingStateChange.bind(Ae)),jt.addEventListener("track",Ae._handleTrackEvent.bind(Ae));var rn=Ae;return Ae.on("stateChanged",function dt(ft){"closed"===ft&&(rn.removeListener("stateChanged",dt),rn._dataChannels.forEach(function(on,Ts){rn.removeDataTrackSender(Ts)}))}),Ae}return k(De,Le),De.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},De.prototype.setEffectiveAdaptiveSimulcast=function(se){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",se),this._preferredVideoCodecs.forEach(function(de){"adaptiveSimulcast"in de&&(de.adaptiveSimulcast=se)})},Object.defineProperty(De.prototype,"_shouldApplySimulcast",{get:function(){return!(!He&&!Xe)&&this._preferredVideoCodecs.some(function(de){return"vp8"===de.codec.toLowerCase()&&de.simulcast&&!1!==de.adaptiveSimulcast})},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"connectionState",{get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"isApplicationSectionNegotiated",{get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&T(this._peerConnection.localDescription.sdp,"application").length>0},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var se=this._preferredVideoCodecs.find(function(de){return"adaptiveSimulcast"in de});return se&&!0===se.adaptiveSimulcast},enumerable:!1,configurable:!0}),De.prototype._maybeUpdateEncodings=function(se,de,Te){if(void 0===Te&&(Te=!1),"video"!==se.kind||"ended"===se.readyState)return!1;var Se=se.getSettings();if("number"!=typeof Se.height||"number"!=typeof Se.width)return!1;var Rt=_.guessBrowser();return!!("safari"===Rt||"chrome"===Rt&&this._isAdaptiveSimulcastEnabled)&&(this._updateEncodings(se,de,Te),!0)},De.prototype._updateEncodings=function(se,de,Te){if(this._isChromeScreenShareTrack(se)){var Se=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];de.forEach(function(dt,ft){var on=Se[ft];on?(dt.scaleResolutionDownBy=on.scaleResolutionDownBy,Te&&delete dt.active):(dt.active=!1,delete dt.scaleResolutionDownBy)})}else{var Ae=se.getSettings(),Fn=Ae.width*Ae.height,jt=[{pixels:518400,maxActiveLayers:3},{pixels:129600,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}].find(function(dt){return Fn>=dt.pixels}),rn=Math.min(de.length,jt.maxActiveLayers);de.forEach(function(dt,ft){ft<rn?(dt.scaleResolutionDownBy=1<<rn-ft-1,Te&&(dt.active=!0)):(dt.active=!1,delete dt.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",de.map(function(dt,ft){return"["+ft+": "+dt.active+", "+(dt.scaleResolutionDownBy||0)+"]"}).join(", "))},De.prototype._addIceCandidate=function(se){var de=this;return Promise.resolve().then(function(){return se=new de._RTCIceCandidate(se),de._peerConnection.addIceCandidate(se)}).catch(function(Te){de._log.warn("Failed to add RTCIceCandidate "+(se?'"'+se.candidate+'"':"null")+": "+Te.message)})},De.prototype._addIceCandidates=function(se){return Promise.all(se.map(this._addIceCandidate,this)).then(function(){})},De.prototype._addOrUpdateTransceiver=function(se){var de=this,Te=function Oe(Le,De){var se={audio:Le._preferredAudioCodecs.map(function(Ae){return Ae.codec.toLowerCase()}),video:Le._preferredVideoCodecs.map(function(Ae){return Ae.codec.toLowerCase()})}[De],de=Le._recycledTransceivers[De],Te=se.find(function(Ae){return Le._localCodecs.has(Ae)});if(!Te)return de.shift();var Se=de.find(function(Ae){var ut=Le._remoteCodecMaps.get(Ae.mid);return ut&&ut.has(Te)});return Se&&de.splice(de.indexOf(Se),1),Se}(this,se.kind);if(Te&&Te.sender){var Se=Te.sender.track?Te.sender.track.id:null;return Se&&this._log.warn("Reusing transceiver: "+Te.mid+"] "+Se+" => "+se.id),this._replaceTrackPromises.set(Te,Te.sender.replaceTrack(se).then(function(){Te.direction="sendrecv"},function(){}).finally(function(){de._replaceTrackPromises.delete(Te)})),Te}return this._peerConnection.addTransceiver(se)},De.prototype._checkIceBox=function(se){var de=he(se);if(!de)return Promise.resolve();var Te=this._remoteCandidates.setUfrag(de);return this._addIceCandidates(Te)},De.prototype._answer=function(se){var de=this;return Promise.resolve().then(function(){return de._negotiationRole||(de._negotiationRole="answerer"),de._setRemoteDescription(se)}).catch(function(){throw new ee}).then(function(){return de._peerConnection.createAnswer()}).then(function(Te){Te=Qe?new de._RTCSessionDescription({sdp:N(Te.sdp),type:Te.type}):Ne(Te);var Se=x(Te.sdp,["mslabel","label"]);if(de._shouldApplySimulcast){var Ae=Se;Se=de._setSimulcast(Ae,de._trackIdsToAttributes),Se=de._revertSimulcast(Se,Ae,se.sdp)}return Se=Se.replace(/42e015/g,"42e01f"),de._setLocalDescription({type:Te.type,sdp:Se})}).then(function(){return de._checkIceBox(se)}).then(function(){return de._queuedDescription&&de._updateDescription(de._queuedDescription)}).then(function(){return de._queuedDescription=null,de._maybeReoffer(de._peerConnection.localDescription)}).catch(function(Te){var Se=Te instanceof ee?Te:new J;throw de._publishMediaWarning({message:"Failed to _answer",code:Se.code,error:Te}),Se})},De.prototype._close=function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0)},De.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},De.prototype._handleDataChannelEvent=function(se){var de=this,Te=se.channel,Se=new ce(Te);this._dataTrackReceivers.add(Se),Te.addEventListener("close",function(){de._dataTrackReceivers.delete(Se)}),this.emit("trackAdded",Se)},De.prototype._handleGlare=function(se){var de=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return de._trackIdsToAttributes=new Map(de._appliedTrackIdsToAttributes),de._setLocalDescription({type:"rollback"})}).then(function(){return de._needsAnswer=!1,de._answer(se)}).then(function(Te){return Te?Promise.resolve():de._offer()})},De.prototype._publishMediaWarning=function(se){this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:se.message,code:se.code,context:JSON.stringify({error:se.error.message,sdp:se.sdp})}})},De.prototype._handleIceCandidateEvent=function(se){se.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(se.candidate));var de={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};se.candidate||(de.ice.complete=!0),this._isIceLite&&se.candidate||(de.ice.revision=this._localCandidatesRevision++,this.emit("candidates",de))},De.prototype._handleIceConnectionStateChange=function(){var se=this,de=this._peerConnection.iceConnectionState,Te=["connected","completed"].includes(de),Se=this._log;Se.debug('ICE connection state is "'+de+'"'),Te&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==de||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&Te&&Se.debug("ICE reconnected"):(Se.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===de?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){se._iceConnectionMonitor.stop(),!se._shouldRestartIce&&!se._isRestartingIce&&(Se.warn("ICE Connection Monitor detected inactivity"),se._isIceConnectionInactive=!0,se._initiateIceRestartBackoff(),se.emit("iceConnectionStateChanged"),se.emit("connectionStateChanged"))})):["disconnected","completed"].includes(de)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=de,this.emit("iceConnectionStateChanged")},De.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},De.prototype._handleIceGatheringStateChange=function(){var se=this._peerConnection.iceGatheringState,de=this._log;de.debug('ICE gathering state is "'+se+'"');var Te=this._iceGatheringTimeout;"gathering"===se&&!this._didGenerateLocalCandidates&&!Te.isSet&&(de.debug("Starting ICE gathering timeout: "+Te.delay),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},De.prototype._handleSignalingStateChange=function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},De.prototype._handleTrackEvent=function(se){var de=this,Te=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new pe,this._trackMatcher.update(Te);var Se=se.track,Ae=this._trackMatcher.match(se)||Se.id,ut=new le(Ae,Se);this._mediaTrackReceivers.forEach(function(Rt){Rt.track.id===ut.track.id&&de._mediaTrackReceivers.delete(Rt)}),this._mediaTrackReceivers.add(ut),Se.addEventListener("ended",function(){return de._mediaTrackReceivers.delete(ut)}),this.emit("trackAdded",ut)},De.prototype._initiateIceRestart=function(){if("closed"!==this._peerConnection.signalingState){var se=this._log;se.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var de=this._iceReconnectTimeout;de.isSet||(se.debug("Starting ICE reconnect timeout: "+de.delay),this._iceReconnectTimeout.start()),this.offer().catch(function(Ae){se.error("offer failed in _initiateIceRestart with: "+Ae.message)})}},De.prototype._initiateIceRestartBackoff=function(){var se=this;"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return se._initiateIceRestart()}))},De.prototype._maybeReoffer=function(se){var de=this._shouldOffer;if(se&&se.sdp){var Te=this._peerConnection.getSenders().filter(function(In){return In.track});de=["audio","video"].reduce(function(In,Fn){var jt=T(se.sdp,Fn,"(sendrecv|sendonly)"),rn=Te.filter(K.bind(null,Fn));return In||jt.length<rn.length},de);var Se=this._dataChannels.size>0,Ae=T(se.sdp,"application").length>0;de=de||Se&&!Ae}return(de?this._offer():Promise.resolve()).then(function(){return de})},De.prototype._offer=function(){var se=this,de=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,de.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return se._peerConnection.createOffer(de)}).catch(function(Te){var Se=new J;throw se._publishMediaWarning({message:"Failed to create offer",code:Se.code,error:Te}),Se}).then(function(Te){Te=Qe?new se._RTCSessionDescription({sdp:N(Te.sdp),type:Te.type}):Ne(Te);var Se=x(Te.sdp,["mslabel","label"]);Se=se._peerConnection.remoteDescription?P(Se,se._peerConnection.remoteDescription.sdp):Se;var Ae=se._setCodecPreferences(Se,se._preferredAudioCodecs,se._preferredVideoCodecs);return se._shouldOffer=!1,se._negotiationRole||(se._negotiationRole="offerer"),se._shouldApplySimulcast&&(se._localDescriptionWithoutSimulcast={type:"offer",sdp:Ae},Ae=se._setSimulcast(Ae,se._trackIdsToAttributes)),se._setLocalDescription({type:"offer",sdp:Ae})})},De.prototype._getMediaTrackSenderId=function(se){var de=Array.from(this._rtpSenders.keys()).find(function(Te){return Te.track.id===se});return de?de.id:se},De.prototype._addOrRewriteLocalTrackIds=function(se){var de=this,Se=this._peerConnection.getTransceivers().filter(function(rn){var dt=rn.sender;return!rn.stopped&&dt&&dt.track}),Ae=Se.filter(function(rn){return rn.mid}),ut=new Map(Ae.map(function(rn){return[rn.mid,de._getMediaTrackSenderId(rn.sender.track.id)]})),Rt=F(se.sdp,ut),In=Se.filter(function(rn){return!rn.mid}),Fn=new Map(["audio","video"].map(function(rn){return[rn,In.filter(function(dt){return dt.sender.track.kind===rn}).map(function(dt){return de._getMediaTrackSenderId(dt.sender.track.id)})]})),jt=V(Rt,ut,Fn);return new this._RTCSessionDescription({sdp:jt,type:se.type})},De.prototype._rollbackAndApplyOffer=function(se){var de=this;return this._setLocalDescription({type:"rollback"}).then(function(){return de._setLocalDescription(se)})},De.prototype._setLocalDescription=function(se){var de=this;return"rollback"!==se.type&&this._shouldApplyDtx&&(se=new this._RTCSessionDescription({sdp:R(se.sdp),type:se.type})),this._peerConnection.setLocalDescription(se).catch(function(Te){de._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+se.type+'" failed with the error "'+Te.message+'".',Te);var Se=new J,Ae={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+se.type+'" failed',code:Se.code,error:Te};throw se.sdp&&(de._log.warn("The SDP was "+se.sdp),Ae.sdp=se.sdp),de._publishMediaWarning(Ae),Se}).then(function(){"rollback"!==se.type&&(de._localDescription=de._addOrRewriteLocalTrackIds(se),de._shouldApplyDtx&&(de._localDescription=new de._RTCSessionDescription({sdp:R(de._localDescription.sdp,[]),type:de._localDescription.type})),de._localCandidates=[],"offer"===se.type?de._descriptionRevision++:"answer"===se.type&&(de._lastStableDescriptionRevision=de._descriptionRevision,fn(de)),de._localUfrag=he(se),de.emit("description",de.getState()))})},De.prototype._setRemoteDescription=function(se){var de=this;return se.sdp&&(se.sdp=this._setCodecPreferences(se.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),se.sdp=this._shouldApplyDtx?R(se.sdp):R(se.sdp,[]),Qe&&(se.sdp=function oe(Le){return Le.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}(se.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(se.sdp))),se=new this._RTCSessionDescription(se),Promise.resolve().then(function(){if("answer"===se.type&&de._localDescriptionWithoutSimulcast){var Te=de._preferredVideoCodecs.find(function(ut){return"adaptiveSimulcast"in ut}),Ae=de._revertSimulcast(de._localDescription.sdp,de._localDescriptionWithoutSimulcast.sdp,se.sdp,!!Te&&!1===Te.adaptiveSimulcast);if(de._localDescriptionWithoutSimulcast=null,Ae!==de._localDescription.sdp)return de._rollbackAndApplyOffer({type:de._localDescription.type,sdp:Ae})}}).then(function(){return de._peerConnection.setRemoteDescription(se)}).then(function(){"answer"===se.type&&(de._isRestartingIce&&(de._log.debug("An ICE restart was in-progress and is now completed"),de._isRestartingIce=!1),fn(de))},function(Te){throw de._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+se.type+'" failed with the error "'+Te.message+'".',Te),se.sdp&&de._log.warn("The SDP was "+se.sdp),Te})},De.prototype._updateDescription=function(se){var de=this;switch(se.type){case"answer":case"pranswer":if(se.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=se.revision;break;case"close":return this._close();case"create-offer":return se.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=se,Promise.resolve()):(this._descriptionRevision=se.revision,this._offer());case"offer":return se.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=se,Promise.resolve()):(this._descriptionRevision=se.revision,this._handleGlare(se)):(this._descriptionRevision=se.revision,this._answer(se).then(function(){}))}var Te=se.revision;return Promise.resolve().then(function(){return de._setRemoteDescription(se)}).catch(function(Se){var Ae=new ee;throw de._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+se.type+'" failed',code:Ae.code,error:Se,sdp:se.sdp}),Ae}).then(function(){return de._lastStableDescriptionRevision=Te,de._needsAnswer=!1,de._checkIceBox(se)}).then(function(){return de._queuedDescription&&de._updateDescription(de._queuedDescription)}).then(function(){return de._queuedDescription=null,de._maybeReoffer(de._peerConnection.localDescription).then(function(){})})},De.prototype._updateIce=function(se){var de=this._remoteCandidates.update(se);return this._addIceCandidates(de)},De.prototype.addDataTrackSender=function(se){if(!this._dataChannels.has(se))try{var de={ordered:se.ordered};null!==se.maxPacketLifeTime&&(de.maxPacketLifeTime=se.maxPacketLifeTime),null!==se.maxRetransmits&&(de.maxRetransmits=se.maxRetransmits);var Te=this._peerConnection.createDataChannel(se.id,de);se.addDataChannel(Te),this._dataChannels.set(se,Te)}catch(Se){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+se.id+'": '+Se.message)}},De.prototype._handleQueuedPublisherHints=function(){var se=this;"stable"===this._peerConnection.signalingState&&this._mediaTrackSenderToPublisherHints.forEach(function(de,Te){var Se=de.deferred,Ae=de.encodings;se._mediaTrackSenderToPublisherHints.delete(Te),se._setPublisherHint(Te,Ae).then(function(ut){return Se.resolve(ut)}).catch(function(ut){return Se.reject(ut)})})},De.prototype._setPublisherHint=function(se,de){var Te=this;if(Qe)return Promise.resolve("COULD_NOT_APPLY_HINT");this._mediaTrackSenderToPublisherHints.has(se)&&(this._mediaTrackSenderToPublisherHints.get(se).deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(se));var Ae=this._rtpSenders.get(se);if(!Ae)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if("closed"===this._peerConnection.signalingState)return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if("stable"!==this._peerConnection.signalingState){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var ut=ne();return this._mediaTrackSenderToPublisherHints.set(se,{deferred:ut,encodings:de}),ut.promise}var Rt=Ae.getParameters();return null!==de&&de.forEach(function(In){var Fn=In.enabled,jt=In.layer_index;Rt.encodings.length>jt?(Te._log.debug("layer:"+jt+", active:"+Rt.encodings[jt].active+" => "+Fn),Rt.encodings[jt].active=Fn):Te._log.warn("invalid layer:"+jt+", active:"+Fn)}),this._maybeUpdateEncodings(Ae.track,Rt.encodings,null===de),Ae.setParameters(Rt).then(function(){return"OK"}).catch(function(In){return Te._log.error("Failed to apply publisher hints:",In),"COULD_NOT_APPLY_HINT"})},De.prototype.addMediaTrackSender=function(se){var de=this;if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(se)){var Se=this._addOrUpdateTransceiver(se.track).sender;se.addSender(Se,function(Ae){return de._setPublisherHint(se,Ae)}),this._rtpNewSenders.add(Se),this._rtpSenders.set(se,Se)}},De.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},De.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},De.prototype.getState=function(){if(!this._localDescription)return null;var de={type:this._localDescription.type,revision:"answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision};return this._localDescription.sdp&&(de.sdp=this._localDescription.sdp),{description:de,id:this.id}},De.prototype.offer=function(){var se=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(de){return se.transition("updating",de),(se._needsAnswer||se._isRestartingIce?Promise.resolve():se._offer()).then(function(){se.tryTransition("open",de)},function(Se){throw se.tryTransition("open",de),Se})})},De.prototype.removeDataTrackSender=function(se){var de=this._dataChannels.get(se);de&&(se.removeDataChannel(de),this._dataChannels.delete(se),de.close())},De.prototype.removeMediaTrackSender=function(se){var de=this._rtpSenders.get(se);de&&("closed"!==this._peerConnection.signalingState&&this._peerConnection.removeTrack(de),se.removeSender(de),this._mediaTrackSenderToPublisherHints.has(se)&&(this._mediaTrackSenderToPublisherHints.get(se).deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(se)),this._rtpNewSenders.delete(de),this._rtpSenders.delete(se))},De.prototype.setConfiguration=function(se){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(te(se))},De.prototype.setIceReconnectTimeout=function(se){return this._iceReconnectTimeout.setDelay(se),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},De.prototype.update=function(se){var de=this;return this.bracket("updating",function(Te){if("closed"===de.state)return Promise.resolve();de.transition("updating",Te);var Se=[];return se.ice&&Se.push(de._updateIce(se.ice)),se.description&&Se.push(de._updateDescription(se.description)),Promise.all(Se).then(function(){de.tryTransition("open",Te)},function(Ae){throw de.tryTransition("open",Te),Ae})})},De.prototype.getStats=function(){var se=this;return h(this._peerConnection).then(function(de){return function Vt(Le,De){return Object.assign(De,{remoteAudioTrackStats:De.remoteAudioTrackStats.map(function(se){return Ft(Le,se)}),remoteVideoTrackStats:De.remoteVideoTrackStats.map(function(se){return Ft(Le,se)}),localAudioTrackStats:De.localAudioTrackStats.map(function(se){return An(Le,se)}),localVideoTrackStats:De.localVideoTrackStats.map(function(se){return An(Le,se)})})}(se,de)})},De}(_e);function An(Le,De){var se=Le._getMediaTrackSenderId(De.trackId);return Object.assign(De,{trackId:se})}function Ft(Le,De){var se=I([],D(Le._mediaTrackReceivers)).find(function(Te){return Te.track.id===De.trackId});return Object.assign(De,{trackId:se?se.id:null})}function he(Le){if(Le.sdp){var De=Le.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(De)return De[1]}return null}function te(Le){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},Le)}function K(Le,De){var se=De.track;return se&&se.kind===Le&&"ended"!==se.readyState}function fn(Le){(function zt(Le){Le._recycledTransceivers.audio=[],Le._recycledTransceivers.video=[],Le._peerConnection.getTransceivers().forEach(function(De){(function Me(Le,De){return!Le.stopped&&!De._replaceTrackPromises.has(Le)&&["inactive","recvonly"].includes(Le.direction)})(De,Le)&&Le._recycledTransceivers[De.receiver.track.kind].push(De)})})(Le),function Ee(Le){var De=Le._peerConnection.localDescription;!De||!De.sdp||T(De.sdp).forEach(function(se){j(se).forEach(function(Te,Se){return Le._localCodecs.add(Se)})})}(Le),function Ke(Le){var De=Le._peerConnection.remoteDescription;!De||!De.sdp||T(De.sdp).forEach(function(se){var de=se.match(/^a=mid:(.+)$/m);if(de&&de[1]){var Te=de[1],Se=j(se);Le._remoteCodecMaps.set(Te,Se)}})}(Le),nn(Le).then(function(){Le._handleQueuedPublisherHints()})}function nn(Le){var De=Le._encodingParameters,Te=new Map([["audio",De.maxAudioBitrate],["video",De.maxVideoBitrate]]),Se=[];return Le._peerConnection.getSenders().filter(function(Ae){return Ae.track}).forEach(function(Ae){var ut=Te.get(Ae.track.kind),Rt=Ae.getParameters();null===ut||0===ut?function Ln(Le){Array.isArray(Le.encodings)&&Le.encodings.forEach(function(De){return delete De.maxBitrate})}(Rt):Le._isChromeScreenShareTrack(Ae.track)?Le._log.warn("Not setting maxBitrate for "+Ae.track.kind+" Track "+Ae.track.id+" because it appears to be screen share track: "+Ae.track.label):function Zt(Le,De){Qe?Le.encodings=[{maxBitrate:De}]:Le.encodings.forEach(function(se){se.maxBitrate=De})}(Rt,ut),!Qe&&Rt.encodings.length>0&&("audio"===Ae.track.kind?Rt.encodings[0].priority="high":Le._isChromeScreenShareTrack(Ae.track)&&(Rt.encodings[0].priority="medium"),Le._enableDscp&&(Rt.encodings[0].networkPriority="high"));var In=Le._rtpNewSenders.has(Ae);Le._maybeUpdateEncodings(Ae.track,Rt.encodings,In),Le._rtpNewSenders.delete(Ae);var Fn=Ae.setParameters(Rt).catch(function(jt){Le._log.warn("Error while setting encodings parameters for "+Ae.track.kind+" Track "+Ae.track.id+": "+(jt.message||jt.name))});Se.push(Fn)}),Promise.all(Se)}$.exports=Qt},6603:function($,H,w){"use strict";var T,k=this&&this.__extends||(T=function(x,L){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,G){B.__proto__=G}||function(B,G){for(var W in G)Object.prototype.hasOwnProperty.call(G,W)&&(B[W]=G[W])})(x,L)},function(x,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function B(){this.constructor=x}T(x,L),x.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)}),D=this&&this.__read||function(T,x){var L="function"==typeof Symbol&&T[Symbol.iterator];if(!L)return T;var G,X,B=L.call(T),W=[];try{for(;(void 0===x||x-- >0)&&!(G=B.next()).done;)W.push(G.value)}catch(J){X={error:J}}finally{try{G&&!G.done&&(L=B.return)&&L.call(B)}finally{if(X)throw X.error}}return W},I=this&&this.__spreadArray||function(T,x){for(var L=0,B=x.length,G=T.length;L<B;L++,G++)T[G]=x[L];return T},v=w(7627).guessBrowser,m=w(1058),d=w(808),u=w(7772),f=w(9739),h=w(8380).MediaConnectionError,_="firefox"===v(),b=function(T){function x(L,B,G){var W=T.call(this)||this,X=(G=Object.assign({audioContextFactory:_?w(7708):null,PeerConnectionV2:m},G)).audioContextFactory?G.audioContextFactory.getOrCreate(W):null,J=X?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(W,{_audioContextFactory:{value:G.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:f.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:X?new d(y(X)):null},_encodingParameters:{value:L},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:J},_peerConnections:{value:new Map},_preferredCodecs:{value:B},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:G.PeerConnectionV2}}),W}return k(x,T),x.prototype.setEffectiveAdaptiveSimulcast=function(L){this._peerConnections.forEach(function(B){return B.setEffectiveAdaptiveSimulcast(L)}),this._preferredCodecs.video.forEach(function(B){"adaptiveSimulcast"in B&&(B.adaptiveSimulcast=L)})},Object.defineProperty(x.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),x.prototype._closeAbsentPeerConnections=function(L){var B=new Set(L.map(function(G){return G.id}));return this._peerConnections.forEach(function(G){B.has(G.id)||G._close()}),this},x.prototype._getConfiguration=function(){return this._configurationDeferred.promise},x.prototype._getOrCreate=function(L,B){var G=this,W=this,X=this._peerConnections.get(L);if(!X){var J=this._PeerConnectionV2,ee=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},B);try{X=new J(L,this._encodingParameters,this._preferredCodecs,ee)}catch{throw new h}this._peerConnections.set(X.id,X),X.on("candidates",this.queue.bind(this,"candidates")),X.on("description",this.queue.bind(this,"description")),X.on("trackAdded",this.queue.bind(this,"trackAdded")),X.on("stateChanged",function Q(ie){"closed"===ie&&(X.removeListener("stateChanged",Q),W._dataTrackSenders.forEach(function(fe){return X.removeDataTrackSender(fe)}),W._mediaTrackSenders.forEach(function(fe){return X.removeMediaTrackSender(fe)}),W._peerConnections.delete(X.id),W._closedPeerConnectionIds.add(X.id),P(W),R(W))}),X.on("connectionStateChanged",function(){return P(G)}),X.on("iceConnectionStateChanged",function(){return R(G)}),this._dataTrackSenders.forEach(X.addDataTrackSender,X),this._mediaTrackSenders.forEach(X.addMediaTrackSender,X),R(this)}return X},x.prototype.close=function(){return this._peerConnections.forEach(function(L){L.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),R(this),this},x.prototype.createAndOffer=function(){var L=this;return this._getConfiguration().then(function(B){var G;do{G=f.makeUUID()}while(L._peerConnections.has(G));return L._getOrCreate(G,B)}).then(function(B){return B.offer()}).then(function(){return L})},x.prototype.getTrackReceivers=function(){return f.flatMap(this._peerConnections,function(L){return L.getTrackReceivers()})},x.prototype.getStates=function(){var L=[];return this._peerConnections.forEach(function(B){var G=B.getState();G&&L.push(G)}),L},x.prototype.setConfiguration=function(L){return this._configuration&&(this._configurationDeferred=f.defer(),this._peerConnections.forEach(function(B){B.setConfiguration(L)})),this._configuration=L,this._configurationDeferred.resolve(L),this},x.prototype.setIceReconnectTimeout=function(L){return null===this._sessionTimeout&&(this._peerConnections.forEach(function(B){B.setIceReconnectTimeout(L)}),this._sessionTimeout=L),this},x.prototype.setTrackSenders=function(L){var B=new Set(L.filter(function(X){return"data"===X.kind})),G=new Set(L.filter(function(X){return X&&("audio"===X.kind||"video"===X.kind)})),W=function C(T,x,L){return{data:E(T,x),media:S(T,L)}}(this,B,G);return this._dataTrackSenders=B,this._mediaTrackSenders=G,function M(T,x){(x.data.add.size||x.data.remove.size||x.media.add.size||x.media.remove.size)&&T._peerConnections.forEach(function(L){x.data.remove.forEach(L.removeDataTrackSender,L),x.media.remove.forEach(L.removeMediaTrackSender,L),x.data.add.forEach(L.addDataTrackSender,L),x.media.add.forEach(L.addMediaTrackSender,L),(x.media.add.size||x.media.remove.size||x.data.add.size&&!L.isApplicationSectionNegotiated)&&L.offer()})}(this,W),this},x.prototype.update=function(L,B){var G=this;return void 0===B&&(B=!1),B&&this._closeAbsentPeerConnections(L),this._getConfiguration().then(function(W){return Promise.all(L.map(function(X){return G._closedPeerConnectionIds.has(X.id)?null:G._getOrCreate(X.id,W).update(X)}))}).then(function(){return G})},x.prototype.getStats=function(){var L=Array.from(this._peerConnections.values());return Promise.all(L.map(function(B){return B.getStats().then(function(G){return[B.id,G]})})).then(function(B){return new Map(B)})},x}(u);function y(T){return T.createMediaStreamDestination().stream.getAudioTracks()[0]}function E(T,x){return{add:f.difference(x,T._dataTrackSenders),remove:f.difference(T._dataTrackSenders,x)}}function S(T,x){return{add:f.difference(x,T._mediaTrackSenders),remove:f.difference(T._mediaTrackSenders,x)}}var F,V={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3};function N(T){return T.length?(F=F||function j(){return Object.keys(V).reduce(function(T,x){var L;return Object.assign(T,((L={})[V[x]]=x,L))},{})}(),T.reduce(function(x,L){return F[Math.max(V[x],V[L])]})):"new"}function R(T){T._lastIceConnectionState=T.iceConnectionState,T._iceConnectionState=N(I([],D(T._peerConnections.values())).map(function(x){return x.iceConnectionState})),T.iceConnectionState!==T._lastIceConnectionState&&T.emit("iceConnectionStateChanged")}function P(T){T._lastConnectionState=T.connectionState,T._connectionState=N(I([],D(T._peerConnections.values())).map(function(x){return x.connectionState})),T.connectionState!==T._lastConnectionState&&T.emit("connectionStateChanged")}$.exports=b},8069:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(4071),I=1,v=function(m){function d(u,f){var h=m.call(this,u,"publisher_hints",f)||this;return h.on("ready",function(_){h._log.debug("publisher_hints transport ready:",_),_.on("message",function(b){"publisher_hints"===(h._log.debug("Incoming: ",b),b.type)?b.publisher&&b.publisher.hints&&b.publisher.id&&h._processPublisherHints(b.publisher.hints,b.publisher.id):h._log.warn("Unknown message type: ",b.type)})}),h}return k(d,m),d.prototype.sendTrackReplaced=function(u){if(this._transport){var h={type:"client_reset",track:u.trackSid,id:I++};this._log.debug("Outgoing: ",h),this._transport.publish(h)}},d.prototype.sendHintResponse=function(u){if(this._transport){var _={type:"publisher_hints",id:u.id,hints:u.hints};this._log.debug("Outgoing: ",_),this._transport.publish(_)}},d.prototype._processPublisherHints=function(u,f){try{this.emit("updated",u,f)}catch(h){this._log.error("error processing hints:",h)}},d}(D);$.exports=v},8930:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(){var d=v.call(this)||this;return Object.defineProperties(d,{_revision:{value:1,writable:!0}}),d}return k(m,v),m.prototype.update=function(d){return d.revision<this._revision?this:(this._revision=d.revision,this.enable(d.is_recording))},m}(w(9987));$.exports=I},1118:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(2184),I=w(467),v=function(m){function d(u,f,h,_,b,y){var M=m.call(this,u.sid,u.identity)||this;return y=Object.assign({RemoteTrackPublicationV2:I},y),Object.defineProperties(M,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:y.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:f},updateSubscriberTrackPriority:{value:function(E,C){return h(E,C)}},updateTrackRenderHint:{value:function(E,C){return _(E,C)}},clearTrackHint:{value:function(E){return b(E)}},revision:{enumerable:!0,get:function(){return this._revision}}}),M.update(u)}return k(d,m),d.prototype._getOrCreateTrack=function(u){var f=this._RemoteTrackPublicationV2,h=this.tracks.get(u.sid);return h||(h=new f(u,this._getInitialTrackSwitchOffState(u.sid)),this.addTrack(h)),h},d.prototype.update=function(u){var f=this;if(null!==this.revision&&u.revision<=this.revision)return this;this._revision=u.revision;var h=new Set;switch(u.tracks.forEach(function(_){var b=f._getOrCreateTrack(_);b.update(_),h.add(b)}),this.tracks.forEach(function(_){h.has(_)||f.removeTrack(_)}),u.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this},d}(D);$.exports=v},467:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){return v.call(this,d.sid,d.name,d.kind,d.enabled,d.priority,u)||this}return k(m,v),m.prototype.update=function(d){return this.enable(d.enabled),this.setPriority(d.priority),this},m}(w(8956));$.exports=I},7818:function($,H,w){"use strict";var f,k=this&&this.__extends||(f=function(h,_){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(b[M]=y[M])})(h,_)},function(h,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function b(){this.constructor=h}f(h,_),h.prototype=null===_?Object.create(_):(b.prototype=_.prototype,new b)}),D=w(4071),I=w(6543),v=w(9739).isDeepEqual,m=2e3,d=1,u=function(f){function h(_,b){var y=f.call(this,_,"render_hints",b)||this;return Object.defineProperties(y,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new I(function(){y._sendAllHints(),y._responseTimer.setDelay(2*y._responseTimer.delay)},m,!1)}}),y.on("ready",function(M){M.on("message",function(E){"render_hints"===(y._log.debug("Incoming: ",E),E.type)?y._processHintResults(E&&E.subscriber&&E.subscriber.hints||[]):y._log.warn("Unknown message type: ",E.type)}),y._sendAllHints()}),y}return k(h,f),h.prototype._sendAllHints=function(){var _=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(b){var y=_._trackSidsToRenderHints.get(b);y.renderDimensions&&(y.isDimensionDirty=!0),"enabled"in y&&(y.isEnabledDirty=!0)}),this._sendHints()},h.prototype._processHintResults=function(_){var b=this;this._responseTimer.clear(),this._responseTimer.setDelay(m),_.forEach(function(y){"OK"!==y.result&&b._log.debug("Server error processing hint:",y)}),this._sendHints()},h.prototype._sendHints=function(){var _=this;if(this._transport&&!this._responseTimer.isSet){var b=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(M){var E=_._trackSidsToRenderHints.get(M);if(E.isEnabledDirty||E.isDimensionDirty){var C={track:M};E.isEnabledDirty&&(C.enabled=E.enabled,E.isEnabledDirty=!1),E.isDimensionDirty&&(C.render_dimensions=E.renderDimensions,E.isDimensionDirty=!1),b.push(C)}}),b.length>0){var y={type:"render_hints",subscriber:{id:d++,hints:b}};this._log.debug("Outgoing: ",y),this._transport.publish(y),this._responseTimer.start()}}},h.prototype.setTrackHint=function(_,b){var y=this._trackSidsToRenderHints.get(_)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in b&&y.enabled!==b.enabled&&(y.enabled=!!b.enabled,y.isEnabledDirty=!0),b.renderDimensions&&!v(b.renderDimensions,y.renderDimensions)&&(y.renderDimensions=b.renderDimensions,y.isDimensionDirty=!0),this._trackSidsToRenderHints.set(_,y),this._sendHints()},h.prototype.clearTrackHint=function(_){this._trackSidsToRenderHints.delete(_)},h}(D);$.exports=u},2112:function($,H,w){"use strict";var ne,k=this&&this.__extends||(ne=function(Y,z){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,le){ce.__proto__=le}||function(ce,le){for(var _e in le)Object.prototype.hasOwnProperty.call(le,_e)&&(ce[_e]=le[_e])})(Y,z)},function(Y,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function ce(){this.constructor=Y}ne(Y,z),Y.prototype=null===z?Object.create(z):(ce.prototype=z.prototype,new ce)}),D=this&&this.__read||function(ne,Y){var z="function"==typeof Symbol&&ne[Symbol.iterator];if(!z)return ne;var le,ve,ce=z.call(ne),_e=[];try{for(;(void 0===Y||Y-- >0)&&!(le=ce.next()).done;)_e.push(le.value)}catch(pe){ve={error:pe}}finally{try{le&&!le.done&&(z=ce.return)&&z.call(ce)}finally{if(ve)throw ve.error}}return _e},I=w(2314),v=w(9056),m=w(5775),d=w(8930),u=w(8343),f=w(1118),h=w(7805),_=w(8004),b=w(5210),y=w(7818),M=w(8069),E=w(9739),C=E.constants.DEFAULT_SESSION_TIMEOUT_SEC,S=E.createBandwidthProfilePayload,V=E.defer,F=E.difference,j=E.filterObject,N=E.flatMap,R=E.oncePerTick,P=w(8218),T=w(8380).createTwilioError,x=1e4,L=function(ne){function Y(z,ce,le,_e,ve){var pe=this;ce.options=Object.assign({session_timeout:C},ce.options),ve=Object.assign({DominantSpeakerSignaling:I,NetworkQualityMonitor:v,NetworkQualitySignaling:m,RecordingSignaling:d,RemoteParticipantV2:f,TrackPrioritySignaling:_,TrackSwitchOffSignaling:b,bandwidthProfile:null,sessionTimeout:1e3*ce.options.session_timeout,statsPublishIntervalMs:x},ve),z.setBandwidthProfile(ve.bandwidthProfile);var Ne=ce.options,qe=Ne.audio_processors,tt=void 0===qe?[]:qe;z.setSignalingRegion(Ne.signaling_region),tt.includes("krisp")&&tt.push("rnnoise"),z.setAudioProcessors(tt),_e.setIceReconnectTimeout(ve.sessionTimeout);var He=function(Xe){return pe._getTrackReceiver(Xe)},Qe=(pe=ne.call(this,z,ce.sid,ce.name,ve)||this)._log;return Object.defineProperties(pe,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:ve.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:z.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:z.networkQualityConfiguration},_peerConnectionManager:{value:_e},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:ve.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new ve.DominantSpeakerSignaling(He,{log:Qe})},_networkQualitySignaling:{value:new ve.NetworkQualitySignaling(He,z.networkQualityConfiguration,{log:Qe})},_renderHintsSignaling:{value:new y(He,{log:Qe})},_publisherHintsSignaling:{value:new M(He,{log:Qe})},_trackPrioritySignaling:{value:new ve.TrackPrioritySignaling(He,{log:Qe})},_trackSwitchOffSignaling:{value:new ve.TrackSwitchOffSignaling(He,{log:Qe})},_pendingSwitchOffStates:{value:new Map},_transport:{value:le},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:ce.options.media_region||null}}),pe._initTrackSwitchOffSignaling(),pe._initDominantSpeakerSignaling(),pe._initNetworkQualityMonitorSignaling(),pe._initPublisherHintSignaling(),function X(ne,Y){var z=R(function(){ne._publishNewLocalParticipantState()}),ce=R(function(){var le=N(Y.tracks,function(_e){return _e.trackTransceiver});ne._peerConnectionManager.setTrackSenders(le)});Y.on("trackAdded",ce),Y.on("trackRemoved",ce),Y.on("updated",z),ne.on("stateChanged",function le(_e){"disconnected"===_e&&(Y.removeListener("trackAdded",ce),Y.removeListener("trackRemoved",ce),Y.removeListener("updated",z),ne.removeListener("stateChanged",le),Y.disconnect())}),ne.on("signalingConnectionStateChanged",function(){var le=ne.localParticipant,ve=le.identity,pe=le.sid;switch(ne.signalingConnectionState){case"connected":le.connect(pe,ve);break;case"reconnecting":le.reconnecting()}})}(pe,z),function J(ne,Y){Y.on("description",function(ce){ne._publishPeerConnectionState(ce)}),Y.dequeue("description"),Y.on("candidates",function(ce){ne._publishPeerConnectionState(ce)}),Y.dequeue("candidates"),Y.on("trackAdded",ne._addTrackReceiver.bind(ne)),Y.dequeue("trackAdded"),Y.getTrackReceivers().forEach(ne._addTrackReceiver,ne),Y.on("connectionStateChanged",function(){ne.emit("connectionStateChanged")}),Y.on("iceConnectionStateChanged",function(){ne.emit("iceConnectionStateChanged"),"failed"===ne.iceConnectionState&&(null!==ne.localParticipant.networkQualityLevel&&ne.localParticipant.setNetworkQualityLevel(0),ne.participants.forEach(function(z){null!==z.networkQualityLevel&&z.setNetworkQualityLevel(0)}))})}(pe,_e),function ee(ne,Y){Y.on("message",ne._update.bind(ne)),Y.on("stateChanged",function z(ce,le){"disconnected"===ce&&("disconnected"!==ne.state&&ne._disconnect(le),Y.removeListener("stateChanged",z)),ne.emit("signalingConnectionStateChanged")})}(pe,le),function Q(ne,Y,z){var ce=new Map,le=!1,_e=setInterval(function(){ne.getStats().then(function(ve){le=!le,ve.forEach(function(pe,Ne){var ze=new h(Ne,pe,!0);Y.publishEvent("quality","stats-report","info",{audioTrackStats:ze.remoteAudioTrackStats.map(function(Qe,Xe){return ue(Qe,pe.remoteAudioTrackStats[Xe],ce)}),localAudioTrackStats:ze.localAudioTrackStats.map(function(Qe,Xe){return fe(Qe,pe.localAudioTrackStats[Xe],ce)}),localVideoTrackStats:ze.localVideoTrackStats.map(function(Qe,Xe){return fe(Qe,pe.localVideoTrackStats[Xe],ce)}),peerConnectionId:ze.peerConnectionId,videoTrackStats:ze.remoteVideoTrackStats.map(function(Qe,Xe){return ue(Qe,pe.remoteVideoTrackStats[Xe],ce)})});var qe=N(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(Qe){return ze[Qe].map(function(Xe){return Xe.trackSid+"+"+Xe.ssrc})});if(F(Array.from(ce.keys()),qe).forEach(function(Qe){return ce.delete(Qe)}),le){var He=function re(ne,Y){return(ne=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:Y,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},j(ne||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},j(ne.localCandidate||{},null)),ne.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},j(ne.remoteCandidate||{},null)),ne}(pe.activeIceCandidatePair,ze.peerConnectionId);Y.publishEvent("quality","active-ice-candidate-pair","info",He)}})},function(){})},z);ne.on("stateChanged",function ve(pe){"disconnected"===pe&&(clearInterval(_e),ne.removeListener("stateChanged",ve))})}(pe,le,ve.statsPublishIntervalMs),pe._update(ce),pe._peerConnectionManager.setEffectiveAdaptiveSimulcast(pe._publisherHintsSignaling.isSetup),pe}return k(Y,ne),Object.defineProperty(Y.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"signalingConnectionState",{get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),Y.prototype._deleteTrackReceiverDeferred=function(z){return this._trackReceiverDeferreds.delete(z)},Y.prototype._getOrCreateTrackReceiverDeferred=function(z){var ce=this._trackReceiverDeferreds.get(z)||V(),_e=this._peerConnectionManager.getTrackReceivers().find(function(ve){return ve.id===z&&"ended"!==ve.readyState});return _e?ce.resolve(_e):this._trackReceiverDeferreds.set(z,ce),ce},Y.prototype._addTrackReceiver=function(z){return this._getOrCreateTrackReceiverDeferred(z.id).resolve(z),this},Y.prototype._disconnect=function(z){var ce=ne.prototype._disconnect.call(this,z);return ce&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(le){le.publishFailed(z||new Error("LocalParticipant disconnected"))}),ce},Y.prototype._getTrackReceiver=function(z){var ce=this;return this._getOrCreateTrackReceiverDeferred(z).promise.then(function(le){return ce._deleteTrackReceiverDeferred(z),le})},Y.prototype._getInitialTrackSwitchOffState=function(z){var ce=this._pendingSwitchOffStates.get(z)||!1;return this._pendingSwitchOffStates.delete(z),ce&&this._log.warn("["+z+"] was initially switched off! "),ce},Y.prototype._getTrackSidsToTrackSignalings=function(){var z=N(this.participants,function(ce){return Array.from(ce.tracks)});return new Map(z)},Y.prototype._getOrCreateRemoteParticipant=function(z){var ce=this,le=this._RemoteParticipantV2,_e=this.participants.get(z.sid),ve=this;return _e||((_e=new le(z,function(pe){return ce._getInitialTrackSwitchOffState(pe)},function(pe,Ne){return ce._trackPrioritySignaling.sendTrackPriorityUpdate(pe,"subscribe",Ne)},function(pe,Ne){return ce._renderHintsSignaling.setTrackHint(pe,Ne)},function(pe){return ce._renderHintsSignaling.clearTrackHint(pe)})).on("stateChanged",function pe(Ne){"disconnected"===Ne&&(_e.removeListener("stateChanged",pe),ve.participants.delete(_e.sid),ve._disconnectedParticipantRevisions.set(_e.sid,_e.revision))}),this.connectParticipant(_e)),_e},Y.prototype._getState=function(){return{participant:this.localParticipant.getState()}},Y.prototype._maybeAddBandwidthProfile=function(z){var ce=this.localParticipant,le=ce.bandwidthProfile,_e=ce.bandwidthProfileRevision;return le&&this._lastBandwidthProfileRevision<_e?(this._lastBandwidthProfileRevision=_e,Object.assign({bandwidth_profile:S(le)},z)):z},Y.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},Y.prototype._publishPeerConnectionState=function(z){this._transport.publish(Object.assign({peer_connections:[z]},this._getState()))},Y.prototype._update=function(z){var ce=this;if(z.subscribed&&z.subscribed.revision>this._subscribedRevision){this._subscribedRevision=z.subscribed.revision,z.subscribed.tracks.forEach(function(ve){ve.id?(ce._subscriptionFailures.delete(ve.sid),ce._subscribed.set(ve.sid,ve.id)):ve.error&&!ce._subscriptionFailures.has(ve.sid)&&ce._subscriptionFailures.set(ve.sid,ve.error)});var le=new Set(z.subscribed.tracks.filter(function(ve){return!!ve.id}).map(function(ve){return ve.sid}));this._subscribed.forEach(function(ve,pe){le.has(pe)||ce._subscribed.delete(pe)})}var _e=new Set;return(z.participants||[]).forEach(function(ve){if(ve.sid!==ce.localParticipant.sid){var pe=ce._disconnectedParticipantRevisions.get(ve.sid);if(!(pe&&ve.revision<=pe)){pe&&ce._disconnectedParticipantRevisions.delete(ve.sid);var Ne=ce._getOrCreateRemoteParticipant(ve);Ne.update(ve),_e.add(Ne)}}}),"synced"===z.type&&this.participants.forEach(function(ve){_e.has(ve)||ve.disconnect()}),function ie(ne){var Y=ne._getTrackSidsToTrackSignalings();ne._subscriptionFailures.forEach(function(z,ce){var le=Y.get(ce);le&&(ne._subscriptionFailures.delete(ce),le.subscribeFailed(T(z.code,z.message)))}),Y.forEach(function(z){var ce=ne._subscribed.get(z.sid);(!ce||z.isSubscribed&&z.trackTransceiver.id!==ce)&&z.setTrackTransceiver(null),ce&&ne._getTrackReceiver(ce).then(function(le){return z.setTrackTransceiver(le)})})}(this),z.peer_connections&&this._peerConnectionManager.update(z.peer_connections,"synced"===z.type),z.recording&&this.recording.update(z.recording),z.published&&z.published.revision>this._publishedRevision&&(this._publishedRevision=z.published.revision,z.published.tracks.forEach(function(ve){ve.sid&&ce._published.set(ve.id,ve.sid)}),this.localParticipant.update(z.published)),z.participant&&this.localParticipant.connect(z.participant.sid,z.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(ve){var pe=ve.channel;!ve.isSetup&&z.media_signaling&&z.media_signaling[pe]&&z.media_signaling[pe].transport&&"data-channel"===z.media_signaling[pe].transport.type&&ve.setup(z.media_signaling[pe].transport.label)}),"warning"===z.type&&z.states&&z.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=z.states.revision,this.localParticipant.updateMediaStates(z.states)),this},Y.prototype._initPublisherHintSignaling=function(){var z=this;this._publisherHintsSignaling.on("updated",function(le,_e){Promise.all(le.map(function(ve){return z.localParticipant.setPublisherHint(ve.track,ve.encodings).then(function(pe){return{track:ve.track,result:pe}})})).then(function(ve){z._publisherHintsSignaling.sendHintResponse({id:_e,hints:ve})})});var ce=function(le){"video"===le.kind&&le.trackTransceiver.on("replaced",function(){z._publisherHintsSignaling.sendTrackReplaced({trackSid:le.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(le){return ce(le)}),this.localParticipant.on("trackAdded",function(le){return ce(le)})},Y.prototype._initTrackSwitchOffSignaling=function(){var z=this;this._trackSwitchOffSignaling.on("updated",function(ce,le){try{z._log.debug("received trackSwitch: ",{tracksOn:le,tracksOff:ce});var _e=new Map;le.forEach(function(ve){return _e.set(ve,!0)}),ce.forEach(function(ve){_e.get(ve)&&z._log.warn(ve+" is DUPLICATED in both tracksOff and tracksOn list"),_e.set(ve,!1)}),z.participants.forEach(function(ve){ve.tracks.forEach(function(pe){var Ne=_e.get(pe.sid);typeof Ne<"u"&&(pe.setSwitchedOff(!Ne),_e.delete(pe.sid))})}),_e.forEach(function(ve,pe){return z._pendingSwitchOffStates.set(pe,!ve)})}catch(ve){z._log.error("error processing track switch off:",ve)}})},Y.prototype._initDominantSpeakerSignaling=function(){var z=this;this._dominantSpeakerSignaling.on("updated",function(){return z.setDominantSpeaker(z._dominantSpeakerSignaling.loudestParticipantSid)})},Y.prototype._initNetworkQualityMonitorSignaling=function(){var z=this;this._networkQualitySignaling.on("ready",function(){var ce=new z._NetworkQualityMonitor(z._peerConnectionManager,z._networkQualitySignaling);z._networkQualityMonitor=ce,ce.on("updated",function(){"failed"!==z.iceConnectionState&&(z.localParticipant.setNetworkQualityLevel(ce.level,ce.levels),z.participants.forEach(function(le){var _e=ce.remoteLevels.get(le.sid);_e&&le.setNetworkQualityLevel(_e.level,_e)}))}),ce.start()}),this._networkQualitySignaling.on("teardown",function(){return z._teardownNetworkQualityMonitor()})},Y.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},Y.prototype.getStats=function(){var z=this;return this._peerConnectionManager.getStats().then(function(ce){return new Map(Array.from(ce).map(function(le){var _e=D(le,2),pe=_e[1];return[_e[0],Object.assign({},pe,{localAudioTrackStats:G(z,pe.localAudioTrackStats),localVideoTrackStats:G(z,pe.localVideoTrackStats),remoteAudioTrackStats:W(z,pe.remoteAudioTrackStats),remoteVideoTrackStats:W(z,pe.remoteVideoTrackStats)})]}))})},Y}(u);function B(ne,Y){return Y.reduce(function(z,ce){var le=ne.get(ce.trackId);return le?[Object.assign({},ce,{trackSid:le})].concat(z):z},[])}function G(ne,Y){return B(ne._published,Y)}function W(ne,Y){return B(new Map(Array.from(ne._subscribed.entries()).map(function(ce){var le=D(ce,2);return[le[1],le[0]]})),Y)}function fe(ne,Y,z){var ce=Y.framesEncoded,le=Y.packetsSent,_e=Y.totalEncodeTime,ve=Y.totalPacketSendDelay,pe=Object.assign({},ne),Ne=ne.trackSid+"+"+ne.ssrc,ze=z.get(Ne)||new Map;if("number"==typeof _e&&"number"==typeof ce){var qe=ze.get("avgEncodeDelay")||new P;qe.putSample(1e3*_e,ce),pe.avgEncodeDelay=Math.round(qe.get()),ze.set("avgEncodeDelay",qe)}if("number"==typeof ve&&"number"==typeof le){var tt=ze.get("avgPacketSendDelay")||new P;tt.putSample(1e3*ve,le),pe.avgPacketSendDelay=Math.round(tt.get()),ze.set("avgPacketSendDelay",tt)}return z.set(Ne,ze),pe}function ue(ne,Y,z){var ce=Y.estimatedPlayoutTimestamp,le=Y.framesDecoded,_e=Y.jitterBufferDelay,ve=Y.jitterBufferEmittedCount,pe=Y.totalDecodeTime,Ne=Object.assign({},ne),ze=ne.trackSid+"+"+ne.ssrc,qe=z.get(ze)||new Map;if("number"==typeof ce&&(Ne.estimatedPlayoutTimestamp=ce),"number"==typeof le&&"number"==typeof pe){var tt=qe.get("avgDecodeDelay")||new P;tt.putSample(1e3*pe,le),Ne.avgDecodeDelay=Math.round(tt.get()),qe.set("avgDecodeDelay",tt)}if("number"==typeof _e&&"number"==typeof ve){var He=qe.get("avgJitterBufferDelay")||new P;He.putSample(1e3*_e,ve),Ne.avgJitterBufferDelay=Math.round(He.get()),qe.set("avgJitterBufferDelay",He)}return z.set(ze,qe),Ne}$.exports=L},8004:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d,"track_priority",u)||this;return Object.defineProperties(f,{_enqueuedPriorityUpdates:{value:new Map}}),f.on("ready",function(h){Array.from(f._enqueuedPriorityUpdates.keys()).forEach(function(_){h.publish({type:"track_priority",track:_,subscribe:f._enqueuedPriorityUpdates.get(_)})})}),f}return k(m,v),m.prototype.sendTrackPriorityUpdate=function(d,u,f){if("subscribe"!==u)throw new Error("only subscribe priorities are supported, found: "+u);this._enqueuedPriorityUpdates.set(d,f),this._transport&&this._transport.publish({type:"track_priority",track:d,subscribe:f})},m}(w(4071));$.exports=I},5210:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d,"track_switch_off",u)||this;return f.on("ready",function(h){h.on("message",function(_){"track_switch_off"===_.type&&f._setTrackSwitchOffUpdates(_.off||[],_.on||[])})}),f}return k(m,v),m.prototype._setTrackSwitchOffUpdates=function(d,u){this.emit("updated",d,u)},m}(w(4071));$.exports=I},4892:function($,H,w){"use strict";var J,k=this&&this.__extends||(J=function(ee,Q){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,fe){ie.__proto__=fe}||function(ie,fe){for(var ue in fe)Object.prototype.hasOwnProperty.call(fe,ue)&&(ie[ue]=fe[ue])})(ee,Q)},function(ee,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function ie(){this.constructor=ee}J(ee,Q),ee.prototype=null===Q?Object.create(Q):(ie.prototype=Q.prototype,new ie)}),D=w(8675),I=w(5330),v=w(2606),m=w(8701).reconnectBackoffConfig,d=w(6543),u=w(8701),f=u.SDK_NAME,h=u.SDK_VERSION,_=u.SDP_FORMAT,b=w(9739),y=b.createBandwidthProfilePayload,M=b.createMediaSignalingPayload,E=b.createMediaWarningsPayload,C=b.createSubscribePayload,S=b.getUserAgent,V=b.isNonArrayObject,F=w(8380),j=F.createTwilioError,N=F.RoomCompletedError,R=F.SignalingConnectionError,P=F.SignalingServerBusyError,L={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},B=function(J){function ee(Q,ie,fe,ue,re,ne){var Y;return ne=Object.assign({Backoff:v,TwilioConnection:I,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:S()},ne),Y=J.call(this,"connecting",L)||this,Object.defineProperties(Y,{_accessToken:{value:ie},_automaticSubscription:{value:ne.automaticSubscription},_bandwidthProfile:{value:ne.bandwidthProfile},_dominantSpeaker:{value:ne.dominantSpeaker},_adaptiveSimulcast:{value:ne.adaptiveSimulcast},_eventObserver:{value:ne.eventObserver,writable:!1},_renderHints:{value:ne.renderHints},_iceServersStatus:{value:Array.isArray(ne.iceServers)?"overrode":"acquire"},_localParticipant:{value:fe},_name:{value:Q},_networkQuality:{value:V(ne.networkQuality)||ne.networkQuality},_notifyWarnings:{value:ne.notifyWarnings},_options:{value:ne},_peerConnectionManager:{value:ue},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new ne.Backoff(m)},_session:{value:null,writable:!0},_trackPriority:{value:ne.trackPriority},_trackSwitchOff:{value:ne.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:ne.userAgent},_wsServer:{value:re}}),function X(J){function ee(){if("disconnected"!==J.state){J._twilioConnection&&J._twilioConnection.removeListener("message",ie);var z=J._options,_e=z.TwilioConnection,ve=new _e(J._wsServer,Object.assign({helloBody:"connecting"===J.state&&"acquire"===J._iceServersStatus?J._createIceMessage():J._createConnectOrSyncOrDisconnectMessage()},z));ve.once("close",function(pe){pe===_e.CloseReason.LOCAL?Q():Q(new Error(pe))}),ve.on("message",ie),J._twilioConnection=ve}}function Q(Y){if("disconnected"!==J.state){if(!Y)return void J.disconnect();var z=J._getReconnectTimer();if(!z){var ce=Y.message===I.CloseReason.BUSY?new P:new R;return void J.disconnect(ce)}"connected"===J.state&&J.preempt("syncing"),z.then(ee)}}function ie(Y){if("disconnected"!==J.state){if("error"===Y.type)return void J.disconnect(j(Y.code,Y.message));switch(J.state){case"connected":switch(Y.type){case"connected":case"synced":case"update":case"warning":return void J.emit("message",Y);case"disconnected":return void J.disconnect("completed"===Y.status?new N:null);default:return}case"connecting":switch(Y.type){case"iced":return void J._options.onIced(Y.ice_servers).then(function(){J._sendConnectOrSyncOrDisconnectMessage()});case"connected":return J._setSession(Y.session,Y.options.session_timeout),J.emit("connected",Y),void J.preempt("connected");case"synced":case"update":return void J._updatesReceived.push(Y);case"disconnected":return void J.disconnect("completed"===Y.status?new N:null);default:return}case"syncing":switch(Y.type){case"connected":case"update":return void J._updatesReceived.push(Y);case"synced":return J._clearReconnectTimer(),J.emit("message",Y),void J.preempt("connected");case"disconnected":return void J.disconnect("completed"===Y.status?new N:null);default:return}default:return}}}J.on("stateChanged",function Y(z){switch(z){case"connected":var ce=J._updatesToSend.splice(0);return ce.length&&J.publish(function W(J){return J.reduce(function(ee,Q){return(!ee.participant&&Q.participant||ee.participant&&Q.participant&&Q.participant.revision>ee.participant.revision)&&(ee.participant=Q.participant),!ee.peer_connections&&Q.peer_connections?ee.peer_connections=G(Q.peer_connections):ee.peer_connections&&Q.peer_connections&&(ee.peer_connections=G(ee.peer_connections.concat(Q.peer_connections))),ee},{})}(ce)),void J._updatesReceived.splice(0).forEach(function(le){return J.emit("message",le)});case"disconnected":return J._twilioConnection.removeListener("message",ie),void J.removeListener("stateChanged",Y);default:return}});var fe=J._options;"overrode"===J._iceServersStatus?(0,fe.onIced)(fe.iceServers).then(ee):ee()}(Y),Y}return k(ee,J),ee.prototype._createConnectOrSyncOrDisconnectMessage=function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var Q={connecting:"connect",syncing:"sync"}[this.state],ie={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:Q,version:2};return"connect"===ie.type?(ie.ice_servers=this._iceServersStatus,ie.publisher={name:f,sdk_version:h,user_agent:this._userAgent},this._bandwidthProfile&&(ie.bandwidth_profile=y(this._bandwidthProfile)),this._notifyWarnings&&(ie.participant.media_warnings=E(this._notifyWarnings)),ie.media_signaling=M(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),ie.subscribe=C(this._automaticSubscription),ie.format=_,ie.token=this._accessToken):"sync"===ie.type?(ie.session=this._session,ie.token=this._accessToken):"update"===ie.type&&(ie.session=this._session),ie},ee.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}},ee.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var Q=this._createConnectOrSyncOrDisconnectMessage();Q&&this._twilioConnection.sendMessage(Q)},ee.prototype.disconnect=function(Q){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[Q]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0)},ee.prototype.publish=function(Q){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},Q)),!0;case"connecting":case"syncing":return this._updatesToSend.push(Q),!0;default:return!1}},ee.prototype.publishEvent=function(Q,ie,fe,ue){this._eventObserver.emit("event",{group:Q,name:ie,level:fe,payload:ue})},ee.prototype.sync=function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)},ee.prototype._setSession=function(Q,ie){this._session=Q,this._sessionTimeoutMS=1e3*ie},ee.prototype._getReconnectTimer=function(){var Q=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new d(function(){Q._sessionTimer&&(Q._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(ie){Q._reconnectBackoff.backoff(ie)}))},ee.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},ee}(D);function G(J){return Array.from(J.reduce(function(ee,Q){var ie=ee.get(Q.id)||Q;return(!ie.description&&Q.description||ie.description&&Q.description&&Q.description.revision>ie.description.revision)&&(ie.description=Q.description),(!ie.ice&&Q.ice||ie.ice&&Q.ice&&Q.ice.revision>ie.ice.revision)&&(ie.ice=Q.ice),ee.set(ie.id,ie),ee},new Map).values())}$.exports=B},8675:function($,H,w){"use strict";var M,k=this&&this.__extends||(M=function(E,C){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,V){S.__proto__=V}||function(S,V){for(var F in V)Object.prototype.hasOwnProperty.call(V,F)&&(S[F]=V[F])})(E,C)},function(E,C){if("function"!=typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function S(){this.constructor=E}M(E,C),E.prototype=null===C?Object.create(C):(S.prototype=C.prototype,new S)}),D=this&&this.__read||function(M,E){var C="function"==typeof Symbol&&M[Symbol.iterator];if(!C)return M;var V,j,S=C.call(M),F=[];try{for(;(void 0===E||E-- >0)&&!(V=S.next()).done;)F.push(V.value)}catch(N){j={error:N}}finally{try{V&&!V.done&&(C=S.return)&&C.call(S)}finally{if(j)throw j.error}}return F},I=this&&this.__spreadArray||function(M,E){for(var C=0,S=E.length,V=M.length;C<S;C++,V++)M[V]=E[C];return M},v=w(9069).EventEmitter,m=w(9739),d=function(M){function E(C,S){var V=M.call(this)||this,F=null,j=C;return S=function b(M){var E=new Map;for(var C in M)E.set(C,new Set(M[C]));return E}(S),Object.defineProperties(V,{_lock:{get:function(){return F},set:function(N){F=N}},_reachableStates:{value:h(S)},_state:{get:function(){return j},set:function(N){j=N}},_states:{value:S},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==F}},state:{enumerable:!0,get:function(){return j}}}),V.on("stateChanged",function(N){V._whenDeferreds.forEach(function(R){R.when(N,R.resolve,R.reject)})}),V}return k(E,M),E.prototype._whenPromise=function(C){var S=this;if("function"!=typeof C)return Promise.reject(new Error("when() executor must be a function"));var V=m.defer();return V.when=C,this._whenDeferreds.add(V),V.promise.then(function(F){return S._whenDeferreds.delete(V),F},function(F){throw S._whenDeferreds.delete(V),F})},E.prototype.bracket=function(C,S){var V,F=this;function j(N){if(F.hasLock(V)&&F.releaseLockCompletely(V),N)throw N}return this.takeLock(C).then(function(R){return S(V=R)}).then(function(R){return j(),R},j)},E.prototype.hasLock=function(C){return this._lock===C},E.prototype.preempt=function(C,S,V){if(!u(this._states,this.state,C))throw new Error('Cannot transition from "'+this.state+'" to "'+C+'"');var F;this.isLocked&&(F=this._lock,this._lock=null);var j=null;S&&(j=this.takeLockSync(S));var N=j?null:this.takeLockSync("preemption");return this.transition(C,j||N,V),F&&F.resolve(),N&&this.releaseLock(N),j},E.prototype.releaseLock=function(C){if(!this.isLocked)throw new Error("Could not release the lock for "+C.name+" because the StateMachine is not locked");if(!this.hasLock(C))throw new Error("Could not release the lock for "+C.name+" because "+this._lock.name+" has the lock");0===C.depth?(this._lock=null,C.resolve()):C.depth--},E.prototype.releaseLockCompletely=function(C){if(!this.isLocked)throw new Error("Could not release the lock for "+C.name+" because the StateMachine is not locked");if(!this.hasLock(C))throw new Error("Could not release the lock for "+C.name+" because "+this._lock.name+" has the lock");C.depth=0,this._lock=null,C.resolve()},E.prototype.takeLock=function(C){var S=this;if("object"==typeof C){var V=C;return new Promise(function(N){N(S.takeLockSync(V))})}var F=C;if(this.isLocked){var j=this.takeLock.bind(this,F);return this._lock.promise.then(j)}return Promise.resolve(this.takeLockSync(F))},E.prototype.takeLockSync=function(C){var S="string"==typeof C?null:C,V=S?S.name:C;if(S&&!this.hasLock(S)||!S&&this.isLocked)throw new Error("Could not take the lock for "+V+" because the lock for "+this._lock.name+" was not released");if(S)return S.depth++,S;var F=function f(M){var E=m.defer();return E.name=M,E.depth=0,E}(V);return this._lock=F,F},E.prototype.transition=function(C,S,V){if(V=V||[],this.isLocked){if(!S)throw new Error("You must provide the key in order to transition");if(!this.hasLock(S))throw new Error("Could not transition using the key for "+S.name+" because "+this._lock.name+" has the lock")}else if(S)throw new Error("Key provided for "+S.name+", but the StateMachine was not locked (possibly due to preemption)");if(!u(this._states,this.state,C))throw new Error('Cannot transition from "'+this.state+'" to "'+C+'"');this._state=C,this.emit.apply(this,I([],D(["stateChanged",C].concat(V))))},E.prototype.tryTransition=function(C,S,V){try{this.transition(C,S,V)}catch{return!1}return!0},E.prototype.when=function(C){var S=this;return this.state===C?Promise.resolve(this):u(this._reachableStates,this.state,C)?this._whenPromise(function(V,F,j){V===C?F(S):u(S._reachableStates,V,C)||j(y(V,C))}):Promise.reject(y(this.state,C))},E}(v);function u(M,E,C){return M.get(E).has(C)}function h(M){return Array.from(M.keys()).reduce(function(E,C){return E.set(C,_(M,C))},new Map)}function _(M,E,C){return C=C||new Set,M.get(E).forEach(function(S){C.has(S)||(C.add(S),_(M,S,C).forEach(C.add,C))}),C}function y(M,E){return new Error('"'+E+'" cannot be reached from "'+M+'"')}$.exports=d},7704:$=>{"use strict";$.exports=function H(w){return(w=w.filter(function(k){return"number"==typeof k})).length<1?void 0:w.reduce(function(k,D){return D+k})/w.length}},4239:$=>{"use strict";var H=function(){function w(k,D,I,v){Object.defineProperties(this,{availableSend:{enumerable:!0,value:I},recv:{enumerable:!0,value:D},rtt:{enumerable:!0,value:v},send:{enumerable:!0,value:k}})}return w.of=function(k,D){var I=(D.timestamp-k.timestamp)/1e3;return new w(I>0?(D.bytesSent-k.bytesSent)/I*8:0,I>0?(D.bytesReceived-k.bytesReceived)/I*8:0,D.availableOutgoingBitrate,D.currentRoundTripTime)},w}();$.exports=H},2483:($,H,w)=>{"use strict";var k=w(4239),D=function(){function I(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new k(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return I.prototype.next=function(v){var m=this.lastStats;if(this.lastStats=v,m){var d=m.id===v.id?k.of(m,v):new k(0,0);this.lastReport=d}return this.lastReport},I}();$.exports=D},6719:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f){var h=v.call(this,d,u,f)||this;return Object.defineProperties(h,{audioLevel:{value:"number"==typeof u.audioInputLevel?u.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof u.jitter?u.jitter:null,enumerable:!0}}),h}return k(m,v),m}(w(3840));$.exports=I},3840:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f){var h=v.call(this,d,u)||this;return Object.defineProperties(h,{bytesSent:{value:"number"==typeof u.bytesSent?u.bytesSent:f?0:null,enumerable:!0},packetsSent:{value:"number"==typeof u.packetsSent?u.packetsSent:f?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof u.roundTripTime?u.roundTripTime:f?0:null,enumerable:!0}}),h}return k(m,v),m}(w(9078));$.exports=I},1371:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u,f){var h=v.call(this,d,u,f)||this,_=null;"number"==typeof u.frameWidthInput&&"number"==typeof u.frameHeightInput&&(_={},Object.defineProperties(_,{width:{value:u.frameWidthInput,enumerable:!0},height:{value:u.frameHeightInput,enumerable:!0}}));var b=null;return"number"==typeof u.frameWidthSent&&"number"==typeof u.frameHeightSent&&(b={},Object.defineProperties(b,{width:{value:u.frameWidthSent,enumerable:!0},height:{value:u.frameHeightSent,enumerable:!0}})),Object.defineProperties(h,{captureDimensions:{value:_,enumerable:!0},dimensions:{value:b,enumerable:!0},captureFrameRate:{value:"number"==typeof u.frameRateInput?u.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof u.frameRateSent?u.frameRateSent:null,enumerable:!0}}),h}return k(m,v),m}(w(3840));$.exports=I},1908:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d){return v.call(this,d)||this}return k(m,v),m}(w(4976));$.exports=I},4661:$=>{"use strict";$.exports=function w(k){var D=k.actual,v=k.available,d=k.level;Object.defineProperties(this,{actual:{value:void 0===D?null:D,enumerable:!0},available:{value:void 0===v?null:v,enumerable:!0},level:{value:void 0===d?null:d,enumerable:!0}})}},2165:$=>{"use strict";$.exports=function w(k){var D=k.fractionLost,v=k.level;Object.defineProperties(this,{fractionLost:{value:void 0===D?null:D,enumerable:!0},level:{value:void 0===v?null:v,enumerable:!0}})}},2590:$=>{"use strict";$.exports=function w(k){var D=k.jitter,v=k.rtt,d=k.level;Object.defineProperties(this,{jitter:{value:void 0===D?null:D,enumerable:!0},rtt:{value:void 0===v?null:v,enumerable:!0},level:{value:void 0===d?null:d,enumerable:!0}})}},4976:($,H,w)=>{"use strict";var k=w(220),D=w(5206);$.exports=function v(m){var f=m.sendStats,h=void 0===f?null:f,_=m.recvStats,b=void 0===_?null:_;Object.defineProperties(this,{send:{value:m.send,enumerable:!0},recv:{value:m.recv,enumerable:!0},sendStats:{value:h?new k(h):null,enumerable:!0},recvStats:{value:b?new D(b):null,enumerable:!0}})}},5206:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d){return v.call(this,d)||this}return k(m,v),m}(w(4236));$.exports=I},4236:($,H,w)=>{"use strict";var k=w(4661),D=w(2165),I=w(2590);$.exports=function m(d){var u=d.bandwidth,f=void 0===u?null:u,h=d.fractionLost,_=void 0===h?null:h,b=d.latency,y=void 0===b?null:b;Object.defineProperties(this,{bandwidth:{value:f?new k(f):null,enumerable:!0},fractionLost:{value:_?new D(_):null,enumerable:!0},latency:{value:y?new I(y):null,enumerable:!0}})}},220:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d){return v.call(this,d)||this}return k(m,v),m}(w(4236));$.exports=I},669:($,H,w)=>{"use strict";var k=w(1908),D=w(2003);$.exports=function v(m){var u=m.audio,f=m.video;Object.defineProperties(this,{level:{value:m.level,enumerable:!0},audio:{value:u?new k(u):null,enumerable:!0},video:{value:f?new D(f):null,enumerable:!0}})}},2003:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d){return v.call(this,d)||this}return k(m,v),m}(w(4976));$.exports=I},5055:($,H,w)=>{"use strict";var k=w(8020),D=w(775),I=function(){function v(m,d,u){Object.defineProperties(this,{ice:{enumerable:!0,value:m},audio:{enumerable:!0,value:d},video:{enumerable:!0,value:u}})}return v.prototype.summarize=function(){var m=this.audio.send.concat(this.video.send),d=D.summarize(m),u=this.audio.recv.concat(this.video.recv),f=k.summarize(u);return{ice:this.ice,send:d,recv:f,audio:{send:D.summarize(this.audio.send),recv:k.summarize(this.audio.recv)},video:{send:D.summarize(this.video.send),recv:k.summarize(this.video.recv)}}},v}();$.exports=I},8753:function($,H,w){"use strict";var k=this&&this.__read||function(x,L){var B="function"==typeof Symbol&&x[Symbol.iterator];if(!B)return x;var W,J,G=B.call(x),X=[];try{for(;(void 0===L||L-- >0)&&!(W=G.next()).done;)X.push(W.value)}catch(ee){J={error:ee}}finally{try{W&&!W.done&&(B=G.return)&&B.call(G)}finally{if(J)throw J.error}}return X},D=this&&this.__spreadArray||function(x,L){for(var B=0,G=L.length,W=x.length;B<G;B++,W++)x[W]=L[B];return x},I=this&&this.__values||function(x){var L="function"==typeof Symbol&&Symbol.iterator,B=L&&x[L],G=0;if(B)return B.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&G>=x.length&&(x=void 0),{value:x&&x[G++],done:!x}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")},v=w(7627).guessBrowser,m=w(2483),d=w(5055),u=w(1013),f=w(1031),h=function(){function x(L){Object.defineProperties(this,{pc:{enumerable:!0,value:L},ice:{enumerable:!0,value:new m},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return x.prototype.next=function(){var L=this,B="firefox"===v()?function P(x){var L=x.pc.getTransceivers().filter(function(G){return G.currentDirection&&G.currentDirection.match(/send/)&&G.sender.track}).map(function(G){return G.sender}),B=x.pc.getTransceivers().filter(function(G){return G.currentDirection&&G.currentDirection.match(/recv/)}).map(function(G){return G.receiver});return Promise.all([_(L),_(B),x.pc.getStats()]).then(function(G){var W=k(G,3),X=W[0],J=W[1],ee=W[2],Q=y(x),ie=S(x);X.forEach(function(re,ne){return F(x,re,ie,ne)}),N(Q,ie);var fe=M(x),ue=V(x);J.forEach(function(re,ne){return j(x,re,ue,ne)}),N(fe,ue),R(x.ice,ee)})}(this):function T(x){return x.pc.getStats().then(function(L){var B=y(x),G=S(x);F(x,L,G),N(B,G);var W=M(x),X=V(x);j(x,L,X),N(W,X),R(x.ice,L)})}(this);return B.then(function(){var G=D([],k(L.audio.send.values())),W=D([],k(L.video.send.values())),X=D([],k(L.audio.recv.values())),J=D([],k(L.video.recv.values())),ee=new d(L.ice.lastReport,{send:G.map(function(Q){return Q.lastReport}).filter(function(Q){return Q}),recv:X.map(function(Q){return Q.lastReport}).filter(function(Q){return Q})},{send:W.map(function(Q){return Q.lastReport}).filter(function(Q){return Q}),recv:J.map(function(Q){return Q.lastReport}).filter(function(Q){return Q})});return L.lastReport=ee,ee})},x}();function _(x){return Promise.all(x.map(function(L){var B=L.track.id;return L.getStats().then(function(G){var W,X;try{for(var J=I(G.values()),ee=J.next();!ee.done;ee=J.next()){var Q=ee.value;"inbound-rtp"===Q.type&&(Q.id=B+"-"+Q.id)}}catch(ie){W={error:ie}}finally{try{ee&&!ee.done&&(X=J.return)&&X.call(J)}finally{if(W)throw W.error}}return[B,G]})})).then(function(L){return new Map(L)})}function b(x,L,B,G,W){var X=L[G.mediaType];if(!W){var J=B.get(G.trackId);J&&(W=J.trackIdentifier)}if(X&&W){if(X.has(G.id))return X.get(G.id);var ee=new x(W,G);X.set(G.id,ee)}return null}function y(x){return{audio:x.audio.send,video:x.video.send}}function M(x){return{audio:x.audio.recv,video:x.video.recv}}function E(x,L,B,G){return b(f,y(x),L,B,G)}function C(x,L,B,G){return b(u,M(x),L,B,G)}function S(x){return{audio:new Set(x.audio.send.keys()),video:new Set(x.video.send.keys())}}function V(x){return{audio:new Set(x.audio.recv.keys()),video:new Set(x.video.recv.keys())}}function F(x,L,B,G){var W,X;try{for(var J=I(L.values()),ee=J.next();!ee.done;ee=J.next()){var Q=ee.value;if("outbound-rtp"===Q.type&&!Q.isRemote){if("firefox"!==v()&&!Q.trackId)continue;var ie=B[Q.mediaType];ie&&ie.delete(Q.id);var fe=E(x,L,Q,G);if(fe){var ue=L.get(Q.remoteId);fe.next(G||fe.trackId,Q,ue)}}}}catch(re){W={error:re}}finally{try{ee&&!ee.done&&(X=J.return)&&X.call(J)}finally{if(W)throw W.error}}}function j(x,L,B,G){var W,X;try{for(var J=I(L.values()),ee=J.next();!ee.done;ee=J.next()){var Q=ee.value;if("inbound-rtp"===Q.type&&!Q.isRemote){var ie=B[Q.mediaType];ie&&ie.delete(Q.id);var fe=C(x,L,Q,G);fe&&fe.next(G||fe.trackId,Q)}}}catch(ue){W={error:ue}}finally{try{ee&&!ee.done&&(X=J.return)&&X.call(J)}finally{if(W)throw W.error}}}function N(x,L){var B=function(W){var X=x[W];L[W].forEach(function(ee){return X.delete(ee)})};for(var G in L)B(G)}function R(x,L){var B,G,W,X,J;try{for(var ee=I(L.values()),Q=ee.next();!Q.done;Q=ee.next())"transport"===(ie=Q.value).type&&(J=L.get(ie.selectedCandidatePairId))}catch(re){B={error:re}}finally{try{Q&&!Q.done&&(G=ee.return)&&G.call(ee)}finally{if(B)throw B.error}}if(J)x.next(J);else try{for(var fe=I(L.values()),ue=fe.next();!ue.done;ue=fe.next()){var ie;"candidate-pair"===(ie=ue.value).type&&ie.nominated&&(!("selected"in ie)||ie.selected)&&x.next(ie)}}catch(re){W={error:re}}finally{try{ue&&!ue.done&&(X=fe.return)&&X.call(fe)}finally{if(W)throw W.error}}}$.exports=h},8020:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=w(7704),I=w(7176),v=w(7483),m=function(d){function u(f,h,_,b,y,M,E){var C=d.call(this,f,h,_)||this;return Object.defineProperties(C,{deltaPacketsLost:{enumerable:!0,value:b},deltaPacketsReceived:{enumerable:!0,value:y},fractionLost:{enumerable:!0,value:M},jitter:{enumerable:!0,value:E},phonyFractionLost:{enumerable:!0,value:y>0?b/y:0}}),C}return k(u,d),u.of=function(f,h,_){if(h.id!==_.id)throw new Error("RTCStats IDs must match");var b=(_.timestamp-h.timestamp)/1e3,M=b>0?(_.bytesReceived-h.bytesReceived)/b*8:0,E=Math.max(_.packetsLost-h.packetsLost,0);return new u(h.id,f,M,E,_.packetsReceived-h.packetsReceived,_.fractionLost,_.jitter)},u.summarize=function(f){var h=f.map(function(M){return M.summarize()});return{bitrate:v(h.map(function(M){return M.bitrate})),fractionLost:D(h.map(function(M){return M.fractionLost})),jitter:D(h.map(function(M){return M.jitter}))}},u.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},u}(I);$.exports=m},1013:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(8020),v=function(m){function d(u,f){var h=m.call(this,f.id,u,f)||this;return Object.defineProperties(h,{lastReport:{enumerable:!0,value:null,writable:!0}}),h}return k(d,m),d.prototype.next=function(u,f){var h=this.lastStats;this.lastStats=f,this.trackId=u;var _=D.of(u,h,f);return this.lastReport=_,_},d}(w(6986));$.exports=v},5180:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d,u)||this;return Object.defineProperties(f,{audioLevel:{value:"number"==typeof u.audioOutputLevel?u.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof u.jitter?u.jitter:null,enumerable:!0}}),f}return k(m,v),m}(w(2613));$.exports=I},2613:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d,u)||this;return Object.defineProperties(f,{bytesReceived:{value:"number"==typeof u.bytesReceived?u.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof u.packetsReceived?u.packetsReceived:null,enumerable:!0}}),f}return k(m,v),m}(w(9078));$.exports=I},993:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this,d,u)||this,h=null;return"number"==typeof u.frameWidthReceived&&"number"==typeof u.frameHeightReceived&&(h={},Object.defineProperties(h,{width:{value:u.frameWidthReceived,enumerable:!0},height:{value:u.frameHeightReceived,enumerable:!0}})),Object.defineProperties(f,{dimensions:{value:h,enumerable:!0},frameRate:{value:"number"==typeof u.frameRateReceived?u.frameRateReceived:null,enumerable:!0}}),f}return k(m,v),m}(w(2613));$.exports=I},7176:$=>{"use strict";$.exports=function w(k,D,I){Object.defineProperties(this,{id:{enumerable:!0,value:k},trackId:{enumerable:!0,value:D},bitrate:{enumerable:!0,value:I}})}},6986:$=>{"use strict";$.exports=function w(k,D,I){Object.defineProperties(this,{id:{enumerable:!0,value:k,writable:!0},trackId:{enumerable:!0,value:D,writable:!0},lastStats:{enumerable:!0,value:I,writable:!0}})}},775:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=w(7704),I=w(7176),v=w(7483),m=function(d){function u(f,h,_,b){var y=d.call(this,f,h,_)||this;return Object.defineProperties(y,{rtt:{enumerable:!0,value:b}}),y}return k(u,d),u.of=function(f,h,_,b){if(h.id!==_.id)throw new Error("RTCStats IDs must match");var y=(_.timestamp-h.timestamp)/1e3;return new u(h.id,f,y>0?(_.bytesSent-h.bytesSent)/y*8:0,b&&"number"==typeof b.roundTripTime?b.roundTripTime/1e3:void 0)},u.summarize=function(f){return{bitrate:v(f.map(function(b){return b.bitrate})),rtt:D(f.map(function(b){return b.rtt}))}},u}(I);$.exports=m},1031:function($,H,w){"use strict";var m,k=this&&this.__extends||(m=function(d,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_])})(d,u)},function(d,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=d}m(d,u),d.prototype=null===u?Object.create(u):(f.prototype=u.prototype,new f)}),D=w(6986),I=w(775),v=function(m){function d(u,f){var h=m.call(this,f.id,u,f)||this;return Object.defineProperties(h,{lastReport:{enumerable:!0,value:null,writable:!0}}),h}return k(d,m),d.prototype.next=function(u,f,h){var _=this.lastStats;this.lastStats=f,this.trackId=u;var b=I.of(u,_,f,h);return this.lastReport=b,b},d}(D);$.exports=v},7805:($,H,w)=>{"use strict";var k=w(6719),D=w(1371),I=w(5180),v=w(993);$.exports=function d(u,f,h){if("string"!=typeof u)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:u,enumerable:!0},localAudioTrackStats:{value:f.localAudioTrackStats.map(function(_){return new k(_.trackId,_,h)}),enumerable:!0},localVideoTrackStats:{value:f.localVideoTrackStats.map(function(_){return new D(_.trackId,_,h)}),enumerable:!0},remoteAudioTrackStats:{value:f.remoteAudioTrackStats.map(function(_){return new I(_.trackId,_)}),enumerable:!0},remoteVideoTrackStats:{value:f.remoteVideoTrackStats.map(function(_){return new v(_.trackId,_)}),enumerable:!0}})}},7483:$=>{"use strict";$.exports=function H(w){return w.reduce(function(k,D){return"number"==typeof D?D+k:k},0)}},9078:$=>{"use strict";$.exports=function w(k,D){if("string"!=typeof k)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:k,enumerable:!0},trackSid:{value:D.trackSid,enumerable:!0},timestamp:{value:D.timestamp,enumerable:!0},ssrc:{value:D.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof D.packetsLost?D.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof D.codecName?D.codecName:null,enumerable:!0}})}},4605:function($,H,w){"use strict";var v,k=this&&this.__extends||(v=function(m,d){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(m,d)},function(m,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=m}v(m,d),m.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}),I=function(v){function m(d,u){var f=v.call(this)||this;return Object.defineProperties(f,{id:{enumerable:!0,value:d},kind:{enumerable:!0,value:u}}),f}return k(m,v),m.prototype.stop=function(){this.emit("stopped")},m}(w(7772));$.exports=I},5330:function($,H,w){"use strict";var ue,k=this&&this.__extends||(ue=function(re,ne){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,z){Y.__proto__=z}||function(Y,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(Y[ce]=z[ce])})(re,ne)},function(re,ne){if("function"!=typeof ne&&null!==ne)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");function Y(){this.constructor=re}ue(re,ne),re.prototype=null===ne?Object.create(ne):(Y.prototype=ne.prototype,new Y)}),D=this&&this.__read||function(ue,re){var ne="function"==typeof Symbol&&ue[Symbol.iterator];if(!ne)return ue;var z,le,Y=ne.call(ue),ce=[];try{for(;(void 0===re||re-- >0)&&!(z=Y.next()).done;)ce.push(z.value)}catch(_e){le={error:_e}}finally{try{z&&!z.done&&(ne=Y.return)&&ne.call(Y)}finally{if(le)throw le.error}}return ce},I=this&&this.__spreadArray||function(ue,re){for(var ne=0,Y=re.length,z=ue.length;ne<Y;ne++,z++)ue[z]=re[ne];return ue},v=w(8675),m=w(9739),d=m.buildLogLevels,u=m.makeUUID,f=w(1458),h=w(2643),_=w(6543),b=0,y={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},M={closed:"close",open:"open",waiting:"waiting"},C=3,S=3,V=5e3,F=15e3,j=5e3,B=3004,G=3005,J=globalThis,ee=J.WebSocket?J.WebSocket:w(3332),Q={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},ie=new Map([[3e3,Q.TIMEOUT],[3001,Q.TIMEOUT],[3002,Q.FAILED],[3003,Q.FAILED],[B,Q.TIMEOUT],[3006,Q.BUSY],[3007,Q.TIMEOUT]]),fe=function(ue){function re(ne,Y){var z=ue.call(this,"early",y)||this;Y=Object.assign({helloBody:null,maxConsecutiveFailedHellos:S,maxConsecutiveMissedHeartbeats:C,requestedHeartbeatTimeout:V,openTimeout:F,welcomeTimeout:j,Log:f,WebSocket:ee},Y);var ce=d(Y.logLevel),le=new Y.Log("default",z,ce,Y.loggerName),_e=Y.networkMonitor?new h(function(){var pe=_e.type,Ne="Network changed"+(pe?" to "+pe:"");le.debug(Ne),z._close({code:B,reason:Ne})}):null;Object.defineProperties(z,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:Y.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:Y.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++b},_log:{value:le},_messageQueue:{value:[]},_networkMonitor:{value:_e},_options:{value:Y},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:ne},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var ve={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return z.on("stateChanged",function(pe){for(var Ne=[],ze=1;ze<arguments.length;ze++)Ne[ze-1]=arguments[ze];pe in M&&z.emit.apply(z,I([M[pe]],D(Ne)));var qe={name:pe,group:"signaling",level:ve[z.state]};if("closed"===pe){var He=D(Ne,1)[0];qe.payload={reason:He},qe.level=He===Q.LOCAL?"info":"error"}z._eventObserver.emit("event",qe)}),z._eventObserver.emit("event",{name:z.state,group:"signaling",level:ve[z.state]}),z._connect(),z}return k(re,ue),re.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},re.prototype._close=function(ne){var Y=ne.code,z=ne.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&Y!==G&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var ce=this._log;1e3===Y?(ce.debug("Closed"),this.transition("closed",null,[Q.LOCAL])):(ce.warn("Closed: "+Y+" - "+z),Y!==G&&this.transition("closed",null,[ie.get(Y)||Q.REMOTE]));var le=this._ws.readyState,_e=this._options.WebSocket;le!==_e.CLOSING&&le!==_e.CLOSED&&this._ws.close(Y,z)}},re.prototype._connect=function(){var ne=this,Y=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void Y.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var z=this._ws;Y.debug("Created a new WebSocket:",z),z.addEventListener("close",function(le){return ne._close(le)});var ce=this._options.openTimeout;this._openTimeout=new _(function(){ne._close({code:3007,reason:"Failed to open in "+ce+" ms"})},ce),z.addEventListener("open",function(){Y.debug("WebSocket opened:",z),ne._openTimeout.clear(),ne._startHandshake(),ne._networkMonitor&&ne._networkMonitor.start()}),z.addEventListener("message",function(le){Y.debug("Incoming: "+le.data);try{le=JSON.parse(le.data)}catch(_e){return void ne.emit("error",_e)}switch(le.type){case"bad":ne._handleBad(le);break;case"busy":ne._handleBusy(le);break;case"bye":break;case"msg":ne._handleMessage(le);case"heartbeat":ne._handleHeartbeat();break;case"welcome":ne._handleWelcome(le);break;default:ne._log.debug("Unknown message type: "+le.type),ne.emit("error",new Error("Unknown message type: "+le.type))}})},re.prototype._handleBad=function(ne){var Y=ne.reason,z=this._log;if(["connecting","open"].includes(this.state))return"connecting"===this.state?(z.warn("Closing: 3002 - "+Y),void this._close({code:3002,reason:Y})):(z.debug("Error: "+Y),void this.emit("error",new Error(Y)));z.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')},re.prototype._handleBusy=function(ne){var Y=this,z=ne.cookie,ce=ne.keepAlive,le=ne.retryAfter,_e=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var ve=le<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+le+" ms";if(le<0)return _e.warn("Closing: 3006 - "+ve),void this._close({code:3006,reason:ve});this._hellosLeft=this._options.maxConsecutiveFailedHellos,this._cookie=z||null,ce?(_e.warn(ve),this._busyWaitTimeout=new _(function(){return Y._startHandshake()},le)):(_e.warn("Closing: 3005 - "+ve),this._close({code:G,reason:ve}),this._busyWaitTimeout=new _(function(){return Y._connect()},le)),this.transition("waiting",null,[ce,le])}else _e.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')},re.prototype._handleHeartbeat=function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')},re.prototype._handleHeartbeatTimeout=function(){if("open"===this.state){var ne=this._log,Y=this._options.maxConsecutiveMissedHeartbeats;ne.debug("Consecutive heartbeats missed: "+Y);var z="Missed "+Y+' "heartbeat" messages';ne.warn("Closing: 3001 - "+z),this._close({code:3001,reason:z})}},re.prototype._handleMessage=function(ne){"open"===this.state?this.emit("message",ne.body):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')},re.prototype._handleWelcome=function(ne){var Y=this,z=ne.negotiatedTimeout,ce=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(ce.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var _e=z*this._options.maxConsecutiveMissedHeartbeats,ve=z-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new _(function(){return Y._handleHeartbeatTimeout()},_e),this._messageQueue.splice(0).forEach(function(pe){return Y._send(pe)}),this._sendHeartbeatTimeout=new _(function(){return Y._sendHeartbeat()},ve),this.transition("open")}else ce.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')},re.prototype._handleWelcomeTimeout=function(){if("connecting"===this.state){var ne=this._log;if(this._hellosLeft<=0){var Y="All handshake attempts failed";return ne.warn("Closing: 3000 - "+Y),void this._close({code:3e3,reason:Y})}ne.warn("Handshake attempt "+(this._options.maxConsecutiveFailedHellos-this._hellosLeft)+" failed"),this._startHandshake()}},re.prototype._send=function(ne){if(this._ws.readyState===this._options.WebSocket.OPEN){var ce=JSON.stringify(ne);this._log.debug("Outgoing: "+ce);try{this._ws.send(ce),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var le="Failed to send message";this._log.warn("Closing: 3003 - "+le),this._close({code:3003,reason:le})}}},re.prototype._sendHeartbeat=function(){"closed"!==this.state&&this._send({type:"heartbeat"})},re.prototype._sendHello=function(){var ne=this._options,Y=ne.helloBody,z=ne.requestedHeartbeatTimeout,ce={id:u(),timeout:z,type:"hello",version:2};this._cookie&&(ce.cookie=this._cookie),Y&&(ce.body=Y),this._send(ce)},re.prototype._sendOrEnqueue=function(ne){var Y=this;"closed"!==this.state&&("open"===this.state?function(ce){return Y._send(ce)}:function(ce){return Y._messageQueue.push(ce)})(ne)},re.prototype._startHandshake=function(){var ne=this;["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state&&(this._hellosLeft--,this._sendHello(),this._welcomeTimeout=new _(function(){return ne._handleWelcomeTimeout()},this._options.welcomeTimeout))},re.prototype.close=function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))},re.prototype.sendMessage=function(ne){this._sendOrEnqueue({body:ne,type:"msg"})},re}(v);fe.CloseReason=Q,$.exports=fe},6412:($,H,w)=>{"use strict";var k=w(9739).defer,D=function(){function I(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return I.prototype.put=function(v){this._hasValue=!0,this._value=v;var m=this._deferreds.shift();return m&&m.resolve(v),this},I.prototype.take=function(){var v=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var m=k();return this._deferreds.push(m),m.promise.then(function(d){return v._hasValue=!1,d})},I}();$.exports=D},2606:$=>{var H=function(){function w(k){Object.defineProperties(this,{_min:{value:k.min||100},_max:{value:k.max||1e4},_jitter:{value:k.jitter>0&&k.jitter<=1?k.jitter:0},_factor:{value:k.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var D=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var I=Math.random(),v=Math.floor(I*this._jitter*D);D=1&Math.floor(10*I)?D+v:D-v}return 0|Math.min(D,this._max)}},_timeoutID:{value:null,writable:!0}})}return w.prototype.backoff=function(k){var D=this,I=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){D._attempts++,k()},I)},w.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},w}();$.exports=H},3948:function($){"use strict";var H=this&&this.__read||function(_,b){var y="function"==typeof Symbol&&_[Symbol.iterator];if(!y)return _;var E,S,M=y.call(_),C=[];try{for(;(void 0===b||b-- >0)&&!(E=M.next()).done;)C.push(E.value)}catch(V){S={error:V}}finally{try{E&&!E.done&&(y=M.return)&&y.call(M)}finally{if(S)throw S.error}}return C};function k(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function D(){return k()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function I(){return k()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}$.exports={isAndroid:function w(){return/Android/.test(navigator.userAgent)},isIOS:function v(){return D()||I()},isIpad:D,isIphone:I,isMobile:function m(){return/Mobi/.test(navigator.userAgent)},isNonChromiumEdge:function d(_){return"chrome"===_&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")},mobileWebKitBrowser:function f(_){return"safari"!==_?null:"brave"in navigator?"brave":["edge","edg"].find(function(b){return navigator.userAgent.toLowerCase().includes(b)})||null},rebrandedChromeBrowser:function u(_){if("chrome"!==_)return null;if("brave"in navigator)return"brave";var M=function h(_){for(var b=[],y=[],M=0;M<_.length;M++)if("("===_[M])b.push(M);else if(")"===_[M]&&b.length>0){var E=b.pop();0===b.length&&y.push(_.substring(E,M+1))}return y}(navigator.userAgent).reduce(function(S,V){return S.replace(V,"")},navigator.userAgent).match(/[^\s]+/g)||[];return H(M.map(function(S){return S.split("/")[0].toLowerCase()})).slice(2).find(function(S){return!["chrome","mobile","safari"].includes(S)})||null}}},8126:function($){"use strict";var H=this&&this.__read||function(D,I){var v="function"==typeof Symbol&&D[Symbol.iterator];if(!v)return D;var d,f,m=v.call(D),u=[];try{for(;(void 0===I||I-- >0)&&!(d=m.next()).done;)u.push(d.value)}catch(h){f={error:h}}finally{try{d&&!d.done&&(v=m.return)&&v.call(m)}finally{if(f)throw f.error}}return u},w=this&&this.__spreadArray||function(D,I){for(var v=0,m=I.length,d=D.length;v<m;v++,d++)D[d]=I[v];return D},k=function(){function D(I,v){var m=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:v}}),Object.defineProperty(this,"_promise",{value:new Promise(function(d,u){I(function(f){m._isCancelable=!1,d(f)},function(f){m._isCancelable=!1,u(f)},function(){return m._isCanceled})})})}return D.reject=function(I){return new D(function(m,d){d(I)},function(){})},D.resolve=function(I){return new D(function(m){m(I)},function(){})},D.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},D.prototype.catch=function(){var I=[].slice.call(arguments),v=this._promise;return new D(function(d,u){v.catch.apply(v,w([],H(I))).then(d,u)},this._onCancel)},D.prototype.then=function(){var I=[].slice.call(arguments),v=this._promise;return new D(function(d,u){v.then.apply(v,w([],H(I))).then(d,u)},this._onCancel)},D.prototype.finally=function(){var I=[].slice.call(arguments),v=this._promise;return new D(function(d,u){v.finally.apply(v,w([],H(I))).then(d,u)},this._onCancel)},D}();$.exports=k},8701:($,H,w)=>{"use strict";var k=w(1730);$.exports.SDK_NAME=k.name+".js",$.exports.SDK_VERSION=k.version,$.exports.SDP_FORMAT="unified",$.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},$.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},$.exports.DEFAULT_ENVIRONMENT="prod",$.exports.DEFAULT_REALM="us1",$.exports.DEFAULT_REGION="gll",$.exports.DEFAULT_LOG_LEVEL="warn",$.exports.DEFAULT_LOGGER_NAME="twilio-video",$.exports.WS_SERVER=function(I,v){return v="gll"===v?"global":encodeURIComponent(v),"prod"===I?"wss://"+v+".vss.twilio.com/signaling":"wss://"+v+".vss."+I+".twilio.com/signaling"},$.exports.PUBLISH_MAX_ATTEMPTS=5,$.exports.PUBLISH_BACKOFF_JITTER=10,$.exports.PUBLISH_BACKOFF_MS=20,$.exports.typeErrors={ILLEGAL_INVOKE:function(I,v){return new TypeError("Illegal call to "+I+": "+v)},INVALID_TYPE:function(I,v){return new TypeError(I+" must be "+function D(I){return["a","e","i","o","u"].includes(I.toLowerCase()[0])?"an":"a"}(v)+" "+v)},INVALID_VALUE:function(I,v){return new RangeError(I+" must be one of "+v.join(", "))},REQUIRED_ARGUMENT:function(I){return new TypeError(I+" must be specified")}},$.exports.DEFAULT_FRAME_RATE=24,$.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,$.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,$.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,$.exports.DEFAULT_NQ_LEVEL_LOCAL=1,$.exports.DEFAULT_NQ_LEVEL_REMOTE=0,$.exports.MAX_NQ_LEVEL=3,$.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,$.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,$.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:1e3*$.exports.DEFAULT_SESSION_TIMEOUT_SEC,jitter:1},$.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},$.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},$.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},$.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},$.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},$.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}},9059:($,H,w)=>{"use strict";var k=w(4687);$.exports=function v(m){var d=w(7708),u={},f=d.getOrCreate(u),h=3;return function _(){return h--,k(f,m.srcObject,250).then(function(b){return!!b&&(!(h>0)||_())}).catch(function(){return!0})}().finally(function(){d.release(u)})}},1741:$=>{"use strict";var H=null;$.exports=function m(d){return H=H||document.createElement("canvas"),new Promise(function(u){var f=3;setTimeout(function h(){return f--,function v(d){try{var u=H.getContext("2d");u.drawImage(d,0,0,50,50);var h=u.getImageData(0,0,50,50).data.filter(function(b,y){return(y+1)%4});return 0===Math.max.apply(Math,h)}catch(b){return console.log("Error checking silence: ",b),!1}}(d)?f>0?setTimeout(h,250):u(!0):u(!1)},250)})}},2181:$=>{"use strict";var H=function(){function w(k){var D=this;void 0===k&&(k=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){D._emitVisible("visible"===document.visibilityState)}}});for(var I=0;I<k;I++)this._listeners.push([])}return w.prototype.clear=function(){for(var k=this._listeners.length,D=0;D<k;D++)this._listeners[D]=[]},w.prototype._listenerCount=function(){return this._listeners.reduce(function(k,D){return k+D.length},0)},w.prototype._emitVisible=function(k){for(var D=this,I=Promise.resolve(),v=function(d){I=I.then(function(){return D._emitVisiblePhase(d,k)})},m=1;m<=this._listeners.length;m++)v(m);return I},w.prototype._emitVisiblePhase=function(k,D){return Promise.all(this._listeners[k-1].map(function(v){var m=v(D);return m instanceof Promise?m:Promise.resolve(m)}))},w.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},w.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},w.prototype.onVisibilityChange=function(k,D){if("number"!=typeof k||k<=0||k>this._listeners.length)throw new Error("invalid phase: ",k);return this._listeners[k-1].push(D),1===this._listenerCount()&&this._start(),this},w.prototype.offVisibilityChange=function(k,D){if("number"!=typeof k||k<=0||k>this._listeners.length)throw new Error("invalid phase: ",k);var I=this._listeners[k-1],v=I.indexOf(D);return-1!==v&&(I.splice(v,1),0===this._listenerCount()&&this._stop()),this},w}();$.exports=new H(2)},9121:$=>{"use strict";var H,w,k;$.exports=(H=globalThis,[w=H.location,k=H.URL].some(function(D){return!D})?function(I){return Promise.reject(new Error("Failed to import: "+I+": dynamicImport is not supported"))}:(H.__twilioVideoImportedModules={},function(I){return I in H.__twilioVideoImportedModules?Promise.resolve(H.__twilioVideoImportedModules[I]):new Function("scope","return import('"+new k(I,w)+"').then(m => scope.__twilioVideoImportedModules['"+I+"'] = m);")(H)}))},8606:function($,H,w){"use strict";var d,k=this&&this.__extends||(d=function(u,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=u}d(u,f),u.prototype=null===f?Object.create(f):(h.prototype=f.prototype,new h)}),D=w(9069).EventEmitter,I=["signaling","room","media","quality","video-processor","preflight"],v=["debug","error","info","warning"],m=function(d){function u(f,h,_,b){void 0===b&&(b=null);var y=d.call(this)||this;return y.on("event",function(M){var E=M.name,C=M.group,S=M.level,V=M.payload;if("string"!=typeof E)throw _.error("Unexpected name: ",E),new Error("Unexpected name: ",E);if(!I.includes(C))throw _.error("Unexpected group: ",C),new Error("Unexpected group: ",C);if(!v.includes(S))throw _.error("Unexpected level: ",S),new Error("Unexpected level: ",S);var F=Date.now(),j=F-h,N=Object.assign({elapsedTime:j,level:S},V||{});f.publish(C,E,N);var R=Object.assign({elapsedTime:j,group:C,level:S,name:E,timestamp:F},V?{payload:V}:{});_[{debug:"debug",error:"error",info:"info",warning:"warn"}[S]]("event",R),b&&"signaling"===C&&b.emit("event",R)}),y}return k(u,d),u}(D);$.exports=m},3826:$=>{"use strict";var H=function(){function w(k){k=Object.assign({getKey:function(I){return I},getValue:function(I){return I},isLessThanOrEqualTo:function(I,v){return I<=v}},k),Object.defineProperties(this,{_getKey:{value:k.getKey},_getValue:{value:k.getValue},_isLessThanOrEqualTo:{value:k.isLessThanOrEqualTo},_map:{value:new Map}})}return w.prototype.toMap=function(){return new Map(this._map)},w.prototype.updateAndFilter=function(k){return k.filter(this.update,this)},w.prototype.update=function(k){var D=this._getKey(k),I=this._getValue(k);return!(this._map.has(D)&&this._isLessThanOrEqualTo(I,this._map.get(D))||(this._map.set(D,I),0))},w}();$.exports=H},9739:function($,H,w){"use strict";var he,k=this&&this.__extends||(he=function(te,K){return(he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,Me){oe.__proto__=Me}||function(oe,Me){for(var Oe in Me)Object.prototype.hasOwnProperty.call(Me,Oe)&&(oe[Oe]=Me[Oe])})(te,K)},function(te,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function oe(){this.constructor=te}he(te,K),te.prototype=null===K?Object.create(K):(oe.prototype=K.prototype,new oe)}),D=this&&this.__read||function(he,te){var K="function"==typeof Symbol&&he[Symbol.iterator];if(!K)return he;var Me,Ee,oe=K.call(he),Oe=[];try{for(;(void 0===te||te-- >0)&&!(Me=oe.next()).done;)Oe.push(Me.value)}catch(Ke){Ee={error:Ke}}finally{try{Me&&!Me.done&&(K=oe.return)&&K.call(oe)}finally{if(Ee)throw Ee.error}}return Oe},I=this&&this.__spreadArray||function(he,te){for(var K=0,oe=te.length,Me=he.length;K<oe;K++,Me++)he[Me]=te[K];return he},v=w(8701),m=v.typeErrors,d=v.trackPriority,u=w(7627),f=w(8066).sessionSID,h=w(2585);function V(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function x(he,te,K,oe){if(!(oe in te)&&!oe.match(/^on[a-z]+$/)){var Me;try{Me=typeof he[oe]}catch{}"function"===Me&&(te[oe]=function(){for(var Oe,Ee=[],Ke=0;Ke<arguments.length;Ke++)Ee[Ke]=arguments[Ke];return(Oe=this[K])[oe].apply(Oe,I([],D(Ee)))})}}function G(he){return"object"==typeof he&&!Array.isArray(he)}function fe(he){Object.getOwnPropertyNames(he).forEach(function(te){te.startsWith("_")&&re(he,te)})}function re(he,te){var K=Object.getOwnPropertyDescriptor(he,te);K.enumerable=!1,Object.defineProperty(he,te,K)}function Y(he){return he.map(_e)}function _e(he){return Array.isArray(he)?Y(he):he instanceof Set?function z(he){return Y(I([],D(he)))}(he):he instanceof Map?function ce(he){return I([],D(he.entries())).reduce(function(te,K){var oe,Me=D(K,2);return Object.assign(((oe={})[Me[0]]=_e(Me[1]),oe),te)},{})}(he):he&&"object"==typeof he?function le(he){return Object.entries(he).reduce(function(te,K){var oe,Me=D(K,2);return Object.assign(((oe={})[Me[0]]=_e(Me[1]),oe),te)},{})}(he):he}function Ne(he){return He(he,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:tt},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function qe(he){return He(he,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function tt(he){return He(he,[{prop:d.PRIORITY_HIGH,type:"object",transform:qe},{prop:d.PRIORITY_LOW,type:"object",transform:qe},{prop:d.PRIORITY_STANDARD,type:"object",transform:qe}])}function He(he,te){return te.reduce(function(K,oe){var Me,Oe=oe.prop,Ke=oe.payloadProp,fn=oe.transform;return typeof he[Oe]===oe.type?Object.assign(((Me={})[void 0===Ke?Oe:Ke]=(void 0===fn?function(Ln){return Ln}:fn)(he[Oe]),Me),K):K},{})}H.constants=v,H.createBandwidthProfilePayload=function pe(he){return He(he,[{prop:"video",type:"object",transform:Ne}])},H.createMediaSignalingPayload=function ze(he,te,K,oe,Me,Oe){var Ee={transports:[{type:"data-channel"}]};return Object.assign(he?{active_speaker:Ee}:{},te?{network_quality:Ee}:{},Oe?{render_hints:Ee}:{},Me?{publisher_hints:Ee}:{},K?{track_priority:Ee}:{},oe?{track_switch_off:Ee}:{})},H.createMediaWarningsPayload=function Xe(he){var te,K=((te={})[h.recordingMediaLost]="recordings",te);return he.map(function(oe){return K[oe]}).filter(function(oe){return!!oe})},H.createRoomConnectEventPayload=function ve(he){function te(Me){return Me?"true":"false"}var K={sessionSID:f,iceServers:(he.iceServers||[]).length,audioTracks:(he.tracks||[]).filter(function(Me){return"audio"===Me.kind}).length,videoTracks:(he.tracks||[]).filter(function(Me){return"video"===Me.kind}).length,dataTracks:(he.tracks||[]).filter(function(Me){return"data"===Me.kind}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(Me){var Oe=D(Me,2),Ee=Oe[0],Ke=Oe[1];K[Ke=Ke||Ee]=te(!!he[Ee])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(Me){var Oe=D(Me,2),Ee=Oe[0],Ke=Oe[1];Ke=Ke||Ee,"number"==typeof he[Ee]?K[Ke]=he[Ee]:isNaN(Number(he[Ee]))||(K[Ke]=Number(he[Ee]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(Me){var Oe=D(Me,2),Ee=Oe[0],Ke=Oe[1];Ke=Ke||Ee,"string"==typeof he[Ee]?K[Ke]=he[Ee]:"number"==typeof he[Ee]&&"name"===Ee&&(K[Ke]=he[Ee].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(Me){Me in he&&(K[Me]=JSON.stringify(he[Me]))}),"networkQuality"in he&&(K.networkQualityConfiguration={},G(he.networkQuality)?["local","remote"].forEach(function(Me){"number"==typeof he.networkQuality[Me]&&(K.networkQualityConfiguration[Me]=he.networkQuality[Me])}):(K.networkQualityConfiguration.remote=0,K.networkQualityConfiguration.local=he.networkQuality?1:0)),he.bandwidthProfile&&he.bandwidthProfile.video){var oe=he.bandwidthProfile.video||{};K.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(Me){"number"==typeof oe[Me]||"string"==typeof oe[Me]?K.bandwidthProfileOptions[Me]=oe[Me]:"boolean"==typeof oe[Me]?K.bandwidthProfileOptions[Me]=te(oe[Me]):"object"==typeof oe[Me]&&(K.bandwidthProfileOptions[Me]=JSON.stringify(oe[Me]))})}return{group:"room",name:"connect",level:"info",payload:K}},H.createSubscribePayload=function Qe(he){return{rules:[{type:he?"include":"exclude",all:!0}],revision:1}},H.asLocalTrack=function _(he,te){if(he instanceof te.LocalAudioTrack||he instanceof te.LocalVideoTrack||he instanceof te.LocalDataTrack)return he;if(he instanceof te.MediaStreamTrack)return"audio"===he.kind?new te.LocalAudioTrack(he,te):new te.LocalVideoTrack(he,te);throw m.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},H.asLocalTrackPublication=function b(he,te,K,oe){return new(0,{audio:oe.LocalAudioTrackPublication,video:oe.LocalVideoTrackPublication,data:oe.LocalDataTrackPublication}[he.kind])(te,he,K,oe)},H.capitalize=function y(he){return he[0].toUpperCase()+he.slice(1)},H.deprecateEvents=function M(he,te,K,oe){var Me=new Set;te.on("newListener",function Oe(Ee){K.has(Ee)&&!Me.has(Ee)&&(oe.deprecated(he+"#"+Ee+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(K.get(Ee)?" Use "+he+"#"+K.get(Ee)+" instead.":"")),Me.add(Ee)),Me.size>=K.size&&te.removeListener("newListener",Oe)})},H.difference=function E(he,te){he=Array.isArray(he)?new Set(he):new Set(he.values()),te=Array.isArray(te)?new Set(te):new Set(te.values());var K=new Set;return he.forEach(function(oe){te.has(oe)||K.add(oe)}),K},H.filterObject=function C(he,te){return Object.keys(he).reduce(function(K,oe){return he[oe]!==te&&(K[oe]=he[oe]),K},{})},H.flatMap=function S(he,te){var K=he instanceof Map||he instanceof Set?Array.from(he.values()):he;return te=te||function(Me){return Me},K.reduce(function(oe,Me){var Oe=te(Me);return oe.concat(Oe)},[])},H.getPlatform=function F(){var he=V(),K=D(he.match(/\(([^)]+)\)/)||[],2)[1];return D((void 0===K?"unknown":K).split(";").map(function(Ee){return Ee.trim()}),1)[0].toLowerCase()},H.getUserAgent=V,H.hidePrivateProperties=fe,H.hidePrivateAndCertainPublicPropertiesInClass=function ue(he,te){return function(K){function oe(){for(var Me=[],Oe=0;Oe<arguments.length;Oe++)Me[Oe]=arguments[Oe];var Ee=K.apply(this,I([],D(Me)))||this;return fe(Ee),function ne(he,te){void 0===te&&(te=[]),te.forEach(function(K){he.hasOwnProperty(K)&&re(he,K)})}(Ee,te),Ee}return k(oe,K),oe}(he)},H.isDeepEqual=function B(he,te){if(he===te)return!0;if(typeof he!=typeof te)return!1;if(null===he)return null===te;if(null===te)return!1;if(Array.isArray(he))return Array.isArray(te)&&he.length===te.length&&he.every(function(Me,Oe){return B(Me,te[Oe])});if("object"==typeof he){var K=Object.keys(he).sort(),oe=Object.keys(te).sort();return!Array.isArray(te)&&B(K,oe)&&K.every(function(Me){return B(he[Me],te[Me])})}return!1},H.isNonArrayObject=G,H.inRange=function It(he,te,K){return te<=he&&he<=K},H.makeUUID=function j(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(he){var te=16*Math.random()|0;return("x"===he?te:3&te|8).toString(16)})},H.oncePerTick=function N(he){var te=null;function K(){te=null,he()}return function(){te&&clearTimeout(te),te=setTimeout(K)}},H.promiseFromEvents=function R(he,te,K,oe){return new Promise(function(Me,Oe){function Ee(){var zt=[].slice.call(arguments);oe&&te.removeListener(oe,Ke),Me.apply(void 0,I([],D(zt)))}function Ke(){var zt=[].slice.call(arguments);te.removeListener(K,Ee),Oe.apply(void 0,I([],D(zt)))}te.once(K,Ee),oe&&te.once(oe,Ke),he()})},H.getOrNull=function P(he,te){return te.split(".").reduce(function(K,oe){return K?K[oe]:null},he)},H.defer=function T(){var he={};return he.promise=new Promise(function(te,K){he.resolve=te,he.reject=K}),he},H.delegateMethods=function L(he,te,K){for(var oe in he)x(he,te,K,oe)},H.proxyProperties=function W(he,te,K){Object.getOwnPropertyNames(he).forEach(function(oe){!function X(he,te,K,oe){if(!(oe in te)){if(oe.match(/^on[a-z]+$/))return Object.defineProperty(te,oe,{value:null,writable:!0}),void K.addEventListener(oe.slice(2),function(){for(var Me=[],Oe=0;Oe<arguments.length;Oe++)Me[Oe]=arguments[Oe];te.dispatchEvent.apply(te,I([],D(Me)))});Object.defineProperty(te,oe,{enumerable:!0,get:function(){return K[oe]}})}}(0,te,K,oe)})},H.legacyPromise=function J(he,te,K){return te?he.then(function(oe){te(oe)},function(oe){K(oe)}):he},H.buildLogLevels=function ee(he){return"string"==typeof he?{default:he,media:he,signaling:he,webrtc:he}:he},H.trackClass=function Q(he,te){return(te=te?"Local":"")+(he.kind||"").replace(/\w{1}/,function(K){return K.toUpperCase()})+"Track"},H.trackPublicationClass=function ie(he,te){return(te=te?"Local":"")+(he.kind||"").replace(/\w{1}/,function(K){return K.toUpperCase()})+"TrackPublication"},H.valueToJSON=_e,H.withJitter=function bt(he,te){var K=Math.random();return he-te+Math.floor(2*te*K+.5)},H.isChromeScreenShareTrack=function Qt(he){return"chrome"===u.guessBrowser()&&"video"===he.kind&&"displaySurface"in he.getSettings()},H.isUserMediaTrack=function An(he){return"string"==typeof he.getSettings().deviceId},H.waitForSometime=function Ft(he){return void 0===he&&(he=10),new Promise(function(te){return setTimeout(te,he)})},H.waitForEvent=function Vt(he,te){return new Promise(function(K){he.addEventListener(te,function oe(Me){he.removeEventListener(te,oe),K(Me)})})}},3744:function($,H,w){"use strict";var N,k=this&&this.__extends||(N=function(R,P){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,x){T.__proto__=x}||function(T,x){for(var L in x)Object.prototype.hasOwnProperty.call(x,L)&&(T[L]=x[L])})(R,P)},function(R,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function T(){this.constructor=R}N(R,P),R.prototype=null===P?Object.create(P):(T.prototype=P.prototype,new T)}),D=this&&this.__assign||function(){return D=Object.assign||function(N){for(var R,P=1,T=arguments.length;P<T;P++)for(var x in R=arguments[P])Object.prototype.hasOwnProperty.call(R,x)&&(N[x]=R[x]);return N},D.apply(this,arguments)},I=w(9069).EventEmitter,v=w(9739).getUserAgent,m=5,d=50,u=1e3,f=globalThis,h=f.WebSocket?f.WebSocket:w(3332),_=w(8701),b=_.hardwareDevicePublisheriPad,y=_.hardwareDevicePublisheriPhone,M=w(9739),E=w(3948),C=function(N){function R(P,T,x,L,B,G){var W=N.call(this)||this;return G=Object.assign({gateway:V(L,B)+"/v1/VideoEvents",maxReconnectAttempts:m,reconnectIntervalMs:d,userAgent:v(),WebSocket:h},G),Object.defineProperties(W,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:M.defer()},_reconnectAttemptsLeft:{value:G.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:G.WebSocket}}),W._readyToConnect.promise.then(function(X){var J=X.roomSid,ee=X.participantSid,Q=W;W.on("disconnected",function ie(fe){if(Q._session=null,fe&&Q._reconnectAttemptsLeft>0)return Q.emit("reconnecting"),void function j(N,R,P,T,x,L,B){var G=Date.now()-N._connectTimestamp,W=B.reconnectIntervalMs-G;W>0?setTimeout(function(){S(N,R,P,T,x,L,B)},W):S(N,R,P,T,x,L,B)}(Q,P,T,x,J,ee,G);Q.removeListener("disconnected",ie)}),S(W,P,T,x,J,ee,G)}).catch(function(){}),W}return k(R,N),R.prototype.connect=function(P,T){this._readyToConnect.resolve({roomSid:P,participantSid:T})},R.prototype._publish=function(P){P.session=this._session,this._ws.send(JSON.stringify(P))},R.prototype.disconnect=function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},R.prototype.publish=function(P,T,x){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:P,name:T,payload:x,timestamp:Date.now(),type:"event",version:1}),!0)},R}(I);function S(N,R,P,T,x,L,B){N._connectTimestamp=Date.now(),N._reconnectAttemptsLeft--,N._ws=new B.WebSocket(B.gateway);var G=N._ws;G.addEventListener("close",function(W){W.code!==u?N.emit("disconnected",new Error("WebSocket Error "+W.code+": "+W.reason)):N.emit("disconnected")}),G.addEventListener("message",function(W){!function F(N,R,P){switch(R.type){case"connected":N._session=R.session,N._reconnectAttemptsLeft=P.maxReconnectAttempts,N._eventQueue.splice(0).forEach(N._publish,N),N.emit("connected");break;case"error":N._ws.close(),N.emit("disconnected",new Error(R.message))}}(N,JSON.parse(W.data),B)}),G.addEventListener("open",function(){var W={type:"connect",token:R,version:1};W.publisher={name:P,sdkVersion:T,userAgent:B.userAgent,participantSid:L,roomSid:x},E.isIpad()?W.publisher=D(D({},W.publisher),b):E.isIphone()&&(W.publisher=D(D({},W.publisher),y)),G.send(JSON.stringify(W))})}function V(N,R){return"prod"===N?"wss://sdkgw."+R+".twilio.com":"wss://sdkgw."+N+"-"+R+".twilio.com"}$.exports=C},4920:$=>{"use strict";var H=function(){function w(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return w.prototype.connect=function(){},w.prototype.disconnect=function(){return!!this._connected&&(this._connected=!1,!0)},w.prototype.publish=function(){return this._connected},w}();$.exports=H},6396:($,H,w)=>{"use strict";var k=w(9739).defer,D=function(){function I(){Object.defineProperties(this,{_audio:{value:k(),writable:!0},_video:{value:k(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return I.prototype.resolveDeferred=function(v){"audio"===v?this._audio.resolve():this._video.resolve()},I.prototype.startDeferred=function(v){"audio"===v?this._audio=k():this._video=k()},I.prototype.whenResolved=function(v){return"audio"===v?this._audio.promise:this._video.promise},I}();$.exports=new D},1458:function($,H,w){"use strict";var f,k=this&&this.__read||function(S,V){var F="function"==typeof Symbol&&S[Symbol.iterator];if(!F)return S;var N,P,j=F.call(S),R=[];try{for(;(void 0===V||V-- >0)&&!(N=j.next()).done;)R.push(N.value)}catch(T){P={error:T}}finally{try{N&&!N.done&&(F=j.return)&&F.call(j)}finally{if(P)throw P.error}}return R},D=this&&this.__spreadArray||function(S,V){for(var F=0,j=V.length,N=S.length;F<j;F++,N++)S[N]=V[F];return S},I=w(7846).getLogger,v=w(8701),m=v.DEFAULT_LOG_LEVEL,d=v.DEFAULT_LOGGER_NAME,u=w(8701).typeErrors,_=function(){function S(V,F,j,N,R){if("string"!=typeof V)throw u.INVALID_TYPE("moduleName","string");if(!F)throw u.REQUIRED_ARGUMENT("component");"object"!=typeof j&&(j={}),R=R||I,C(j),Object.defineProperties(this,{_component:{value:F},_logLevels:{value:j},_warnings:{value:new Set},_loggerName:{get:function(){var T=N&&"string"==typeof N?N:d;return this._logLevelsEqual||(T=T+"-"+V),T}},_logger:{get:function(){var T=R(this._loggerName),x=this._logLevels[V]||m;return T.setDefaultLevel(x="off"===x?"silent":x),T}},_logLevelsEqual:{get:function(){return 1===new Set(Object.values(this._logLevels)).size}},logLevel:{get:function(){return S.getLevelByName(j[V]||m)}},name:{get:F.toString.bind(F)}})}return S.getLevelByName=function(V){return isNaN(V)?(E(V=V.toUpperCase()),S[V]):parseInt(V,10)},S.prototype.createLog=function(V,F){var j=this._loggerName;return this._logLevelsEqual||(j=j.substring(0,j.lastIndexOf("-"))),new S(V,F,this._logLevels,j)},S.prototype.setLevels=function(V){return C(V),Object.assign(this._logLevels,V),this},S.prototype.log=function(V,F){var j=S._levels[V];if(!j)throw u.INVALID_VALUE("logLevel",y);j=j.toLowerCase();var N=[(new Date).toISOString(),j,this.name];return(this._logger[j]||function(){}).apply(void 0,D([],k(N.concat(F)))),this},S.prototype.debug=function(){return this.log(S.DEBUG,[].slice.call(arguments))},S.prototype.deprecated=function(V){var F=function h(S){if((f=f||new Map).has(S))return f.get(S);var V=new Set;return f.set(S,V),V}(this._component.constructor);return F.has(V)?this:(F.add(V),this.warn(V))},S.prototype.info=function(){return this.log(S.INFO,[].slice.call(arguments))},S.prototype.warn=function(){return this.log(S.WARN,[].slice.call(arguments))},S.prototype.warnOnce=function(V){return this._warnings.has(V)?this:(this._warnings.add(V),this.warn(V))},S.prototype.error=function(){return this.log(S.ERROR,[].slice.call(arguments))},S.prototype.throw=function(V,F){throw V.clone&&(V=V.clone(F)),this.log(S.ERROR,V),V},S}();Object.defineProperties(_,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var b={},y=[],M=_._levels.map(function(S,V){return b[S]=!0,y.push(V),S});function E(S){if(!(S in b))throw u.INVALID_VALUE("level",M)}function C(S){Object.keys(S).forEach(function(V){E(S[V].toUpperCase())})}$.exports=_},8218:$=>{"use strict";var H=function(){function w(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return w.prototype.get=function(){var k=this._samples;return(k[1].numerator-k[0].numerator)/(k[1].denominator-k[0].denominator||1/0)},w.prototype.putSample=function(k,D){var I=this._samples;I.shift(),I.push({denominator:D,numerator:k})},w}();$.exports=H},2643:$=>{"use strict";var H=function(){function w(k,D){var I=this,v=(D=Object.assign({navigator,window},D)).navigator,m=v.connection||{type:null},d=m.type,u=m.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var b=d!==I.type&&I.isOnline;d=I.type,b&&k()}},_target:{value:m}}:{_events:{value:["online"]},_listener:{value:k},_target:{value:D.window}};Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof v.onLine||v.onLine}},type:{enumerable:!0,get:function(){return m.type||null}},_listener:u._listener,_events:u._events,_target:u._target})}return w.prototype.start=function(){var k=this;this._events.forEach(function(D){k._target.addEventListener(D,k._listener)})},w.prototype.stop=function(){var k=this;this._events.forEach(function(D){k._target.removeEventListener(D,k._listener)})},w}();$.exports=H},5318:function($){"use strict";var I,H=this&&this.__extends||(I=function(v,m){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(d[f]=u[f])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function d(){this.constructor=v}I(v,m),v.prototype=null===m?Object.create(m):(d.prototype=m.prototype,new d)}),w=function(){function I(v){Object.defineProperties(this,{_callback:{value:v}})}return I.prototype.observe=function(){},I.prototype.unobserve=function(){},I.prototype.makeVisible=function(v){var m=this._makeFakeEntry(v,!0);this._callback([m])},I.prototype.makeInvisible=function(v){var m=this._makeFakeEntry(v,!1);this._callback([m])},I.prototype._makeFakeEntry=function(v,m){return{target:v,isIntersecting:m}},I}(),k=function(I){function v(){return null!==I&&I.apply(this,arguments)||this}return H(v,I),v}(w),D=function(I){function v(){return null!==I&&I.apply(this,arguments)||this}return H(v,I),v.prototype.resize=function(m){var d=this._makeFakeEntry(m,!0);this._callback([d])},v}(w);$.exports={NullIntersectionObserver:k,NullResizeObserver:D,NullObserver:w}},3898:function($,H,w){"use strict";var k=this&&this.__read||function(W,X){var J="function"==typeof Symbol&&W[Symbol.iterator];if(!J)return W;var Q,fe,ee=J.call(W),ie=[];try{for(;(void 0===X||X-- >0)&&!(Q=ee.next()).done;)ie.push(Q.value)}catch(ue){fe={error:ue}}finally{try{Q&&!Q.done&&(J=ee.return)&&J.call(ee)}finally{if(fe)throw fe.error}}return ie},D=w(9739),I=D.difference,v=D.flatMap,m=w(570),d={0:"PCMU",8:"PCMA"};function u(W){return Array.from(h(W)).reduce(function(X,J){var ee=J[0],Q=J[1],ie=X.get(Q)||[];return X.set(Q,ie.concat(ee))},new Map)}function f(W){return y(W).reduce(function(X,J){var ee=b(J);return ee?X.set(ee,J):X},new Map)}function h(W){return M(W).reduce(function(X,J){var ee=new RegExp("a=rtpmap:"+J+" ([^/]+)"),Q=W.match(ee),ie=Q?Q[1].toLowerCase():d[J]?d[J].toLowerCase():"";return X.set(J,ie)},new Map)}function _(W,X){var J=new RegExp("^a=fmtp:"+W+" (.+)$","m"),ee=X.match(J);return ee&&ee[1].split(";").reduce(function(Q,ie){var fe=k(ie.split("="),2),re=fe[1];return Q[fe[0]]=isNaN(re)?re:parseInt(re,10),Q},{})}function b(W){var X=W.match(/^a=mid:(.+)$/m);return X&&X[1]}function y(W,X,J){return W.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(function(ee){return"m="+ee}).filter(function(ee){var Q=new RegExp("m="+(X||".*"),"gm"),ie=new RegExp("a="+(J||".*"),"gm");return Q.test(ee)&&ie.test(ee)})}function M(W){var J=W.split("\r\n")[0].match(/([0-9]+)/g);return J?J.slice(1).map(function(ee){return parseInt(ee,10)}):[]}function C(W,X){var J=X.split("\r\n"),ee=J[0],Q=J.slice(1);return[ee=ee.replace(/([0-9]+\s?)+$/,W.join(" "))].concat(Q).join("\r\n")}function T(W,X){var J=y(W);return[W.split("\r\nm=")[0]].concat(J.map(function(Q){if(!/^m=(audio|video)/.test(Q))return Q;var ie=b(Q);if(!ie)return Q;var fe=X.get(ie);if(!fe)return Q;var ue=(Q.match(/^a=msid:(.+)$/m)||[])[1];if(!ue)return Q;var re=k(ue.split(" "),2),ne=re[0],Y=re[1],z=new RegExp("msid:"+ne+(Y?" "+Y:"")+"$","gm");return Q.replace(z,"msid:"+ne+" "+fe)})).join("\r\n")}function B(W,X){return"a=fmtp:"+W+" "+Object.entries(X).map(function(ee){var Q=k(ee,2);return Q[0]+"="+Q[1]}).join(";")}H.addOrRewriteNewTrackIds=function P(W,X,J){var ee=Array.from(J).reduce(function(Q,ie){var fe=k(ie,2),re=fe[1];return y(W,fe[0],"send(only|recv)").map(b).filter(function(z){return!X.has(z)}).forEach(function(z,ce){return Q.set(z,re[ce])}),Q},new Map);return T(W,ee)},H.addOrRewriteTrackIds=T,H.createCodecMapForMediaSection=u,H.createPtToCodecName=h,H.disableRtx=function L(W){var X=y(W);return[W.split("\r\nm=")[0]].concat(X.map(function(ee){if(!/^m=video/.test(ee))return ee;var ie=u(ee).get("rtx");if(!ie)return ee;var fe=new Set(M(ee));ie.forEach(function(Y){return fe.delete(Y)});var ue=ee.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),re=ue&&ue[1],ne=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(re?[new RegExp("^a=ssrc:"+re+" .+$")]:[]);return ee=ee.split("\r\n").filter(function(Y){return ne.every(function(z){return!z.test(Y)})}).join("\r\n"),C(Array.from(fe),ee)})).join("\r\n")},H.enableDtxForOpus=function G(W,X){var J=y(W),ee=W.split("\r\nm=")[0];return X=X||J.filter(function(Q){return/^m=audio/.test(Q)}).map(b),[ee].concat(J.map(function(Q){if(!/^m=audio/.test(Q))return Q;var fe=u(Q).get("opus");if(!fe)return Q;var ue=_(fe,Q);if(!ue)return Q;var re=B(fe,ue),ne=new RegExp(re),Y=b(Q);X.includes(Y)?ue.usedtx=1:delete ue.usedtx;var z=B(fe,ue);return Q.replace(ne,z)})).join("\r\n")},H.filterLocalCodecs=function N(W,X){var J=y(W),ee=W.split("\r\nm=")[0],Q=f(X);return[ee].concat(J.map(function(ie){return function j(W,X,J){if(!/^m=(audio|video)/.test(W))return W;var ee=b(W),Q=ee&&X.get(ee);if(!Q)return W;var ie=h(Q),fe=u(W),ue=v(Array.from(ie),function(z){var ce=k(z,2),le=ce[0],_e=ce[1];return"rtx"===_e||J.includes(_e)?[]:function F(W,X,J,ee,Q){var ie=J.get(W)||[];if(ie.length<=1)return ie;var fe=_(X,Q);if(!fe)return ie;var ue=ie.find(function(re){var ne=_(re,ee);return ne&&Object.keys(fe).every(function(Y){return fe[Y]===ne[Y]})});return"number"==typeof ue?[ue]:ie}(_e,le,fe,W,Q)}),re=fe.get("rtx")||[];ue=ue.concat(re.filter(function(z){var ce=_(z,W);return ce&&ue.includes(ce.apt)}));var ne=W.split("\r\n").filter(function(z){var ce=z.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),le=ce&&ce[2];return!ce||le&&ue.includes(parseInt(le,10))});return C(M(W).filter(function(z){return ue.includes(z)}),ne.join("\r\n"))}(ie,Q,[])})).join("\r\n")},H.getMediaSections=y,H.removeSSRCAttributes=function x(W,X){return W.split("\r\n").filter(function(J){return!X.find(function(ee){return new RegExp("a=ssrc:.*"+ee+":","g").test(J)})}).join("\r\n")},H.revertSimulcast=function R(W,X,J,ee){void 0===ee&&(ee=!1);var Q=f(J),ie=f(X),fe=y(W);return[W.split("\r\nm=")[0]].concat(fe.map(function(re){if(re=re.replace(/\r\n$/,""),!/^m=video/.test(re))return re;var ne=re.match(/^a=mid:(.+)$/m),Y=ne&&ne[1];if(!Y)return re;var z=Q.get(Y),ce=h(z),le=M(z),_e=le.length&&"vp8"===ce.get(le[0]);return ee||!_e?ie.get(Y).replace(/\r\n$/,""):re})).concat("").join("\r\n")},H.setCodecPreferences=function S(W,X,J){var ee=y(W);return[W.split("\r\nm=")[0]].concat(ee.map(function(ie){if(!/^m=(audio|video)/.test(ie))return ie;var fe=ie.match(/^m=(audio|video)/)[1],ue=u(ie),ne=function E(W,X){X=X.map(function(ie){return ie.codec.toLowerCase()});var J=v(X,function(ie){return W.get(ie)||[]}),ee=I(Array.from(W.keys()),X),Q=v(ee,function(ie){return W.get(ie)});return J.concat(Q)}(ue,"audio"===fe?X:J),Y=C(ne,ie),z=ue.get("pcma")||[],ce=ue.get("pcmu")||[];return("audio"===fe?new Set(z.concat(ce)):new Set).has(ne[0])?Y.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):Y})).join("\r\n")},H.setSimulcast=function V(W,X){var J=y(W);return[W.split("\r\nm=")[0]].concat(J.map(function(Q){if(Q=Q.replace(/\r\n$/,""),!/^m=video/.test(Q))return Q;var ie=u(Q),fe=M(Q),ue=new Set(ie.get("vp8")||[]);return fe.some(function(ne){return ue.has(ne)})?m(Q,X):Q})).concat("").join("\r\n")}},3073:($,H,w)=>{"use strict";var k=w(1647).RTCSessionDescription,D=w(3898),I=D.createPtToCodecName,v=D.getMediaSections;function u(C){var S=I(C);C=function f(C,S){return Array.from(S.keys()).reduce(function(V,F){var j=new RegExp("^a=rtpmap:"+F+" rtx.+$","gm");return(V.match(j)||[]).slice("rtx"===S.get(F)?1:0).reduce(function(N,R){var P=new RegExp("\r\n"+R),T=new RegExp("\r\na=fmtp:"+F+" apt=[0-9]+");return N.replace(P,"").replace(T,"")},V)},C)}(C,S);var V=function h(C){var S=new Map;return C.forEach(function(V,F){var j=S.get(V)||new Set;return S.set(V,j.add(F))}),S}(S),F=V.get("rtx")||new Set,j=new Set,N=function _(C,S,V,F){return Array.from(V).reduce(function(j,N){var R=new RegExp("a=fmtp:"+N+" apt=(\\d+)"),P=C.match(R);if(!P)return F.add(N),j;var T=Number.parseInt(P[1]);return S.has(T)?"rtx"===S.get(T)?(F.add(N),j):j.set(N,T):(F.add(N),j)},new Map)}(C,S,F,j),R=function b(C,S){var V=Array.from(C).reduce(function(F,j){var N=j[0],R=j[1],P=F.get(R)||new Set;return F.set(R,P.add(N))},new Map);return Array.from(V).reduce(function(F,j){var N=j[0],R=Array.from(j[1]);return R.length>1?(R.forEach(function(P){S.add(P)}),F):F.set(N,R[0])},new Map)}(N,j),P=Array.from(j);return["h264","vp8","vp9"].reduce(function(L,B){var G=V.get(B)||new Set;return Array.from(G).reduce(function(W,X){return R.has(X)?W:W.add(X)},L)},new Set).forEach(function(L){if(P.length){var B=P.shift();C=function E(C,S,V){return C.endsWith("\r\n")?C+"a=fmtp:"+S+" apt="+V+"\r\n":C+"\r\na=fmtp:"+S+" apt="+V}(C=y(C,B),B,L)}}),P.forEach(function(L){C=function M(C,S){var V=new RegExp("a=rtpmap:"+S+".*\r\n","gm");return C.replace(V,"")}(C=y(C,L),L)}),C}function y(C,S){var V=new RegExp("a=fmtp:"+S+".*\r\n","gm");return C.replace(V,"")}$.exports=function m(C){var S={type:C.type};return"rollback"!==C.type&&(S.sdp=function d(C){var S=v(C);return[C.split("\r\nm=")[0]].concat(S.map(u)).join("\r\n")}(C.sdp)),new k(S)}},570:function($,H,w){"use strict";var k=this&&this.__read||function(E,C){var S="function"==typeof Symbol&&E[Symbol.iterator];if(!S)return E;var F,N,V=S.call(E),j=[];try{for(;(void 0===C||C-- >0)&&!(F=V.next()).done;)j.push(F.value)}catch(R){N={error:R}}finally{try{F&&!F.done&&(S=V.return)&&S.call(V)}finally{if(N)throw N.error}}return j},D=w(9739),I=D.difference,v=D.flatMap;function m(){return String(Math.floor(4294967295*Math.random()))}var d=function(){function E(C,S,V){Object.defineProperties(this,{cName:{enumerable:!0,value:V},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:S},trackId:{enumerable:!0,value:C}})}return E.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var C=[m(),m()];C.forEach(function(S){this.primarySSRCs.add(S)},this),this.rtxPairs.size&&C.forEach(function(S){this.rtxPairs.set(m(),S)},this)}},E.prototype.addSSRC=function(C,S,V){S?this.rtxPairs.set(C,S):this.primarySSRCs.add(C),this.isSimulcastEnabled=this.isSimulcastEnabled||V},E.prototype.toSdpLines=function(C){var S=this,V=C?[]:Array.from(this.rtxPairs.entries()).map(function(T){return T.reverse()}),F=Array.from(this.primarySSRCs.values()),j=V.length?v(V):F,N=v(j,function(T){return["a=ssrc:"+T+" cname:"+S.cName,"a=ssrc:"+T+" msid:"+S.streamId+" "+S.trackId]}),R=V.map(function(T){return"a=ssrc-group:FID "+T.join(" ")}),P=["a=ssrc-group:SIM "+F.join(" ")];return R.concat(N).concat(P)},E}();function u(E,C){return(E.match(new RegExp(C,"gm"))||[]).map(function(V){return(V.match(new RegExp(C))||[]).slice(1)})}$.exports=function M(E,C){var S=function y(E){var C=function f(E){return new Set(v(u(E,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(E),S=function _(E){return new Map(u(E,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map(function(S){return S.reverse()}))}(E),V=function b(E){var C=k(v(u(E,"^a=msid:(.+) (.+)$")),2),S=C[0],V=C[1];return v(u(E,"^a=ssrc:(.+) cname:.+$")).map(function(j){return[j,S,V]})}(E);return V.reduce(function(F,j){var N=j[0],R=j[1],P=j[2],T=F.get(P)||new d(P,R,function h(E,C,S){return E.match(new RegExp("a=ssrc:"+C+" "+S+":(.+)"))[1]}(E,N,"cname")),x=S.get(N)||null;return T.addSSRC(N,x,C.has(N)),F.set(P,T)},new Map)}(E),V=Array.from(S.keys()),F=Array.from(C.keys()),j=I(V,F),N=I(F,V);v(j,function(W){return S.get(W)}).forEach(function(W){W.addSimulcastSSRCs(),C.set(W.trackId,W)}),F=Array.from(C.keys());var P=I(F,N),T=v(P,function(W){return C.get(W)}),x=!E.match(/a=rtpmap:[0-9]+ rtx/),L=v(T,function(W){return W.toSdpLines(x)}),B=v(new Set(E.split("\r\n").concat(L))),G="a=x-google-flag:conference";return E.match(G)||B.push(G),B.join("\r\n")}},1057:($,H,w)=>{"use strict";var k=w(3898).getMediaSections,D=function(){function I(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return I.prototype.match=function(v){return this._midsToTrackIds.get(v.transceiver.mid)||null},I.prototype.update=function(v){var m=k(v,"(audio|video)");this._midsToTrackIds=m.reduce(function(d,u){var f=u.match(/^a=mid:(.+)$/m)||[],h=u.match(/^a=msid:.+ (.+)$/m)||[],_=f[1],b=h[1];return _&&b?d.set(_,b):d},this._midsToTrackIds)},I}();$.exports=D},8066:($,H)=>{var w="1234567890abcdef",k=32;function D(I){for(var v="",m=0;m<k;m++)v+=w.charAt(Math.floor(Math.random()*w.length));return""+I+v}H.sessionSID=D("SS"),H.createSID=D},8592:($,H,w)=>{"use strict";var k=w(7627),D=k.guessBrowser,I=k.support,v=w(3236).getSdpFormat,m=w(3948),d=m.isAndroid,u=m.isMobile,f=m.isNonChromiumEdge,h=m.rebrandedChromeBrowser,_=m.mobileWebKitBrowser,b=["crios","edg","edge","electron","headlesschrome"],y=["chrome","firefox"],M=["chrome","safari"],E=[];$.exports=function C(){var S=D();if(!S)return!1;var V=h(S),F=_(S),j=d()?y:M;return!!S&&I()&&"unified"===v()&&(!V||b.includes(V))&&!f(S)&&(!F||E.includes(F))&&(!u()||j.includes(S))}},6543:$=>{"use strict";var H=function(){function w(k,D,I){void 0===I&&(I=!0),Object.defineProperties(this,{_delay:{value:D,writable:!0},_fn:{value:k},_timeout:{value:null,writable:!0}}),I&&this.start()}return Object.defineProperty(w.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),w.prototype.setDelay=function(k){this._delay=k},w.prototype.start=function(){var k=this;this.isSet||(this._timeout=setTimeout(function(){var D=k._fn;k.clear(),D()},this._delay))},w.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},w.prototype.reset=function(){this.clear(),this.start()},w}();$.exports=H},8380:function($,H,w){"use strict";var te,k=this&&this.__extends||(te=function(K,oe){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Me,Oe){Me.__proto__=Oe}||function(Me,Oe){for(var Ee in Oe)Object.prototype.hasOwnProperty.call(Oe,Ee)&&(Me[Ee]=Oe[Ee])})(K,oe)},function(K,oe){if("function"!=typeof oe&&null!==oe)throw new TypeError("Class extends value "+String(oe)+" is not a constructor or null");function Me(){this.constructor=K}te(K,oe),K.prototype=null===oe?Object.create(oe):(Me.prototype=oe.prototype,new Me)}),D=w(9318),I={};H.createTwilioError=function(K,oe){return oe="string"==typeof oe&&oe?oe:"Unknown error",I[K="number"==typeof K?K:0]?new I[K]:new D(K,oe)};var v=function(te){function K(){var oe=te.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.AccessTokenInvalidError=v,Object.defineProperty(I,20101,{value:v});var m=function(te){function K(){var oe=te.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.AccessTokenHeaderInvalidError=m,Object.defineProperty(I,20102,{value:m});var d=function(te){function K(){var oe=te.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.AccessTokenIssuerInvalidError=d,Object.defineProperty(I,20103,{value:d});var u=function(te){function K(){var oe=te.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.AccessTokenExpiredError=u,Object.defineProperty(I,20104,{value:u});var f=function(te){function K(){var oe=te.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.AccessTokenNotYetValidError=f,Object.defineProperty(I,20105,{value:f});var h=function(te){function K(){var oe=te.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.AccessTokenGrantsInvalidError=h,Object.defineProperty(I,20106,{value:h});var _=function(te){function K(){var oe=te.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.AccessTokenSignatureInvalidError=_,Object.defineProperty(I,20107,{value:_});var b=function(te){function K(){var oe=te.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.SignalingConnectionError=b,Object.defineProperty(I,53e3,{value:b});var y=function(te){function K(){var oe=te.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.SignalingConnectionDisconnectedError=y,Object.defineProperty(I,53001,{value:y});var M=function(te){function K(){var oe=te.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.SignalingConnectionTimeoutError=M,Object.defineProperty(I,53002,{value:M});var E=function(te){function K(){var oe=te.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.SignalingIncomingMessageInvalidError=E,Object.defineProperty(I,53003,{value:E});var C=function(te){function K(){var oe=te.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.SignalingOutgoingMessageInvalidError=C,Object.defineProperty(I,53004,{value:C});var S=function(te){function K(){var oe=te.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.SignalingServerBusyError=S,Object.defineProperty(I,53006,{value:S});var V=function(te){function K(){var oe=te.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomNameInvalidError=V,Object.defineProperty(I,53100,{value:V});var F=function(te){function K(){var oe=te.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomNameTooLongError=F,Object.defineProperty(I,53101,{value:F});var j=function(te){function K(){var oe=te.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomNameCharsInvalidError=j,Object.defineProperty(I,53102,{value:j});var N=function(te){function K(){var oe=te.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomCreateFailedError=N,Object.defineProperty(I,53103,{value:N});var R=function(te){function K(){var oe=te.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomConnectFailedError=R,Object.defineProperty(I,53104,{value:R});var P=function(te){function K(){var oe=te.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomMaxParticipantsExceededError=P,Object.defineProperty(I,53105,{value:P});var T=function(te){function K(){var oe=te.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomNotFoundError=T,Object.defineProperty(I,53106,{value:T});var x=function(te){function K(){var oe=te.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomMaxParticipantsOutOfRangeError=x,Object.defineProperty(I,53107,{value:x});var L=function(te){function K(){var oe=te.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomTypeInvalidError=L,Object.defineProperty(I,53108,{value:L});var B=function(te){function K(){var oe=te.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomTimeoutOutOfRangeError=B,Object.defineProperty(I,53109,{value:B});var G=function(te){function K(){var oe=te.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomStatusCallbackMethodInvalidError=G,Object.defineProperty(I,53110,{value:G});var W=function(te){function K(){var oe=te.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomStatusCallbackInvalidError=W,Object.defineProperty(I,53111,{value:W});var X=function(te){function K(){var oe=te.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomStatusInvalidError=X,Object.defineProperty(I,53112,{value:X});var J=function(te){function K(){var oe=te.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomRoomExistsError=J,Object.defineProperty(I,53113,{value:J});var ee=function(te){function K(){var oe=te.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomInvalidParametersError=ee,Object.defineProperty(I,53114,{value:ee});var Q=function(te){function K(){var oe=te.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomMediaRegionInvalidError=Q,Object.defineProperty(I,53115,{value:Q});var ie=function(te){function K(){var oe=te.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomMediaRegionUnavailableError=ie,Object.defineProperty(I,53116,{value:ie});var fe=function(te){function K(){var oe=te.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomSubscriptionOperationNotSupportedError=fe,Object.defineProperty(I,53117,{value:fe});var ue=function(te){function K(){var oe=te.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomCompletedError=ue,Object.defineProperty(I,53118,{value:ue});var re=function(te){function K(){var oe=te.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomAudioOnlyFlagNotSupportedError=re,Object.defineProperty(I,53124,{value:re});var ne=function(te){function K(){var oe=te.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.RoomTrackKindNotSupportedError=ne,Object.defineProperty(I,53125,{value:ne});var Y=function(te){function K(){var oe=te.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ParticipantIdentityInvalidError=Y,Object.defineProperty(I,53200,{value:Y});var z=function(te){function K(){var oe=te.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ParticipantIdentityTooLongError=z,Object.defineProperty(I,53201,{value:z});var ce=function(te){function K(){var oe=te.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ParticipantIdentityCharsInvalidError=ce,Object.defineProperty(I,53202,{value:ce});var le=function(te){function K(){var oe=te.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ParticipantMaxTracksExceededError=le,Object.defineProperty(I,53203,{value:le});var _e=function(te){function K(){var oe=te.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ParticipantNotFoundError=_e,Object.defineProperty(I,53204,{value:_e});var ve=function(te){function K(){var oe=te.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ParticipantDuplicateIdentityError=ve,Object.defineProperty(I,53205,{value:ve});var pe=function(te){function K(){var oe=te.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.TrackInvalidError=pe,Object.defineProperty(I,53300,{value:pe});var Ne=function(te){function K(){var oe=te.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.TrackNameInvalidError=Ne,Object.defineProperty(I,53301,{value:Ne});var ze=function(te){function K(){var oe=te.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.TrackNameTooLongError=ze,Object.defineProperty(I,53302,{value:ze});var qe=function(te){function K(){var oe=te.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.TrackNameCharsInvalidError=qe,Object.defineProperty(I,53303,{value:qe});var tt=function(te){function K(){var oe=te.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.TrackNameIsDuplicatedError=tt,Object.defineProperty(I,53304,{value:tt});var He=function(te){function K(){var oe=te.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.TrackServerTrackCapacityReachedError=He,Object.defineProperty(I,53305,{value:He});var Qe=function(te){function K(){var oe=te.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.MediaClientLocalDescFailedError=Qe,Object.defineProperty(I,53400,{value:Qe});var Xe=function(te){function K(){var oe=te.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.MediaServerLocalDescFailedError=Xe,Object.defineProperty(I,53401,{value:Xe});var bt=function(te){function K(){var oe=te.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.MediaClientRemoteDescFailedError=bt,Object.defineProperty(I,53402,{value:bt});var It=function(te){function K(){var oe=te.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.MediaServerRemoteDescFailedError=It,Object.defineProperty(I,53403,{value:It});var Qt=function(te){function K(){var oe=te.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.MediaNoSupportedCodecError=Qt,Object.defineProperty(I,53404,{value:Qt});var An=function(te){function K(){var oe=te.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.MediaConnectionError=An,Object.defineProperty(I,53405,{value:An});var Ft=function(te){function K(){var oe=te.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.MediaDTLSTransportFailedError=Ft,Object.defineProperty(I,53407,{value:Ft});var Vt=function(te){function K(){var oe=te.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ConfigurationAcquireFailedError=Vt,Object.defineProperty(I,53500,{value:Vt});var he=function(te){function K(){var oe=te.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(oe,K.prototype),oe}return k(K,te),K}(D);H.ConfigurationAcquireTurnFailedError=he,Object.defineProperty(I,53501,{value:he})},9318:function($){"use strict";var I,H=this&&this.__extends||(I=function(v,m){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(d[f]=u[f])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function d(){this.constructor=v}I(v,m),v.prototype=null===m?Object.create(m):(d.prototype=m.prototype,new d)}),w=this&&this.__read||function(I,v){var m="function"==typeof Symbol&&I[Symbol.iterator];if(!m)return I;var u,h,d=m.call(I),f=[];try{for(;(void 0===v||v-- >0)&&!(u=d.next()).done;)f.push(u.value)}catch(_){h={error:_}}finally{try{u&&!u.done&&(m=d.return)&&m.call(d)}finally{if(h)throw h.error}}return f},k=this&&this.__spreadArray||function(I,v){for(var m=0,d=v.length,u=I.length;m<d;m++,u++)I[u]=v[m];return I},D=function(I){function v(m){var d,u=[].slice.call(arguments,1);d=I.apply(this,k([],w(u)))||this,Object.setPrototypeOf(d,v.prototype);var f=Error.apply(d,u);return f.name="TwilioError",Object.defineProperty(d,"code",{value:m,enumerable:!0}),Object.getOwnPropertyNames(f).forEach(function(h){Object.defineProperty(this,h,{value:f[h],enumerable:!0})},d),d}return H(v,I),v.prototype.toString=function(){return this.name+" "+this.code+(this.message?": "+this.message:"")},v}(Error);$.exports=D},2585:$=>{"use strict";$.exports={recordingMediaLost:"recording-media-lost"}},1501:($,H,w)=>{"use strict";var D=w(9739).isNonArrayObject,I=w(8701),v=I.typeErrors,m=I.clientTrackSwitchOffControl,d=I.videoContentPreferencesMode,u=I.subscriptionMode,f=I.trackPriority,h=I.trackSwitchOffMode;function y(E,C,S){return void 0===S&&(S=[]),typeof E>"u"?null:null!==E&&D(E)?S.reduce(function(V,F){var j=F.prop,N=F.type,R=F.values;if(V||!(j in E))return V;var P=E[j];return N&&typeof P!==N||"number"===N&&isNaN(P)?v.INVALID_TYPE(C+"."+j,N):Array.isArray(R)&&!R.includes(P)?v.INVALID_VALUE(C+"."+j,R):V},null):v.INVALID_TYPE(C,"object")}H.kG=function _(E){var C=y(E,"options.bandwidthProfile");return!E||C||(C=y(E.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(d)},{prop:"dominantSpeakerPriority",values:Object.values(f)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(u)},{prop:"clientTrackSwitchOffControl",values:Object.values(m)},{prop:"trackSwitchOffMode",values:Object.values(h)}]))?C:E.video?"maxTracks"in E.video&&"clientTrackSwitchOffControl"in E.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in E.video&&"contentPreferencesMode"in E.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):function M(E){var C="options.bandwidthProfile.video.renderDimensions",S=y(E,C);return E?S||Object.values(f).reduce(function(V,F){return V||y(E[F],C+"."+F,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):S}(E.video.renderDimensions):null},H.Wv=function b(E,C){if(!(E instanceof C.LocalAudioTrack||E instanceof C.LocalDataTrack||E instanceof C.LocalVideoTrack||E instanceof C.MediaStreamTrack))throw v.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}},1905:$=>{$.exports=function(w,k){if(w&&k)if(w.super_=k,"function"==typeof Object.create)w.prototype=Object.create(k.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}});else{var D=function I(){};D.prototype=k.prototype,w.prototype=new D,w.prototype.constructor=w}}},7846:$=>{var H=function(){},w="undefined",k=typeof window!==w&&typeof window.navigator!==w&&/Trident\/|MSIE /.test(window.navigator.userAgent),D=["trace","debug","info","warn","error"];function I(M,E){var C=M[E];if("function"==typeof C.bind)return C.bind(M);try{return Function.prototype.bind.call(C,M)}catch{return function(){return Function.prototype.apply.apply(C,[M,arguments])}}}function v(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(M,E){for(var C=0;C<D.length;C++){var S=D[C];this[S]=C<M?H:this.methodFactory(S,M,E)}this.log=this.debug}function u(M,E,C){return function(){typeof console!==w&&(d.call(this,E,C),this[M].apply(this,arguments))}}function f(M,E,C){return function m(M){return"debug"===M&&(M="log"),typeof console!==w&&("trace"===M&&k?v:void 0!==console[M]?I(console,M):void 0!==console.log?I(console,"log"):H)}(M)||u.apply(this,arguments)}function h(M,E,C){var V,S=this,F="loglevel";function N(){var P;if(typeof window!==w&&F){try{P=window.localStorage[F]}catch{}if(typeof P===w)try{var T=window.document.cookie,x=T.indexOf(encodeURIComponent(F)+"=");-1!==x&&(P=/^([^;]+)/.exec(T.slice(x))[1])}catch{}return void 0===S.levels[P]&&(P=void 0),P}}"string"==typeof M?F+=":"+M:"symbol"==typeof M&&(F=void 0),S.name=M,S.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},S.methodFactory=C||f,S.getLevel=function(){return V},S.setLevel=function(P,T){if("string"==typeof P&&void 0!==S.levels[P.toUpperCase()]&&(P=S.levels[P.toUpperCase()]),!("number"==typeof P&&P>=0&&P<=S.levels.SILENT))throw"log.setLevel() called with invalid level: "+P;if(V=P,!1!==T&&function j(P){var T=(D[P]||"silent").toUpperCase();if(typeof window!==w&&F){try{return void(window.localStorage[F]=T)}catch{}try{window.document.cookie=encodeURIComponent(F)+"="+T+";"}catch{}}}(P),d.call(S,P,M),typeof console===w&&P<S.levels.SILENT)return"No console available for logging"},S.setDefaultLevel=function(P){N()||S.setLevel(P,!1)},S.enableAll=function(P){S.setLevel(S.levels.TRACE,P)},S.disableAll=function(P){S.setLevel(S.levels.SILENT,P)};var R=N();null==R&&(R=E??"WARN"),S.setLevel(R,!1)}var _=new h,b={};_.getLogger=function(E){if("symbol"!=typeof E&&"string"!=typeof E||""===E)throw new TypeError("You must supply a name when creating a logger.");var C=b[E];return C||(C=b[E]=new h(E,_.getLevel(),_.methodFactory)),C};var y=typeof window!==w?window.log:void 0;_.noConflict=function(){return typeof window!==w&&window.log===_&&(window.log=y),_},_.getLoggers=function(){return b},_.default=_,$.exports=_},7708:$=>{"use strict";var H=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,w=function(){function k(D){D=Object.assign({AudioContext:H},D),Object.defineProperties(this,{_AudioContext:{value:D.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:k}})}return k.prototype.getOrCreate=function(D){if(!this._holders.has(D)&&(this._holders.add(D),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},k.prototype.release=function(D){this._holders.has(D)&&(this._holders.delete(D),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},k}();$.exports=new w},4687:$=>{"use strict";$.exports=function w(k,D,I){I="number"==typeof I?I:250;var v=k.createMediaStreamSource(D),m=k.createAnalyser();m.fftSize=2048,v.connect(m);var d=new Uint8Array(m.fftSize),u=!1;return setTimeout(function(){u=!0},I),function f(){return u?Promise.resolve(!0):(m.getByteTimeDomainData(d),d.some(function(h){return 128!==h&&0!==h})?Promise.resolve(!1):function H(k){return k="number"==typeof k?k:0,new Promise(function(D){return setTimeout(D,k)})}().then(f))}().then(function(h){return v.disconnect(),h},function(h){throw v.disconnect(),h})}},3830:($,H,w)=>{"use strict";var k=w(4687);$.exports=function D(I,v,m,d,u){d="number"==typeof d?d:3;var f=0,h=w(7708),_={},b=h.getOrCreate(_);return function y(){return v(m).then(function(M){return(m.audio?k(b,M,u).catch(function(C){return I.warn("Encountered an error while detecting silence",C),!0}):Promise.resolve(!1)).then(function(C){return C?d<=0?(I.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),M):(I.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++f+"."),M.getTracks().forEach(function(S){return S.stop()}),d--,y()):(I.info("Got a non-silent audio MediaStreamTrack; returning it."),M)})})}().then(function(M){return h.release(_),M},function(M){throw h.release(_),M})}},9611:function($,H,w){"use strict";var k=this&&this.__read||function(B,G){var W="function"==typeof Symbol&&B[Symbol.iterator];if(!W)return B;var J,Q,X=W.call(B),ee=[];try{for(;(void 0===G||G-- >0)&&!(J=X.next()).done;)ee.push(J.value)}catch(ie){Q={error:ie}}finally{try{J&&!J.done&&(W=X.return)&&W.call(X)}finally{if(Q)throw Q.error}}return ee},D=w(7627),I=D.flatMap,v=D.guessBrowser,m=D.guessBrowserVersion,d=w(3236).getSdpFormat,u=v(),f=m(),h="chrome"===u,_="firefox"===u,b="safari"===u,y=h?f.major:null,M=32767;function V(B){var G=Array.from(B.values()).find(function(fe){return"candidate-pair"===fe.type&&fe.nominated});if(!G)return null;var W=B.get(G.localCandidateId),X=B.get(G.remoteCandidateId),J=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],ee=J.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),Q=W?ee.reduce(function(fe,ue){var re=ue.key;return fe[re]=typeof W[re]===ue.type?W[re]:"deleted"!==re&&null,fe},{}):null,ie=X?J.reduce(function(fe,ue){var re=ue.key;return fe[re]=typeof X[re]===ue.type?X[re]:null,fe},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(fe){return"inprogress"===fe?"in-progress":fe}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(fe,ue){var re=ue.key,Y=ue.fixup;return fe[re]=typeof G[re]===ue.type?Y?Y(G[re]):G[re]:null,fe},{localCandidate:Q,remoteCandidate:ie})}function F(B){var G=Array.from(B.values()).find(function(ue){return"candidate-pair"===ue.type&&ue.nominated});if(!G)return null;var W=B.get(G.localCandidateId),X=B.get(G.remoteCandidateId),J=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],ee=J.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),Q={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},ie=W?ee.reduce(function(ue,re){var ne=re.ffKeys,Y=re.key,z=re.type,ce=ne&&ne.find(function(le){return le in W})||Y;return ue[Y]=typeof W[ce]===z?"candidateType"===ce&&Q[W[ce]]||W[ce]:"deleted"!==ce&&null,ue},{}):null,fe=X?J.reduce(function(ue,re){var ne=re.ffKeys,Y=re.key,z=re.type,ce=ne&&ne.find(function(le){return le in X})||Y;return ue[Y]=typeof X[ce]===z?"candidateType"===ce&&Q[X[ce]]||X[ce]:null,ue},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(ue,re){var ne=re.key;return ue[ne]=typeof G[ne]===re.type?G[ne]:null,ue},{localCandidate:ie,remoteCandidate:fe})}function j(B,G,W){var X="local"===W?"getSenders":"getReceivers";if(B[X])return B[X]().map(function(Q){return Q.track}).filter(function(Q){return Q&&Q.kind===G});var ee="audio"===G?"getAudioTracks":"getVideoTracks";return I(B["local"===W?"getLocalStreams":"getRemoteStreams"](),function(Q){return Q[ee]()})}function R(B,G,W){return y&&y<67?new Promise(function(X,J){B.getStats(function(ee){X([T(ee,G)])},null,J)}):B.getStats(G).then(function(X){return function x(B,G){var W=G.simulateExceptionWhileStandardizingStats;if(void 0!==W&&W)throw new Error("Error while gathering stats");var J=null,ee=[],Q=null,ie=null,fe=null,ue=null,re=null;B.forEach(function(le){switch(le.type){case"inbound-rtp":J=le;break;case"outbound-rtp":ee.push(le);break;case"media-source":re=le;break;case"track":fe=le;break;case"codec":ue=le;break;case"remote-inbound-rtp":Q=le;break;case"remote-outbound-rtp":ie=le}});var ne=fe?fe.remoteSource:!re,z=[],ce=ne?ie:Q;return(ne?[J]:ee).forEach(function(le){var _e={},ve=[le,re,fe,ue,ce&&ce.ssrc===le.ssrc?ce:null];function pe(fn){var nn=ve.find(function(Ln){return Ln&&typeof Ln[fn]<"u"})||null;return nn?nn[fn]:null}var Ne=pe("ssrc");"number"==typeof Ne&&(_e.ssrc=String(Ne));var ze=pe("timestamp");_e.timestamp=Math.round(ze);var qe=pe("mimeType");"string"==typeof qe&&(qe=qe.split("/"),_e.codecName=qe[qe.length-1]);var tt=pe("roundTripTime");"number"==typeof tt&&(_e.roundTripTime=Math.round(1e3*tt));var He=pe("jitter");"number"==typeof He&&(_e.jitter=Math.round(1e3*He));var Qe=pe("frameWidth");"number"==typeof Qe&&(ne?_e.frameWidthReceived=Qe:(_e.frameWidthSent=Qe,_e.frameWidthInput=fe?fe.frameWidth:re.width));var Xe=pe("frameHeight");"number"==typeof Xe&&(ne?_e.frameHeightReceived=Xe:(_e.frameHeightSent=Xe,_e.frameHeightInput=fe?fe.frameHeight:re.height));var bt=pe("framesPerSecond");"number"==typeof bt&&(_e[ne?"frameRateReceived":"frameRateSent"]=bt);var It=pe("bytesReceived");"number"==typeof It&&(_e.bytesReceived=It);var Qt=pe("bytesSent");"number"==typeof Qt&&(_e.bytesSent=Qt);var An=pe("packetsLost");"number"==typeof An&&(_e.packetsLost=An);var Ft=pe("packetsReceived");"number"==typeof Ft&&(_e.packetsReceived=Ft);var Vt=pe("packetsSent");"number"==typeof Vt&&(_e.packetsSent=Vt);var he=pe("audioLevel");"number"==typeof he&&(he=Math.round(he*M),ne?_e.audioOutputLevel=he:_e.audioInputLevel=he);var te=pe("totalPacketSendDelay");"number"==typeof te&&(_e.totalPacketSendDelay=te);var K=pe("totalEncodeTime");"number"==typeof K&&(_e.totalEncodeTime=K);var oe=pe("framesEncoded");"number"==typeof oe&&(_e.framesEncoded=oe);var Me=pe("estimatedPlayoutTimestamp");"number"==typeof Me&&(_e.estimatedPlayoutTimestamp=Me);var Oe=pe("totalDecodeTime");"number"==typeof Oe&&(_e.totalDecodeTime=Oe);var Ee=pe("framesDecoded");"number"==typeof Ee&&(_e.framesDecoded=Ee);var Ke=pe("jitterBufferDelay");"number"==typeof Ke&&(_e.jitterBufferDelay=Ke);var zt=pe("jitterBufferEmittedCount");"number"==typeof zt&&(_e.jitterBufferEmittedCount=zt),z.push(_e)}),z}(X,W)})}function T(B,G){var W=B.result().find(function(J){return"ssrc"===J.type&&J.stat("googTrackId")===G.id}),X={};return W&&(X.timestamp=Math.round(Number(W.timestamp)),X=W.names().reduce(function(J,ee){switch(ee){case"googCodecName":J.codecName=W.stat(ee);break;case"googRtt":J.roundTripTime=Number(W.stat(ee));break;case"googJitterReceived":J.jitter=Number(W.stat(ee));break;case"googFrameWidthInput":J.frameWidthInput=Number(W.stat(ee));break;case"googFrameHeightInput":J.frameHeightInput=Number(W.stat(ee));break;case"googFrameWidthSent":J.frameWidthSent=Number(W.stat(ee));break;case"googFrameHeightSent":J.frameHeightSent=Number(W.stat(ee));break;case"googFrameWidthReceived":J.frameWidthReceived=Number(W.stat(ee));break;case"googFrameHeightReceived":J.frameHeightReceived=Number(W.stat(ee));break;case"googFrameRateInput":J.frameRateInput=Number(W.stat(ee));break;case"googFrameRateSent":J.frameRateSent=Number(W.stat(ee));break;case"googFrameRateReceived":J.frameRateReceived=Number(W.stat(ee));break;case"ssrc":J[ee]=W.stat(ee);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":J[ee]=Number(W.stat(ee))}return J},X)),X}function L(B,G){void 0===B&&(B=new Map);var W=G.isRemote,X=G.simulateExceptionWhileStandardizingStats;if(void 0!==X&&X)throw new Error("Error while gathering stats");var ee=null,Q=null;B.forEach(function(Ft){var he=Ft.remoteId;if(!Ft.isRemote)switch(Ft.type){case"inbound-rtp":ee=Ft,Q=B.get(he);break;case"outbound-rtp":Q=Ft,ee=B.get(he)}});var ie=W?ee:Q,fe=W?Q:ee;function ue(Ft){return ie&&typeof ie[Ft]<"u"?ie[Ft]:fe&&typeof fe[Ft]<"u"?fe[Ft]:null}var re={},ne=ue("timestamp");re.timestamp=Math.round(ne);var Y=ue("ssrc");"number"==typeof Y&&(re.ssrc=String(Y));var z=ue("bytesSent");"number"==typeof z&&(re.bytesSent=z);var ce=ue("packetsLost");"number"==typeof ce&&(re.packetsLost=ce);var le=ue("packetsSent");"number"==typeof le&&(re.packetsSent=le);var _e=ue("roundTripTime");"number"==typeof _e&&(re.roundTripTime=Math.round(1e3*_e));var ve=ue("jitter");"number"==typeof ve&&(re.jitter=Math.round(1e3*ve));var pe=ue("framerateMean");"number"==typeof pe&&(re.frameRateSent=Math.round(pe));var Ne=ue("bytesReceived");"number"==typeof Ne&&(re.bytesReceived=Ne);var ze=ue("packetsReceived");"number"==typeof ze&&(re.packetsReceived=ze);var qe=ue("framerateMean");"number"==typeof qe&&(re.frameRateReceived=Math.round(qe));var tt=ue("totalPacketSendDelay");"number"==typeof tt&&(re.totalPacketSendDelay=tt);var He=ue("totalEncodeTime");"number"==typeof He&&(re.totalEncodeTime=He);var Qe=ue("framesEncoded");"number"==typeof Qe&&(re.framesEncoded=Qe);var Xe=ue("estimatedPlayoutTimestamp");"number"==typeof Xe&&(re.estimatedPlayoutTimestamp=Xe);var bt=ue("totalDecodeTime");"number"==typeof bt&&(re.totalDecodeTime=bt);var It=ue("framesDecoded");"number"==typeof It&&(re.framesDecoded=It);var Qt=ue("jitterBufferDelay");"number"==typeof Qt&&(re.jitterBufferDelay=Qt);var An=ue("jitterBufferEmittedCount");return"number"==typeof An&&(re.jitterBufferEmittedCount=An),re}$.exports=function E(B,G){return B&&"function"==typeof B.getStats?function C(B,G){var W=j(B,"audio","local"),X=j(B,"video","local"),J=j(B,"audio"),ee=j(B,"video"),Q={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},ie=I([[W,"localAudioTrackStats",!1],[X,"localVideoTrackStats",!1],[J,"remoteAudioTrackStats",!0],[ee,"remoteVideoTrackStats",!0]],function(fe){var ue=k(fe,3),ne=ue[1],Y=ue[2];return ue[0].map(function(z){return function N(B,G,W){return void 0===W&&(W={}),typeof W.testForChrome<"u"||h?R(B,G,W):typeof W.testForFirefox<"u"||_?function P(B,G,W){return B.getStats(G).then(function(X){return[L(X,W)]})}(B,G,W):typeof W.testForSafari<"u"||b?typeof W.testForSafari<"u"||"unified"===d()?R(B,G,W):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(B,z,Object.assign({isRemote:Y},G)).then(function(ce){ce.forEach(function(le){le.trackId=z.id,Q[ne].push(le)})})})});return Promise.all(ie).then(function(){return function S(B,G){return void 0===G&&(G={}),typeof G.testForChrome<"u"||h||typeof G.testForSafari<"u"||b?B.getStats().then(V):typeof G.testForFirefox<"u"||_?B.getStats().then(F):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(B,G)}).then(function(fe){return Q.activeIceCandidatePair=fe,Q})}(B,G):Promise.reject(new Error("Given PeerConnection does not support getStats"))}},7370:$=>{"use strict";$.exports=function H(w){return void 0===w&&(w={audio:!0,video:!0}),"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(w):Promise.reject(new Error("getUserMedia is not supported"))}},1647:($,H,w)=>{"use strict";var k={};Object.defineProperties(k,{getStats:{enumerable:!0,value:w(9611)},getUserMedia:{enumerable:!0,value:w(7370)},MediaStream:{enumerable:!0,value:w(4946)},MediaStreamTrack:{enumerable:!0,value:w(6240)},RTCIceCandidate:{enumerable:!0,value:w(5219)},RTCPeerConnection:{enumerable:!0,value:w(7061)},RTCSessionDescription:{enumerable:!0,value:w(5481)}}),$.exports=k},4946:$=>{"use strict";$.exports="function"==typeof MediaStream?MediaStream:function(){throw new Error("MediaStream is not supported")}},6240:$=>{"use strict";$.exports="function"==typeof MediaStreamTrack?MediaStreamTrack:function(){throw new Error("MediaStreamTrack is not supported")}},5219:$=>{"use strict";$.exports="function"==typeof RTCIceCandidate?RTCIceCandidate:function(){throw new Error("RTCIceCandidate is not supported")}},5431:function($,H,w){"use strict";var X,k=this&&this.__extends||(X=function(J,ee){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ie){Q.__proto__=ie}||function(Q,ie){for(var fe in ie)Object.prototype.hasOwnProperty.call(ie,fe)&&(Q[fe]=ie[fe])})(J,ee)},function(J,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function Q(){this.constructor=J}X(J,ee),J.prototype=null===ee?Object.create(ee):(Q.prototype=ee.prototype,new Q)}),D=this&&this.__read||function(X,J){var ee="function"==typeof Symbol&&X[Symbol.iterator];if(!ee)return X;var ie,ue,Q=ee.call(X),fe=[];try{for(;(void 0===J||J-- >0)&&!(ie=Q.next()).done;)fe.push(ie.value)}catch(re){ue={error:re}}finally{try{ie&&!ie.done&&(ee=Q.return)&&ee.call(Q)}finally{if(ue)throw ue.error}}return fe},I=this&&this.__spreadArray||function(X,J){for(var ee=0,Q=J.length,ie=X.length;ee<Q;ee++,ie++)X[ie]=J[ee];return X},v=w(4326),m=w(870),d=w(3688),u=w(4946),f=w(7121),h=w(3236),_=h.getSdpFormat,b=h.updatePlanBTrackIdsToSSRCs,y=h.updateUnifiedPlanTrackIdsToSSRCs,M=w(7627),E=M.delegateMethods,C=M.interceptEvent,S=M.isIOSChrome,V=M.legacyPromise,F=M.proxyProperties,j="unified"===_(),N=function(X){function J(ee,Q){void 0===ee&&(ee={});var ie=X.call(this)||this,fe=Object.assign(ee.iceTransportPolicy?{iceTransports:ee.iceTransportPolicy}:{},ee);C(ie,"datachannel"),C(ie,"signalingstatechange");var ue=_(fe.sdpSemantics),re=new RTCPeerConnection(fe,Q);return Object.defineProperties(ie,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new u},_peerConnection:{value:re},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:ue},_senders:{value:new Map},_signalingStateLatch:{value:new d},_tracksToSSRCs:{value:new Map,writable:!0}}),re.addEventListener("datachannel",function(ne){G(ne.channel),ie.dispatchEvent(ne)}),re.addEventListener("signalingstatechange",function(){for(var ne=[],Y=0;Y<arguments.length;Y++)ne[Y]=arguments[Y];"stable"===re.signalingState&&(ie._appliedTracksToSSRCs=new Map(ie._tracksToSSRCs)),!ie._pendingLocalOffer&&!ie._pendingRemoteOffer&&ie.dispatchEvent.apply(ie,I([],D(ne)))}),re.ontrack=function(){},"function"!=typeof re.addTrack&&re.addStream(ie._localStream),F(RTCPeerConnection.prototype,ie,re),ie}return k(J,X),Object.defineProperty(J.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(J.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(J.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),J.prototype.addTrack=function(ee){for(var Q,ie=[],fe=1;fe<arguments.length;fe++)ie[fe-1]=arguments[fe];if("function"==typeof this._peerConnection.addTrack)return(Q=this._peerConnection).addTrack.apply(Q,I([ee],D(ie)));if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+ee.id+", \n        "+ee.kind+"]: RTCPeerConnection is closed");var ue=this._senders.get(ee);if(ue&&ue.track)throw new Error("Cannot add MediaStreamTrack ['"+ee.id+", \n        "+ee.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(ee),this._peerConnection.addStream(this._localStream),ue=new f(ee),this._senders.set(ee,ue),ue},J.prototype.removeTrack=function(ee){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if("function"==typeof this._peerConnection.addTrack)try{return this._peerConnection.removeTrack(ee)}catch{}else{var Q=ee.track;if(!Q)return;(ee=this._senders.get(Q))&&ee.track&&(ee.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(Q),this._peerConnection.addStream(this._localStream))}},J.prototype.getSenders=function(){return"function"==typeof this._peerConnection.addTrack?this._peerConnection.getSenders():Array.from(this._senders.values())},J.prototype.addIceCandidate=function(ee){for(var Q=this,ie=[],fe=1;fe<arguments.length;fe++)ie[fe-1]=arguments[fe];var ue;return ue="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return Q._peerConnection.addIceCandidate(ee)}):this._peerConnection.addIceCandidate(ee),ie.length>0?V.apply(void 0,I([ue],D(ie))):ue},J.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},J.prototype.createAnswer=function(){for(var ee=this,Q=[],ie=0;ie<arguments.length;ie++)Q[ie]=arguments[ie];var fe;return fe=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return ee._signalingStateLatch.lower(),ee._peerConnection.createAnswer()}).then(function(ue){return ee._pendingRemoteOffer=null,ee._rolledBackTracksToSSRCs.clear(),new v({type:"answer",sdp:W(ee._sdpFormat,ee._tracksToSSRCs,ue.sdp)})},function(ue){throw ee._pendingRemoteOffer=null,ue}):this._peerConnection.createAnswer().then(function(ue){return ee._rolledBackTracksToSSRCs.clear(),new v({type:"answer",sdp:W(ee._sdpFormat,ee._tracksToSSRCs,ue.sdp)})}),Q.length>1?V.apply(void 0,I([fe],D(Q))):fe},J.prototype.createOffer=function(){for(var ee=this,Q=[],ie=0;ie<arguments.length;ie++)Q[ie]=arguments[ie];var fe=D(Q,3),ue=fe[0],re=fe[1],Y=fe[2]||ue||{};if(S()){if(Y.offerToReceiveVideo&&!this._audioTransceiver&&(!j||!T(this,"audio"))){delete Y.offerToReceiveAudio;try{this._audioTransceiver=j?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(ce){return Promise.reject(ce)}}if(Y.offerToReceiveVideo&&!this._videoTransceiver&&(!j||!T(this,"video"))){delete Y.offerToReceiveVideo;try{this._videoTransceiver=j?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(ce){return Promise.reject(ce)}}}var z=this._peerConnection.createOffer(Y).then(function(ce){return ee._rolledBackTracksToSSRCs.clear(),new v({type:ce.type,sdp:W(ee._sdpFormat,ee._tracksToSSRCs,ce.sdp)})});return Q.length>1?V(z,ue,re):z},J.prototype.createDataChannel=function(ee,Q){Q=function B(X){return X=Object.assign({},X),L()&&"maxPacketLifeTime"in X&&(X.maxRetransmitTime=X.maxPacketLifeTime),X}(Q);var ie=this._peerConnection.createDataChannel(ee,Q);return G(ie),ie},J.prototype.setLocalDescription=function(){for(var ee=[],Q=0;Q<arguments.length;Q++)ee[Q]=arguments[Q];var ie=D(ee,3),fe=ie[0],ue=ie[1],re=ie[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var ne=R(this,!0,fe);return ee.length>1?V(ne,ue,re):ne},J.prototype.setRemoteDescription=function(){for(var ee=[],Q=0;Q<arguments.length;Q++)ee[Q]=arguments[Q];var ie=D(ee,3),fe=ie[0],ue=ie[1],re=ie[2];this._rolledBackTracksToSSRCs.clear();var ne=R(this,!1,fe);return ee.length>1?V(ne,ue,re):ne},J}(m);function R(X,J,ee){var Y,fe=J?X._pendingLocalOffer:X._pendingRemoteOffer,re=J?"have-local-offer":"have-remote-offer",ne=J?"setLocalDescription":"setRemoteDescription";if(!J&&(J?X._pendingRemoteOffer:X._pendingLocalOffer)&&"answer"===ee.type)Y=function P(X,J){return X._peerConnection.setLocalDescription(X._pendingLocalOffer).then(function(){return X._pendingLocalOffer=null,X.setRemoteDescription(J)}).then(function(){X._signalingStateLatch.lower()})}(X,ee);else if("offer"===ee.type){if(X.signalingState!==re&&"stable"!==X.signalingState)return Promise.reject(new Error("Cannot set "+(J?"local":"remote")+" offer in state "+X.signalingState));!fe&&"low"===X._signalingStateLatch.state&&X._signalingStateLatch.raise();var z=X.signalingState;(function Q(ce){J?X._pendingLocalOffer=ce:X._pendingRemoteOffer=ce})(x(ee)),Y=Promise.resolve(),X.signalingState!==z&&Y.then(function(){return X.dispatchEvent(new Event("signalingstatechange"))})}else"rollback"===ee.type&&(X.signalingState!==re?Y=Promise.reject(new Error("Cannot rollback "+(J?"local":"remote")+" description in "+X.signalingState)):(function ie(){J?X._pendingLocalOffer=null:X._pendingRemoteOffer=null}(),X._rolledBackTracksToSSRCs=new Map(X._tracksToSSRCs),X._tracksToSSRCs=new Map(X._appliedTracksToSSRCs),(Y=Promise.resolve()).then(function(){return X.dispatchEvent(new Event("signalingstatechange"))})));return Y||X._peerConnection[ne](x(ee))}function T(X,J){return!!X.getTransceivers().find(function(ee){var Q=ee.receiver,fe=(void 0===Q?{}:Q).track;return(void 0===fe?{}:fe).kind===J})}function x(X){return X instanceof v&&X._description?X._description:new RTCSessionDescription(X)}function L(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function G(X){return Object.defineProperty(X,"maxRetransmits",{value:65535===X.maxRetransmits?null:X.maxRetransmits}),L()&&Object.defineProperty(X,"maxPacketLifeTime",{value:65535===X.maxRetransmitTime?null:X.maxRetransmitTime}),X}function W(X,J,ee){return"unified"===X?y(J,ee):b(J,ee)}E(RTCPeerConnection.prototype,N.prototype,"_peerConnection"),$.exports=N},7111:function($,H,w){"use strict";var S,k=this&&this.__extends||(S=function(V,F){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,N){j.__proto__=N}||function(j,N){for(var R in N)Object.prototype.hasOwnProperty.call(N,R)&&(j[R]=N[R])})(V,F)},function(V,F){if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function j(){this.constructor=V}S(V,F),V.prototype=null===F?Object.create(F):(j.prototype=F.prototype,new j)}),D=this&&this.__read||function(S,V){var F="function"==typeof Symbol&&S[Symbol.iterator];if(!F)return S;var N,P,j=F.call(S),R=[];try{for(;(void 0===V||V-- >0)&&!(N=j.next()).done;)R.push(N.value)}catch(T){P={error:T}}finally{try{N&&!N.done&&(F=j.return)&&F.call(j)}finally{if(P)throw P.error}}return R},I=this&&this.__spreadArray||function(S,V){for(var F=0,j=V.length,N=S.length;F<j;F++,N++)S[N]=V[F];return S},v=w(870),m=w(3657),d=w(3236).updateUnifiedPlanTrackIdsToSSRCs,u=w(7627),f=u.delegateMethods,h=u.interceptEvent,_=u.legacyPromise,b=u.proxyProperties,y=function(S){function V(F){var j=S.call(this)||this;h(j,"signalingstatechange");var R,N=new RTCPeerConnection(F);return Object.defineProperties(j,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:N},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}}),N.addEventListener("signalingstatechange",function(){for(var P=[],T=0;T<arguments.length;T++)P[T]=arguments[T];!j._rollingBack&&j.signalingState!==R&&(R=j.signalingState,j._isClosed?setTimeout(function(){return j.dispatchEvent.apply(j,I([],D(P)))}):j.dispatchEvent.apply(j,I([],D(P))))}),b(RTCPeerConnection.prototype,j,N),j}return k(V,S),Object.defineProperty(V.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"localDescription",{get:function(){return C(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),V.prototype.createAnswer=function(){for(var F=this,j=[],N=0;N<arguments.length;N++)j[N]=arguments[N];var R;return R=this._peerConnection.createAnswer().then(function(P){return E(F,P),C(P,F._initiallyNegotiatedDtlsRole)}),"function"==typeof j[0]?_.apply(void 0,I([R],D(j))):R},V.prototype.createOffer=function(){for(var F=this,j=[],N=0;N<arguments.length;N++)j[N]=arguments[N];var B,R=D(j,3),P=R[0],T=R[1],L=R[2]||P||{};return B=(B="have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState?M(this,"have-local-offer"===this.signalingState,function(){return F.createOffer(L)}):this._peerConnection.createOffer(L)).then(function(W){return new m({type:W.type,sdp:d(F._tracksToSSRCs,W.sdp)})}),j.length>1?_(B,P,T):B},V.prototype.setLocalDescription=function(){for(var F,j=[],N=0;N<arguments.length;N++)j[N]=arguments[N];var x,R=D(j),P=R[0],T=R.slice(1);return P&&"answer"===P.type&&"have-local-offer"===this.signalingState&&(x=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),x?j.length>1?_.apply(void 0,I([x],D(T))):x:(F=this._peerConnection).setLocalDescription.apply(F,I([],D(j)))},V.prototype.setRemoteDescription=function(){for(var F=this,j=[],N=0;N<arguments.length;N++)j[N]=arguments[N];var x,R=D(j),P=R[0],T=R.slice(1);return P&&"have-remote-offer"===this.signalingState&&("answer"===P.type?x=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===P.type&&(x=M(this,!1,function(){return F._peerConnection.setRemoteDescription(P)}))),x||(x=this._peerConnection.setRemoteDescription(P)),x=x.then(function(){return E(F,P,!0)}),j.length>1?_.apply(void 0,I([x],D(T))):x},V.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},V}(v);function M(S,V,F){var j=V?"setLocalDescription":"setRemoteDescription";return S._rollingBack=!0,S._peerConnection[j](new m({type:"rollback"})).then(F).then(function(N){return S._rollingBack=!1,N},function(N){throw S._rollingBack=!1,N})}function E(S,V,F){if(!S._initiallyNegotiatedDtlsRole&&"offer"!==V.type){var j=V.sdp.match(/a=setup:([a-z]+)/);if(j){var N=j[1];S._initiallyNegotiatedDtlsRole=F?{active:"passive",passive:"active"}[N]:N}}}function C(S,V){return S&&"answer"===S.type&&V?new m({type:S.type,sdp:S.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+V)}):S}f(RTCPeerConnection.prototype,y.prototype,"_peerConnection"),$.exports=y},7061:($,H,w)=>{"use strict";if("function"==typeof RTCPeerConnection)switch((0,w(7627).guessBrowser)()){case"chrome":$.exports=w(5431);break;case"firefox":$.exports=w(7111);break;case"safari":$.exports=w(7548);break;default:$.exports=RTCPeerConnection}else $.exports=function(){throw new Error("RTCPeerConnection is not supported")}},7548:function($,H,w){"use strict";var R,k=this&&this.__extends||(R=function(P,T){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,L){x.__proto__=L}||function(x,L){for(var B in L)Object.prototype.hasOwnProperty.call(L,B)&&(x[B]=L[B])})(P,T)},function(P,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function x(){this.constructor=P}R(P,T),P.prototype=null===T?Object.create(T):(x.prototype=T.prototype,new x)}),D=this&&this.__read||function(R,P){var T="function"==typeof Symbol&&R[Symbol.iterator];if(!T)return R;var L,G,x=T.call(R),B=[];try{for(;(void 0===P||P-- >0)&&!(L=x.next()).done;)B.push(L.value)}catch(W){G={error:W}}finally{try{L&&!L.done&&(T=x.return)&&T.call(x)}finally{if(G)throw G.error}}return B},I=this&&this.__spreadArray||function(R,P){for(var T=0,x=P.length,L=R.length;T<x;T++,L++)R[L]=P[T];return R},v=w(870),m=w(3688),d=w(3236),u=d.getSdpFormat,f=d.updatePlanBTrackIdsToSSRCs,h=d.updateUnifiedPlanTrackIdsToSSRCs,_=w(7627),b=_.delegateMethods,y=_.interceptEvent,M=_.proxyProperties,E="unified"===u(),C=E?h:f,S=function(R){function P(T){var x=R.call(this)||this;y(x,"datachannel"),y(x,"iceconnectionstatechange"),y(x,"signalingstatechange"),y(x,"track");var L=new RTCPeerConnection(T);return Object.defineProperties(x,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:L},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new m},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),L.addEventListener("datachannel",function(B){N(B.channel),x.dispatchEvent(B)}),L.addEventListener("iceconnectionstatechange",function(){for(var B=[],G=0;G<arguments.length;G++)B[G]=arguments[G];x._isClosed||x.dispatchEvent.apply(x,I([],D(B)))}),L.addEventListener("signalingstatechange",function(){for(var B=[],G=0;G<arguments.length;G++)B[G]=arguments[G];x._isClosed||("stable"===L.signalingState&&(x._appliedTracksToSSRCs=new Map(x._tracksToSSRCs)),!x._pendingLocalOffer&&!x._pendingRemoteOffer&&x.dispatchEvent.apply(x,I([],D(B))))}),L.addEventListener("track",function(B){x._pendingRemoteOffer=null,x.dispatchEvent(B)}),M(RTCPeerConnection.prototype,x,L),x}return k(P,R),Object.defineProperty(P.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),P.prototype.addIceCandidate=function(T){var x=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then(function(){return x._peerConnection.addIceCandidate(T)}):this._peerConnection.addIceCandidate(T)},P.prototype.createOffer=function(T){var x=this;if((T=Object.assign({},T)).offerToReceiveVideo&&!this._audioTransceiver&&(!E||!j(this,"audio"))){delete T.offerToReceiveAudio;try{this._audioTransceiver=E?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(L){return Promise.reject(L)}}if(T.offerToReceiveVideo&&!this._videoTransceiver&&(!E||!j(this,"video"))){delete T.offerToReceiveVideo;try{this._videoTransceiver=E?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(L){return Promise.reject(L)}}return this._peerConnection.createOffer(T).then(function(L){return x._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:L.type,sdp:C(x._tracksToSSRCs,L.sdp)})})},P.prototype.createAnswer=function(T){var x=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return x._signalingStateLatch.lower(),x._peerConnection.createAnswer()}).then(function(L){return x._pendingRemoteOffer=null,x._rolledBackTracksToSSRCs.clear(),E?new RTCSessionDescription({type:L.type,sdp:C(x._tracksToSSRCs,L.sdp)}):L},function(L){throw x._pendingRemoteOffer=null,L}):this._peerConnection.createAnswer(T).then(function(L){return x._rolledBackTracksToSSRCs.clear(),E?new RTCSessionDescription({type:L.type,sdp:C(x._tracksToSSRCs,L.sdp)}):L})},P.prototype.createDataChannel=function(T,x){var L=this._peerConnection.createDataChannel(T,x);return N(L),L},P.prototype.removeTrack=function(T){T.replaceTrack(null),this._peerConnection.removeTrack(T)},P.prototype.setLocalDescription=function(T){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),V(this,!0,T)},P.prototype.setRemoteDescription=function(T){return this._rolledBackTracksToSSRCs.clear(),V(this,!1,T)},P.prototype.close=function(){var T=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){T.dispatchEvent(new Event("iceconnectionstatechange")),T.dispatchEvent(new Event("signalingstatechange"))}))},P}(v);function V(R,P,T){var B=P?R._pendingLocalOffer:R._pendingRemoteOffer,W=P?"have-local-offer":"have-remote-offer",X=P?"setLocalDescription":"setRemoteDescription";if(!P&&(P?R._pendingRemoteOffer:R._pendingLocalOffer)&&"answer"===T.type)return function F(R,P){return R._peerConnection.setLocalDescription(R._pendingLocalOffer).then(function(){return R._pendingLocalOffer=null,R.setRemoteDescription(P)}).then(function(){return R._signalingStateLatch.lower()})}(R,T);if("offer"===T.type){if(R.signalingState!==W&&"stable"!==R.signalingState)return Promise.reject(new Error("Cannot set "+(P?"local":"remote")+"\n        offer in state "+R.signalingState));!B&&"low"===R._signalingStateLatch.state&&R._signalingStateLatch.raise();var J=R.signalingState;return function x(ee){P?R._pendingLocalOffer=ee:R._pendingRemoteOffer=ee}(T),R.signalingState!==J?Promise.resolve().then(function(){return R.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}return"rollback"===T.type?R.signalingState!==W?Promise.reject(new Error("Cannot rollback \n        "+(P?"local":"remote")+" description in "+R.signalingState)):(function L(){P?R._pendingLocalOffer=null:R._pendingRemoteOffer=null}(),R._rolledBackTracksToSSRCs=new Map(R._tracksToSSRCs),R._tracksToSSRCs=new Map(R._appliedTracksToSSRCs),Promise.resolve().then(function(){return R.dispatchEvent(new Event("signalingstatechange"))})):R._peerConnection[X](T)}function j(R,P){return!!R.getTransceivers().find(function(T){var x=T.receiver,B=(void 0===x?{}:x).track;return(void 0===B?{}:B).kind===P})}function N(R){return Object.defineProperties(R,{maxPacketLifeTime:{value:65535===R.maxPacketLifeTime?null:R.maxPacketLifeTime},maxRetransmits:{value:65535===R.maxRetransmits?null:R.maxRetransmits}})}b(RTCPeerConnection.prototype,S.prototype,"_peerConnection"),$.exports=S},7121:$=>{"use strict";$.exports=function w(k){Object.defineProperties(this,{track:{enumerable:!0,value:k,writable:!0}})}},4326:$=>{"use strict";var H=function(){function w(k){this.descriptionInitDict=k;var D=k&&"rollback"===k.type?null:new RTCSessionDescription(k);Object.defineProperties(this,{_description:{get:function(){return D}}})}return Object.defineProperty(w.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),w}();$.exports=H},3657:$=>{"use strict";$.exports=RTCSessionDescription},5481:($,H,w)=>{"use strict";if("function"==typeof RTCSessionDescription)switch((0,w(7627).guessBrowser)()){case"chrome":$.exports=w(4326);break;case"firefox":$.exports=w(3657);break;default:$.exports=RTCSessionDescription}else $.exports=function(){throw new Error("RTCSessionDescription is not supported")}},7627:function($,H){"use strict";var w=this&&this.__read||function(R,P){var T="function"==typeof Symbol&&R[Symbol.iterator];if(!T)return R;var L,G,x=T.call(R),B=[];try{for(;(void 0===P||P-- >0)&&!(L=x.next()).done;)B.push(L.value)}catch(W){G={error:W}}finally{try{L&&!L.done&&(T=x.return)&&T.call(x)}finally{if(G)throw G.error}}return B},k=this&&this.__spreadArray||function(R,P){for(var T=0,x=P.length,L=R.length;T<x;T++,L++)R[L]=P[T];return R};function I(R,P,T,x){if(!(x in P)&&!x.match(/^on[a-z]+$/)){var L=!1;try{var B=Object.getOwnPropertyDescriptor(R,x);L=B&&!!B.get}catch{}if(!L){var G;try{G=typeof R[x]}catch{}"function"===G&&(P[x]=function(){return this[T][x].apply(this[T],arguments)})}}}function u(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function f(R){return typeof R>"u"&&(R=u()),/Chrome|CriOS/.test(R)?"chrome":/Firefox|FxiOS/.test(R)?"firefox":/Safari|iPhone|iPad|iPod/.test(R)?"safari":null}var F=new Map;H.clearCachedSupportedCodecs=function N(){F.clear()},H.defer=function D(){var R={};return R.promise=new Promise(function(P,T){R.resolve=P,R.reject=T}),R},H.delegateMethods=function v(R,P,T){for(var x in R)I(R,P,T,x)},H.difference=function m(R,P){R=Array.isArray(R)?new Set(R):new Set(R.values()),P=Array.isArray(P)?new Set(P):new Set(P.values());var T=new Set;return R.forEach(function(x){P.has(x)||T.add(x)}),T},H.flatMap=function d(R,P){return(R instanceof Map||R instanceof Set?Array.from(R.values()):R).reduce(function(x,L){return x.concat(P(L))},[])},H.guessBrowser=f,H.guessBrowserVersion=function h(R){typeof R>"u"&&(R=u());var P={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[f(R)];if(!P)return null;var T=new RegExp("("+P+")/([^\\s]+)"),L=w(R.match(T)||[],3)[2];if(!L)return null;var B=L.split(".").map(Number);return{major:isNaN(B[0])?null:B[0],minor:isNaN(B[1])?null:B[1]}},H.isCodecSupported=function j(R,P){var T=F.get(P);return T?Promise.resolve(T.has(R.toLowerCase())):function V(R){if(typeof RTCRtpSender<"u"&&"function"==typeof RTCRtpSender.getCapabilities)return Promise.resolve(new Set(RTCRtpSender.getCapabilities(R).codecs.map(function(T){return T.mimeType.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||"function"!=typeof RTCPeerConnection.prototype.addTransceiver||"function"!=typeof RTCPeerConnection.prototype.close||"function"!=typeof RTCPeerConnection.prototype.createOffer)return Promise.resolve(new Set);var P=new RTCPeerConnection;return P.addTransceiver(R),P.createOffer().then(function(T){var x=T.sdp;return P.close(),new Set((x.match(/^a=rtpmap:.+$/gm)||[]).map(function(L){return L.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return P.close(),new Set})}(P).then(function(x){return F.set(P,x),x.has(R.toLowerCase())})},H.isIOSChrome=function _(R){return typeof R>"u"&&(R=u()),/Mobi/.test(R)&&"chrome"===f()&&/iPad|iPhone|iPod/.test(R)},H.interceptEvent=function b(R,P){var T=null;Object.defineProperty(R,"on"+P,{get:function(){return T},set:function(x){T&&this.removeEventListener(P,T),"function"==typeof x?this.addEventListener(P,T=x):T=null}})},H.legacyPromise=function y(R,P,T){return P?R.then(P,T):R},H.makeUUID=function M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(R){var P=16*Math.random()|0;return("x"===R?P:3&P|8).toString(16)})},H.proxyProperties=function E(R,P,T){Object.getOwnPropertyNames(R).forEach(function(x){!function C(R,P,T,x){if(!(x in P)){if(x.match(/^on[a-z]+$/))return Object.defineProperty(P,x,{value:null,writable:!0}),void T.addEventListener(x.slice(2),function(){for(var L=[],B=0;B<arguments.length;B++)L[B]=arguments[B];return P.dispatchEvent.apply(P,k([],w(L)))});Object.defineProperty(P,x,{enumerable:!0,get:function(){return T[x]}})}}(0,P,T,x)})},H.support=function S(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}},3688:($,H,w)=>{"use strict";var k=w(7627).defer,D={high:new Set(["low"]),low:new Set(["high"])},I=function(){function m(d){void 0===d&&(d="low");var u=d;Object.defineProperties(this,{_state:{set:function(f){var h=this;if(u!==f){var _=this._whenDeferreds.get(u=f);_.forEach(function(b){return b.resolve(h)}),_.clear()}},get:function(){return u}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(m.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),m.prototype.lower=function(){return this.transition("low")},m.prototype.raise=function(){return this.transition("high")},m.prototype.transition=function(d){if(!D[this.state].has(d))throw v(this.state,d);return this._state=d,this},m.prototype.when=function(d){if(this.state===d)return Promise.resolve(this);if(!D[this.state].has(d))return Promise.reject(v(this.state,d));var u=k();return this._whenDeferreds.get(d).add(u),u.promise},m}();function v(m,d){return new Error('Cannot transition from "'+m+'" to "'+d+'"')}$.exports=I},3236:($,H,w)=>{"use strict";var k=w(7627),D=k.flatMap,I=k.guessBrowser,v=null,d=null;function h(B){return B&&function m(){if("boolean"==typeof v)return v;if(typeof RTCPeerConnection>"u")return v=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),v=!1}catch{v=!0}return v}()?{"plan-b":"planb","unified-plan":"unified"}[B]:function f(){if(!d)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var B=new RTCPeerConnection;try{B.addTransceiver("audio"),d="unified"}catch{d="planb"}B.close()}else d="planb";return d}()}function y(B,G){return(G.match(new RegExp(B,"gm"))||[]).reduce(function(X,J){var ee=J.match(new RegExp(B));return ee?X.add(ee[1]):X},new Set)}function M(B,G){return y(B,G)}function E(B){return M("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",B)}function C(B){return M("^a=msid:.+ +(.+) *$",B)}function S(B,G){return y("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+G+" *$",B)}function V(B,G,W){return void 0===G&&(G=".*"),void 0===W&&(W=".*"),B.split("\r\nm=").slice(1).map(function(X){return"m="+X}).filter(function(X){var J=new RegExp("m="+G,"gm"),ee=new RegExp("a="+W,"gm");return J.test(X)&&ee.test(X)})}function F(B){return Array.from(y("^a=ssrc:([0-9]+) +.*$",B))}function j(B,G){var W=V(B),X=new RegExp("^a=msid:[^ ]+ +"+G+" *$","gm"),J=W.filter(function(ee){return ee.match(X)});return new Set(D(J,F))}function N(B,G,W){return new Map(Array.from(B(W)).map(function(X){return[X,G(W,X)]}))}function R(B){return N(E,S,B)}function P(B){return N(C,j,B)}function T(B,G,W){var X=B(W),J=new Map;X.forEach(function(ie,fe){if(G.has(fe)){var ue=Array.from(G.get(fe)),re=Array.from(ie);ue.forEach(function(ne,Y){var z=re[Y];J.set(z,ne);var le="a=ssrc:"+ne+" $1";W=W.replace(new RegExp("^a=ssrc:"+z+" (.*)$","gm"),le)})}else G.set(fe,ie)});var ee="^(a=ssrc-group:[^ ]+ +)(.*)$";return(W.match(new RegExp(ee,"gm"))||[]).forEach(function(ie){var fe=ie.match(new RegExp(ee));if(fe){var ue=fe[1],ne=fe[2].split(" ").map(function(Y){return J.get(Y)||Y}).join(" ");W=W.replace(fe[0],ue+ne)}}),W}H.clearChromeCachedSdpFormat=function u(){d=null},H.getSdpFormat=function b(B){return{chrome:h(B),firefox:"unified",safari:typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[I()]||null},H.getMediaSections=V,H.getPlanBTrackIds=E,H.getUnifiedPlanTrackIds=C,H.getPlanBSSRCs=S,H.getUnifiedPlanSSRCs=j,H.updatePlanBTrackIdsToSSRCs=function x(B,G){return T(R,B,G)},H.updateUnifiedPlanTrackIdsToSSRCs=function L(B,G){return T(P,B,G)}},3332:$=>{$.exports=WebSocket},1730:$=>{"use strict";$.exports=JSON.parse('{"name":"twilio-video","title":"Twilio Video","description":"Twilio Video JavaScript Library","version":"2.26.2","homepage":"https://twilio.com","author":"Mark Andrus Roberts <mroberts@twilio.com>","contributors":["Ryan Rowland <rrowland@twilio.com>","Manjesh Malavalli <mmalavalli@twilio.com>","Makarand Patwardhan <mpatwardhan@twilio.com>"],"keywords":["twilio","webrtc","library","javascript","video","rooms"],"repository":{"type":"git","url":"https://github.com/twilio/twilio-video.js.git"},"devDependencies":{"@babel/core":"^7.14.2","@babel/preset-env":"^7.14.2","@babel/preset-typescript":"^7.13.0","@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","@typescript-eslint/eslint-plugin":"^4.13.0","@typescript-eslint/parser":"^4.0.0","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^17.2.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","glob":"^7.1.7","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","jsdoc":"^3.5.5","jsdoc-babel":"^0.5.0","json-loader":"^0.5.7","karma":"6.4.1","karma-browserify":"^8.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","karma-typescript":"^5.5.1","karma-typescript-es6-transform":"^5.5.1","mocha":"^3.2.0","mock-require":"^3.0.3","ncp":"^2.0.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","nyc":"^15.1.0","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.2","typescript":"4.2.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^7.7.1"},"engines":{"node":">=0.12"},"license":"BSD-3-Clause","main":"./es5/index.js","types":"./tsdef/index.d.ts","scripts":{"lint:js":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/** ","lint:ts":"eslint ./tsdef/*.ts ./lib/**/*.ts","lint":"npm-run-all lint:js lint:ts","printVersion":"node --version && npm --version","test:unit":"npm-run-all printVersion build:es5 && nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov --reporter=text mocha -r ts-node/register ./test/unit/*","test:unit:quick":"nyc --report-dir=./coverage --include=lib/**/* --reporter=html --reporter=lcov mocha -r ts-node/register","test:serversiderender":"mocha ./test/serversiderender/index.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:integration":"npm run build:es5 && node ./scripts/karma.js karma/integration.conf.js","test:umd:install":"npm install puppeteer@19.2.2","test:umd":"mocha ./test/umd/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework":"npm-run-all test:framework:install test:framework:no-framework test:framework:react","test":"npm-run-all test:unit test:integration","build:es5":"rimraf ./es5 && mkdir -p es5 && tsc tsdef/twilio-video-tests.ts --noEmit --lib es2018,dom && tsc","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build":"npm-run-all clean lint docs test:unit test:integration build:es5 build:js build:min.js test:umd","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","docs":"node ./scripts/docs.js ./dist/docs","watch":"tsc -w","clean":"rimraf ./coverage ./es5 ./dist"},"dependencies":{"events":"^3.3.0","util":"^0.12.4","ws":"^7.4.6","xmlhttprequest":"^1.8.0"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"}}')}},$=>{$($.s=7977)}]);